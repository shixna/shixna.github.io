(()=>{var e,t,i,s=document.getElementById("search-key"),n=(document.getElementById("search-local"),document.getElementById("search-form"),document.getElementById("result-mask")),o=document.getElementById("result-wrap"),c=document.getElementById("search-result"),r=document.getElementById("search-tpl").innerHTML;function a(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function u(e,t){a(e,t)||(e.className+=" "+t)}function d(e,t){a(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," "))}function l(e,t){return t.lastIndex=0,t.test(e)}function m(){d(o,"hide"),d(n,"hide")}function h(){u(o,"hide"),u(n,"hide")}function p(e){var t="";e.length?t=e.map(function(e){return t=r,n={title:f(e.title,"title"),path:e.path,content:f(e.text,"content")},t.replace(/\{\w+\}/g,function(e){e=e.replace(/\{|\}/g,"");return n[e]||""});var t,n}).join(""):""==s.value?h():t='<div class="tips"><p>没有找到相关结果!</p></div>',c.innerHTML=t}function f(e,t){var n=s.value,o=e.indexOf(n),e=e.replace(n,"<b>"+n+"</b>");return"title"==t?e:"content"==t&&0<o?e.substr(o-15,45):void 0}function g(e){var n,t,o=this.value.trim();o?(n=new RegExp(o.replace(/[ ]/g,"|"),"gmi"),t=function(e){p(e.filter(function(e){return t=n,l((e=e).title,t)||l(e.text,t);var t}))},i?t(i):((o=new XMLHttpRequest).open("GET",document.getElementsByTagName("meta").root.content+"content.json",!0),o.onload=function(){var e;200<=this.status&&this.status<300?(e=JSON.parse(this.response||this.responseText),i=e instanceof Array?e:e.posts,t(i)):console.error(this.statusText)},o.onerror=function(){console.error(this.statusText)},o.send()),e.preventDefault(),m(),s.onfocus=function(){m()}):p("")}window.innerWidth?e=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(e=parseInt(document.body.clientWidth)),window.innerHeight?t=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(t=parseInt(document.body.clientHeight)),n.style.width=e+"px",n.style.height=t+"px",s.onfocus=function(){s.addEventListener("input",g)},n.onclick=function(){h()}})();
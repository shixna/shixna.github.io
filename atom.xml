<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>H多看源码多读书 - 勤于思考善领悟</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-12-11T03:47:26.903Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>ZHB</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【置顶】超级有用的html/css/js/vue等技巧 持续更新中</title>
    <link href="http://example.com/posts/8e2e021e.html"/>
    <id>http://example.com/posts/8e2e021e.html</id>
    <published>2030-08-22T03:22:13.000Z</published>
    <updated>2025-12-11T03:47:26.903Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、HTML"><a href="#一、HTML" class="headerlink" title="一、HTML"></a><strong>一、HTML</strong></h2><p>暂无</p><br><h2 id="二、CSS"><a href="#二、CSS" class="headerlink" title="二、CSS"></a><strong>二、CSS</strong></h2><h3 id="1、清除浮动"><a href="#1、清除浮动" class="headerlink" title="1、清除浮动"></a><strong><font color='red'>1、清除浮动</font></strong></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 清除浮动（双伪元素）</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line">// ie6 <span class="number">7</span> 专门清除浮动的样式</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *<span class="attribute">zoom</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>清除浮动的原理</strong></p><p><code>clear:both</code>清除浮动的关键</p><p><code>clear</code>是CSS中的定位属性，规定元素的哪一侧不允许其他浮动元素。那么<code>clear:both</code>就是规定在左右两侧均不允许浮动元素。</p><p><code>clear</code>属性只能在块级元素上其作用，这就是清除浮动样式中<code>display:table</code>的作用。</p><br><h2 id="三、JavaScript"><a href="#三、JavaScript" class="headerlink" title="三、JavaScript"></a><strong>三、JavaScript</strong></h2><h3 id="1、基于URLSearchParams或URL获取queryString的值"><a href="#1、基于URLSearchParams或URL获取queryString的值" class="headerlink" title="1、基于URLSearchParams或URL获取queryString的值"></a><strong><font color='red'>1、基于URLSearchParams或URL获取queryString的值</font></strong></h3><p>测试链接：</p><p><a href="https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&orderDate=2052">https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&amp;orderDate=2052</a></p><p><strong>URLSearchParams</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// location.search 取到的是&quot;?orderNo=50620520605&amp;orderDate=2052&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlSP = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> urlSP.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><p><strong>URL</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> urlObj = <span class="keyword">new</span> <span class="title function_">URL</span>(location.<span class="property">href</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> urlObj.<span class="property">searchParams</span>.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><br><h3 id="2、基于atob和btoa的base64编码和解码"><a href="#2、基于atob和btoa的base64编码和解码" class="headerlink" title="2、基于atob和btoa的base64编码和解码"></a><strong><font color='red'>2、基于atob和btoa的base64编码和解码</font></strong></h3><p>浏览器内置了base64编码和解码的能力</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># <span class="built_in">encodeURIComponent</span>() 函数可把字符串作为 <span class="variable constant_">URI</span> 组件进行编码</span><br><span class="line"># <span class="built_in">unescape</span>() 函数可对通过 <span class="built_in">escape</span>() 编码的字符串进行解码</span><br><span class="line"># <span class="title function_">btoa</span>() 方法用于创建一个 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"># <span class="title function_">atob</span>() 方法用于解码使用 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">utf8_to_b64</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="title function_">btoa</span>(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b64_to_utf8</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(<span class="built_in">escape</span>(<span class="variable language_">window</span>.<span class="title function_">atob</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">utf8_to_b64</span>(<span class="string">&#x27;✓ à la mode&#x27;</span>); <span class="comment">// &quot;4pyTIMOgIGxhIG1vZGU=&quot;</span></span><br><span class="line"><span class="title function_">b64_to_utf8</span>(<span class="string">&#x27;4pyTIMOgIGxhIG1vZGU=&#x27;</span>); <span class="comment">// &quot;✓ à la mode&quot;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、相对地址转换为绝对地址"><a href="#3、相对地址转换为绝对地址" class="headerlink" title="3、相对地址转换为绝对地址"></a><strong><font color='red'>3、相对地址转换为绝对地址</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">realativeToAbs</span>(<span class="params">href</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> aEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    aEl.<span class="property">href</span> = href;</span><br><span class="line">    <span class="keyword">const</span> result = aEl.<span class="property">href</span>;</span><br><span class="line">    aEl = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">realativeToAbs</span>(<span class="string">&quot;../a/b/b/index.html&quot;</span>) <span class="comment">// http://127.0.0.1:5500/a/b/b/index.html</span></span><br></pre></td></tr></table></figure><br><h3 id="4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制"><a href="#4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制" class="headerlink" title="4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制"></a><strong><font color='red'>4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;dragstart&#x27;</span>,<span class="string">&#x27;contextmenu&#x27;</span>, <span class="string">&#x27;selectstart&#x27;</span>, <span class="string">&#x27;copy&#x27;</span>].<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(ev, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">        ev.<span class="title function_">preventDefault</span>();</span><br><span class="line">        ev.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br><h3 id="5、es6的解构赋值"><a href="#5、es6的解构赋值" class="headerlink" title="5、es6的解构赋值"></a><strong><font color='red'>5、es6的解构赋值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">c</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">d</span>:<span class="number">4</span>,</span><br><span class="line">    <span class="attr">e</span>:<span class="number">5</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = obj.<span class="property">a</span>;</span><br><span class="line"><span class="keyword">const</span> b = obj.<span class="property">b</span>;</span><br><span class="line"><span class="keyword">const</span> c = obj.<span class="property">c</span>;</span><br><span class="line"><span class="keyword">const</span> d = obj.<span class="property">d</span>;</span><br><span class="line"><span class="keyword">const</span> e = obj.<span class="property">e</span>;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> &#123;a,b,c,d,e&#125; = obj;</span><br><span class="line"></span><br><span class="line">#其他：</span><br><span class="line"><span class="comment">// 属性名和变量名不一样时</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: f, <span class="attr">b</span>: l &#125; = obj;</span><br><span class="line">f <span class="comment">// 1</span></span><br><span class="line">l <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定默认值</span></span><br><span class="line"><span class="keyword">let</span> &#123; x = <span class="number">11</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">66</span>] = [];</span><br><span class="line">x <span class="comment">// 11</span></span><br><span class="line">a <span class="comment">// 66</span></span><br></pre></td></tr></table></figure><p>注意解构的对象不能为<code>undefined</code>、<code>null</code>。否则会报错，故要给被解构的对象一个默认值。</p><p><strong>const {a,b,c,d,e} &#x3D; obj || {};</strong></p><br><h3 id="6、合并数据"><a href="#6、合并数据" class="headerlink" title="6、合并数据"></a><strong><font color='red'>6、合并数据</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = a.<span class="title function_">concat</span>(b);<span class="comment">//[1,2,3,1,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj1, obj2) <span class="comment">//&#123;a: 1, b: 2, c: 66&#125; 属性名相同最后对象覆盖前面对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = [...a, ...b] <span class="comment">//[1,2,3,1,5,6] 不去重</span></span><br><span class="line"><span class="keyword">const</span> c = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...a, ...b])] <span class="comment">//[1,2,3,5,6] 去重</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;...obj1, ...obj2&#125;); <span class="comment">//&#123;a: 1, b: 2, c: 66&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、关于拼接字符串"><a href="#7、关于拼接字符串" class="headerlink" title="7、关于拼接字符串"></a><strong><font color='red'>7、关于拼接字符串</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> score = <span class="number">59</span>;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(score &gt; <span class="number">60</span>)&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩及格`</span>; </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩不及格`</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> result = <span class="string">`<span class="subst">$&#123;name&#125;</span><span class="subst">$&#123;score &gt; <span class="number">60</span>?<span class="string">&#x27;的考试成绩及格&#x27;</span>:<span class="string">&#x27;的考试成绩不及格&#x27;</span>&#125;</span>`</span>; <span class="comment">// 小明的考试成绩不及格</span></span><br></pre></td></tr></table></figure><br><h3 id="8、扁平化数组"><a href="#8、扁平化数组" class="headerlink" title="8、扁平化数组"></a><strong><font color='red'>8、扁平化数组</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deps = &#123;</span><br><span class="line">    <span class="string">&#x27;采购部&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">    <span class="string">&#x27;人事部&#x27;</span>:[<span class="number">5</span>,<span class="number">8</span>,<span class="number">12</span>],</span><br><span class="line">    <span class="string">&#x27;行政部&#x27;</span>:[<span class="number">5</span>,<span class="number">14</span>,<span class="number">79</span>],</span><br><span class="line">    <span class="string">&#x27;运输部&#x27;</span>:[<span class="number">3</span>,<span class="number">64</span>,<span class="number">105</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> member = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> deps)&#123;</span><br><span class="line">    <span class="keyword">const</span> value = deps[item];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value))&#123;</span><br><span class="line">        member = [...member,...value]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">member = [...<span class="keyword">new</span> <span class="title class_">Set</span>(member)]  <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">let</span> member = <span class="title class_">Object</span>.<span class="title function_">values</span>(deps).<span class="title function_">flat</span>(<span class="title class_">Infinity</span>); <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br></pre></td></tr></table></figure><br><h3 id="9、添加对象属性"><a href="#9、添加对象属性" class="headerlink" title="9、添加对象属性"></a><strong><font color='red'>9、添加对象属性</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>;</span><br><span class="line">obj[key] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line">obj[<span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br></pre></td></tr></table></figure><br><h3 id="10、非空的判断"><a href="#10、非空的判断" class="headerlink" title="10、非空的判断"></a><strong><font color='red'>10、非空的判断</font></strong></h3><p><strong>空值合并操作符</strong>（<strong><code>??</code></strong>）</p><p>只有当左侧为null和undefined时，才会返回右侧的值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a === <span class="literal">null</span> || a === <span class="literal">undefined</span>) &#123;    </span><br><span class="line"><span class="title function_">doSomething</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也就是如果需要验证一个值是否等于null或者undefined，可以使用null合并操作符来简化上面的代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ?? <span class="title function_">doSomething</span>()</span><br></pre></td></tr></table></figure><p>这样，仅当 a 未定义或为空时，才会执行控制合并运算符之后的代码。空合并运算符 ??是一个逻辑运算符，当左侧操作数为 null 或未定义时返回其右侧操作数，否则返回左侧操作数。</p><p>例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nullValue = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> emptyText = <span class="string">&quot;&quot;</span>; <span class="comment">// 空字符串，是一个假值，Boolean(&quot;&quot;) === false</span></span><br><span class="line"><span class="keyword">const</span> someNumber = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> valA = nullValue ?? <span class="string">&quot;valA 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valB = emptyText ?? <span class="string">&quot;valB 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valC = someNumber ?? <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valA); <span class="comment">// &quot;valA 的默认值&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valB); <span class="comment">// &quot;&quot;（空字符串虽然是假值，但不是 null 或者 undefined）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valC); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><br><h3 id="11、获取对象属性值"><a href="#11、获取对象属性值" class="headerlink" title="11、获取对象属性值"></a><strong><font color='red'>11、获取对象属性值</font></strong></h3><p>可选链操作符 （?.）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> name = obj &amp;&amp; obj.<span class="property">name</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">const</span> name = obj?.<span class="property">name</span>;</span><br></pre></td></tr></table></figure><br><h3 id="12、html编码和解码"><a href="#12、html编码和解码" class="headerlink" title="12、html编码和解码"></a><strong><font color='red'>12、html编码和解码</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span>用浏览器内部转换器实现html编码（转义）</span><br><span class="line"><span class="attr">htmlEncode</span>: <span class="keyword">function</span> (<span class="params">html</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerText或者textContent</span></span><br><span class="line">    (temp.<span class="property">textContent</span> != <span class="literal">undefined</span>) ? (temp.<span class="property">textContent</span> = html) : (temp.<span class="property">innerText</span> = html);</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerHTML，即得到经过HTML编码转换的字符串了</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerHTML</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlEncode</span>(<span class="string">&quot;&lt;div class=&#x27;demo&#x27;&gt;测试&lt;/div&gt;&quot;</span>));</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>用浏览器内部转换器实现html解码（反转义）</span><br><span class="line"><span class="attr">htmlDecode</span>: <span class="keyword">function</span> (<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)</span></span><br><span class="line">    temp.<span class="property">innerHTML</span> = text;</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerText或者textContent，即得到经过HTML解码的字符串了。</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerText</span> || temp.<span class="property">textContent</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlDecode</span>(<span class="string">&quot;&amp;lt;div class=&#x27;demo&#x27;&amp;gt;测试&amp;lt;/div&amp;gt;&quot;</span>));</span><br></pre></td></tr></table></figure><br><h3 id="13、箭头函数"><a href="#13、箭头函数" class="headerlink" title="13、箭头函数"></a><strong><font color='red'>13、箭头函数</font></strong></h3><p>var func &#x3D; () &#x3D;&gt; ({ foo: 1 });  返回的是括号里面的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="title function_">prompt</span>(<span class="string">&quot;What is your age?&quot;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> welcome = (age &lt; <span class="number">18</span>) ? <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&#x27;Hello&#x27;</span>) : <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&quot;Greetings!&quot;</span>);</span><br><span class="line"><span class="title function_">welcome</span>();</span><br></pre></td></tr></table></figure><p><strong><font color='red' size="3">重要特性</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）没有arguments </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1</span>、普通函数中的<span class="variable language_">arguments</span>正确使用：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">n</span>) &#123;   </span><br><span class="line"> <span class="comment">// arguments[0] 表示传给foo函数的第一个参数，也就是n    </span></span><br><span class="line">    <span class="keyword">var</span> <span class="title function_">f</span> = (<span class="params"></span>) =&gt; <span class="variable language_">arguments</span>[<span class="number">0</span>] + n;    </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">1</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>); <span class="comment">// 6</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>, <span class="number">2</span>);<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、箭头函数中无法使用<span class="variable language_">arguments</span></span><br><span class="line"><span class="comment">// ReferenceError: arguments is not defined</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">func</span> = (<span class="params">a, b</span>) =&gt; &#123;<span class="keyword">return</span> <span class="variable language_">arguments</span>[<span class="number">0</span>];&#125;</span><br></pre></td></tr></table></figure><p><strong><font color='cornflowerblue' size="3">2）没有prototype属性 </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><strong><font color='cornflowerblue' size="3">3）不能使用new </font></strong></p><p>箭头函数没有this，不能用作构造函数，也就无法使用 new</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> <span class="title class_">Foo</span>(); <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure><br><h3 id="14、初始化一个数组"><a href="#14、初始化一个数组" class="headerlink" title="14、初始化一个数组"></a><strong><font color='red'>14、初始化一个数组</font></strong></h3><p>如果你想初始化一个指定长度的一维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="string">&#x27;&#x27;</span>); </span><br><span class="line"><span class="comment">// [&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]</span></span><br></pre></td></tr></table></figure><p>如果你想初始化一个指定长度的二维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> matrix = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="title class_">Array</span>(<span class="number">5</span>).<span class="title function_">fill</span>(<span class="number">0</span>)); </span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><br><h3 id="15、数组求和-最大值-最小值"><a href="#15、数组求和-最大值-最小值" class="headerlink" title="15、数组求和&#x2F;最大值&#x2F;最小值"></a><strong><font color='red'>15、数组求和&#x2F;最大值&#x2F;最小值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array  = [<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>];</span><br></pre></td></tr></table></figure><p><font color='orange'>1）求和 </font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b);</span><br></pre></td></tr></table></figure><p><font color='orange'>2）寻找最大值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &gt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">max</span>(...array)</span><br></pre></td></tr></table></figure><p><font color='orange'>2）寻找最小值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &lt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">min</span>(...array)</span><br></pre></td></tr></table></figure><p>请记住：数组的reduce方法可以用来解决很多数组求值问题。</p><br><h3 id="16、滤错误值"><a href="#16、滤错误值" class="headerlink" title="16、滤错误值"></a><strong><font color='red'>16、滤错误值</font></strong></h3><p>如果要过滤数组中的值，例如 false、0、null、undefined 等，可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">0</span>, <span class="literal">undefined</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="string">&#x27;&#x27;</span>, <span class="literal">false</span>];</span><br><span class="line">array.<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line"><span class="comment">// [1, 6, 7]</span></span><br></pre></td></tr></table></figure><br><h3 id="17、空数组"><a href="#17、空数组" class="headerlink" title="17、空数组"></a><strong><font color='red'>17、空数组</font></strong></h3><p>如果要清空数组，可以将数组的长度设置为 0。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>, <span class="string">&quot;F&quot;</span>]</span><br><span class="line">array.<span class="property">length</span> = <span class="number">0</span> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// []</span></span><br></pre></td></tr></table></figure><br><h3 id="18、计算性能"><a href="#18、计算性能" class="headerlink" title="18、计算性能"></a><strong><font color='red'>18、计算性能</font></strong></h3><p>以下操作可用于计算代码的性能。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;    </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> endTime = performance.<span class="title function_">now</span>();</span><br><span class="line"><span class="keyword">const</span> totaltime = endTime - startTime;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(totaltime); <span class="comment">// 10.3333333</span></span><br></pre></td></tr></table></figure><br><h3 id="19、将数组元素转换为数字"><a href="#19、将数组元素转换为数字" class="headerlink" title="19、将数组元素转换为数字"></a><strong><font color='red'>19、将数组元素转换为数字</font></strong></h3><p>如果有一个数组，并且你想将数组的元素转换为数字，你可以使用 map 方法来完成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3.1415&#x27;</span>, <span class="string">&#x27;-10.01&#x27;</span>];</span><br><span class="line">array.<span class="title function_">map</span>(<span class="title class_">Number</span>);  <span class="comment">// [12, 1, 3.1415, -10.01]</span></span><br></pre></td></tr></table></figure><p>这样，map 对数组的每个元素执行 Number 构造函数，并在遍历数组时返回结果。</p><br><h3 id="20、将类数组转换为数组"><a href="#20、将类数组转换为数组" class="headerlink" title="20、将类数组转换为数组"></a><strong><font color='red'>20、将类数组转换为数组</font></strong></h3><p>可以使用以下方法将类数组转换为数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>);</span><br></pre></td></tr></table></figure><p>此外，还可以使用扩展运算符来实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="variable language_">arguments</span>]</span><br></pre></td></tr></table></figure><br><h3 id="21、对象属性的动态声明"><a href="#21、对象属性的动态声明" class="headerlink" title="21、对象属性的动态声明"></a><strong><font color='red'>21、对象属性的动态声明</font></strong></h3><p>如果你想动态地为一个对象声明属性，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dynamic = <span class="string">&#x27;color&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> item = &#123;    </span><br><span class="line"><span class="attr">brand</span>: <span class="string">&#x27;Ford&#x27;</span>,</span><br><span class="line">    [dynamic]: <span class="string">&#x27;Blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// &#123; brand: &quot;Ford&quot;, color: &quot;Blue&quot; &#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="22、缩短console-log"><a href="#22、缩短console-log" class="headerlink" title="22、缩短console.log()"></a><strong><font color='red'>22、缩短console.log()</font></strong></h3><p>每次debug都要写很多console.log()会比较麻烦，可以用下面的形式来简化这段代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = <span class="variable language_">console</span>.<span class="property">log</span>.<span class="title function_">bind</span>(<span class="variable language_">document</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="number">222</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure><p>这将每次只执行 c 方法。</p><br><h3 id="23、删除数组元素"><a href="#23、删除数组元素" class="headerlink" title="23、删除数组元素"></a><strong><font color='red'>23、删除数组元素</font></strong></h3><p>如果我们想删除一个数组的元素，可以使用delete来完成，但是删除后元素会变成undefined，不会消失，而且执行会消耗很多时间，所以大部分情况下不会满足我们的需求。所以我们可以使用数组的 slice() 方法来删除数组的元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="keyword">const</span> arrayRemoveed = array.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// [&quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayRemoveed)  <span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure><br><h3 id="24、检查对象是否为空"><a href="#24、检查对象是否为空" class="headerlink" title="24、检查对象是否为空"></a><strong><font color='red'>24、检查对象是否为空</font></strong></h3><p>如果我们想检查对象是否为空，我们可以使用以下内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;&#125;).<span class="property">length</span>  <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;<span class="attr">key</span>: <span class="number">1</span>&#125;).<span class="property">length</span>  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>Object.keys() 方法用于获取对象的键，它将返回一个包含这些键值的数组。如果返回数组的长度为 0，则该对象必须为空。</p><br><h3 id="25、获取数组中的最后一项"><a href="#25、获取数组中的最后一项" class="headerlink" title="25、获取数组中的最后一项"></a><strong><font color='red'>25、获取数组中的最后一项</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure><p>1、如果要获取数组中的最后一项，通常会这样编写代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr.<span class="property">length</span> - <span class="number">1</span>]  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>2、我们也可以使用数组的 slice 方法来获取最后一个元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">slice</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>当我们将 slice 方法的参数设置为负值时，它会从数组后面开始截取数组值，如果要截取最后两个值，则传入参数-2。</p><p>3、使用“at方法”读取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">at</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br><span class="line">array.<span class="title function_">at</span>(<span class="number">0</span>) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><br><h3 id="26、数组元素的随机排序"><a href="#26、数组元素的随机排序" class="headerlink" title="26、数组元素的随机排序"></a><strong><font color='red'>26、数组元素的随机排序</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">99</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="keyword">const</span> newArr = arr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> (&#123; <span class="attr">v</span>: val, <span class="attr">r</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() &#125;));</span><br><span class="line">newArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">r</span> - b.<span class="property">r</span>);</span><br><span class="line"><span class="keyword">const</span> showList = newArr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="property">v</span>).<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>); <span class="comment">// 截取长度未6的随机数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(showList)</span><br></pre></td></tr></table></figure><br><h2 id="四、Vue"><a href="#四、Vue" class="headerlink" title="四、Vue"></a><strong>四、Vue</strong></h2><h3 id="1、computed中使用this？"><a href="#1、computed中使用this？" class="headerlink" title="1、computed中使用this？"></a><strong><font color='red'>1、computed中使用this？</font></strong></h3><p>我们通过this能访问到的数据，在computed的第一个参数上都能结构出来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;黄山&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">haha</span>(<span class="params">&#123; address, $attrs, $route, $store, $listeners, $ref &#125;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(address) <span class="comment">// 黄山</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">111</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="2、避免v-if和v-for一起使用"><a href="#2、避免v-if和v-for一起使用" class="headerlink" title="2、避免v-if和v-for一起使用"></a><strong><font color='red'>2、避免v-if和v-for一起使用</font></strong></h3><p>在vue的源码中有一段代码是对指令的优先级的处理</p><p><strong>不好的</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"># 这段代码是先处理v-<span class="keyword">for</span>再处理v-<span class="keyword">if</span>的</span><br><span class="line"><span class="comment">// 比如这个列表有一百条数据，再某种情况下，它们都不需要显示，当vue还是会循环这个100条数据显示，再去判断v-if，因此，我们应该避免这种情况的出现。</span></span><br><span class="line"></span><br><span class="line">&lt;h3 v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in 100&quot;</span> :key=<span class="string">&quot;item&quot;</span>&gt;&#123;&#123;item&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">#优化</span><br><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> &gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 100&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><br><h3 id="3、修饰符sync"><a href="#3、修饰符sync" class="headerlink" title="3、修饰符sync"></a><strong><font color='red'>3、修饰符sync</font></strong></h3><p>vue 修饰符sync的功能是：当一个子组件改变了一个 prop 的值时，这个变化也会同步到父组件中所绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show.sync</span> = <span class="string">&#x27;isShow&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;script&gt;  </span><br><span class="line"> </span><br><span class="line"># 等同于上面的写法</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show</span> = <span class="string">&#x27;isShow&#x27;</span> @<span class="attr">update:show</span>=<span class="string">&quot;change&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">            <span class="attr">isShow</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Boolean</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">        <span class="attr">method</span>: &#123;</span><br><span class="line">            <span class="title function_">change</span>(<span class="params">val</span>) &#123; <span class="comment">// 子组件传来的false</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">isShow</span> = val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    展示和隐藏组件</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>隐藏组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>:[<span class="string">&#x27;show&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:show&#x27;</span>,<span class="literal">false</span>) <span class="comment">//触发 input 事件，并传入新值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br><h2 id="五、IOS和安卓踩坑"><a href="#五、IOS和安卓踩坑" class="headerlink" title="五、IOS和安卓踩坑"></a><strong>五、IOS和安卓踩坑</strong></h2><h3 id="1、IOS滑动不流畅"><a href="#1、IOS滑动不流畅" class="headerlink" title="1、IOS滑动不流畅"></a><strong><font color='red'>1、IOS滑动不流畅</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>上下滑动页面会产生卡顿，手指离开页面，页面立即停止运动。整体表现就是滑动不流畅，没有滑动惯性。</p><br><p><strong><font color='#10c300'>为什么 iOS 的 webview 中 滑动不流畅，它是如何定义的？</font></strong></p><p>原来在 iOS 5.0 以及之后的版本，滑动 -webkit-overflow-scrolling 有定义有两个值 <code>auto</code> 和 <code>touch</code>，默认值为 <code>auto</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: touch; <span class="comment">/* 当手指从触摸屏上移开，会保持一段时间的滚动 */</span></span><br><span class="line"></span><br><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: auto; <span class="comment">/* 当手指从触摸屏上移开，滚动会立即停止 */</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>解决方案</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）在 滚动容器上 增加滚动 touch 方法 </font></strong></p><p>将<code>-webkit-overflow-scrolling</code> 值设置为 <code>touch</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>设置滚动条隐藏： <code>.container ::-webkit-scrollbar &#123;display: none;&#125;</code></p></blockquote><p>可能会导致使用<code>position:fixed;</code> 固定定位的元素，随着页面一起滚动</p><p><strong><font color='cornflowerblue' size="3">2）设置 overflow</font></strong></p><p>设置外部 <code>overflow</code> 为 <code>hidden</code>,设置内容元素 <code>overflow</code> 为 <code>auto</code>。内部元素超出 body 即产生滚动，超出的部分 body 隐藏。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>两者结合使用更佳！</p><br><h3 id="2、click-点击事件延时与穿透"><a href="#2、click-点击事件延时与穿透" class="headerlink" title="2、click 点击事件延时与穿透"></a><strong><font color='red'>2、click 点击事件延时与穿透</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>监听元素 <code>click</code> 事件，点击元素触发时间延迟约 <code>300ms</code>。点击蒙层，蒙层消失后，下层元素点击触发。</p><br><p><strong><font color='#10c300'>为什么会产生 click 延时？</font></strong></p><p>iOS 中的 safari，为了实现双击缩放操作，在单击 300ms 之后，如果未进行第二次点击，则执行 <code>click</code> 单击操作。也就是说来判断用户行为是否为双击产生的。但是，在 App 中，无论是否需要双击缩放这种行为，<code>click</code> 单击都会产生 300ms 延迟。</p><br><p><strong><font color='#10c300'>为什么会产生 click 点击穿透？</font></strong></p><p>双层元素叠加时，在上层元素上绑定 <code>touch</code> 事件，下层元素绑定 <code>click</code> 事件。由于 <code>click</code> 发生在 <code>touch</code> 之后，点击上层元素，元素消失，下层元素会触发 <code>click</code> 事件，由此产生了点击穿透的效果</p><br><p><strong><font color='#10c300'>原理与解决方案</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）使用 touchstart 替换 click</font></strong></p><p>移动设备不仅支持点击还支持触摸事件。那么我们现在基本思路就是用 <code>touch</code> 事件代替<code>click</code> 事件。</p><p>将 <code>click</code> 替换成 <code>touchstart</code> 不仅解决了 <code>click</code> 事件延时问题，还解决了穿透问题。因为穿透问题是在 <code>touch</code> 和 <code>click</code> 混用时产生。</p><p>在原生中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.addEventListener(&quot;touchstart&quot;, () =&gt; &#123; console.log(&quot;ok&quot;); &#125;, false);</span><br></pre></td></tr></table></figure><p>在 vue 中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @touchstart=&quot;handleTouchstart()&quot;&gt;点击&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>开源解决方案中，也是既提供了 <code>click</code> 事件，又提供了<code>touchstart</code> 事件。如 vant 中的 <code>button</code> 组件</p><p><strong><font color='cornflowerblue' size="3">2）使用 fastclick 库</font></strong></p><p>使用 <code>npm/yarn</code> 安装后使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import FastClick from &#x27;fastclick&#x27;;</span><br><span class="line"></span><br><span class="line">FastClick.attach(document.body, options);</span><br></pre></td></tr></table></figure><p>同样，使用<code>fastclick</code>库后，<code>click</code> 延时和穿透问题都没了</p><br><h3 id="3、软键盘将页面顶起来、收起未回落问题"><a href="#3、软键盘将页面顶起来、收起未回落问题" class="headerlink" title="3、软键盘将页面顶起来、收起未回落问题"></a><strong><font color='red'>3、软键盘将页面顶起来、收起未回落问题</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>Android 手机中，点击 <code>input</code> 框时，键盘弹出，将页面顶起来，导致页面样式错乱。</p><p>移开焦点时，键盘收起，键盘区域空白，未回落。</p><br><p><strong><font color='#10c300'>产生原因</font></strong></p><p>我们在app 布局中会有个固定的底部。安卓一些版本中，输入弹窗出来，会将解压 <code>absolute</code> 和 <code>fixed</code> 定位的元素。导致可视区域变小，布局错乱。</p><br><p><strong><font color='#10c300'>原理与解决方案</font></strong></p><p>软键盘将页面顶起来的解决方案，主要是通过监听页面高度变化，强制恢复成弹出前的高度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记录原有的视口高度</span></span><br><span class="line"><span class="keyword">const</span> originalHeight = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> resizeHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line">  <span class="keyword">if</span>(resizeHeight &lt; originalHeight )&#123;</span><br><span class="line">    <span class="comment">// 恢复内容区域高度</span></span><br><span class="line">    <span class="comment">// const container = document.getElementById(&quot;container&quot;)</span></span><br><span class="line">    <span class="comment">// 例如 container.style.height = originalHeight;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>键盘不能回落问题出现在 iOS 12+ 和 wechat 6.7.4+ 中，而在微信 H5 开发中是比较常见的 Bug。</p><p>兼容原理，1.判断版本类型 2.更改滚动的可视区域</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isWechat = <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/MicroMessenger\/([\d\.]+)/i</span>);</span><br><span class="line"><span class="keyword">if</span> (!isWechat) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">const</span> wechatVersion = wechatInfo[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> version = (navigator.<span class="property">appVersion</span>).<span class="title function_">match</span>(<span class="regexp">/OS (\d+)_(\d+)_?(\d+)?/</span>);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 如果设备类型为iOS 12+ 和wechat 6.7.4+，恢复成原来的视口</span></span><br><span class="line"><span class="keyword">if</span> (+wechatVersion.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&#x27;&#x27;</span>) &gt;= <span class="number">674</span> &amp;&amp; +version[<span class="number">1</span>] &gt;= <span class="number">12</span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>window.scrollTo(x-coord, y-coord)</code>，其中<code>window.scrollTo(0, clientHeight)</code>恢复成原来的视口</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、HTML&quot;&gt;&lt;a href=&quot;#一、HTML&quot; class=&quot;headerlink&quot; title=&quot;一、HTML&quot;&gt;&lt;/a&gt;&lt;strong&gt;一、HTML&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;暂无&lt;/p&gt;
&lt;br&gt;

&lt;h2 id=&quot;二、CSS&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="其他" scheme="http://example.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
    <category term="html" scheme="http://example.com/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>React18</title>
    <link href="http://example.com/posts/4179c0b9.html"/>
    <id>http://example.com/posts/4179c0b9.html</id>
    <published>2025-12-02T02:28:38.000Z</published>
    <updated>2025-12-11T03:47:26.904Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、认识react"><a href="#一、认识react" class="headerlink" title="一、认识react"></a><strong><font color='red'>一、认识react</font></strong></h2><p>React 是⼀个声明式，⾼效且灵活的⽤于构建⽤户界⾯的 JavaScript 库</p><blockquote><p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写⼀套，用来架设 Instagram 的网站。做出来以后，发现这套东西很好用，就在 2013 年 5 月开源了。</p></blockquote><p>2022年发布的18版本</p><h3 id="1-1、基本结构"><a href="#1-1、基本结构" class="headerlink" title="1.1、基本结构"></a><strong><font color='#10c300'>1.1、基本结构</font></strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--react核⼼包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--react dom相关的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 提供es6和jsx的⽀持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/@babel/standalone/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--提供⼀个挂载点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- type=&quot;text/babel&quot; 使其能够编译jsx --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//1.获取到这个挂载点元素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2.创建⼀个根节点,接收我们的挂载点元素对象当参数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//3.调⽤渲染⽅法渲染⻚⾯,render⾥⾯放的是⻚⾯内容(内容指的是html标签或者组件)</span></span></span><br><span class="line"><span class="language-javascript">        root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是react<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>) <span class="comment">//jsx，html标签不需要加引号</span></span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//也可以简写为</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ReactDOM.createRoot(document.getElementById(&quot;app&quot;)).render(&lt;h1&gt;哈哈哈哈&lt;/h1&gt;)</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="1-2、关于jsx"><a href="#1-2、关于jsx" class="headerlink" title="1.2、关于jsx"></a><strong><font color='#10c300'>1.2、关于jsx</font></strong></h3><blockquote><p>所谓的jsx其实就是允许在js中正常编写html而无需加引号</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line"><span class="comment">//JSX 允许你将 UI 结构写得和 HTML 很相似，但实际上它会被编译成 JavaScript 对象和函数调⽤</span></span><br><span class="line"><span class="comment">//这段 JSX 会被编译成下⾯的 JavaScript：</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;Hello, world!&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这种看起来可能有些奇怪的标签语法既不是字符串也不是 HTML。<br>它被称为 JSX， ⼀种 JavaScript 的语法扩展。 我们推荐在 React 中使⽤ JSX 来描述用户界面。</p><p><code>jsx中想写变量，使⽤&#123;&#125;就可以插⼊变量</code></p><blockquote><p>{ }相当于提供了js的执行环境，大括号里可以任意的js表达式（由运算符连接的），不能写语句（声明语句，if 、for）</p></blockquote><h4 id="1）注意事项"><a href="#1）注意事项" class="headerlink" title="1）注意事项 "></a><strong><font color='cornflowerblue'>1）注意事项 </font></strong></h4><ol><li><p><strong>怎么在jsx中的html中写注释</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &#123;<span class="comment">/*大苏打*/</span>&#125;</span><br><span class="line">        &lt;<span class="title class_">Welcome</span>/&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>在多行 JSX 代码中是推荐圆括号 <code>()</code> 来包裹 JSX 代码：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>最外层只能有⼀个根元素：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中，class要改为className</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中style必须写成对象的形式</strong>（双大括号）<br>外面的那个大括号是提供一个js环境，里面的大括号是接受一个样式对象</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> txt = <span class="string">&quot;哈哈哈我是你哥&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;title&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &quot;<span class="attr">red</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cssStyle = &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="string">&quot;50px&quot;</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="string">&quot;50px&quot;</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;cssStyle&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> color = <span class="string">&quot;green&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> &quot;<span class="attr">200px</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>样式中有多个单词组成的样式不能用 横线连接，改为驼峰式</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">className</span>=<span class="string">&#123;a&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> &quot;<span class="attr">200px</span>&quot;, <span class="attr">marginLeft:</span> &quot;<span class="attr">50px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;url&#125;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>样式中是数字的，单位可以省略</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> <span class="attr">200</span>, <span class="attr">marginLeft:</span> <span class="attr">50</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;url&#125;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中标签数组会自动展开</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>222<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>];</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;arr&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><br><h2 id="二、组件"><a href="#二、组件" class="headerlink" title="二、组件"></a><strong><font color='red'>二、组件</font></strong></h2><p>其实就是⼀段封装了html css js的代码，最终表现为⼀个自定义标签</p><p>组件都有自己独立的作用域：</p><blockquote><p>react中的组件分为两大类：</p><p>⼀类是函数式组件（推荐）</p><p>⼀类是类组件 （过时）</p></blockquote><br><h3 id="2-1、类组件"><a href="#2-1、类组件" class="headerlink" title="2.1、类组件"></a><strong><font color='#10c300'>2.1、类组件</font></strong></h3><p>要将 React 组件定义为类，请继承内置的 Component 类并定义 render 方法：</p><p><strong>基本结构</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>自定义类组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// return后面不写html标签直接换行 则需要用括号包裹</span></span><br><span class="line">        <span class="comment">// return (</span></span><br><span class="line">        <span class="comment">//     &lt;div&gt;自定义类组件&lt;/div&gt;</span></span><br><span class="line">        <span class="comment">// )</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用组件</span></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="1）关于Fragment"><a href="#1）关于Fragment" class="headerlink" title="1）关于Fragment "></a><strong><font color='cornflowerblue'>1）关于Fragment </font></strong></h4><p>这个空标签被称作 Fragment。React Fragment 允许你将子元素分组，而不会在 HTML 结构中添加额外节点。</p><p>类似vue中的<code>&lt;templete&gt;&lt;/templete&gt;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>222<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h4 id="2）props"><a href="#2）props" class="headerlink" title="2）props"></a><strong><font color='cornflowerblue'>2）props</font></strong></h4><p>组件的属性类似于函数的参数，可以让组件接收外面的数据，展现出不同的结果。</p><blockquote><p>props是类组件⾃带的属性，代表所有属性的集合</p></blockquote><p>**注意：**属性不能更改，因为属性是从外部传⼊的并不是组件自己的数据，所有没权利更改。如果想更改只能去修改数据源，让他重新传⼀个新属性。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; name &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello，&#123;name&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;张三&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;李四&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;王五&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;赵六&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h5 id="a、props-children"><a href="#a、props-children" class="headerlink" title="a、props.children "></a><strong><font color='orange'>a、props.children </font></strong></h5><p>类似vue中的插槽</p><blockquote><p>如果在组件标签内写内容，通过props.children读取<br>如果传⼊单个内容，返回的就是⼀个对象，如果传⼊多个内容的话，返回的就是数组</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>二级主题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想把组件标签内的多个内容渲染到不同位置,通过数组索引访问即可</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>);</span><br><span class="line">        <span class="keyword">let</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children[1]&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children[0]&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>二级主题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h4 id="3）state"><a href="#3）state" class="headerlink" title="3）state "></a><strong><font color='cornflowerblue'>3）state </font></strong></h4><ul><li>state是属于组件内部私有的，外部无法访问</li><li>state 用于存储组件的动态数据，当组件的 state 更新时，就会执行render函数，组件会重新渲染以更新页面</li></ul><p>使用state必须先定义初始值：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义初始状态的两种⽅式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.在构造器⾥定义</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.在类中直接定义</span></span><br><span class="line">state = &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="a、何时使用状态？"><a href="#a、何时使用状态？" class="headerlink" title="a、何时使用状态？"></a><strong><font color='orange'>a、何时使用状态？</font></strong></h5><ul><li>组件中什么东西将来会变化，就把什么东西定义成状态</li><li>只要修改了状态，组件就会重新渲染</li></ul><h5 id="b、state-的使用"><a href="#b、state-的使用" class="headerlink" title="b、state 的使用"></a><strong><font color='orange'>b、state 的使用</font></strong></h5><p><strong>1、不能直接修改state，必须采取setState方法去更改</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 方式一：</span></span><br><span class="line">    <span class="comment">// this.setState(&#123;</span></span><br><span class="line">    <span class="comment">//    num: this.state.num += 1</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方式二：推荐 需要return出去，这里用了()即return了</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">num</span>: prevState.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>点击增加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><p><strong>2、数组和对象的更改</strong></p><p>对于数组和对象，必须整体替换，即</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">数组名: 新数组</span><br><span class="line">对象: 新对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">score</span>: [<span class="string">&quot;语文90&quot;</span>, <span class="string">&quot;数学99&quot;</span>],</span><br><span class="line">        <span class="attr">information</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;JACK&quot;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> += <span class="number">1</span>,</span><br><span class="line">            <span class="attr">score</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">score</span>, <span class="string">&#x27;英语59&#x27;</span>],</span><br><span class="line">            <span class="attr">information</span>: &#123;...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">information</span>, <span class="attr">links</span>: <span class="string">&#x27;唱歌&#x27;</span>&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num, score, information &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>成绩：&#123;score&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>信息：&#123;JSON.stringify(information)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><p><strong>3、state的更新可能是异步的（出于性能考虑）</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>); <span class="comment">// 第一次点击修改时为：1 因此证明更新是异步的</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>如果想同步获取数据，那么可以使用setState的第⼆个参数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">        &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><p><strong>4、state的更新可能会被合并</strong></p><p>连续多次修改state，出于性能考虑，会只执行⼀次。</p><p>因为state中的值发生变化render函数就会执行一次，即页面渲染一次。如果这里遍历十次页面渲染十次就会影响性能。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">10</span>; index++) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>); <span class="comment">// 打印10个1</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  // 页面展示的确是2</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>如果不想合并多次更改state的操作，可以通过给setState传入函数的形式，返回新的状态</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> &#123; <span class="comment">// 代表的是上⼀次更新的状态</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(prev.<span class="property">num</span>); <span class="comment">// 1,2,3,4,5,6,7,8,9,10</span></span><br><span class="line">                <span class="keyword">return</span> &#123;  <span class="comment">// 返回值就是你想把什么状态改成什么</span></span><br><span class="line">                    <span class="attr">num</span>: prev.<span class="property">num</span> + <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="4）类组件完整结构"><a href="#4）类组件完整结构" class="headerlink" title="4）类组件完整结构"></a><strong><font color='cornflowerblue'>4）类组件完整结构</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Qq</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="comment">// 定义数据</span></span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">nickname</span>: <span class="string">&#x27;爷傲奈我何&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// js逻辑</span></span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">nickname</span>: <span class="string">&#x27;更换数据了&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// html</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;nickname&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nickname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="2-2、函数组件"><a href="#2-2、函数组件" class="headerlink" title="2.2、函数组件"></a><strong><font color='#10c300'>2.2、函数组件</font></strong></h3><h4 id="1）基本概念"><a href="#1）基本概念" class="headerlink" title="1）基本概念"></a><strong><font color='cornflowerblue'>1）基本概念</font></strong></h4><p>react中的函数组件通常只考虑负责UI的渲染，没有自身的状态没有业务逻辑代码，<code>是⼀个纯函数</code></p><p>react中的函数组件基本等同于函数，但是函数组件有<strong>两个必须</strong>的特性：</p><blockquote><p>1.组件名必须大写</p><p>2.返回jsx</p></blockquote><p>它接收唯⼀带有数据的 “props”（代表属性）对象与并返回⼀个 React 元素。</p><p><code>props是所有属性的集合。属性类似于函数中的参数，是一个对象</code></p><p><code>属性不允许更改，如果要改，必须由父组件重新传一个新的props</code></p><p>这类组件被称为“函数组件”，因为它本质上就是 JavaScript 函数。</p><br><h4 id="2）函数的嵌套"><a href="#2）函数的嵌套" class="headerlink" title="2）函数的嵌套"></a><strong><font color='cornflowerblue'>2）函数的嵌套</font></strong></h4><p>组件可以渲染其他组件，但是 <strong>请不要嵌套他们的定义</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 🔴 永远不要在组件中定义组件</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面这段代码 <a href="https://react.docschina.org/learn/preserving-and-resetting-state#different-components-at-the-same-position-reset-state">非常慢，并且会导致 bug 产生</a>。因此，你应该在顶层定义每个组件：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ✅ 在顶层声明组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是TOM<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="3）什么是纯函数"><a href="#3）什么是纯函数" class="headerlink" title="3）什么是纯函数"></a><strong><font color='cornflowerblue'>3）什么是纯函数</font></strong></h4><blockquote><p>一个函数的返回结果只依赖于它的参数(形参)，并且在执行过程里面没有副作用，我们就把这个函数叫做纯函数。</p></blockquote><p><a href="">副作用（side effect） 是指函数或表达式在执行过程中对外部环境产生的影响，而不仅仅是返回一个值。 副作用可能包括但不限于对全局变量、参数、数据结构、文件系统、网络请求等进行修改</a></p><p>以下都不是纯函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a=<span class="number">5</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(<span class="number">8</span>) <span class="comment">//因为返回值依赖了外部的a，不仅仅是依赖参数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">obj, a</span>)&#123;</span><br><span class="line">  obj.<span class="property">age</span>=<span class="number">18</span></span><br><span class="line">  <span class="keyword">return</span> obj.<span class="property">age</span>+a <span class="comment">//修改了参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下都是纯函数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a+<span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span>=(<span class="params">b</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">let</span> obj=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;</span><br><span class="line">    obj.<span class="property">x</span>=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="property">x</span>+b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="三、事件处理"><a href="#三、事件处理" class="headerlink" title="三、事件处理"></a><strong><font color='red'>三、事件处理</font></strong></h2><h3 id="3-1、基本语法"><a href="#3-1、基本语法" class="headerlink" title="3.1、基本语法"></a><strong><font color='#10c300'>3.1、基本语法</font></strong></h3><ul><li>React 事件绑定属性的命名采用驼峰式写法，而不是小写</li><li>等号后面跟的不是字符串，而是函数名</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="3-2、关于this指向问题"><a href="#3-2、关于this指向问题" class="headerlink" title="3.2、关于this指向问题"></a><strong><font color='#10c300'>3.2、关于this指向问题</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// undefined</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p><strong><code>这里的this是undefined</code></strong><br>react中的onClick是⼀个自定义的事件名，中间经历过⼀次赋值（onClick&#x3D;{this.fn}），就是把等号后面的函数名赋给了前面的onClick，所以导致this丢失。</p><p>以下代码可以演示为什么经历过⼀次赋值，this会丢失：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正常调用能取到this</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">display</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将函数当做一个实参传给fn函数的形参，这里相当于一次赋值，丢失this</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="title function_">cb</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(obj.<span class="property">display</span>)</span><br></pre></td></tr></table></figure><br><h3 id="3-3、如何解决this丢失的问题？"><a href="#3-3、如何解决this丢失的问题？" class="headerlink" title="3.3、如何解决this丢失的问题？"></a><strong><font color='#10c300'>3.3、如何解决this丢失的问题？</font></strong></h3><h4 id="1）在构造器中绑定this"><a href="#1）在构造器中绑定this" class="headerlink" title="1）在构造器中绑定this"></a><strong><font color='cornflowerblue'>1）在构造器中绑定this</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fn</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>) <span class="comment">// 在构造器⾥完成this绑定</span></span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）调用的时候绑定"><a href="#2）调用的时候绑定" class="headerlink" title="2）调用的时候绑定 "></a><strong><font color='cornflowerblue'>2）调用的时候绑定 </font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)&#125; &gt;按钮&lt;/button&gt;</span><br></pre></td></tr></table></figure><br><h4 id="3）使用箭头函数-最推荐"><a href="#3）使用箭头函数-最推荐" class="headerlink" title="3）使用箭头函数(最推荐) "></a><strong><font color='cornflowerblue'>3）使用箭头函数(最推荐) </font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123; <span class="comment">// 使⽤箭头函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="3-4、函数参数的传递"><a href="#3-4、函数参数的传递" class="headerlink" title="3.4、函数参数的传递"></a><strong><font color='#10c300'>3.4、函数参数的传递</font></strong></h3><blockquote><p>注意⼀定不能直接写 函数名+（） 这种是函数调用语句<br>react中的事件后面跟的是函数名或者函数体(匿名函数)</p></blockquote><h4 id="1）传入匿名函数的形式"><a href="#1）传入匿名函数的形式" class="headerlink" title="1）传入匿名函数的形式"></a><strong><font color='cornflowerblue'>1）传入匿名函数的形式</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(val); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;this.fn(66)&#125;&#125;&gt;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）bind的方式"><a href="#2）bind的方式" class="headerlink" title="2）bind的方式"></a><strong><font color='cornflowerblue'>2）bind的方式</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>,<span class="number">5</span>)&#125; &gt;按钮&lt;/button&gt;</span><br></pre></td></tr></table></figure><br><h4 id="3）案例"><a href="#3）案例" class="headerlink" title="3）案例"></a><strong><font color='cornflowerblue'>3）案例</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">bgColor</span>: <span class="string">&quot;rgb(255,255,255)&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="keyword">const</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="keyword">const</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;g&#125;</span>,<span class="subst">$&#123;b&#125;</span>)`</span></span><br><span class="line">        &#125;)                </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> box = &#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">            <span class="attr">border</span>: <span class="string">&#x27;1px solid #ccc&#x27;</span>,</span><br><span class="line">            <span class="attr">background</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">bgColor</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;box&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="四、组件之间的传值"><a href="#四、组件之间的传值" class="headerlink" title="四、组件之间的传值"></a><strong><font color='red'>四、组件之间的传值</font></strong></h2><h3 id="4-1、父传子-props"><a href="#4-1、父传子-props" class="headerlink" title="4.1、父传子(props)"></a><strong><font color='#10c300'>4.1、父传子(props)</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是父组件的数据&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; msg &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">a</span>=<span class="string">&#123;msg&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; a &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是子组件，&#123;a&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">GrandChild</span> <span class="attr">b</span>=<span class="string">&#123;a&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>我是孙子组件，&#123;props.b&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="4-2、子传父-回调函数"><a href="#4-2、子传父-回调函数" class="headerlink" title="4.2、子传父(回调函数)"></a><strong><font color='#10c300'>4.2、子传父(回调函数)</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    fn = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: val</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件, 这是子组件传来的数据：&#123;this.state.msg || &#x27;______&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">fn</span>=<span class="string">&#123;this.fn&#125;</span> /&gt;</span>  // 1、将fn方法 通过方法传给子组件</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是子组件的数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    fn1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 2、子组件通过props接收fn方法 并且调用传参</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">fn</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn1&#125;</span>&gt;</span>我是子组件，点击可将子组件数据传给父组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="4-3、案例"><a href="#4-3、案例" class="headerlink" title="4.3、案例"></a><strong><font color='#10c300'>4.3、案例</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Qq</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">nickname</span>: <span class="string">&#x27;爷傲奈我何&#x27;</span>,</span><br><span class="line">    <span class="attr">show</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  edit = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="string">&#x27;block&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  nclose = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  changeName = <span class="function">(<span class="params">nickname</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      nickname,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; nickname, show &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nickname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.edit&#125;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nkname</span>=<span class="string">&#123;nickname&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">show</span>=<span class="string">&#123;show&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nclose</span>=<span class="string">&#123;this.nclose&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">changeName</span>=<span class="string">&#123;this.changeName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Modal</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; nkname, show, nclose, changeName &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sbox&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">display:</span> <span class="attr">show</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nkname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;nclose&#125;</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> changeName(&#x27;不吃香菜&#x27;)&#125;&gt;改名称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Qq</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="五、条件渲染"><a href="#五、条件渲染" class="headerlink" title="五、条件渲染"></a><strong><font color='red'>五、条件渲染</font></strong></h2><p>通常你的组件会需要根据不同的情况显示不同的内容。在 React 中，你可以通过使用 JavaScript 的 <code>if</code> 语句、<code>&amp;&amp;</code> 和 <code>? :</code> 运算符来选择性地渲染 JSX。</p><h3 id="5-1、基本写法"><a href="#5-1、基本写法" class="headerlink" title="5.1、基本写法"></a><strong><font color='#10c300'>5.1、基本写法</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123; <span class="comment">// 这里也可以用解构 &#123;flag&#125;</span></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">flag</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎您尊贵的会员<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>下午好，普通用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;false&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h3 id="5-2、可以返回null"><a href="#5-2、可以返回null" class="headerlink" title="5.2、可以返回null"></a><strong><font color='#10c300'>5.2、可以返回null</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">flag</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Vip</span> /&gt;</span></span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Vip</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是尊贵的vip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;false&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h3 id="5-3、-运算符"><a href="#5-3、-运算符" class="headerlink" title="5.3、&amp;&amp;运算符"></a><strong><font color='#10c300'>5.3、&amp;&amp;运算符</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Email</span>(<span class="params">&#123;msg&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> msg.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你有&#123; msg.length &#125;条消息待处理<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;下午吃什么&quot;</span>, <span class="string">&quot;晚上吃什么&quot;</span>, <span class="string">&quot;明天吃什么&quot;</span>]</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Email</span> <span class="attr">msg</span>=<span class="string">&#123;arr&#125;/</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="5-4、三元表达式"><a href="#5-4、三元表达式" class="headerlink" title="5.4、三元表达式"></a><strong><font color='#10c300'>5.4、三元表达式</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">&#123; flag&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> flag ? <span class="language-xml"><span class="tag">&lt;<span class="name">Vip</span>/&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">Normal</span>/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Vip</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是尊贵的vip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Normal</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是黄金普通用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="六、列表渲染"><a href="#六、列表渲染" class="headerlink" title="六、列表渲染"></a><strong><font color='red'>六、列表渲染</font></strong></h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Week</span>(<span class="params">&#123; courseList &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;courseList.map((item, index) =&gt; (<span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.courseName&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> courseList = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第一节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第二节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第三节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;4&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第四节课&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Week</span> <span class="attr">courseList</span>=<span class="string">&#123;courseList&#125;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p><strong><code>为什么需要key？</code></strong></p><p>key是用来给列表中的每一项做标记，后续更新只更新有差别的部分，不变的部分就不更新</p><p>不要用index当key，key要求是独一无二的字符串，一般由后端返回</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在原生js中，假如有一个渲染的列表如下：</span></span><br><span class="line">&lt;li&gt;<span class="number">1</span>&lt;/li&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 当数据发生变化，变成：</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 对于js来说不会因为只变了一个就只删除这一个然后创建一个新的，而是整个列表都删除，创建新的全部重新创建，这样列表数据多了就会造成性能问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在react和vue中这种列表如果变化了，不会立马去更新。因为react和vue有一个虚拟dom，每次列表数据更新，就会先去更新虚拟dom（更新很快），然后和真实dom做对比（这种对比就是diff算法）去更新改动的地方。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// key是用来给列表中的每一项做标记，后续更新只更新有差别的部分，不变的部分就不更新</span></span><br></pre></td></tr></table></figure><p><strong><code>不要用index当key，key要求是独一无二的字符串</code></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507160102927.png" alt="image-20250716010216779"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为什么不用index索引去当key呢？</span></span><br><span class="line">如果用索引当key，那么图一列表以此是<span class="number">012345</span>。如果某天将列表第二个删除了(图<span class="number">2</span>)，那么是不是列表第一个之后的key全部都发生变化了，原来列表内容<span class="number">3</span>的key是<span class="number">2</span>，现在列表内容3key是<span class="number">1</span>了，这时候需求demo和真实dom一对比，会去更新变化的地方即列表内容<span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>的都要去做更新，如果又后端返回一个唯一id值，那么就不存在这种问题</span><br></pre></td></tr></table></figure><br><h2 id="七、表单处理"><a href="#七、表单处理" class="headerlink" title="七、表单处理"></a><strong><font color='red'>七、表单处理</font></strong></h2><p>在react中表单的处理通常和其他元素不一样， 正常情况下我们把html中会发上变化的地方都设置为state，然后通过更改state的更新视图</p><p>在 HTML 中，表单元素<code>（如&lt;input&gt;、 &lt;textarea&gt; 和 &lt;select&gt;）</code>通常自己维护 state，并根据用户输入进行更新。<br>而在 React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用 setState()来更新。</p><p>渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做“受控组件”。</p><br><h3 id="7-1、基本使用"><a href="#7-1、基本使用" class="headerlink" title="7.1、基本使用"></a><strong><font color='#10c300'>7.1、基本使用</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;this.state.value&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="7-2、多个表单元素"><a href="#7-2、多个表单元素" class="headerlink" title="7.2、多个表单元素"></a><strong><font color='#10c300'>7.2、多个表单元素</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">        <span class="attr">userValue</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">emailValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> name = e.<span class="property">target</span>.<span class="property">name</span> === <span class="string">&quot;user&quot;</span> ? <span class="string">&#x27;userValue&#x27;</span> : <span class="string">&#x27;emailValue&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            [name]: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">userValue</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">emailValue</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.userValue&#125;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.emailValue&#125;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="7-3、select、checkbox、radio等特殊元素"><a href="#7-3、select、checkbox、radio等特殊元素" class="headerlink" title="7.3、select、checkbox、radio等特殊元素"></a><font color='red' size="">7.3、select、checkbox、radio等特殊元素</font></h3><h4 id="1）select用法"><a href="#1）select用法" class="headerlink" title="1）select用法"></a><strong><font color='cornflowerblue'>1）select用法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）checkbox用法"><a href="#2）checkbox用法" class="headerlink" title="2）checkbox用法"></a><strong><font color='cornflowerblue'>2）checkbox用法</font></strong></h4><p><strong><code>操作他的checked属性</code></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">isChecked</span>: e.<span class="property">target</span>.<span class="property">checked</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.checked&#125;</span>  <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="3）radio的用法"><a href="#3）radio的用法" class="headerlink" title="3）radio的用法"></a><strong><font color='cornflowerblue'>3）radio的用法</font></strong></h4><p><strong><code>通过更改value，间接操作checked属性</code></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">n</span>: <span class="string">&quot;option2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">n</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;option1&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.n</span> == <span class="string">&quot;option1&quot;</span>&#125; <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;option2&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.n</span> == <span class="string">&quot;option2&quot;</span>&#125; <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="八、ref"><a href="#八、ref" class="headerlink" title="八、ref"></a><strong><font color='red'>八、ref</font></strong></h2><blockquote><p>什么是ref：ref是React提供的用来操纵React组件实例或者DOM元素的接口。</p><p>基本跟vue中的ref用法一样 <strong><code>ref拿到的是真实dom </code></strong></p></blockquote><p>简单来说，就是提供了一种方式能让你直接获取到dom元素对象或者组件实例。</p><p><strong><code>ref不能用于函数组件上（函数组件没有实例），ref只适用于实例对象上，例如class类</code></strong></p><h3 id="8-1、回调形式的ref-（老版本推荐）"><a href="#8-1、回调形式的ref-（老版本推荐）" class="headerlink" title="8.1、回调形式的ref （老版本推荐）"></a><strong><font color='#10c300'>8.1、回调形式的ref （老版本推荐）</font></strong></h3><h4 id="1）在元素中"><a href="#1）在元素中" class="headerlink" title="1）在元素中"></a><strong><font color='cornflowerblue'>1）在元素中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    test = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins</span>); <span class="comment">// 获取到p标签这个dom</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;(dom)</span> =&gt;</span> &#123; this.ins = dom &#125;&#125;&gt;你好啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.test&#125;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Dome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）在组件中"><a href="#2）在组件中" class="headerlink" title="2）在组件中"></a><strong><font color='cornflowerblue'>2）在组件中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    test = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins1</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ins1</span>.<span class="title function_">fn</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;(dom)</span> =&gt;</span> &#123; this.ins = dom &#125;&#125;&gt;你好啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.test&#125;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;dom</span> =&gt;</span> this.ins1 = dom&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state= &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;我是子组件的数据&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">666666666</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Dome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="8-2、React-createRef-（适用于类组件）"><a href="#8-2、React-createRef-（适用于类组件）" class="headerlink" title="8.2、React.createRef （适用于类组件） "></a><strong><font color='#10c300'>8.2、React.createRef （适用于类组件） </font></strong></h3><blockquote><p>通过在class中使用React.createRef()方法创建一些变量，可以将这些变量绑定到标签的ref中</p><p>那么该变量的current则指向绑定的标签dom</p></blockquote><h4 id="1）在元素中-1"><a href="#1）在元素中-1" class="headerlink" title="1）在元素中"></a><strong><font color='cornflowerblue'>1）在元素中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span>&gt;</span>这是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h4 id="2）在组件中-1"><a href="#2）在组件中-1" class="headerlink" title="2）在组件中"></a><strong><font color='cornflowerblue'>2）在组件中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    myRef1 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef1</span>.<span class="property">current</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">myRef1</span>.<span class="property">current</span>.<span class="title function_">childFn</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span>&gt;</span>这是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef1&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;我是一个子组件数据&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    childFn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6666666</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h3 id="8-3、useRef-（适用于函数组件）"><a href="#8-3、useRef-（适用于函数组件）" class="headerlink" title="8.3、useRef （适用于函数组件） "></a><strong><font color='#10c300'>8.3、useRef （适用于函数组件） </font></strong></h3><p>是一个hooks，后面讲</p><br><h3 id="8-4、综合案例"><a href="#8-4、综合案例" class="headerlink" title="8.4、综合案例 "></a><strong><font color='#10c300'>8.4、综合案例 </font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    </span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">list</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">value</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">list</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>, <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">value</span>],</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    del = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">list</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; list &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;</span></span><br><span class="line"><span class="language-xml">                        list.length &gt; 0 &amp;&amp; list.map((item, index) =&gt; (<span class="tag">&lt;<span class="name">li</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.del(index)&#125; key=&#123;index&#125;&gt;&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>))</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h2 id="九、脚手架搭建项目"><a href="#九、脚手架搭建项目" class="headerlink" title="九、脚手架搭建项目"></a><strong><font color='red'>九、脚手架搭建项目</font></strong></h2><h3 id="9-1、基于webpack创建项目"><a href="#9-1、基于webpack创建项目" class="headerlink" title="9.1、基于webpack创建项目 "></a><strong><font color='#10c300'>9.1、基于webpack创建项目 </font></strong></h3><p>基于webpack创建是使用create-react-app搭建项目，Create React App 是一个官方支持的创建 React 单页应用程序的方法。</p><h4 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装"></a><strong><font color='cornflowerblue'>1）安装</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="comment">//全局安装脚手架</span></span><br><span class="line">npm install -g create-react-app</span><br><span class="line"><span class="comment">//利用脚手架创建项目 </span></span><br><span class="line">create-react-app my-app</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二（推荐）</span></span><br><span class="line">npx create-react-app my-app</span><br><span class="line">cd my-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><p>npx 是 npm5.2.0版本新增的一个工具包，定义为npm包的执行者，相比 npm，npx 会自动安装依赖包并执行某个命令。</p><p>使用npx创建项目，创建的时候会检查电脑是否有create-react-app，没有就安装create-react-app，有就跳过。</p><br><h4 id="2）生成的项目文件解读"><a href="#2）生成的项目文件解读" class="headerlink" title="2）生成的项目文件解读"></a><strong><font color='#10c300'>2）生成的项目文件解读</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507201844527.png" alt="image-20250720184443319"></p><ul><li><p>node_modules:项目的核心模块，依赖包</p></li><li><p>public：存放静态资源文件</p><ul><li>.ico:页签的logo</li><li>index.html:唯一的页面文件，只提供根节点</li><li>manifest.json:移动端的配置一文件</li><li>robots.txt:告诉爬虫者，不可爬的页面，没有实质作用只是警告</li></ul></li><li><p>.gitignore:声明一些再在git上传的时候需要忽略的文件</p></li><li><p>package.json:项目的说明文件，有哪些依赖，依赖了哪个版本</p></li><li><p>package-lock.json：项目依赖的安装包的一些版本会做一些限制，进行版本锁定</p></li><li><p>Readme.md:作者的一些话</p></li><li><p>src</p><ul><li>App.css:App组件的样式文件</li><li>App.js 项目的根组件</li><li>App.test.js：自动化测试文件</li><li>index.css全局样式文件</li><li>index.js：项目的入口文件，html只会加载这个js文件(类似vue中main.js)</li><li>reportWebVitals.js:谷歌浏览器退出的一个浏览器性能优化的库</li><li>setupTests：针对index.js的单元测试原件</li></ul></li></ul><blockquote><p>React.StrictMode的作用</p><p>1.识别一些不安全的生命周期</p><p>2.检测意外的副作用</p><p>3.检测过时的context api</p></blockquote><br><h3 id="9-2、基于Vite创建项目"><a href="#9-2、基于Vite创建项目" class="headerlink" title="9.2、基于Vite创建项目 "></a><strong><font color='#10c300'>9.2、基于Vite创建项目 </font></strong></h3><p><strong><code>node版本要大雨18以上，建议用20版本。要不然运行会报错</code></strong></p><p>使用 NPM:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br></pre></td></tr></table></figure><p>使用 Yarn:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create vite</span><br></pre></td></tr></table></figure><p>使用 PNPM:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507201845867.png" alt="image-20250720184501683"></p><br><h3 id="9-3、项目的基本使用"><a href="#9-3、项目的基本使用" class="headerlink" title="9.3、项目的基本使用 "></a><strong><font color='#10c300'>9.3、项目的基本使用 </font></strong></h3><blockquote><p>组件的后缀名我们推荐用jsx，表示是一个组件</p><p>普通js后缀名就用.js</p></blockquote><p>默认引入：</p><blockquote><p>引入的时候可以不需要加文件后缀，编辑器会自动查找.jsx后缀的文件，如果找不到，会接着查找后缀为.js的文件</p><p>如果直接引入的是文件夹的名字，那么默认去查找该文件夹下的index.jsx文件。</p></blockquote><br><h2 id="十、模块化样式"><a href="#十、模块化样式" class="headerlink" title="十、模块化样式"></a><strong><font color='red'>十、模块化样式</font></strong></h2><h3 id="10-1、xxx-module-css"><a href="#10-1、xxx-module-css" class="headerlink" title="10.1、xxx.module.css "></a><strong><font color='#10c300'>10.1、xxx.module.css </font></strong></h3><p><strong>只需要将样式文件名字改  ：名字.module.css即可</strong></p><p>CSS Modules 允许通过自动创建 [filename]_[classname]__[hash] 格式的唯一 classname 来确定 CSS 的作用域,如下</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span>  <span class="string">&quot;./App.module.css&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;style.App&#125;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;style.title&#125;</span>&gt;</span>哈哈哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="10-2、预处理器（Sass-Less-Stylus）"><a href="#10-2、预处理器（Sass-Less-Stylus）" class="headerlink" title="10.2、预处理器（Sass&#x2F;Less&#x2F;Stylus） "></a><strong><font color='#10c300'>10.2、预处理器（Sass&#x2F;Less&#x2F;Stylus） </font></strong></font></h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$text-color</span>: blue;</span><br><span class="line"><span class="selector-class">.component</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="variable">$text-color</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Component.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;component&quot;</span>&gt;</span>Styled Text<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="10-3、css-in-js库"><a href="#10-3、css-in-js库" class="headerlink" title="10.3、css-in-js库 "></a><strong><font color='#10c300'>10.3、css-in-js库 </font></strong></h3><p>使用JS编写CSS的库，如styled-components、emotion等</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用styled-components</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StyledDiv</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string">  font-size: 20px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">StyledDiv</span>&gt;</span>Styled Text<span class="tag">&lt;/<span class="name">StyledDiv</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="十一、组件的生命周期"><a href="#十一、组件的生命周期" class="headerlink" title="十一、组件的生命周期"></a><strong><font color='red'>十一、组件的生命周期</font></strong></h2><h3 id="11-1、生命周期图谱"><a href="#11-1、生命周期图谱" class="headerlink" title="11.1、生命周期图谱 "></a><strong><font color='#10c300'>11.1、生命周期图谱 </font></strong></h3><p>组件的生命周期函数就是在特定时间节点上会自动运行的函数</p><p><strong><code>重点：函数组件没有生命周期</code></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507202212214.png" alt="image-20240416135406354"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507202212318.png" alt="image-20240416135418172"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;constructor&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">        <span class="attr">info</span>: <span class="string">&quot;hahahaha&quot;</span>,</span><br><span class="line">        <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件更新完毕的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidUpdate&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件挂载完毕的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidMount&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件即将卸载的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentWillUnmount&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">flag</span>: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">info</span>: <span class="string">&quot;呵呵呵呵&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>改info<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;</span></span><br><span class="line"><span class="language-xml">                this.state.flag &amp;&amp; <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="11-2、shouldComponentUpdate"><a href="#11-2、shouldComponentUpdate" class="headerlink" title="11.2、shouldComponentUpdate "></a><strong><font color='#10c300'>11.2、shouldComponentUpdate </font></strong></h3><p>shouldComponentUpdate 是一个可以在**<code>组件更新之前</code>**触发的生命周期方法，它允许你通过返回一个布尔值来决定一个组件的输出是否受当前状态或属性的改变影响而更新。如果 shouldComponentUpdate 返回 false，那么组件就不会进行更新。</p><p>简单来说就是用于更新数据时，如果更新的数据和上一次数据是一样的，理论上应该不需要再次更新组件了，但是实际上确实会更新，使用shouldComponentUpdate 则会避免这种情况，如果shouldComponentUpdate 返回false就说明数据一样，那么组件就不需要更新。</p><h4 id="1）基本用法"><a href="#1）基本用法" class="headerlink" title="1）基本用法"></a><strong><font color='cornflowerblue'>1）基本用法</font></strong></h4><p>shouldComponentUpdate 接收两个参数：nextProps 和 nextState，分别表示组件即将接收的新属性和新状态。你需要在这个方法中比较当前组件的属性和状态与新的属性和状态，然后返回一个布尔值来决定组件是否需要更新。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps,nextState</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(nextState.<span class="property">msg</span>===<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2）案例"><a href="#2）案例" class="headerlink" title="2）案例"></a><strong><font color='cornflowerblue'>2）案例</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&quot;world&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nextState.<span class="property">msg</span> === <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件更新了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span> // 第二次点击不会执行了</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>自React 16.3版本起，推荐使用 PureComponent（对于类组件） 或 React.memo (对于函数组件) 来进行浅比较，这样可以减少手动编写 shouldComponentUpdate 的需求。</code></p><br><h3 id="11-3、PureComponent"><a href="#11-3、PureComponent" class="headerlink" title="11.3、PureComponent "></a><strong><font color='#10c300'>11.3、PureComponent </font></strong></h3><p>React.PureComponent 与 React.Component 很相似，两者的区别在于 React.Component 并未实现 shouldComponentUpdate()，而 React.PureComponent 中以浅层对比 prop 和 state 的方式来实现了该函数。</p><p><strong><font color='orange'>setState存在两个不合理之处:</font></strong></p><ol><li><p>setState无论是否更新了state，render函数都会重现调用，这是不合理的</p></li><li><p>如果父组件更新了，无论子组件用没用到父组件的数据也都会重新渲染子组件，这是不合理的</p></li></ol><br><p><strong><font color='orange'>传统的解决方案：</font></strong></p><p>通过生命周期函数shouldComponentUpdate(){}判断两次不一致再更新，否则不更新</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps,nextState</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">someprops</span>===nextProps.<span class="property">someprops</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 但是这仅仅是一个属性，如果有多个属性的话，一个一个对比会比较麻烦</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>因此使用PureComponent：</font></strong></p><p>直接将React.Component替换成React.PureComponent</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">  <span class="comment">// 与之前写法相同，只不过不用写shouldComponentUpdate了，会自动帮我们判断</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&quot;world&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件更新了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>注意：</font></strong></p><p>React.PureComponent 中的 shouldComponentUpdate() 仅作对象的浅层比较。如果对象中包含复杂的数据结构，则有可能因为无法检查深层的差别，产生错误的比对结果。仅在你的 props 和 state 较为简单时，才使用React.PureComponent，或者在深层数据结构发生变化时调用 forceUpdate() 来确保组件被正确地更新。</p><br><h2 id="十二、context多层级传值"><a href="#十二、context多层级传值" class="headerlink" title="十二、context多层级传值"></a><strong><font color='red'>十二、context多层级传值</font></strong></h2><p>Context 提供了一个无需为每层组件手动添加 props，就能在组件树间进行数据传递的方法。</p><p><strong><font color='orange'>使用步骤</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建需要传递的数据React.Context()实例：括号里存放默认初始数据</span></span><br><span class="line"><span class="comment">// src\utils\context.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span>=<span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyContext</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.父组件  提供Context数据：</span></span><br><span class="line"><span class="comment">// src\App.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyContext</span> <span class="keyword">from</span> <span class="string">&quot;./utils/context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;父组件数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;this.state.msg&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Child</span> <span class="attr">msg</span>=<span class="string">&#123;this.state.msg&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.后代组件获取Context数据</span></span><br><span class="line"><span class="comment">// src\components\GrandChild.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式一：通过consumer</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyContext</span> <span class="keyword">from</span> <span class="string">&#x27;../utils/context&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;</span></span><br><span class="line"><span class="language-xml">                    (value) =&gt; (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是孙子组件 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;/<span class="title class_">MyContext</span>.<span class="property">Consumer</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：通过Class.contextType (类组件使用)</span></span><br><span class="line">可以通过<span class="title class_">Class</span>.<span class="property">contextType</span>直接将<span class="title class_">Context</span>对象挂载到<span class="keyword">class</span>的contextType属性，然后就可以使用<span class="variable language_">this</span>.<span class="property">context</span>对context对象进行使用</span><br><span class="line">contextType属于类的属性，不属于某个实例，所以只能在外部添加或者使用<span class="keyword">static</span>将其添加给类属性</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="comment">// static contextType=MyContext; // 这里写在类里面并没有添加到实例上去，因为添加了static</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是孙子组件 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;this.context&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span>    </span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">GrandChild</span>.<span class="property">contextType</span> = <span class="title class_">MyContext</span>; <span class="comment">// 添加在类属性上面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><br><h2 id="十三、高阶组件-HOC"><a href="#十三、高阶组件-HOC" class="headerlink" title="十三、高阶组件 (HOC)"></a><strong><font color='red'>十三、高阶组件 (HOC)</font></strong></h2><p>高阶组件（Higher-Order Component，简称HOC）是React中用于复用组件逻辑的一种高级技术。本质上，高阶组件是一个函数，它接收一个组件并返回一个新的组件。它主要用于逻辑的共享和重用，而不是直接渲染UI。这种模式类似于JavaScript中的高阶函数，那些以函数为参数或返回一个函数的函数。</p><ul><li>HOC 应当是纯函数，无副作用。</li><li>不要在 HOC 内部修改原始组件，而是返回一个新组件</li><li>高阶组件的命名一般<strong>以 “with” 开头</strong>，表示它是为组件提供附加功能的。</li></ul><h3 id="13-1、基本使用"><a href="#13-1、基本使用" class="headerlink" title="13.1、基本使用 "></a><strong><font color='#10c300'>13.1、基本使用 </font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo1</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是demo1 &#123;this.props.a&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是demo2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withLog</span>(<span class="params">WrapComponent</span>) &#123; <span class="comment">// 高阶函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;挂载了&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span> <span class="comment">// 传值必须在这里解构props，要不然Demo1组件拿不到传的参数a和c</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用高阶函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyCom</span> = <span class="title function_">withLog</span>(<span class="title class_">Demo1</span>) </span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyCom1</span> = <span class="title function_">withLog</span>(<span class="title class_">Demo2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;父组件数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyCom</span> <span class="attr">a</span>=<span class="string">&#123;this.state.msg&#125;</span> <span class="attr">c</span>=<span class="string">&quot;1231231&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyCom1</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="13-2、高阶组件实战"><a href="#13-2、高阶组件实战" class="headerlink" title="13.2、高阶组件实战"></a><strong><font color='#10c300'>13.2、高阶组件实战</font></strong></h3><p>请求地址</p><p>dogApi：<a href="https://dog.ceo/api/breeds/image/random">https://dog.ceo/api/breeds/image/random</a></p><p>catApi：<a href="https://api.thecatapi.com/v1/images/search">https://api.thecatapi.com/v1/images/search</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;this.props.url&#125;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一只猫<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;this.props.url&#125;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一只狗<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withAnimal</span>(<span class="params">WrapComponent, url, type</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        state=&#123;</span><br><span class="line">            <span class="attr">imgUrl</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(url).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                    <span class="attr">imgUrl</span>: type ? res.<span class="property">data</span>.<span class="property">message</span> : res.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapComponent</span> <span class="attr">url</span>=<span class="string">&#123;this.state.imgUrl&#125;/</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Cat</span> = <span class="title function_">withAnimal</span>(<span class="title class_">MyCat</span>, <span class="string">&#x27;https://api.thecatapi.com/v1/images/search&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Dog</span> = <span class="title function_">withAnimal</span>(<span class="title class_">MyDog</span>, <span class="string">&#x27;https://dog.ceo/api/breeds/image/random&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;渲染&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Cat</span>&gt;</span><span class="tag">&lt;/<span class="name">Cat</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Dog</span>&gt;</span><span class="tag">&lt;/<span class="name">Dog</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h2 id="十四、跨域问题"><a href="#十四、跨域问题" class="headerlink" title="十四、跨域问题"></a><strong><font color='red'>十四、跨域问题</font></strong></h2><h3 id="14-1、Create-React-App-CRA-脚手架"><a href="#14-1、Create-React-App-CRA-脚手架" class="headerlink" title="14.1、Create React App (CRA)脚手架 "></a><strong><font color='#10c300'>14.1、Create React App (CRA)脚手架 </font></strong></h3><p>基于webpack创建是使用create-react-app搭建项目</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/setupProxy.js</span></span><br><span class="line"><span class="comment">//  你无需在任何位置导入此文件。 它在启动开发服务器时会自动注册。文件名不能更改</span></span><br><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">app</span>) &#123; </span><br><span class="line">    app.<span class="title function_">use</span>(</span><br><span class="line">        <span class="title function_">createProxyMiddleware</span>(<span class="string">&quot;/api&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&quot;https://api.jisuapi.com/recipe&quot;</span>,<span class="comment">//跨域地址</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">    app.<span class="title function_">use</span>(</span><br><span class="line">        <span class="title function_">createProxyMiddleware</span>(<span class="string">&quot;/api1&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&quot;https://api.binstd.com&quot;</span>,<span class="comment">//跨域地址</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        axios.<span class="title function_">get</span>(<span class="string">&#x27;api/search&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">keyword</span>: <span class="string">&#x27;白菜&#x27;</span>,</span><br><span class="line">                <span class="attr">num</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">appkey</span>: <span class="string">&#x27;e7652690d5fdbcc4&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="14-2、vite脚手架"><a href="#14-2、vite脚手架" class="headerlink" title="14.2、vite脚手架 "></a><strong><font color='#10c300'>14.2、vite脚手架 </font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vite.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="comment">// 配置单个代理</span></span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;https://api.jisuapi.com/recipe&#x27;</span>, <span class="comment">// 后端服务地址</span></span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>), <span class="comment">// 重写路径，去除前缀</span></span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 配置多个代理（可选）</span></span><br><span class="line">            <span class="string">&#x27;/socket&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;ws://localhost:8080&#x27;</span>, <span class="comment">// WebSocket 服务</span></span><br><span class="line">                <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        axios.<span class="title function_">get</span>(<span class="string">&#x27;api/search&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">keyword</span>: <span class="string">&#x27;白菜&#x27;</span>,</span><br><span class="line">                <span class="attr">num</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">appkey</span>: <span class="string">&#x27;e7652690d5fdbcc4&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h2 id="十五、Hooks"><a href="#十五、Hooks" class="headerlink" title="十五、Hooks"></a><strong><font color='red'>十五、Hooks</font></strong></h2><blockquote><p><em>Hook</em> 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性。</p><p>Hooks 基于函数组件开始设计，所以<strong>Hooks 只支持函数组件</strong>！！！</p></blockquote><h3 id="15-1、useState-很重要"><a href="#15-1、useState-很重要" class="headerlink" title="15.1、useState(很重要) "></a><strong><font color='#10c300'>15.1、useState(很重要) </font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialState);</span><br></pre></td></tr></table></figure><ul><li>initialState：定义的初始值，可以是任意数据，像数字，字符串或者数组和对象。</li><li>useState ()方法的返回值为当前 state 以及更新 state 的函数setState()，与 class 里面 this.state.count 和 this.setState 类似。</li></ul><h4 id="1）基本使用"><a href="#1）基本使用" class="headerlink" title="1）基本使用"></a><strong><font color='cornflowerblue'>1）基本使用</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> [str, setStr] = <span class="title function_">useState</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(num += <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn2</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setStr</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;str&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>改num<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn2&#125;</span>&gt;</span>改str<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><h4 id="2）useState更新是异步的"><a href="#2）useState更新是异步的" class="headerlink" title="2）useState更新是异步的"></a><strong><font color='cornflowerblue'>2）useState更新是异步的</font></strong></h4><p>useState 返回的更新对象的方法是<strong>异步的</strong>，要在下次重绘才能获取新值，不要试图在更改状态之后立即获取状态</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">300</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 0 是0说明setNum是异步的</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>改num<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>连续修改state会合并，只执行最后一次</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">300</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">400</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">32</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">322</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">1</span>)  <span class="comment">// 只会执行这一次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>改num<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><h4 id="3）函数式更新"><a href="#3）函数式更新" class="headerlink" title="3）函数式更新"></a><strong><font color='cornflowerblue'>3）函数式更新</font></strong></h4><p>如果新的 state 需要通过使用先前的 state 计算得出，那么可以将函数传递给 setState。该函数将接收先前的 state，并返回一个更新后的值。</p><p><strong>语法</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setState</span>(<span class="function">(<span class="params">prevState</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> newState</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [num,setNum]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [str,setStr]=<span class="title function_">useState</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">setNum</span>(num+<span class="number">1</span>)  <span class="comment">// 连续点击3次 最终还是1 说明这是会合并处理的</span></span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">setNum</span>(<span class="function">(<span class="params">prev</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prev+<span class="number">1</span>  <span class="comment">// 连续点击3次 最终是4 说明不会合并处理</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;str&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>普通+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn2&#125;</span>&gt;</span>函数+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h4 id="4）修改数组和对象"><a href="#4）修改数组和对象" class="headerlink" title="4）修改数组和对象"></a><strong><font color='cornflowerblue'>4）修改数组和对象</font></strong></h4><p>记住，永远不要直接对对象和数组进行赋值，要始终确保你的set函数里是一份全新的数据，这样React才能够检测到状态变化，并按预期进行更新和重新渲染操作。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> [obj,setObj]=<span class="title function_">useState</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="keyword">const</span> [arr,setArr]=<span class="title function_">useState</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">change</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">   <span class="title function_">setArr</span>([...arr,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          我是app &#123;obj.name&#125;:&#123;obj.age&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;arr&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;change&#125;</span>&gt;</span>更改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="5）useState不能放在条件判断、循环语句、嵌套函数中"><a href="#5）useState不能放在条件判断、循环语句、嵌套函数中" class="headerlink" title="5）useState不能放在条件判断、循环语句、嵌套函数中"></a><strong><font color='cornflowerblue'>5）useState不能放在条件判断、循环语句、嵌套函数中</font></strong></h4><p>你会发现，每次更新的数据我们并没有记录也没有存储，并没有像setState那样每次更改把数据存起来</p><p>那么react是怎么记住我们之前的状态呢？其实是按照顺序</p><p>所以useState不能放在条件判断中,所以下面这种写法是错误的写法</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240421125819092.png" alt="image-20240421125819092"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240421125827372.png" alt="image-20240421125827372"></p><br><h3 id="15-2、useEffect-很重要"><a href="#15-2、useEffect-很重要" class="headerlink" title="15.2、useEffect(很重要)"></a><strong><font color='#10c300'>15.2、useEffect(很重要)</font></strong></h3><h4 id="1）基本语法"><a href="#1）基本语法" class="headerlink" title="1）基本语法"></a><strong><font color='cornflowerblue'>1）基本语法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">   <span class="comment">// 在组件挂载和更新的时候执行，相当于componentDidMount和componentDidUpdate</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件挂载或更新了&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123; <span class="comment">//return是可选项</span></span><br><span class="line">     <span class="comment">// 组件卸载的时候会执行return里面的，相当于 componentWillUnmount</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件卸载了&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;, [<span class="comment">/*依赖项*/</span>])</span><br></pre></td></tr></table></figure><p>默认情况下，任何数据的变化都会导致useEffect重新运行，(如果数据改变前后值一样，那么就不会运行)</p><blockquote><p>useEffect接收第二个参数，为一个数组：</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;, [count]); <span class="comment">// 仅在 count 更改时更新</span></span><br><span class="line"><span class="comment">//如果第二个参数没传，其实相当于监测所有人，写一个空数组相当于谁也不监测</span></span><br><span class="line"><span class="comment">//数组中写谁就监测谁</span></span><br></pre></td></tr></table></figure><br><h3 id="15-3、useContext"><a href="#15-3、useContext" class="headerlink" title="15.3、useContext"></a><strong><font color='#10c300'>15.3、useContext</font></strong></h3><blockquote><p>如果你在接触 Hook 前已经对 context API 比较熟悉，那应该可以理解，useContext(MyContext) 相当于 class 组件中的 static contextType &#x3D; MyContext 或者 &lt;MyContext.Consumer&gt;。</p><p>useContext(MyContext) 只是让你能够读取 context 的值以及订阅 context 的变化。你仍然需要在上层组件树中使用 &lt;MyContext.Provider&gt; 来为下层组件提供 context。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// context.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">MyProvider</span> = <span class="title class_">MyContext</span>.<span class="property">Provider</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;父组件数据&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyProvider</span> <span class="attr">value</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">MyProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&quot;./GrandChild&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GrandChild.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">useContext</span>(<span class="title class_">MyProvider</span>) <span class="comment">// 这是app.jsx中传来的数据</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是孙组件后面是<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> &#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><br><h3 id="15-4、React-memo-相对重要"><a href="#15-4、React-memo-相对重要" class="headerlink" title="15.4、React.memo (相对重要)"></a><strong><font color='#10c300'>15.4、React.memo (相对重要)</font></strong></h3><blockquote><p>React.memo 是一个高阶组件（HOC），用于对函数组件进行性能优化。它仅检查组件的 props 变化，如果 props 没有改变，则不会重新渲染该组件。React.memo 主要用于优化那些纯渲染的组件，避免因为父组件重渲染导致的不必要的子组件渲染。</p></blockquote><p>函数组件本身没有识别prop的能力，每次父组件的更新相当于是给子组件传递了一个全新的prop</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState,useEffect&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [data,setData]=<span class="title function_">useState</span>(<span class="string">&quot;初始数据&quot;</span>);</span><br><span class="line"> <span class="keyword">const</span> [b,setB]=<span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件重新渲染了&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setB(&quot;我是父组件的数据&quot;)&#125;&gt;我是App &#123;data&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>     </span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">MyChild</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;/</span>&gt;</span>   </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyChild</span>=<span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-5、useMemo-相对重要"><a href="#15-5、useMemo-相对重要" class="headerlink" title="15.5、useMemo (相对重要)"></a><strong><font color='#10c300'>15.5、useMemo (相对重要)</font></strong></h3><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;<span class="keyword">return</span> 值&#125;,[依赖项])</span><br></pre></td></tr></table></figure><blockquote><p>useMemo它是用来做缓存用的，只有当一个依赖项改变的时候才会发生变化，否则拿缓存的值，就不用在每次渲染的时候再做计算</p></blockquote><blockquote><p>可以用来缓存函数的结果或者缓存组件</p></blockquote><blockquote><p><code>useMemo</code>的理念是同步的,useMemo不能进行一些额外的副操作，比如网络请求等。</p></blockquote><h4 id="1）用了缓存数据-计算结果"><a href="#1）用了缓存数据-计算结果" class="headerlink" title="1）用了缓存数据(计算结果)"></a><strong><font color='cornflowerblue'>1）用了缓存数据(计算结果)</font></strong></h4><p>如果没有优化</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState,useEffect&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [count,setCount]=<span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [price,setPrice]=<span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [color,setColor]=<span class="title function_">useState</span>(<span class="string">&quot;红色&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">total</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数运行了&quot;</span>)<span class="comment">//修改颜色的时候函数也会重新执行，这是不合理的</span></span><br><span class="line">     <span class="keyword">return</span> count*price</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;total()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setColor(&quot;红色&quot;)&#125;&gt;改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setPrice(200)&#125;&gt;改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>使用了useMemo优化</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState,useMemo&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [count,setCount]=<span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [price,setPrice]=<span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [color,setColor]=<span class="title function_">useState</span>(<span class="string">&quot;红色&quot;</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">total</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数运行了&quot;</span>)</span><br><span class="line">     <span class="keyword">return</span> count*price</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> myTotal=<span class="title function_">useMemo</span>(total,[count,price])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;myTotal&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setColor(&quot;红色&quot;)&#125;&gt;改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setPrice(200)&#125;&gt;改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myTotal= <span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数运行了&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> count*price</span><br><span class="line">  &#125;,[count,price])</span><br></pre></td></tr></table></figure><br><h4 id="2）用来缓存组件"><a href="#2）用来缓存组件" class="headerlink" title="2）用来缓存组件"></a><strong><font color='cornflowerblue'>2）用来缓存组件</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useState,useMemo&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [count,setCount]=<span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [price,setPrice]=<span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [color,setColor]=<span class="title function_">useState</span>(<span class="string">&quot;蓝色&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyChild</span>=<span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">price</span>=<span class="string">&#123;price&#125;/</span>&gt;</span></span></span><br><span class="line">  &#125;,[count,price])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         </span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setColor(&quot;红色&quot;)&#125;&gt;改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setPrice(200)&#125;&gt;改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;MyChild&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><blockquote><p><strong>React.memo和useMemo的区别</strong></p><p>想让组件只在<code>props</code>变化时重新渲染，用<code>React.memo</code></p><p>想让组件只在依赖项变化时重新渲染，用<code>useMemo</code></p></blockquote><blockquote><p>React.memo是用来缓存整个组件的</p><p>useMemo用来缓存数据或组件的</p></blockquote><br><h3 id="15-6、useCallback-（相对重要"><a href="#15-6、useCallback-（相对重要" class="headerlink" title="15.6、useCallback （相对重要)"></a><strong><font color='#10c300'>15.6、useCallback （相对重要)</font></strong></h3><blockquote><p>useCallback是 React 的一个 Hook，用于缓存函数，避免组件在每次渲染时都创建新的函数实例。当一个组件传递回调给子组件，尤其是在子组件进行了性能优化（例如使用 <code>React.memo</code>）时，<code>useCallback</code> 非常有用。</p><p>当你把 <code>useCallback</code> 应用于函数时，你需要定义一个“依赖项数组”。只有当数组中的依赖项改变时，才会重新创建函数。如果依赖项保持不变，即使父组件重新渲染，回调函数的引用也会保持一致。</p></blockquote><p><strong>语法</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">doSomething</span>(a, b);</span><br><span class="line">  &#125;,</span><br><span class="line">  [a, b],</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>useCallback(fn, deps) 相当于 useMemo(() &#x3D;&gt; fn, deps)。</p></blockquote><blockquote><p>useMemo主要是用来缓存值，而useCallback主要用来缓存函数</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useCallback, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyChild</span>=<span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> [count,setCount]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> [num,setNum]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">fn</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是fn&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">let</span> myFn=<span class="title function_">useCallback</span>(fn,[num])</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyChild</span> <span class="attr">fn</span>=<span class="string">&#123;myFn&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCount(count+1)&#125;&gt;改变&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setNum(100)&#125;&gt;改num&#123;num&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><blockquote><p>useCallback需要配合React.memo使用，因为如果自己自身不缓存，就算把函数缓存了，组件还是会重新渲染</p></blockquote><br><h3 id="15-7、useReducer"><a href="#15-7、useReducer" class="headerlink" title="15.7、useReducer"></a><strong><font color='#10c300'>15.7、useReducer</font></strong></h3><blockquote><p>useReducer 是 React 的一个钩子（hook），它可以用于处理更复杂的组件状态逻辑，特别是当下一个状态依赖于之前的状态时。它也是一个useState的替代方案，特别适合于状态逻辑复杂，涉及多个子值，或者下一个状态依赖于之前的状态的情景。</p><p>useReducer 接受两个参数：一个reducer函数和初始状态（initial state）。reducer 函数接收当前状态和一个行为对象（action object），然后返回一个新的状态。</p></blockquote><p>语法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialArg, init);</span><br><span class="line"><span class="comment">//第一个是 reducer 函数，这个函数返回一个新的state。 reducer函数语法：  (state, action) =&gt; newState </span></span><br><span class="line"><span class="comment">//第二个是 state 初始值</span></span><br><span class="line"><span class="comment">//第三个参数用于计算初始值的函数</span></span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; myReducer &#125; <span class="keyword">from</span> <span class="string">&quot;./reducers&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [state,dispatch]=<span class="title function_">useReducer</span>(myReducer,<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;add&quot;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;state&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;minus&quot;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">function</span> <span class="title function_">myReducer</span>(<span class="params">state,action</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(action==<span class="string">&quot;add&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state+<span class="number">1</span></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(action==<span class="string">&quot;minus&quot;</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state-<span class="number">1</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;myReducer&#125;</span><br></pre></td></tr></table></figure><p>第三个参数：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; myReducer &#125; <span class="keyword">from</span> <span class="string">&quot;./reducers&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">initCount</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [state,dispatch]=<span class="title function_">useReducer</span>(myReducer,<span class="number">0</span>,init)<span class="comment">//0会作为init函数中的参数传入</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;add&quot;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;state&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;minus&quot;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-8、useRef-相对重要"><a href="#15-8、useRef-相对重要" class="headerlink" title="15.8、useRef (相对重要)"></a><strong><font color='#10c300'>15.8、useRef (相对重要)</font></strong></h3><blockquote><p>useRef 是一个React的Hook，它可以在函数组件中创建一个引用（ref）对象，主要用途有以下几种：</p><p><strong>1.访问DOM元素</strong>：可以用来直接操作DOM元素，比如获取输入框的值，设置焦点或测量DOM元素尺寸等。</p><p>**2.存储可变值：**useRef 可以存储任意可变值，并且不会触发组件的重新渲染 </p></blockquote><p>&#x3D;&#x3D;useRef 类似于类组件的 this&#x3D;&#x3D;</p><ol><li><p><strong>持久性</strong>：<code>useRef</code>的返回对象在组件的整个生命周期中都是持久的，而不是每次渲染都重新创建。</p></li><li><p><strong>不会触发渲染</strong>：当<code>useState</code>中的状态改变时，组件会重新渲染。而当<code>useRef</code>的<code>.current</code>属性改变时，组件不会重新渲染。</p></li></ol><h4 id="1）基本用法-1"><a href="#1）基本用法-1" class="headerlink" title="1）基本用法"></a><strong><font color='cornflowerblue'>1）基本用法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a=<span class="title function_">useRef</span>()</span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">get</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">current</span>.<span class="property">innerHTML</span>)<span class="comment">//hello</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;a&#125;</span> &gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;get&#125;</span>&gt;</span>获取<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个只是最基础的用法，这个功能看起来用我们之前讲的createRef也可以实现</p><h4 id="2）用来存储可变值"><a href="#2）用来存储可变值" class="headerlink" title="2）用来存储可变值"></a><strong><font color='cornflowerblue'>2）用来存储可变值</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">let</span> a=<span class="title function_">useRef</span>()</span><br><span class="line"> <span class="keyword">let</span> num=<span class="title function_">useRef</span>();</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">   num.<span class="property">current</span>=<span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="property">current</span>)</span><br><span class="line">      num.<span class="property">current</span>++</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件一共存在了&quot;</span>+num.<span class="property">current</span>+<span class="string">&quot;s&quot;</span> )</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span><span class="built_in">clearInterval</span>(num.<span class="property">current</span>)</span><br><span class="line">  &#125;,[])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&#123;a&#125;</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> &gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><blockquote><p>1.createRef会在组件每次渲染的时候重新创建</p><p>2.useRef只会在组件首次渲染时创建</p><p>3.useRef之所以出现，就是因为在函数式组件中使用createRef创建ref时存在弊端（组件每次更新，ref对象就会被重新创建）</p></blockquote><br><h3 id="15-9、useId"><a href="#15-9、useId" class="headerlink" title="15.9、useId"></a><strong><font color='#10c300'>15.9、useId</font></strong></h3><p>useId 是一个React17新引入的 Hook，它用于生成一个唯一的 ID 字符串。</p><p>这个 ID 在服务端渲染（SSR）和客户端渲染中保持一致，帮助解决客户端和服务器之间的 ID 不匹配问题。</p><p>该 Hook 被设计用于那些需要唯一标识符的场景</p><p>&#x3D;&#x3D;不要使用 useId 来生成列表中的 key。key 应该由你的数据生成。&#x3D;&#x3D;</p><p><strong>实际案例</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useId&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> a=<span class="title function_">useId</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;a&#125;</span>&gt;</span>请输入你的名字<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&#123;a&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-10、useDeferredValue"><a href="#15-10、useDeferredValue" class="headerlink" title="15.10、useDeferredValue"></a><strong><font color='#10c300'>15.10、useDeferredValue</font></strong></h3><blockquote><p>useDeferredValue 是 React 18 引入的一个新的 Hook，它允许你在不阻塞用户输入和其它页面交互的情况下，延迟渲染一些不那么重要的内容。这个 Hook 通常用于优化性能，特别是在处理实时搜索、输入等场合。</p><p>当你有一些低优先级的更新，比如过滤或排序大量数据，这些操作如果在每次输入时同步执行，可能会导致界面卡顿或延迟。useDeferredValue可以帮助你推迟这部分更新，而不会影响用户的输入体验。</p></blockquote><blockquote><p>在初始渲染期间，返回的 延迟值 与你提供的 值 相同。</p><p>在更新期间，延迟值 会“滞后于”最新的 值。具体地说，React 首先会在不更新延迟值的情况下进行重新渲染，然后在后台尝试使用新接收到的值进行重新渲染。</p></blockquote><p>实际案例</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useDeferredValue &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SlowList</span> <span class="keyword">from</span> <span class="string">&quot;./SlowList&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [text,setText]=<span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> val=<span class="title function_">useDeferredValue</span>(text);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;e</span>=&gt;</span>setText(e.target.value)&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">SlowList</span> <span class="attr">text</span>=<span class="string">&#123;val&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;memo&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SlowList</span>(<span class="params">&#123;text&#125;</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> items=[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">250</span>;i++)&#123;</span><br><span class="line">        items.<span class="title function_">push</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">SlowItem</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span> <span class="attr">text</span>=<span class="string">&#123;text&#125;/</span>&gt;</span></span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               &#123;items&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SlowItem</span>(<span class="params">&#123;text&#125;</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> startTime=performance.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">while</span>(performance.<span class="title function_">now</span>()-startTime&lt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//模拟1ms的延迟</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Text:&#123;text&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">SlowList</span>)</span><br></pre></td></tr></table></figure><br><h3 id="15-11、useTransition"><a href="#15-11、useTransition" class="headerlink" title="15.11、useTransition"></a><strong><font color='#10c300'>15.11、useTransition</font></strong></h3><blockquote><p>useTransition 是一个帮助你在不阻塞 UI 的情况下更新状态的 React Hook。</p><p>这个 Hook 允许你在应用程序中告诉 React 哪些更新是紧急的，哪些可以稍后进行，从而改善应用程序的响应性。</p></blockquote><blockquote><p><code>useTransition</code> 则用于标记某段代码或者组件状态更新的优先级。它给你提供了一个<code>startTransition</code>的函数和一个表示状态是否处于过渡中的<code>isPending</code>状态</p><p>isPending: true代表还没完成  false代表完成了</p></blockquote><ul><li><strong><code>useDeferredValue</code></strong> 主要用于延迟单个值的更新，适用于值的变化直接影响到 UI 渲染但又不是立即必要的更新。</li><li><strong><code>useTransition</code></strong> 用于告诉 React 哪些更新是低优先级的，并可使用 <code>isPending</code> 状态反馈更新是否处于等待状态，适用于控制大块区域或复杂状态的更新行为，允许你在触发更新时提供更自然的用户体验。</li></ul><p>案例</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;  useState,useTransition &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SlowList</span> <span class="keyword">from</span> <span class="string">&#x27;./SlowList.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [isPending,startTransition]=<span class="title function_">useTransition</span>()</span><br><span class="line">  <span class="keyword">const</span> [input,setInput]=<span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>) </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="title function_">setText</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">startTransition</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">setInput</span>(e.<span class="property">target</span>.<span class="property">value</span>) <span class="comment">//这件事晚点执行 。优先级更低一些</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;fn&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;isPending?<span class="tag">&lt;<span class="name">span</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">span</span>&gt;</span>:&quot;&quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SlowList</span> <span class="attr">text</span>=<span class="string">&#123;input&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="15-12、useImperativeHandle-相对重要"><a href="#15-12、useImperativeHandle-相对重要" class="headerlink" title="15.12、useImperativeHandle (相对重要)"></a><strong><font color='#10c300'>15.12、useImperativeHandle (相对重要)</font></strong></h3><blockquote><p><code>useImperativeHandle</code> 是 React Hooks 中提供的一个高级钩子（hook），它结合 <code>forwardRef</code> 使用，主要用于在使用 React 函数组件时，自定义父组件通过 ref 访问子组件中的方法或属性。</p></blockquote><blockquote><p>正常情况下，函数组件不支持 ref 属性，因为它们没有实例。但有时候，你可能需要在父组件中直接访问子组件的某些方法。这时，<code>useImperativeHandle</code> 就派上用场了。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useImperativeHandle</span>(ref, createHandle, [deps])</span><br></pre></td></tr></table></figure><ul><li><code>ref</code>：来自父组件通过 <code>forwardRef</code> 传递给子组件的 ref。</li><li><code>createHandle</code>：一个函数，返回一个对象，这个对象包含你想让父组件通过 ref 能访问到的属性或方法。</li><li><code>[deps]</code>：依赖数组，只有当数组中的依赖项改变时，才会重新定义 ref 的内容。</li></ul><h4 id="1）关于forwardRef"><a href="#1）关于forwardRef" class="headerlink" title="1）关于forwardRef"></a><strong><font color='cornflowerblue'>1）关于forwardRef</font></strong></h4><blockquote><p><code>forwardRef</code> 是 React 的一个高阶组件（HOC），用于转发引用（refs）</p></blockquote><blockquote><p>forwardRef 允许组件使用 ref 将 DOM 节点暴露给父组件。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">forwardRef</span>(render)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyInput</span> = <span class="title function_">forwardRef</span>(<span class="keyword">function</span> <span class="title function_">MyInput</span>(<span class="params">props, ref</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>render</code>：组件的渲染函数。React 会调用该函数并传入父组件传递的 props 和 <code>ref</code>。返回的 JSX 将作为组件的输出。</li></ul><p>&#x3D;&#x3D;App.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> a=<span class="title function_">useRef</span>()</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    a.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span>  <span class="attr">ref</span>=<span class="string">&#123;a&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>父组件的按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;Child.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function Child(props,ref)&#123;</span></span><br><span class="line"><span class="comment">//     return &lt;div&gt;</span></span><br><span class="line"><span class="comment">//         &lt;p&gt;我是子组件&lt;/p&gt;</span></span><br><span class="line"><span class="comment">//         &lt;input ref=&#123;ref&#125;/&gt;</span></span><br><span class="line"><span class="comment">//     &lt;/div&gt;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span>=<span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props,ref</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//export default forwardRef(Child)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><br><h4 id="2）useImperativeHandle"><a href="#2）useImperativeHandle" class="headerlink" title="2）useImperativeHandle"></a><strong><font color='cornflowerblue'>2）useImperativeHandle</font></strong></h4><p>专门用来读取子组件的数据和方法的</p><p>语法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useImperativeHandle</span>(ref, createHandle, dependencies?)</span><br></pre></td></tr></table></figure><ul><li>ref:父组件传递过来的ref</li><li>createHandle：是一个函数，返回一个对象，这个对象就是父组件可以通过ref.current拿到的对象。所有你希望共享给父组件的数据或者方法，就写到这里</li></ul><p>案例</p><p>&#x3D;&#x3D;App.jsx&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> a=<span class="title function_">useRef</span>()</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">         a.<span class="property">current</span>.<span class="title function_">handle</span>()</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;a&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>父组件的按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;Child.jsx&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;forwardRef, useImperativeHandle,useRef,useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props,ref</span>)&#123; </span><br><span class="line">  <span class="keyword">const</span> b=<span class="title function_">useRef</span>()  </span><br><span class="line">  <span class="keyword">const</span> [data,setData]=<span class="title function_">useState</span>(<span class="string">&quot;我是子组件的数据&quot;</span>)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是子组件的方法&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">setData</span>(<span class="string">&quot;数据变了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">handle</span>(<span class="params"></span>)&#123;</span><br><span class="line">        b.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">useImperativeHandle</span>(ref,<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">        <span class="attr">fn2</span>:fn,</span><br><span class="line">        change,</span><br><span class="line">        data,</span><br><span class="line">        handle</span><br><span class="line">    &#125;))</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件 &#123;data&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">forwardRef</span>(<span class="title class_">Child</span>)</span><br></pre></td></tr></table></figure><br><h3 id="15-13、useLayoutEffect"><a href="#15-13、useLayoutEffect" class="headerlink" title="15.13、useLayoutEffect"></a><strong><font color='#10c300'>15.13、useLayoutEffect</font></strong></h3><ul><li><p>useLayoutEffect 的使用方式几乎与 useEffect 完全相同，但它在所有的 DOM 变更之后同步触发。这意味着在浏览器绘制之前，useLayoutEffect 中的操作会被完成，这就可以用来读取 DOM 布局并同步触发重绘。</p></li><li><p>useEffect 是 React 中最常用的副作用钩子，允许你执行副作用操作，如数据获取、订阅以及手动更改 DOM。它在 DOM 更新完成后异步触发，这意味着它不会阻塞浏览器的绘制过程。</p></li></ul><blockquote><p>当你需要精确读取 DOM 布局（例如检测元素尺寸或位置）并在浏览器进行绘制之前立即同步更改它时。</p><p>当你需要通过 DOM 操作同步更新状态来避免视觉闪烁。</p></blockquote><br><h3 id="15-14、自定义hooks"><a href="#15-14、自定义hooks" class="headerlink" title="15.14、自定义hooks"></a><strong><font color='#10c300'>15.14、自定义hooks</font></strong></h3><p>自定义Hooks是React Hook的一种模式，用于将组件逻辑提取到可重用的函数中。当你想在多个组件之间共享一些状态逻辑时，自定义Hooks非常有用</p><p><strong>基本规则：</strong></p><blockquote><p><strong>在实现自定义Hooks之前，需要记住两个基本规则：</strong></p><ol><li>自定义Hooks的名称必须以“use”开头（这不是技术上的限制，而是约定俗成的命名规则，可以让你和其他开发者立即识别出哪些函数是钩子）。</li><li>自定义Hooks内部可以调用其他的Hooks。</li></ol></blockquote><p>自定义hooks和普通函数的区别：</p><p>自定义hooks中可以调用其他hooks，而函数不可以</p><p><strong>自定义hooks实战，封装表单处理</strong></p><p>&#x3D;&#x3D;App.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useFormInput <span class="keyword">from</span> <span class="string">&quot;./useFormInput&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> username = <span class="title function_">useFormInput</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   <span class="keyword">const</span> password = <span class="title function_">useFormInput</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;username.value&#125; &#123;password.value&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...username</span>&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...password</span>&#125; /&gt;</span>   </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>      </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;useFormInput.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useFormInput</span>(<span class="params">initValue</span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [value,setValue]=<span class="title function_">useState</span>(initValue);</span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">handleChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> &#123;<span class="attr">value</span>:value,<span class="attr">onChange</span>:handleChange&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useFormInput</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、认识react&quot;&gt;&lt;a href=&quot;#一、认识react&quot; class=&quot;headerlink&quot; title=&quot;一、认识react&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、认识react&lt;/font&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="react18" scheme="http://example.com/tags/react18/"/>
    
  </entry>
  
  <entry>
    <title>Cusros的使用</title>
    <link href="http://example.com/posts/aed47f69.html"/>
    <id>http://example.com/posts/aed47f69.html</id>
    <published>2025-12-01T16:38:45.000Z</published>
    <updated>2025-12-01T16:45:27.172Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、解决限制国内使用"><a href="#一、解决限制国内使用" class="headerlink" title="一、解决限制国内使用"></a><strong><font color='red'>一、解决限制国内使用</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161133203.png" alt="image-20251115161133203"></p><p>原因是美国那边制裁了 claude ，限制咱们国内地区的ip使用，因此我们就无法使用了。</p><p><strong>解决步骤</strong></p><ol><li><p>打开自己的魔法工具（大家懂得）</p></li><li><p>在Cursor编辑器设置代理，ip的端口号设置成魔法工具的端口号</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161504320.png" alt="image-20251115161504320"></p></li><li><p>将http&#x2F;2设置成http&#x2F;1.1即可</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161623548.png" alt="image-20251115161623548"></p></li><li><p>测试</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161703956.png" alt="image-20251115161703956"></p></li></ol><br><h3 id="二、Cusros对话模式模板"><a href="#二、Cusros对话模式模板" class="headerlink" title="二、Cusros对话模式模板"></a><strong><font color='red'>二、Cusros对话模式模板</font></strong></h3><p><strong>提示词技巧总结:</strong></p><ol><li>提供上下文:提及项目语言、框架、业务背景等信息</li><li>分点描述:将复杂需求拆解为具体步骤或要求</li><li>使用技术术语:准确的术语能帮助 AI 更精准理解需求</li><li>明确边界:说明必须保留的现有功能或禁止的实现方式</li><li>示例引导:附上期望输出示例或参考代码风格</li></ol><br><h4 id="2-1、代码生成类"><a href="#2-1、代码生成类" class="headerlink" title="2.1、代码生成类"></a><strong><font color='#10c300'>2.1、代码生成类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请生成一个&#123;功能描述&#125;的&#123;编程语言/框架&#125;实现</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.使用&#123;特定技术/库&#125;</span></span><br><span class="line">2.包含&#123;特定功能点&#125;</span><br><span class="line">3.符合&#123;编码规范/设计模式&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">请生成一个学习计划页面的HTML+CSS+Javascript实现</span><br><span class="line"></span><br><span class="line">[具体要求]:</span><br><span class="line">1.使用Tailwind Css v3和Font Awesome</span><br><span class="line">2.包含任务添加、编辑、删除功能</span><br><span class="line">3.包含日历视图展示学习计划</span><br><span class="line">4.包含学习进度可视化图表</span><br><span class="line">5.符合现代UI设计原则和响应式设计</span><br><span class="line">6.具有平滑的动画和交互效果</span><br></pre></td></tr></table></figure><br><h4 id="2-2、代码修改类"><a href="#2-2、代码修改类" class="headerlink" title="2.2、代码修改类"></a><strong><font color='#10c300'>2.2、代码修改类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请帮我修改&#123;上下文:具体文件/代码片段&#125;，实现&#123;预期功能&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">当前问题</span>]:<span class="link">&#123;现有的错误/不足描述&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.保持&#123;现有功能/结构&#125;不变</span></span><br><span class="line">2.使用&#123;特定方法/技术&#125;&#125;改进</span><br><span class="line">3.修复&#123;具体错误/警告&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">请帮我修改当前的 React 组件，优化列表渲染性能</span><br><span class="line">当前问题:滚动时列表卡顿，存在明显性能问题。要求:</span><br><span class="line">1.保持现有 UI 不变</span><br><span class="line">2.使用 React.memo 和虚拟列表技术优化</span><br><span class="line">3.添加性能监控日志</span><br></pre></td></tr></table></figure><br><h4 id="2-3、代码解释类"><a href="#2-3、代码解释类" class="headerlink" title="2.3、代码解释类"></a><strong><font color='#10c300'>2.3、代码解释类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请解释&#123;代码片段/功能模块&#125;的&#123;具体方面&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">上下文信息</span>]:<span class="link">&#123;相关业务背景/技术栈&#125;</span></span><br><span class="line"></span><br><span class="line">[具体问题]</span><br><span class="line">1.&#123;不理解的语法/逻辑&#125;</span><br><span class="line">2.&#123;特定设计选择的原因]</span><br><span class="line">3.&#123;潜在的问题/优化点&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">请解释这段 Typescript 代码的泛型约束和类型推导逻辑。</span><br><span class="line">上下文:这是一个用于数据验证的工具函数。</span><br><span class="line">具体问题:</span><br><span class="line">1.&lt;T extends object&gt;这里为什么要加 extends object?</span><br><span class="line">2.类型推导是如何工作的?</span><br><span class="line">3.是否存在类型安全隐患?</span><br></pre></td></tr></table></figure><br><h4 id="2-4、流程自动化类"><a href="#2-4、流程自动化类" class="headerlink" title="2.4、流程自动化类"></a><strong><font color='#10c300'>2.4、流程自动化类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请创建一个自动化流程，实现&#123;目标描述&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">操作步骤</span>]:</span><br><span class="line"><span class="link">1.从&#123;数据源&#125;获取&#123;数据类型&#125;</span></span><br><span class="line">2.执行&#123;数据处理/转换操作&#125;</span><br><span class="line">3.将结果保存到&#123;目标位置&#125;</span><br><span class="line">4.触发&#123;后续操作/通知&#125;</span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.使用&#123;特定工具/API&#125;</span></span><br><span class="line">2.添加&#123;错误处理/重试机制&#125;</span><br><span class="line">3.生成&#123;日志/报告&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">请创建一个自动化流程，每天凌晨从 GitHub API 获取仓库星标数，保存到 Goog1e sheets 并生成趋势图。</span><br><span class="line">要求:</span><br><span class="line">1.使用 GitHub REST API V3</span><br><span class="line">2.添加异常处理和邮件通知</span><br><span class="line">3.生成周/月增长趋势图表</span><br></pre></td></tr></table></figure><br><h4 id="2-5、命令行辅助类"><a href="#2-5、命令行辅助类" class="headerlink" title="2.5、命令行辅助类"></a><strong><font color='#10c300'>2.5、命令行辅助类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请提供&#123;操作场景&#125;的&#123;操作系统&#125;命令</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体需求</span>]:</span><br><span class="line"><span class="link">1.&#123;执行的具体操作&#125;</span></span><br><span class="line">2.包含&#123;特定参数/选项&#125;</span><br><span class="line">3.处理&#123;特殊情况/错误&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请提供在 macos 上批量压缩图片的命令行方案。需求:</span><br><span class="line">1.将当前目录下所有 PNG/JPG 图片压缩 50%</span><br><span class="line">2.保留原始文件并添加“-compressed”后缀</span><br><span class="line">3.显示每个文件的压缩前后大小对比</span><br></pre></td></tr></table></figure><br><h3 id="三、Cursor精准上下文指定"><a href="#三、Cursor精准上下文指定" class="headerlink" title="三、Cursor精准上下文指定"></a><strong><font color='red'>三、Cursor精准上下文指定</font></strong></h3><p>在 Cursor 工具里，“上下文（Context）” 可理解为 <strong>让 AI 准确理解需求、辅助编码的 “信息参考范围”</strong> ，是 AI 读懂代码、精准响应的关键!</p><h4 id="3-1-Codebase-Indexing-代码库索引"><a href="#3-1-Codebase-Indexing-代码库索引" class="headerlink" title="3.1 Codebase Indexing 代码库索引"></a><strong><font color='#10c300'>3.1 Codebase Indexing 代码库索引</font></strong></h4><h5 id="1）、概念和作用"><a href="#1）、概念和作用" class="headerlink" title="1）、概念和作用"></a><strong><font color='cornflowerblue'>1）、概念和作用</font></strong></h5><p>打开项目时，每个 Cursor 实例都将初始化该工作区的索引。初始索引设置完成后，Cursor 将自动为添加到工作区的任何新文件编制索引，以使您的代码库上下文保持最新：</p><ul><li>快速 “读懂” 你的项目结构（哪些是工具文件、哪些是业务逻辑）</li><li>定位相关代码（如搜索 <code>getUser</code> 时，知道优先查 <code>userService.js</code>）</li><li>理解代码关系（如 <code>Order</code> 类和 <code>Product</code> 类的关联）</li></ul><p><strong>Cursor 中的作用</strong>：AI 分析索引内容后，生成代码时会更贴合项目实际（如使用已有工具函数、遵循命名规范）。</p><br><h5 id="2）、代码库索引配置和示例"><a href="#2）、代码库索引配置和示例" class="headerlink" title="2）、代码库索引配置和示例"></a><strong><font color='cornflowerblue'>2）、代码库索引配置和示例</font></strong></h5><p>代码库索引的状态位于cursor settings &gt; Indexing &amp; Docs</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114004719325.png" alt="image-20251114004719325"></p><h5 id="3-、忽略文件配置"><a href="#3-、忽略文件配置" class="headerlink" title="3)、忽略文件配置"></a><strong><font color='cornflowerblue'>3)、忽略文件配置</font></strong></h5><p>Cursor 读取项目的代码库并为其编制索引以支持其功能。可以通过将.cursorignore 文件添加到根目录来控制<br>哪些文件被忽略和Cursor限制访问。</p><ul><li>提升索引速度：排除大型依赖、生成文件(如node_modu1es、dist)</li><li>避免干扰：某些配置文件可能包含敏感信息或与当前任务无关</li></ul><p>配置.cursorignore忽略文件的两种方法：</p><ol><li><p>自己创建 .cursorignore 文件添加到代码库目录的根目录下，并列出要忽略的目录和文件</p></li><li><p>使用cursor配置快捷创建忽略文件&#96;cursorsetting&gt;indexing&gt;Configure ignored files</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251113233732232.png" alt="image-20251113233732232"></p></li></ol><br><h4 id="3-2、Rules规则"><a href="#3-2、Rules规则" class="headerlink" title="3.2、Rules规则"></a><strong><font color='#10c300'>3.2、Rules规则</font></strong></h4><h5 id="1）规则介绍"><a href="#1）规则介绍" class="headerlink" title="1）规则介绍"></a><strong><font color='cornflowerblue'>1）规则介绍</font></strong></h5><p>Rules是给Cursor AI功能(规则适用于Chat和Cmd K)生成结果添加规则和限制，让 AI生成的代码贴合团队规范，减少人工二次修改成本，主要的作用如下:</p><ul><li>可约束代码风格(如强制用驼峰命名、要求函数必须写注释)</li><li>能限定技术选型(如禁止使用某老旧库、优先用项目指定工具类)</li><li>提前指定核心参数(如提前设置连接数据库的地址和账号密码等)</li></ul><table><thead><tr><th>维度</th><th>项目规则(Project Rules)</th><th>用户规则(User Rules)</th></tr></thead><tbody><tr><td>作用范围</td><td>仅对当前项目生效，团队成员共享相同规则</td><td>对所有项目生效，个人专属配置</td></tr><tr><td>存储位置</td><td>项目根目录下的.cursor&#x2F;rules&#x2F;随意.mdc 文件</td><td>用户配置目录(如~&#x2F;.cursor&#x2F;ru1es)</td></tr><tr><td>同步方式</td><td>随项目代码提交到版本库(如 Git)，团队共享</td><td>仅本地生效，不随项目同步</td></tr><tr><td>适用场景</td><td>统一团队编码规范(如函数注释格式、依赖版本)</td><td>个人习惯(如快捷键、AI 响应风格)</td></tr></tbody></table><p><font color='orange'>注意：项目规则和用户规则同时存在并且规则冲突，项目规则优先级更高–</font></p><br><h5 id="2）项目规则配置"><a href="#2）项目规则配置" class="headerlink" title="2）项目规则配置"></a><strong><font color='cornflowerblue'>2）项目规则配置</font></strong></h5><p><strong>a、项目下创建规则文件的两种方法</strong></p><ol><li>在项目根目录创建文件夹<code>.cursor/rules/随意命名.mdc</code></li><li>快捷命令方式创建 ctr1+ shift +P &gt; “New Cursor Rule”<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114001431714.png" alt="image-20251114001431714"></li></ol><br><p><strong>b、编写项目规则文件</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">alwaysApply: true</span><br><span class="line">description: &quot;团队前端项目规范&quot;</span><br><span class="line"><span class="section">priority: 1000</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 代码风格</span></span><br><span class="line"><span class="bullet">1.</span> 函数必须包含 JSDoc 注释</span><br><span class="line"><span class="bullet">2.</span> 禁止使用<span class="code">`var`</span>,  统一使用 <span class="code">`const`</span>/<span class="code">`let`</span></span><br><span class="line"><span class="bullet">3.</span> 函数命名必须添加 zwf<span class="emphasis">_前缀，例如:zwf_</span>login</span><br><span class="line"></span><br><span class="line"><span class="section"># 技术选型</span></span><br><span class="line"><span class="bullet">-</span> 优先使用项目内已有的工具函数(如 <span class="code">`uti1s/request`</span>)</span><br><span class="line"><span class="bullet">-</span> 禁止引入低版本的 1odash(&lt;4.0.0)</span><br></pre></td></tr></table></figure><br><p><strong>c、项目规则文件生效测试</strong></p><p><code>ctrl+k</code>调出内联智能输入<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114002810947.png" alt="image-20251114002810947"></p><br><h5 id="3）用户规则配置"><a href="#3）用户规则配置" class="headerlink" title="3）用户规则配置"></a><strong><font color='cornflowerblue'>3）用户规则配置</font></strong></h5><p><code>ctrl+shift+j</code>快捷打开Cursor Settings，用户规则不支持 MDC，它们只是纯文本。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114003925641.png" alt="image-20251114003925641"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114003947859.png" alt="image-20251114003947859"></p><p>实现每行代码都用中文注释了</p><br><h4 id="3-3、mdc语法了解"><a href="#3-3、mdc语法了解" class="headerlink" title="3.3、mdc语法了解"></a><strong><font color='#10c300'>3.3、mdc语法了解</font></strong></h4><p>Cursor 的 MDC（Markdown with Cursor）语法是专门为编写项目规则设计的轻量级格式，它结合了 Markdown 的可读性和元数据配置能力。接下来，我们来说明下mdc文件语法。</p><h5 id="1）-MDC-文件组成部分"><a href="#1）-MDC-文件组成部分" class="headerlink" title="1） MDC 文件组成部分"></a><strong><font color='cornflowerblue'>1） MDC 文件组成部分</font></strong></h5><ul><li>前置元数据（Frontmatter）<ul><li>用 <code>---</code> 包裹的 YAML 格式配置</li><li>定义规则的基本属性（如作用范围、优先级）</li></ul></li><li>规则内容（Markdown 正文）<ul><li>用 Markdown 语法写具体规则</li></ul></li></ul><br><h5 id="2）前置元数据"><a href="#2）前置元数据" class="headerlink" title="2）前置元数据"></a><strong><font color='cornflowerblue'>2）前置元数据</font></strong></h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 官方约定字段（推荐用，AI 更易理解）</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;前端项目规则&quot;</span></span><br><span class="line"><span class="attr">globs:</span> <span class="string">&quot;src/**/*.tsx&quot;</span></span><br><span class="line"><span class="attr">priority:</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义字段（自己或团队约定含义）</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">&quot;技术团队&quot;</span></span><br><span class="line"><span class="attr">review_date:</span> <span class="string">&quot;2025-06-04&quot;</span></span><br><span class="line"><span class="attr">special_rule:</span> <span class="string">&quot;仅周一至周五生效&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>字段</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>description</code></td><td>描述规则用途，指导 AI 如何应用规则</td><td><code>&quot;前端组件编码规范&quot;</code></td></tr><tr><td><code>globs</code></td><td>指定规则生效的文件范围（支持 glob 语法）</td><td><code>&quot;src/**/*.&#123;js,ts,jsx&#125;&quot;</code></td></tr><tr><td><code>priority</code></td><td>规则优先级（数值越大越优先），解决规则冲突</td><td><code>1000</code></td></tr><tr><td><code>version</code></td><td>规则版本号（可选）</td><td><code>&quot;1.0.0&quot;</code></td></tr></tbody></table><br><h5 id="3）规则内容（Markdown-正文）"><a href="#3）规则内容（Markdown-正文）" class="headerlink" title="3）规则内容（Markdown 正文）"></a><strong><font color='cornflowerblue'>3）规则内容（Markdown 正文）</font></strong></h5><p>用 Markdown 的标题、列表、代码块等语法写具体规则，常见结构：</p><p><strong>代码风格规则（最常用）</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一、代码风格</span></span><br><span class="line"><span class="bullet">1.</span> 函数必须包含 JSDoc 注释  </span><br><span class="line"><span class="bullet">   -</span> 至少包含 <span class="code">`@param`</span> 和 <span class="code">`@return`</span> 描述  </span><br><span class="line"><span class="bullet">2.</span> 变量命名必须使用驼峰命名法（camelCase）  </span><br><span class="line"><span class="bullet">3.</span> 每行代码长度不超过 120 个字符  </span><br><span class="line"></span><br><span class="line"><span class="section"># 二、技术选型</span></span><br><span class="line"><span class="bullet">-</span> 禁止直接使用原生 fetch，必须通过项目封装的 request 工具  </span><br><span class="line"><span class="bullet">-</span> 优先使用 React Hooks 而非 Class 组件  </span><br></pre></td></tr></table></figure><p><strong>安全约束规则</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 安全规范</span></span><br><span class="line"><span class="bullet">1.</span> 禁止使用 eval() 函数  </span><br><span class="line"><span class="bullet">2.</span> SQL 查询必须使用参数化查询，防止注入攻击  </span><br><span class="line"><span class="bullet">3.</span> 敏感信息（如 API 密钥）必须从环境变量读取  </span><br></pre></td></tr></table></figure><p><strong>特殊语法：引用项目文件</strong></p><p>用 <code>@file</code> 引用项目内的配置文件，让 AI 参考：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 工具链配置</span></span><br><span class="line"><span class="bullet">1.</span> ESLint 规则必须符合 @file .eslintrc.js  </span><br><span class="line"><span class="bullet">2.</span> 测试用例必须遵循 Jest 框架规范  </span><br></pre></td></tr></table></figure><br><h5 id="4）完整示例（TypeScript-项目规则）"><a href="#4）完整示例（TypeScript-项目规则）" class="headerlink" title="4）完整示例（TypeScript 项目规则）"></a><strong><font color='cornflowerblue'>4）完整示例（TypeScript 项目规则）</font></strong></h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">description: &quot;TypeScript 项目编码规范&quot;</span><br><span class="line">globs: &quot;src/<span class="strong">**/<span class="emphasis">*.ts&quot;</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">priority: 1000</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">---</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 一、基础规范</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">1. 所有文件必须使用 UTF-8 编码  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">2. 统一使用 2 空格缩进  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 二、类型约束</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">1. 禁止使用隐式 any 类型  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">   - 示例：`const num: number = 123`（显式）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">   - 禁止：`const num = 123`（隐式）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">2. 接口命名必须以 `I` 开头（如 `interface IUser`）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 三、项目约束</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">- 所有 HTTP 请求必须通过 @file src/utils/request.ts 封装的工具  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">- 状态管理必须使用 Redux Toolkit，禁止直接修改 state  </span></span></span><br></pre></td></tr></table></figure><br><h4 id="3-4、-符号"><a href="#3-4、-符号" class="headerlink" title="3.4、@ 符号"></a><strong><font color='#10c300'>3.4、@ 符号</font></strong></h4><p>在 Cursor 中使用 @ 符号在聊天中引用代码、文件、文档和其他上下文的指南，直接更具体的指定上下文环境！</p><p>以下是所有可用 @ 符号的列表：</p><ul><li>@Files &amp; Folders - 引用项目中的特定文件或文件夹 ✅</li><li>@Docs- 访问文档和指南✅</li><li>@Git- 访问 git 历史记录和更改</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013559213.png" alt="image-20251114013559213"></p><h5 id="1）-Files-Folders-文件和文件夹"><a href="#1）-Files-Folders-文件和文件夹" class="headerlink" title="1）@Files &amp; Folders 文件和文件夹"></a><strong><font color='cornflowerblue'>1）@Files &amp; Folders 文件和文件夹</font></strong></h5><p>选择 <code>@Files &amp; Folders</code>，然后选择要搜索的文件名即可引用整个文件。你也可以将侧边栏中的文件直接拖拽到 Agent 中作为上下文。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013919773.png" alt="image-20251114013919773"></p><p>选择文件夹后，输入 “&#x2F;” 以继续下钻并查看所有子文件夹。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013934820.png" alt="image-20251114013934820"></p><br><h5 id="2）-Docs"><a href="#2）-Docs" class="headerlink" title="2）@Docs"></a><strong><font color='cornflowerblue'>2）@Docs</font></strong></h5><p><code>@Docs</code> 功能可让你用文档来辅助写代码</p><p><strong>添加文档</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014157560.png" alt="image-20251114014157560"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014346829.png" alt="image-20251114014346829"></p><br><p><strong>提问</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014547119.png" alt="image-20251114014547119"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、解决限制国内使用&quot;&gt;&lt;a href=&quot;#一、解决限制国内使用&quot; class=&quot;headerlink&quot; title=&quot;一、解决限制国内使用&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、解决限制国内使用&lt;/font&gt;&lt;/strong&gt;&lt;/h3</summary>
      
    
    
    
    <category term="工具" scheme="http://example.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Cursor" scheme="http://example.com/tags/Cursor/"/>
    
    <category term="AI" scheme="http://example.com/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>UniApp多端开发</title>
    <link href="http://example.com/posts/57fa3c28.html"/>
    <id>http://example.com/posts/57fa3c28.html</id>
    <published>2025-12-01T16:29:04.000Z</published>
    <updated>2025-12-01T16:38:00.283Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、uniApp生命周期"><a href="#一、uniApp生命周期" class="headerlink" title="一、uniApp生命周期 "></a><strong><font color='red'>一、uniApp生命周期 </font></strong></h3><h4 id="1-1、应用生命周期"><a href="#1-1、应用生命周期" class="headerlink" title="1-1、应用生命周期"></a><strong><font color='#10c300'>1-1、应用生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台兼容</th></tr></thead><tbody><tr><td align="left">onLaunch</td><td align="left">当<code>uni-app</code> 初始化完成时触发（全局只触发一次），参数为应用启动参数，同 <a href="https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync">uni.getLaunchOptionsSync</a> 的返回值</td><td align="left"></td></tr><tr><td align="left">onShow</td><td align="left">当 <code>uni-app</code> 启动，或从后台进入前台显示，参数为应用启动参数，同 <a href="https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync">uni.getLaunchOptionsSync</a> 的返回值</td><td align="left"></td></tr><tr><td align="left">onHide</td><td align="left">当 <code>uni-app</code> 从前台进入后台</td><td align="left"></td></tr><tr><td align="left">onError</td><td align="left">当 <code>uni-app</code> 报错时触发</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onUniNViewMessage</td><td align="left">对 <code>nvue</code> 页面发送的数据进行监听，可参考 <a href="https://uniapp.dcloud.io/tutorial/nvue-api?id=communication">nvue 向 vue 通讯</a></td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onUnhandledRejection</td><td align="left">对未处理的 Promise 拒绝事件监听函数（2.8.1+ app-uvue 暂不支持）</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onPageNotFound</td><td align="left">页面不存在监听函数</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onThemeChange</td><td align="left">监听系统主题变化</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onLastPageBackPress</td><td align="left">最后一个页面按下Android back键，常用于自定义退出</td><td align="left">app-uvue-android 3.9+</td></tr><tr><td align="left">onExit</td><td align="left">监听应用退出</td><td align="left">app-uvue-android 3.9+</td></tr></tbody></table><p>应用生命周期仅可在<code>App.vue</code>中监听，在其它页面监听无效。</p><br><h4 id="1-2、面生命周期"><a href="#1-2、面生命周期" class="headerlink" title="1-2、面生命周期"></a><strong><font color='#10c300'>1-2、面生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台差异说明</th></tr></thead><tbody><tr><td align="left">onInit</td><td align="left">监听页面初始化，其参数同 onLoad 参数，为上个页面传递的数据，参数类型为 Object（用于页面传参），触发时机早于 onLoad</td><td align="left">百度小程序</td></tr><tr><td align="left">onLoad</td><td align="left">监听页面加载，该钩子被调用时，响应式数据、计算属性、方法、侦听器、props、slots 已设置完成，其参数为上个页面传递的数据，参数类型为 Object（用于页面传参）</td><td align="left"></td></tr><tr><td align="left">onShow</td><td align="left">监听页面显示，页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面</td><td align="left"></td></tr><tr><td align="left">onReady</td><td align="left">监听页面初次渲染完成，此时组件已挂载完成，DOM 树($el)已可用，注意如果渲染速度快，会在页面进入动画完成前触发</td><td align="left"></td></tr><tr><td align="left">onHide</td><td align="left">监听页面隐藏</td><td align="left"></td></tr><tr><td align="left">onUnload</td><td align="left">监听页面卸载</td><td align="left"></td></tr><tr><td align="left">onResize</td><td align="left">监听窗口尺寸变化</td><td align="left">App、微信小程序、快手小程序</td></tr><tr><td align="left">onPullDownRefresh</td><td align="left">监听用户下拉动作，一般用于下拉刷新</td><td align="left"></td></tr><tr><td align="left">onReachBottom</td><td align="left">页面滚动到底部的事件（不是scroll-view滚到底），常用于下拉下一页数据。具体见下方注意事项</td><td align="left"></td></tr><tr><td align="left">onTabItemTap</td><td align="left">点击 tab 时触发，参数为Object，具体见下方注意事项</td><td align="left">微信小程序、QQ小程序、支付宝小程序、百度小程序、H5、App、快手小程序、京东小程序</td></tr><tr><td align="left">onShareAppMessage</td><td align="left">用户点击右上角分享</td><td align="left">微信小程序、QQ小程序、支付宝小程序、抖音小程序、飞书小程序、快手小程序、京东小程序</td></tr><tr><td align="left">onPageScroll</td><td align="left">监听页面滚动，参数为Object</td><td align="left">nvue不支持</td></tr><tr><td align="left">onNavigationBarButtonTap</td><td align="left">监听原生标题栏按钮点击事件，参数为Object</td><td align="left">App、H5</td></tr><tr><td align="left">onBackPress</td><td align="left">监听页面返回，返回 event &#x3D; {from:backbutton、 navigateBack} ，backbutton 表示来源是左上角返回按钮或 android 返回键；navigateBack表示来源是 uni.navigateBack；<a href="https://uniapp.dcloud.net.cn/tutorial/page.html#onbackpress">详见</a></td><td align="left">app、H5、支付宝小程序</td></tr><tr><td align="left">onNavigationBarSearchInputChanged</td><td align="left">监听原生标题栏搜索输入框输入内容变化事件</td><td align="left">App、H5</td></tr><tr><td align="left">onNavigationBarSearchInputConfirmed</td><td align="left">监听原生标题栏搜索输入框搜索事件，用户点击软键盘上的“搜索”按钮时触发。</td><td align="left">App、H5</td></tr><tr><td align="left">onNavigationBarSearchInputClicked</td><td align="left">监听原生标题栏搜索输入框点击事件（pages.json 中的 searchInput 配置 disabled 为 true 时才会触发）</td><td align="left">App、H5</td></tr><tr><td align="left">onShareTimeline</td><td align="left">监听用户点击右上角转发到朋友圈</td><td align="left">微信小程序</td></tr><tr><td align="left">onAddToFavorites</td><td align="left">监听用户点击右上角收藏</td><td align="left">微信小程序、QQ小程序</td></tr></tbody></table><h5 id="1）Vue2-页面及组件生命周期流程图"><a href="#1）Vue2-页面及组件生命周期流程图" class="headerlink" title="1）Vue2 页面及组件生命周期流程图"></a><strong><font color='cornflowerblue'>1）Vue2 页面及组件生命周期流程图</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/uni-app-lifecycle-vue2.jpg" alt="img"></p><br><h5 id="Vue3-页面及组件生命周期流程图"><a href="#Vue3-页面及组件生命周期流程图" class="headerlink" title="Vue3 页面及组件生命周期流程图"></a><strong><font color='cornflowerblue'>Vue3 页面及组件生命周期流程图</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/uni-app-lifecycle-vue3.jpg" alt="img"></p><br><h4 id="1-3、组件生命周期"><a href="#1-3、组件生命周期" class="headerlink" title="1-3、组件生命周期"></a><strong><font color='#10c300'>1-3、组件生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台差异说明</th></tr></thead><tbody><tr><td align="left">beforeCreate</td><td align="left">在实例初始化之前被调用。</td><td align="left"></td></tr><tr><td align="left">created</td><td align="left">在实例创建完成后被立即调用。</td><td align="left"></td></tr><tr><td align="left">beforeMount</td><td align="left">在挂载开始之前被调用。</td><td align="left"></td></tr><tr><td align="left">mounted</td><td align="left">挂载到实例上去之后调用。注意：此处并不能确定子组件被全部挂载，如果需要子组件完全挂载之后在执行操作可以使用<code>$nextTick</code></td><td align="left"></td></tr><tr><td align="left">beforeUpdate</td><td align="left">数据更新时调用，发生在虚拟 DOM 打补丁之前。</td><td align="left">仅H5平台支持</td></tr><tr><td align="left">updated</td><td align="left">由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</td><td align="left">仅H5平台支持</td></tr><tr><td align="left">beforeDestroy</td><td align="left">实例销毁之前调用。在这一步，实例仍然完全可用。</td><td align="left"></td></tr><tr><td align="left">destroyed</td><td align="left">Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</td><td align="left"></td></tr></tbody></table><br><h3 id="二、多端调试环境配置"><a href="#二、多端调试环境配置" class="headerlink" title="二、多端调试环境配置 "></a><strong><font color='red'>二、多端调试环境配置 </font></strong></h3><h4 id="2-1、安卓真机调试配置"><a href="#2-1、安卓真机调试配置" class="headerlink" title="2-1、安卓真机调试配置"></a><strong><font color='#10c300'>2-1、安卓真机调试配置</font></strong></h4><p><strong>以小米手机为例：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604101545567.png" alt="image-20250604101545567"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604102525380.png" alt="image-20250604102525380"></p><br><h4 id="2-2、IOS真机调试配置"><a href="#2-2、IOS真机调试配置" class="headerlink" title="2-2、IOS真机调试配置"></a><strong><font color='#10c300'>2-2、IOS真机调试配置</font></strong></h4><p>2022年9月，因收到苹果公司警告，目前开发者已无法在iOS真机设备使用未签名的标准基座，所以现在要运行到 IOS ，也需要进行签名。Windows系统，开发者就可以使用三方工具（如爱思助手）对标准基座签名。</p><p><strong><code>注意：使用Apple ID签名的IPA文件有效期为7天，7天后需要重签。如果需要“自动续签”功能，IOS手机需要越狱</code></strong></p><h5 id="1）前期准备"><a href="#1）前期准备" class="headerlink" title="1）前期准备"></a><strong><font color='cornflowerblue'>1）前期准备</font></strong></h5><ul><li><p>HBuilder 3.6.9+(一般我会把软件更新到最新版，版本跟不上容易出现问题)</p></li><li><p>ios设备</p></li><li><p>原装数据线</p></li><li><p>爱思助手软件（还有iTunes工具，下载爱思助手后会自动安装该工具）</p></li><li><p>安装基座：在HBuildex安装目录下面的plugins\launcher\base 目录下找到安装的ios基座：iPhone_base.ipa</p><p>（如果没有需要安装），后面添加IPA文件的时候用到。</p></li></ul><br><h5 id="2）操作步骤"><a href="#2）操作步骤" class="headerlink" title="2）操作步骤"></a><strong><font color='cornflowerblue'>2）操作步骤</font></strong></h5><ul><li><p><strong>下载爱思助手</strong>，打开爱思助手并用数据线连接ios设备。</p></li><li><p><strong>进行签名：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604111911639.png" alt="image-20250604111911639"></p><p>使用Apple ID 签名，依次点击使用Apple ID签名—&gt;添加Apple ID—&gt; 输入Apple ID和密码（账号最好是邮箱， 如果 Apple ID 账号是手机号码，在签名输入 ID 账号时，手机号前面需要加 86。例如：8615012345678。 ）—&gt;确定。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604113014783.png" alt="image-20250604113014783"></p><p>如果签名成功，打开已签名IPA的位置，找到签名后的ipa文件，<strong><code>并命名为iPhone_base_signed.ipa</code></strong>，然后将其拷贝到HBuilderX安装目录\plugins\launcher\base</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121112902666-19879140.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121113924730-1273769980.png" alt="img"></p><p>打开HBuilderX，选择要运行的项目，点击工具栏运行图标，选择【运行到iOS App基座】</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121113938712-386846139.png" alt="img"></p><p>如果没运行出来，可能是由于 iphone 没有开启 “开发者模式”，需要自己手动将开发者模式打开。</p></li><li><p><strong>打开开发者模式</strong></p><p>设置—&gt;隐私与安全—&gt;开发者模式 ，打开后会提示重启手机。</p><p><strong>如果你的ios系统。是 16 以上，可能在 设置—隐私与安全 里面没有 “开发者模式这一项” ，需要利用 爱思助手 来将选项打开</strong></p><p>打开爱思助手 工具箱—&gt;虚拟定位， 随便输入一个经纬度，点击修改 </p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604113829151.png" alt="image-20250604113829151"></p><p>确定开发者模式已开启 ：在手机上，设置—隐私与安全性 里面，就能看到有”开发者选项“了，开启，然后提示重启手机。完成即可。</p></li><li><p><strong>运行ios基座遇到的问题</strong></p><p>下图运行到ios基座成功</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121114101865-331084701.png" alt="img"></p><p>1.ios上面安装了HBuilder调试基座，但是移动端未出现运行app的界面，点击安装的HBuilder调试基座，弹出 需要互联网连接以验证是否信任开发者iphone…..，此时确保网络是否链接是否通畅，如果设备已经连接到互联网，仍然没解决，我选择了重启设备，解决了上述问题；</p><p>2.重启设备之后，再次点击HBuilder调试基座，提示不收信任的开发者，此时在设备上找到设置&gt;通用&gt;vpn与设备管理这个选项，可以看到我们的开发者APP当前是不受信任的 我们只需点开，信任当前开发APP就可以了</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604114032005.png" alt="image-20250604114032005"></p><p>再重新打开这个APP，就可以发现已经可以进行iOS真机预览了。</p></li></ul><br><h4 id="2-3、微信小程序调试配置"><a href="#2-3、微信小程序调试配置" class="headerlink" title="2-3、微信小程序调试配置"></a><strong><font color='#10c300'>2-3、微信小程序调试配置</font></strong></h4><br><h4 id="2-4、支付宝小程序调试配置"><a href="#2-4、支付宝小程序调试配置" class="headerlink" title="2-4、支付宝小程序调试配置"></a><strong><font color='#10c300'>2-4、支付宝小程序调试配置</font></strong></h4><br><h3 id="三、多端调试环境配置"><a href="#三、多端调试环境配置" class="headerlink" title="三、多端调试环境配置 "></a><strong><font color='red'>三、多端调试环境配置 </font></strong></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、uniApp生命周期&quot;&gt;&lt;a href=&quot;#一、uniApp生命周期&quot; class=&quot;headerlink&quot; title=&quot;一、uniApp生命周期 &quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、uniApp生命周期 &lt;/font&gt;&lt;/s</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="Uniapp" scheme="http://example.com/tags/Uniapp/"/>
    
    <category term="多端开发" scheme="http://example.com/tags/%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>VMware17 Pro安装CentOS 8</title>
    <link href="http://example.com/posts/f6649ba0.html"/>
    <id>http://example.com/posts/f6649ba0.html</id>
    <published>2025-11-25T14:29:48.000Z</published>
    <updated>2025-12-01T16:36:44.997Z</updated>
    
    <content type="html"><![CDATA[<p><strong>软件版本</strong></p><blockquote><p>VMware 17 Pro  17.5.2 build-23775571</p><p>CentOS-8.1.1911-x86_64-dvd1.iso</p></blockquote><h3 id="一、-创建虚拟机"><a href="#一、-创建虚拟机" class="headerlink" title="一、 创建虚拟机"></a><strong><font color='red'>一、 创建虚拟机</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234224316.png" alt="image-20251021234224316"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234501665.png" alt="image-20251021234501665"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234533907.png" alt="image-20251021234533907"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234601087.png" alt="image-20251021234601087"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234734894.png" alt="image-20251021234734894"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234936363.png" alt="image-20251021234936363"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021235013900.png" alt="image-20251021235013900"></p><br><h3 id="二、-配置虚拟机"><a href="#二、-配置虚拟机" class="headerlink" title="二、 配置虚拟机"></a><strong><font color='red'>二、 配置虚拟机</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021235209438.png" alt="image-20251021235209438"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022000540363.png" alt="image-20251022000540363"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022000621830.png" alt="image-20251022000621830"></p><h4 id="虚拟化处于禁用状态"><a href="#虚拟化处于禁用状态" class="headerlink" title="虚拟化处于禁用状态"></a><strong><font color='#10c300'>虚拟化处于禁用状态</font></strong></h4><p>AMD处理器提示AMD-V处于禁用状态。</p><p>Intel处理器提示ntel VT-x处于禁用状态。</p><p>因为我是AMD的处理器以及ROG的主板，因为这里主要操作怎么在ROG主板的BIOS上开启虚拟化技术</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022232519026.png" alt="image-20251022232519026"></p><p><strong>开启步骤</strong></p><ol><li>电脑开启的时候一直按F2或Del进入BIOS界面</li><li>找到Advanced进入CPU Configguration中找到SVM Mode将其状态改成Enabled</li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022234218884.png" alt="image-20251022234218884"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022234544337.png" alt="image-20251022234544337"></p><br><h3 id="三、-系统安装引导界面"><a href="#三、-系统安装引导界面" class="headerlink" title="三、 系统安装引导界面"></a><strong><font color='red'>三、 系统安装引导界面</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/5e9856fd57ad3cd601de474ed0a9d59b.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/da83ad02a5d26c3f865a68503efcbe2c.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/71e0855efe957df4c85e67e7642a1538.png" alt="img"></p><br><h3 id="四、-定制化内容"><a href="#四、-定制化内容" class="headerlink" title="四、 定制化内容"></a><strong><font color='red'>四、 定制化内容</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022001114895.png" alt="image-20251022001114895"></p><br><h4 id="4-1、调整时间差"><a href="#4-1、调整时间差" class="headerlink" title="4.1、调整时间差"></a><strong><font color='#10c300'>4.1、调整时间差</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022003530905.png" alt="image-20251022003530905"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022003918721.png" alt="image-20251022003918721"></p><br><h4 id="4-2、配置磁盘分区"><a href="#4-2、配置磁盘分区" class="headerlink" title="4.2、配置磁盘分区"></a><strong><font color='#10c300'>4.2、配置磁盘分区</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023215033391.png" alt="image-20251023215033391"></p><br><h5 id="1）默认磁盘分区配置"><a href="#1）默认磁盘分区配置" class="headerlink" title="1）默认磁盘分区配置"></a><strong><font color='cornflowerblue'>1）默认磁盘分区配置</font></strong><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022004121785.png" alt="image-20251022004121785"></h5><br><h5 id="2）自定义磁盘分区"><a href="#2）自定义磁盘分区" class="headerlink" title="2）自定义磁盘分区"></a><strong><font color='cornflowerblue'>2）自定义磁盘分区</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023215120757.png" alt="image-20251023215120757"></p><br><p><strong><font color='orange'>a、手动添加分区</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023220443302.png" alt="image-20251023220443302"></p><br><p><strong><font color='orange'>b、添加 boot 区 给上 1G 容量后点击添加挂载点</font></strong></p><p>挂载点<code>/boot</code>是系统启动的引导分区</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023220707214.png" alt="image-20251023220707214"></p><p>文件系统默认选择ext4，即第四代文件扩展系统，其容量可以达到EB（GB→TB→EB）单个文件容量可以达到16TB。</p><p>我们选择xfs文件系统，这是一个高性能日志文件系统，特别擅长处理大文件，64位系统中最大能够支持8EB的文件系统，目前性能最强。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023224710364.png" alt="image-20251023224710364"></p><br><p><strong><font color='orange'>c、添加 swap 交换分区</font></strong></p><p>swap交换分区：</p><p>​在硬盘中单独创建一块分区来，单独去作为扩展内存。就是我们在配置虚拟机的时候设置的那个内存不足时，则可以将swap交换分区作为裸战内存来使用（我们当时是分了8G内存）。</p><p>执行的一个过程：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221045499.png" alt="image-20251023221045499"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221112598.png" alt="image-20251023221112598"></p><br><p><strong><font color='orange'>d、配置根目录<code>/</code></font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221245884.png" alt="image-20251023221245884"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221339058.png" alt="image-20251023221339058"></p><br><p><strong><font color='orange'>e、分区配置完毕，点击完成，然后点击弹窗的接受更改</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221441203.png" alt="image-20251023221441203"></p><br><h4 id="4-3、配置kdump"><a href="#4-3、配置kdump" class="headerlink" title="4.3、配置kdump"></a><strong><font color='#10c300'>4.3、配置kdump</font></strong></h4><p>关闭 kdump 本身虚拟机内存就不够，他会吃掉一部分内存，我们尽量省一点</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222056185.png" alt="image-20251023222056185"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221802804.png" alt="image-20251023221802804"></p><br><h4 id="4-4、配置网络和主机名"><a href="#4-4、配置网络和主机名" class="headerlink" title="4.4、配置网络和主机名"></a><strong><font color='#10c300'>4.4、配置网络和主机名</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222257482.png" alt="image-20251023222257482"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222457521.png" alt="image-20251023222457521"></p><br><h4 id="4-5、开始安装"><a href="#4-5、开始安装" class="headerlink" title="4.5、开始安装"></a><strong><font color='#10c300'>4.5、开始安装</font></strong></h4><h5 id="1）设置Root用户密码"><a href="#1）设置Root用户密码" class="headerlink" title="1）设置Root用户密码"></a><strong><font color='cornflowerblue'>1）设置Root用户密码</font></strong></h5><p>默认有个root用户，也就是超级管理员</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162343490.png" alt="image-20251025162343490"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162349989.png" alt="image-20251025162349989"></p><br><h5 id="2）创建用户"><a href="#2）创建用户" class="headerlink" title="2）创建用户"></a><strong><font color='cornflowerblue'>2）创建用户</font></strong></h5><p>新创建了一个zhb用户</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162417872.png" alt="image-20251025162417872"></p><p>等待安装</p><br><h4 id="4-6、虚拟机的使用引导界面"><a href="#4-6、虚拟机的使用引导界面" class="headerlink" title="4.6、虚拟机的使用引导界面"></a><strong><font color='#10c300'>4.6、虚拟机的使用引导界面</font></strong></h4><p>重启进入引导界面</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163325360.png" alt="image-20251025163325360"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163408100.png" alt="image-20251025163408100"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163426606.png" alt="image-20251025163426606"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163508011.png" alt="image-20251025163508011"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163545397.png" alt="image-20251025163545397"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163555338.png" alt="image-20251025163555338"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163609171.png" alt="image-20251025163609171"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163627645.png" alt="image-20251025163627645"></p><p>安装完成</p><br><h3 id="五、-切换-root-用户"><a href="#五、-切换-root-用户" class="headerlink" title="五、 切换 root 用户"></a><strong><font color='red'>五、 切换 root 用户</font></strong></h3><p>当前登录的用户是刚刚创建的用户，权限会缺少，所以使用 root，修改一些内容更加方便</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165233836.png" alt="image-20251025165233836"><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165459175.png" alt="image-20251025165459175"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165518127.png" alt="image-20251025165518127"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165706320.png" alt="image-20251025165706320"></p><br><h3 id="六、-网络配置"><a href="#六、-网络配置" class="headerlink" title="六、 网络配置"></a><strong><font color='red'>六、 网络配置</font></strong></h3><p>linux系统下，查看网络配置IP地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>windows系统下，查看网络配置IP地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure><p>测试你的计算机与目标主机（可以是域名或IP地址）之间的连通性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping + ip地址</span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>VMware提供了三种网络连接模式：</font></strong></p><ol><li>桥接模式：虚拟机直接连接外部物理网络的模式，主机起到了网桥的作用。在这种模式下，虚拟机可以直接访问外部网络，并且对外部网络是可见的</li><li>NAT模式：虚拟机和主机构建一个专用网络，并通过虚拟网络地址转换（NAT）设备对IP进行转换。虚拟机通过共享主机IP可以访问外部网络，但外部网络无法访问虚拟机。</li><li>仅主机模式：虚拟机只与主机共享一个专用网络，与外部网络无法通信</li></ol><p><strong><font color='orange'>获取到虚拟机的ip</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201225649883.png" alt="image-20251201225649883"></p><br><h4 id="6-1、虚拟机修改静态ip"><a href="#6-1、虚拟机修改静态ip" class="headerlink" title="6.1、虚拟机修改静态ip"></a><strong><font color='#10c300'>6.1、虚拟机修改静态ip</font></strong></h4><h5 id="1）为什么要修改静态ip"><a href="#1）为什么要修改静态ip" class="headerlink" title="1）为什么要修改静态ip"></a><strong><font color='cornflowerblue'>1）为什么要修改静态ip</font></strong></h5><p>因为虚拟默认是动态ip的，每次重新都会更新ip的，因此需要修改成静态ip方便网络管理，比如你要通过SSH、远程桌面等方式连接虚拟机，固定IP更容易记忆和配置。</p><br><h5 id="2）修改静态ip"><a href="#2）修改静态ip" class="headerlink" title="2）修改静态ip"></a><strong><font color='cornflowerblue'>2）修改静态ip</font></strong></h5><p>Linux的所有配置文件放在 &#x2F;etc 目录下</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201225950902.png" alt="image-20251201225950902"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201230744458.png" alt="image-20251201230744458"></p><br><p>修改为BOOTPROTO&#x3D;”static”<br>在底部添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#IP地址</span><br><span class="line">IPADDR=192.168.244.100</span><br><span class="line">#网关</span><br><span class="line">GATEWAY=192.168.244.2</span><br><span class="line">#域名解析器</span><br><span class="line">DNS1=192.168.244.2</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201232035172.png" alt="image-20251201232035172"></p><p><strong>最后需要重启网络</strong>，注意：conterOS7和8的命令不一样注意区分，我这里是直接重启虚拟机</p><br><p><strong>这里的ip地址要和虚拟网络的VMnet8的子网IP的网段保持一致（就是前三位保持一致，后一位可自行命名）</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201231010889.png" alt="image-20251201231010889"></p><br><p><strong>网关和域名解析器则和VMnet8的NAT设置中的网关IP保持一致</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201231230608.png" alt="image-20251201231230608"></p><br><h4 id="6-2、修改主机名"><a href="#6-2、修改主机名" class="headerlink" title="6.2、修改主机名"></a><strong><font color='#10c300'>6.2、修改主机名</font></strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname  # 查看主机名</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201234837992.png" alt="image-20251201234837992"></p><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname  # 修改hostname的配置，此方式需要重启才会生效</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname hadop100  # 此方式不需要重启，就可以生效 修改主机名为hadop100</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201235132862.png" alt="image-20251201235132862"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;软件版本&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;VMware 17 Pro  17.5.2 build-23775571&lt;/p&gt;
&lt;p&gt;CentOS-8.1.1911-x86_64-dvd1.iso&lt;/p&gt;
&lt;/blockquote&gt;
&lt;</summary>
      
    
    
    
    <category term="后端与运维" scheme="http://example.com/categories/%E5%90%8E%E7%AB%AF%E4%B8%8E%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="CentOS 8" scheme="http://example.com/tags/CentOS-8/"/>
    
    <category term="VMware17" scheme="http://example.com/tags/VMware17/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客</title>
    <link href="http://example.com/posts/ec7d7221.html"/>
    <id>http://example.com/posts/ec7d7221.html</id>
    <published>2025-11-25T13:57:23.000Z</published>
    <updated>2025-11-25T14:20:12.938Z</updated>
    
    <content type="html"><![CDATA[<div align="center">    <img src="https://img.shields.io/badge/hexo-8.1.0-d1a8.svg"/>    <img src="https://img.shields.io/badge/hexoCli-4.3.2-green.svg"/>    <img src="https://img.shields.io/badge/Node-=22.21.0-ffbc39.svg"/>    <br>    <br>    <img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202409131343278.png"/></div><br><h3 id="一、前置条件"><a href="#一、前置条件" class="headerlink" title="一、前置条件"></a><strong><font color='red'>一、前置条件</font></strong></h3><h4 id="1-1、要求✏️"><a href="#1-1、要求✏️" class="headerlink" title="1.1、要求✏️"></a><strong><font color='#10c300'>1.1、要求✏️</font></strong></h4><p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p><ul><li><a href="http://nodejs.org/">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本，本次使用的是18.18.0版本)</li><li><a href="http://git-scm.com/">Git</a></li></ul><p>如果您的电脑中已经安装上述必备程序，那么恭喜您！ 你可以直接前往 <a href="https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85-Hexo">安装 Hexo</a> 步骤。</p><h4 id="1-2、安装-Hexo"><a href="#1-2、安装-Hexo" class="headerlink" title="1.2、安装 Hexo"></a><strong><font color='#10c300'>1.2、安装 Hexo</font></strong></h4><p>在电脑上全局安装Hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><br><h3 id="二、创建博客"><a href="#二、创建博客" class="headerlink" title="二、创建博客"></a><strong><font color='red'>二、创建博客</font></strong></h3><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建博客项目文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251030145443715.png" alt="image-20251030145443715"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251027230420967.png" alt="image-20251027230420614"></p><h4 id="2-1、目录结构"><a href="#2-1、目录结构" class="headerlink" title="2.1、目录结构"></a><strong><font color='#10c300'>2.1、目录结构</font></strong></h4><p>初始化后，您的项目文件夹将如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><h4 id="2-1、-config-yml"><a href="#2-1、-config-yml" class="headerlink" title="2.1、_config.yml"></a><strong><font color='#10c300'>2.1、_config.yml</font></strong></h4><p>网站的 <a href="https://hexo.io/zh-cn/docs/configuration">配置</a> 文件。 您可以在此配置大部分的参数。</p><br><h3 id="三、主题"><a href="#三、主题" class="headerlink" title="三、主题"></a><strong><font color='red'>三、主题</font></strong></h3><p><a href="https://github.com/shenliyang/hexo-theme-snippet">Hexo Themes列表</a></p><p>我们这次使用后是<a href="https://github.com/shenliyang/hexo-theme-snippet">Asnippet</a>主题</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251027230809516.png" alt="image-20251027230809516"></p><h4 id="3-1、下载主题"><a href="#3-1、下载主题" class="headerlink" title="3.1、下载主题"></a><strong><font color='#10c300'>3.1、下载主题</font></strong></h4><p>有两种方式获取本主题–下载 <code>*.zip</code> 文件和通过 <code>git</code>方式：</p><ol><li>下载 <a href="https://github.com/shenliyang/hexo-theme-snippet">Snippet 主题</a> 文件解压后放在 <code>themes</code> 目录下，和博客中的 landscape 为同级目录</li><li>Git 方式，在 Hexo 根目录执行：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git://github.com/shenliyang/hexo-theme-snippet.git themes/hexo-theme-snippet</span><br></pre></td></tr></table></figure><br><h4 id="3-2、切换主题"><a href="#3-2、切换主题" class="headerlink" title="3.2、切换主题"></a><strong><font color='#10c300'>3.2、切换主题</font></strong></h4><p>在根目录的<code>_config.yml</code>文件中，找到 <code>theme: landscape</code>，将landscape替换成新的主题名</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">hexo-theme-snippet</span></span><br></pre></td></tr></table></figure><br><h4 id="3-3、安装主题插件"><a href="#3-3、安装主题插件" class="headerlink" title="3.3、安装主题插件"></a><strong><font color='#10c300'>3.3、安装主题插件</font></strong></h4><p>1️⃣因为 <strong>hexo-theme-snippet</strong> 使用了 <code>ejs</code> 模版引擎 、 <code>Less</code> CSS 预编译语言以及在官方插件的基础上 进行功能的开发，以下为必装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm i hexo-renderer-ejs hexo-renderer-less hexo-deployer-git -S</span><br></pre></td></tr></table></figure><p>2️⃣启用站内本地搜索功能</p><p>如果要使用本地站点搜索，必须安装插件 hexo-generator-json-content 来创建本地搜索 json 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm i hexo-generator-json-content@2.2.0 -S</span><br></pre></td></tr></table></figure><p>然后修改主题配置_config.yml 文件下<code>jsonContent</code>相关参数。</p><br><h4 id="3-4、部署主题"><a href="#3-4、部署主题" class="headerlink" title="3.4、部署主题"></a><strong><font color='#10c300'>3.4、部署主题</font></strong></h4><h5 id="1）未修改过主题源文件"><a href="#1）未修改过主题源文件" class="headerlink" title="1）未修改过主题源文件"></a><strong><font color='cornflowerblue'>1）未修改过主题源文件</font></strong></h5><p>1️⃣  清空 hexo 静态文件和缓存，并重新生成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g  //清空缓存并生成静态文件</span><br></pre></td></tr></table></figure><p>2️⃣ 本地预览，确没有问题再进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p 4000 或者 hexo s  //启动本地服务默认</span><br></pre></td></tr></table></figure><p>3️⃣ 当 gulp 执行完成，并提示 <code>please execute： hexo d</code> 时，可以进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d 或者 gulp deploy  //部署发布</span><br></pre></td></tr></table></figure><br><h5 id="2）修改过主题源文件"><a href="#2）修改过主题源文件" class="headerlink" title="2）修改过主题源文件"></a><strong><font color='cornflowerblue'>2）修改过主题源文件</font></strong></h5><p>1️⃣ 拷贝主题目录下<code>package.json</code>文件到 Hexo 根目录下，然后安装项目的开发依赖。</p><p>如下是拷贝过来的，并删除了多余的代码。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo s&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gulp --gulpfile gulpfile.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7.3.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.1.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-abbrlink&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-deployer-git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-archive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-feed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-json-content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.2.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-sitemap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-autoprefixer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^9.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-clean-css&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-htmlclean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.7.22&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-htmlmin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-jshint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-less&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-notify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-plumber&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-rename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-rev-append&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-sequence&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-uglify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jshint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.13.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jshint-stylish&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;notify-send&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>2️⃣ 在 Hexo 根目录下创建一个名为 gulpfile.js 的文件并引入主题中的gulpfile.mjs：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> gulpTasks <span class="keyword">from</span> <span class="string">&#x27;./themes/hexo-theme-snippet/gulpfile.mjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> gulpTasks.<span class="property">default</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; build, dev, watchFiles, compileLess &#125; = gulpTasks;</span><br></pre></td></tr></table></figure><p>3️⃣ 编译less→css</p><p>在 Hexo 根目录下package.json添加并执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;compile-less&quot;: &quot;gulp --gulpfile themes/hexo-theme-snippet/gulpfile.mjs compileLess&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run compile-less</span><br></pre></td></tr></table></figure><p>4️⃣  清空 hexo 静态文件和缓存，并重新生成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g  //清空缓存并生成静态文件</span><br></pre></td></tr></table></figure><p>5️⃣ 运行 gulp：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run gulp</span><br></pre></td></tr></table></figure><ul><li><p>pnpm run gulp 执行的是gulpfile.js中的默认任务，该任务引用自主题目录中的gulpfile.mjs</p></li><li><p>gulp默认执行的build任务主要功能是优化已存在的public目录中的文件，包括：</p><ul><li>压缩CSS并添加前缀</li><li>压缩JS</li><li>添加版本号到HTML文件</li><li>压缩HTML文件</li></ul></li><li><p>但是，gulp任务是在 .&#x2F;public 目录下工作的，它 不会 自动生成public目录</p></li><li><p>在Hexo博客框架中，public目录是由 hexo g (hexo generate)命令生成的，该命令会将source目录中的Markdown文件等转换为静态HTML文件</p></li></ul><p>**🔚结论 ：**要完成完整的打包流程，你需要先执行 hexo g 来生成public目录，然后再执行 pnpm run gulp 来优化public目录中的文件</p><p>6️⃣ 本地预览，确没有问题再进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p 4000 或者 hexo s  //启动本地服务默认</span><br></pre></td></tr></table></figure><p>7️⃣ 当 gulp 执行完成，并提示 <code>please execute： hexo d</code> 时，可以进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d 或者 gulp deploy  //部署发布</span><br></pre></td></tr></table></figure><br><h5 id="3）拓展优化💡"><a href="#3）拓展优化💡" class="headerlink" title="3）拓展优化💡"></a><strong><font color='cornflowerblue'>3）拓展优化💡</font></strong></h5><p>1️⃣ 本地开发启动一个开发服务器，监听主题中的Less和JS文件变化，当文件发生变化时自动进行编译或校验，提高开发效率。</p><p>在 Hexo 根目录下package.json添加并执行</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gulp:dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gulp --gulpfile themes/hexo-theme-snippet/gulpfile.mjs watchFiles&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run <span class="string">&quot;gulp:dev&quot;</span></span><br></pre></td></tr></table></figure><p>开发者在修改样式或脚本文件后无需手动执行编译命令，系统会自动检测并处理文件变化</p><p>2️⃣优化指令</p><br><h4 id="3-5、更新主题"><a href="#3-5、更新主题" class="headerlink" title="3.5、更新主题"></a><strong><font color='#10c300'>3.5、更新主题</font></strong></h4><p>❌不建议更新，如果自己更改过主题源文件，更新主题会把自己改动的全部替换掉</p><p>主题可能会不定时优化和更新，更新主题代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/hexo-theme-snippet</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure><br><h4 id="3-6、主题配置"><a href="#3-6、主题配置" class="headerlink" title="3.6、主题配置"></a><strong><font color='#10c300'>3.6、主题配置</font></strong></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">## menu -- 导航菜单显示&#123;[@page:名字,@url:地址,@icon:图标]&#125;</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">home</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-home</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## favicon -- 网站图标位置&#123;@favicon&#125;</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/favicon.ico</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## rss --rss文件位置&#123;@rss&#125;</span></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 各个小工具的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## widgets -- 6个左边小工具&#123;@widgets:[notification,category,archive,tagcloud,friends]&#125;</span></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">search</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">notification</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">social</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">category</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">archive</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tagcloud</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">friends</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 各个小工具的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 搜索</span></span><br><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line">  <span class="attr">searchLocal:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否启用本地搜索</span></span><br><span class="line">  <span class="attr">searchGoogle:</span> <span class="literal">true</span> <span class="string">//是否启用谷歌搜索</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## notification config --网站公告设置,支持 html 和 纯文本</span></span><br><span class="line"><span class="attr">notification:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">            &lt;p&gt;主题已经上线！欢迎下载或更新~ &lt;br/&gt;</span></span><br><span class="line"><span class="string">            主题下载：&lt;a href=&quot;https://github.com/shenliyang/hexo-theme-snippet&quot; title=&quot;fork me&quot; target=&quot;_blank&quot;&gt;Snippet主题&lt;/a&gt; &lt;br/&gt;</span></span><br><span class="line"><span class="string">            &lt;hr/&gt;接受贡献，包括不限于提交问题与需求，修复代码。欢迎Pull Request&lt;br/&gt;支持主题：&lt;a href=&quot;https://github.com/shenliyang/hexo-theme-snippet/stargazers&quot;&gt;Star一下&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="comment">## 社交设置&#123;@name:社交工具名字，@icon:社交工具图标，@href:设置工具链接&#125; [参考图标](http://fontawesome.io/icons/)</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Github</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">href:</span> <span class="string">//github.com/shenliyang</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章分类设置&#123;@cate_config:&#123;@show_count:是否显示数字，@show_current: 是否高亮当前category&#125;&#125;</span></span><br><span class="line"><span class="attr">cate_config:</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">show_current:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章归档设置&#123;@arch_config:/*参数参考：https://hexo.io/zh-cn/docs/helpers.html#list-archives*/&#125;</span></span><br><span class="line"><span class="comment">## 推荐组合方式：[&#123;type: &#x27;monthly&#x27;,format: &#x27;YYYY年MM月&#x27;&#125;,&#123;type: &#x27;yearly&#x27;,format: &#x27;YYYY年&#x27;&#125;]</span></span><br><span class="line"><span class="attr">arch_config:</span></span><br><span class="line">   <span class="attr">type:</span> <span class="string">&#x27;monthly&#x27;</span></span><br><span class="line">   <span class="attr">format:</span> <span class="string">&#x27;YYYY年MM月&#x27;</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">order:</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标签云设置&#123;/*参数参考：http://www.goat1000.com/tagcanvas-options.php */&#125;</span></span><br><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="attr">tag3d:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">是否启用3D标签云</span></span><br><span class="line">  <span class="attr">textColour:</span> <span class="string">&#x27;#444&#x27;</span> <span class="string">//</span> <span class="string">字体颜色</span></span><br><span class="line">  <span class="attr">outlineMethod:</span> <span class="string">&#x27;block&#x27;</span> <span class="string">//</span> <span class="string">选中模式(outline|classic|block|colour|size|none)</span></span><br><span class="line">  <span class="attr">outlineColour:</span> <span class="string">&#x27;#FFDAB9&#x27;</span> <span class="string">//</span> <span class="string">选中模式的颜色</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="number">30</span> <span class="string">//</span> <span class="string">动画帧之间的时间间隔，值越大，转动幅度越大</span></span><br><span class="line">  <span class="attr">freezeActive:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">选中的标签是否继续滚动</span></span><br><span class="line">  <span class="attr">frontSelect:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">不选标签云后部的标签</span></span><br><span class="line">  <span class="attr">reverse:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否反向触发</span></span><br><span class="line">  <span class="attr">wheelZoom:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">是否启用鼠标滚轮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 友链设置&#123;@链接名称：链接地址&#123;@links:[,,,]&#125;&#125;</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hexo官网:</span> <span class="string">https://hexo.io/zh-cn/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主题自定义个性化配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站宣传语&#123;@branding：网站宣传语(不设置显示本地图片)&#125;</span></span><br><span class="line"><span class="attr">branding:</span> <span class="string">从未如此简单有趣</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置banner背景图片&#123;@img:自定义图片地址(支持绝对和相对路径),主题默认&#123;&quot;静态背景&quot;:&quot;banner.jpg&quot;&#125;,&#123;&quot;动态背景&quot;:&quot;banner2.jpg&quot;&#125;,&#123;&quot;动态星空背景&quot;:&quot;banner3.jpg&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment">## 例如：https://hexo-theme-snippet-1251680922.cos.ap-beijing.myqcloud.com/img/banner|2|3.jpg, 或者 &#x27;./img/banner-img.jpg&#x27;(相对本地资源地址)</span></span><br><span class="line"><span class="attr">banner:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">https://hexo-theme-snippet-1251680922.cos.ap-beijing.myqcloud.com/img/banner.jpg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置carousel&#123;@img:图片地址,@url:点击跳转链接(默认值:&quot;javascript:&quot;)&#125;</span></span><br><span class="line"><span class="attr">carousel:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">&#x27;img/head-img.jpg&#x27;</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">&#x27;javascript:&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 首页列表底部面板&#123;@homePanel: 是否开启&#125;</span></span><br><span class="line"><span class="attr">homePanel:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 首页文章列表缩略图</span></span><br><span class="line"><span class="comment">### 加载规则: 自定义文章缩略图(在Front-matter中添加的&#x27;img&#x27;字段) &gt; 文章内的图片 &gt; defaultImgs(随机获取) &gt; 无图模式列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 自定义随机图片</span></span><br><span class="line"><span class="attr">defaultImgs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">http://www.example.jpg</span> <span class="string">//远程图片链接示例</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/img/default-1.jpg</span> <span class="string">//本地图片链接示例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 文章摘要&#123;@摘要显示优先级：自定义摘要 &gt; 自动截取摘要 &#125;</span></span><br><span class="line"><span class="comment">### 自定义摘要范围&#123;@&lt;!--more--&gt;:截取more之前的内容为摘要&#125;</span></span><br><span class="line"><span class="comment">### 自动截取摘要&#123;@excerptLength:自动截取文章前多少个字为摘要，不配置默认：120字&#125;</span></span><br><span class="line"><span class="attr">excerptLength:</span> <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 是否开启文章目录</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 代码高亮配置&#123;@highlightTheme: 主题名称,(配置暂时不可用，后续开发中…)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">highlightTheme:</span> <span class="string">default</span> <span class="string">//TODO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章过期提醒功能 &#123;@warning:&#123;days:临界天数(默认300天,设置0关闭功能),text:提醒文字/*%d为过期总天数占位符*/&#125;&#125;</span></span><br><span class="line"><span class="attr">warning:</span></span><br><span class="line">  <span class="attr">days:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">&#x27;本文于%d天之前发表，文中内容可能已经过时。&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章内声明&#123;@declaration: &#123;enable:是否开启,title:声明标题,tip:提示内容&#125;&#125;</span></span><br><span class="line"><span class="attr">declaration:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&#x27;转载声明&#x27;</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      商业转载请联系作者获得授权,非商业转载请注明出处 © &lt;a href=&quot;&quot; target=&quot;_blank&quot;&gt;Snippet&lt;/a&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="comment">## 文章打赏&#123;@reward: &#123;alipay:支付宝打赏,wepay:微信打赏,tip:打赏提示语; 链接都为空,关闭打赏功能&#125;&#125;</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">alipay:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wepay:</span> <span class="string">&#x27;../img/reward-wepay.jpg&#x27;</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">赞赏是不耍流氓的鼓励</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 主题评论</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## utterances评论: 一款基于 GitHub issues 的评论工具; 首先在 github 上进行安装 utterances，访问 [utterances应用程序](https://github.com/apps/utterances)；然后在主题内配置 [utterances更多配置](https://utteranc.es/)</span></span><br><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">shenliyang/snippet-comment</span> <span class="string">//</span> <span class="string">github仓库名字,</span> <span class="string">格式为</span> <span class="string">user-name/repo-name</span></span><br><span class="line">  <span class="attr">issueTerm:</span> <span class="string">pathname</span> <span class="string">//</span> <span class="string">标识issue类型</span> <span class="number">1</span><span class="string">.</span> <span class="string">pathname(推荐);</span> <span class="number">2</span><span class="string">.</span> <span class="string">url;</span> <span class="number">3.</span><span class="string">title;</span> <span class="number">3</span><span class="string">.</span> <span class="string">og:title;</span> <span class="number">4</span><span class="string">.</span> <span class="string">issue-number</span> <span class="number">5</span><span class="string">.</span> <span class="string">specific-term;</span></span><br><span class="line">  <span class="attr">issueNumber:</span> <span class="number">123</span> <span class="string">//</span> <span class="string">非必填，当配置</span> <span class="string">issueTerm</span> <span class="string">=</span> <span class="string">&quot;issue-number&quot;</span><span class="string">时，需要配置issue号</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span> <span class="string">//</span> <span class="string">主题配置</span> <span class="number">1</span><span class="string">.</span> <span class="string">github-light(推荐);</span> <span class="number">2</span><span class="string">.</span> <span class="string">github-dark;</span> <span class="number">3</span><span class="string">.</span> <span class="string">preferred-color-scheme;</span> <span class="number">4</span><span class="string">.</span> <span class="string">github-dark-orange;</span> <span class="number">5</span><span class="string">.</span> <span class="string">icy-dark;</span> <span class="number">6</span><span class="string">.</span> <span class="string">dark-blue;</span> <span class="number">7</span><span class="string">.</span> <span class="string">photon-dark;</span> <span class="number">8</span><span class="string">.</span> <span class="string">boxy-light</span></span><br><span class="line">  <span class="attr">label:</span> <span class="string">//</span> <span class="string">非必填</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">//</span> <span class="string">使用自定义utteranc脚本加载。</span> <span class="string">非必填，默认：&quot;https://utteranc.es/client.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### gitment</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">client_id:</span></span><br><span class="line">  <span class="attr">client_secret:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">  <span class="attr">perPage:</span></span><br><span class="line">  <span class="attr">maxCommentHeight:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 来必力</span></span><br><span class="line"><span class="attr">livere:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">livere_uid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 友言评论(服务不稳定，经常无法加载)</span></span><br><span class="line"><span class="attr">uyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">uyan_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Disqus评论(需要翻墙，或者搭建代理)</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">shortname:</span> <span class="string">snippet</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 畅言评论(需要ICP备案)</span></span><br><span class="line"><span class="attr">changyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span></span><br><span class="line">  <span class="attr">conf:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Valine评论(leancloud需要实名认证) 参考网站: [valine评论](https://valine.js.org/)</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appId:</span></span><br><span class="line">  <span class="attr">appKey:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">说点什么吧</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">邮件通知</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">验证码</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="string">//</span> <span class="string">avatar头像</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="string">nick,mail</span> <span class="string">//</span> <span class="string">输入框内容，可选值nick,mail,link</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Gitalk评论 参考网站: [一个基于Github Issue和Preact开发的评论插件](https://gitalk.github.io/)</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">clientID:</span> <span class="string">&quot;&quot;</span> <span class="string">//</span> <span class="string">Github</span> <span class="string">应用ID</span></span><br><span class="line">   <span class="attr">clientSecret:</span> <span class="string">&quot;&quot;</span> <span class="string">//</span> <span class="string">Github</span> <span class="string">应用密钥</span></span><br><span class="line">   <span class="attr">repo:</span> <span class="string">shenliyang.github.io</span> <span class="string">//</span> <span class="string">Github仓库地址</span></span><br><span class="line">   <span class="attr">owner:</span> <span class="string">shenliyang</span>  <span class="string">//</span> <span class="string">Github</span> <span class="string">用户名(Github仓库拥有者)</span></span><br><span class="line">   <span class="attr">admin:</span> <span class="string">shenliyang</span> <span class="string">//</span> <span class="string">GitHub</span> <span class="string">repository</span> <span class="string">的所有者和合作者</span> <span class="string">(对这个</span> <span class="string">repository</span> <span class="string">有写权限的用户)可以有一个或多个，如果有多名可使用，例如：admin:</span> <span class="string">admin1,admin2</span> <span class="string">配置</span></span><br><span class="line">   <span class="attr">perPage:</span> <span class="number">10</span> <span class="string">//</span> <span class="string">每次加载的数据大小，最多100</span></span><br><span class="line">   <span class="attr">distractionFreeMode:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否启用无干扰模式，类似Facebook评论框的全屏遮罩效果</span></span><br><span class="line"></span><br><span class="line">   <span class="string">//</span> <span class="string">以下参数主题会默认处理，不需要配置</span></span><br><span class="line">   <span class="string">language</span> <span class="string">//</span> <span class="string">语言类型，默认为站点配置中选项</span></span><br><span class="line">   <span class="string">id</span> <span class="string">//</span> <span class="string">页面的唯一标识,</span> <span class="string">已使用md5对pathname转换生成唯一id处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访客统计 [不蒜子统计](http://busuanzi.ibruce.info/)</span></span><br><span class="line"><span class="attr">visit_counter:</span></span><br><span class="line">   <span class="attr">site:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">总访问量和访问人数统计</span></span><br><span class="line">   <span class="attr">page:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">文章阅读量统计</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访问统计</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 网盟CNZZ统计 参考网站: [网盟CNZZ](http://www.umeng.com/)</span></span><br><span class="line"><span class="attr">cnzz_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度统计 参考网站: [百度统计](https://tongji.baidu.com/)</span></span><br><span class="line"><span class="attr">baidu_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 谷歌统计 参考网站：[谷歌统计](https://www.google-analytics.com/)</span></span><br><span class="line"><span class="attr">google_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 腾讯分析 参考网站：[腾讯分析](http://ta.qq.com/)</span></span><br><span class="line"><span class="attr">tencent_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度站点认证</span></span><br><span class="line"><span class="attr">baidu-site-verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度自动推送(@baidu_push: 是否启用百度自动推送)  参考网站: [百度站长资源](https://ziyuan.baidu.com/college/courseinfo?id=267&amp;page=2#h2_article_title18)</span></span><br><span class="line"><span class="attr">baidu_push:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ICON配置 (不配则启用本地Font Icon)</span></span><br><span class="line"><span class="attr">fontAwesome:</span> <span class="string">//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站主题配置</span></span><br><span class="line"><span class="attr">since:</span> <span class="number">2017</span>  <span class="string">//建站时间</span></span><br><span class="line"><span class="attr">beian:</span> <span class="string">&#x27;京ICP备04000001号&#x27;</span> <span class="string">//网站备案号</span></span><br><span class="line"><span class="attr">robot:</span> <span class="string">&#x27;all&#x27;</span>  <span class="string">//控制搜索引擎的抓取和索引编制行为，默认为all</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.3</span><span class="number">.0</span>  <span class="string">//当前主题版本号</span></span><br></pre></td></tr></table></figure><br><h4 id="3-7、主题使用技巧及功能扩展"><a href="#3-7、主题使用技巧及功能扩展" class="headerlink" title="3.7、主题使用技巧及功能扩展"></a><strong><font color='#10c300'>3.7、主题使用技巧及功能扩展</font></strong></h4><p>修改新增文章 Front-matter 模板,修改<code>scaffolds</code>目录下的<code>post.md</code>模板</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> &#123;&#123; <span class="string">title</span> &#125;&#125; <span class="string">//</span> <span class="string">标题</span></span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;   <span class="string">//</span> <span class="string">时间</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">&#x27;分类1&#x27;</span>,<span class="string">&#x27;分类2&#x27;</span>] <span class="string">//</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&#x27;标签1&#x27;</span>,<span class="string">&#x27;标签2&#x27;</span>]       <span class="string">//</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span>    <span class="string">//</span> <span class="string">是否开启评论</span></span><br><span class="line"><span class="attr">img:</span>               <span class="string">//</span> <span class="string">自定义缩略图</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><br><h3 id="四、自定义路由-导航"><a href="#四、自定义路由-导航" class="headerlink" title="四、自定义路由(导航)"></a><strong><font color='red'>四、自定义路由(导航)</font></strong></h3><p>以我们这次<a href="https://github.com/shenliyang/hexo-theme-snippet">Asnippet</a>主题为例</p><p><a href="#aa">前置元数据详解</a>(前置知识，必先：ctrl+左键点击查看)</p><h4 id="4-1、配置文件中添加导航项"><a href="#4-1、配置文件中添加导航项" class="headerlink" title="4.1、配置文件中添加导航项"></a><strong><font color='#10c300'>4.1、配置文件中添加导航项</font></strong></h4><ul><li>主题配置文件中编辑 themes&#x2F;hexo-theme-snippet&#x2F;_config.yml</li><li>在 menu 部分添加新的菜单项（分类&#x2F;关于），格式如下：</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251028185224676.png" alt="image-20251028185224676"></p><h4 id="4-2、创建页面内容"><a href="#4-2、创建页面内容" class="headerlink" title="4.2、创建页面内容"></a><strong><font color='#10c300'>4.2、创建页面内容</font></strong></h4><p><strong><font color='orange'>1）创建的页面就是以.md文件内容为展示的路由页面</font></strong></p><ul><li><p>在Hexo项目的根目录的source目录下创建对应的文件夹和文件</p><p>例如，要创建 <code>/about/</code>路由，需要在 source 目录下创建 <code>source\about\index.md</code>文件</p></li><li><p>在 index.md 中添加页面内容和前置元数据</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">关于我</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-10-28 16:03:32</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029000623224.png" alt="image-20251029000623224"></p></li></ul><p><strong><font color='orange'>2）创建自定义页面模板</font></strong></p><ul><li><p>如果需要自定义页面模板，可以在<code>themes\hexo-theme-snippet\layout\</code>目录下创建新的<code>.ejs</code> 文件（<code>categories.ejs</code>）</p></li><li><p>在页面的前置元数据中指定布局文件。例如在layout文件夹中创建<code>categories.ejs</code>文件，那么在元数据中layout的属性值就得设置成<code>categories</code>和layout文件夹中创建的<code>.ejs</code> 文件名保持一致</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2025-10-28 16:15:28</span><br><span class="line">layout: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029001736475.png" alt="image-20251029001736475"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029000804848.png" alt="image-20251029000804848"></p></li></ul><br><h3 id="五、前置元数据-Front-matter"><a href="#五、前置元数据-Front-matter" class="headerlink" title="五、前置元数据(Front-matter)"></a><strong><font color='red'>五、前置元数据(Front-matter)</font></strong></h3><p>在Hexo中，页面的前置元数据（Front-matter）和内容的组织是创建自定义页面的关键。</p><p>前置元数据是位于文件顶部、由 — 包围的YAML或JSON格式数据，它定义了页面的各种属性。</p><h4 id="5-1、基本结构"><a href="#5-1、基本结构" class="headerlink" title="5.1、基本结构"></a><strong><font color='#10c300'>5.1、基本结构</font></strong></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">页面标题</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-10-28 16:03:32</span></span><br><span class="line"><span class="attr">layout:</span> <span class="string">布局名称</span></span><br><span class="line"><span class="comment"># 其他属性...</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment"># 这里开始是页面内容</span></span><br></pre></td></tr></table></figure><h4 id="5-2、常用前置元数据属性"><a href="#5-2、常用前置元数据属性" class="headerlink" title="5.2、常用前置元数据属性"></a><strong><font color='#10c300'>5.2、常用前置元数据属性</font></strong></h4><p>根据您的项目中的示例，以下是常用的属性：</p><ol><li>title : 页面标题</li><li>date : 创建日期，格式为 YYYY-MM-DD HH:mm:ss</li><li>layout : 指定使用的布局模板（如 categories ）</li><li>comments : 是否开启评论（true&#x2F;false）</li><li>categories : 分类</li><li>tags : 标签</li><li>permalink : 自定义永久链接</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;div align=&quot;center&quot;&gt;
    &lt;img src=&quot;https://img.shields.io/badge/hexo-8.1.0-d1a8.svg&quot;/&gt;
    &lt;img src=&quot;https://img.shields.io/badge/hexoCli-4.</summary>
      
    
    
    
    <category term="其他" scheme="http://example.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>UnoCSS的使用</title>
    <link href="http://example.com/posts/74efe575.html"/>
    <id>http://example.com/posts/74efe575.html</id>
    <published>2025-08-23T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.326Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502221552580.png" alt="image-20250222155200521"></p><p><a href="https://unocss.jiangruyi.com/">UnoCSS中文文档</a></p><h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装 "></a><strong><font color='red'>1、安装 </font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D unocss @iconify-json/ep @unocss/preset-rem-to-px</span><br></pre></td></tr></table></figure><blockquote><p>unocss：核心库</p><p>@iconify-jsonp&#x2F;ep：使用elementplus图标库<a href="https://iconify.design/">https://iconify.design/</a></p><p>@unocss&#x2F;preset-rem-to-px：默认是rem单位，将rem转成px</p></blockquote><p>**<code>UnoCSS</code>**图标预设：<a href="https://unocss.jiangruyi.com/presets/icons">https://unocss.jiangruyi.com/presets/icons</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UnoCSS</span> <span class="keyword">from</span> <span class="string">&#x27;unocss/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">UnoCSS</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a><strong><font color='red'>2、配置</font></strong></h3><p>**<code>UnoCSS</code>**的尺寸1（m-1）转换之后是4px，根目录默认字体大小16px即16px &#x3D; 1rem，4px &#x3D; 0.25rem，因此得知Uno中的1表示4px，也代表0.25rem。如果要想将UnoCSS中的1变成1px，则需要安装<code>@unocss/preset-rem-to-px</code>插件。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uno.config.ts</span></span><br><span class="line"><span class="keyword">import</span> presetRemToPx <span class="keyword">from</span> <span class="string">&#x27;@unocss/preset-rem-to-px&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    defineConfig,</span><br><span class="line">    presetAttributify,</span><br><span class="line">    presetIcons,</span><br><span class="line">    presetWind3,</span><br><span class="line">    transformerDirectives,</span><br><span class="line">    transformerVariantGroup,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;unocss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">shortcuts</span>: &#123; <span class="comment">// 自定义属性  一个属性可以对应多个UnoCSS类值</span></span><br><span class="line">        <span class="string">&#x27;flex-center&#x27;</span>: <span class="string">&#x27;flex justify-center items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-center&#x27;</span>: <span class="string">&#x27;flex justify-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-y-center&#x27;</span>: <span class="string">&#x27;flex items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;grid-center&#x27;</span>: <span class="string">&#x27;grid place-items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;wh-full&#x27;</span>: <span class="string">&#x27;w-full h-full&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-between&#x27;</span>: <span class="string">&#x27;flex items-center justify-between&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-end&#x27;</span>: <span class="string">&#x27;flex items-center justify-end&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;absolute-lt&#x27;</span>: <span class="string">&#x27;absolute left-0 top-0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;absolute-rt&#x27;</span>: <span class="string">&#x27;absolute right-0 top-0 &#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fixed-lt&#x27;</span>: <span class="string">&#x27;fixed left-0 top-0&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">theme</span>: &#123;</span><br><span class="line">        <span class="attr">colors</span>: &#123; <span class="comment">// 自定义颜色</span></span><br><span class="line">            <span class="attr">primary</span>: <span class="string">&#x27;var(--el-color-primary)&#x27;</span>,</span><br><span class="line">            <span class="attr">red</span>: <span class="string">&#x27;#f53e31&#x27;</span>,</span><br><span class="line">            <span class="attr">gray_888</span>: <span class="string">&#x27;#888&#x27;</span>,</span><br><span class="line">            <span class="attr">gray_999</span>: <span class="string">&#x27;#999&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">presets</span>: [</span><br><span class="line">        <span class="title function_">presetWind3</span>(&#123;</span><br><span class="line">            <span class="attr">important</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// 允许你直接在HTML元素上使用属性来定义样式，而不需要使用class。例如，&lt;div flex m=&quot;5&quot;&gt;&lt;/div&gt;可以等价于&lt;div class=&quot;flex m-5&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">        <span class="title function_">presetAttributify</span>(),</span><br><span class="line">        <span class="title function_">presetIcons</span>(&#123;</span><br><span class="line">            <span class="attr">scale</span>: <span class="number">1.2</span>,</span><br><span class="line">            <span class="attr">warn</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title function_">presetRemToPx</span>(&#123; <span class="comment">// 根目录字体设置为4即可实现unocss的1为1px</span></span><br><span class="line">            <span class="attr">baseFontSize</span>: <span class="number">4</span>,</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// transformerDirectives() 可以使用@apply @screen theme函数</span></span><br><span class="line">    <span class="attr">transformers</span>: [</span><br><span class="line">        <span class="title function_">transformerDirectives</span>(),</span><br><span class="line">        <span class="title function_">transformerVariantGroup</span>(),</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        <span class="comment">// 以下官网规则可自定义转换</span></span><br><span class="line">        <span class="comment">// [/^m-([.\d]+)$/, ([_, num]) =&gt; (&#123; margin: `$&#123;num&#125;px` &#125;)],</span></span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;virtual:uno.css&#x27;</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='red'>3、UnoCSS中使用图标 </font></strong></p><p><a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify官网</a>中的@iconify-jsonp&#x2F;ep图标</p><p>@iconify-jsonp&#x2F;ep</p><blockquote><p>语法：i前缀-ep图标库:xx（图标名称）</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">i-ep:chrome-filled</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502232318083.png" alt="image-20250223231812025"></p><br><h3 id="4、UnoCSS预设语法"><a href="#4、UnoCSS预设语法" class="headerlink" title="4、UnoCSS预设语法 "></a><strong><font color='red'>4、UnoCSS预设语法 </font></strong></h3><p>默认的 <code>@unocss/preset-uno</code> 预设（实验阶段）是一系列流行的原子化框架的通用超集，包括了 <code>Tailwind CSS</code>，<code>Windi CSS</code>，<code>Bootstrap</code>，<code>Tachyons</code> 等。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">w-<span class="number">10</span> h-<span class="number">10</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">max-w-<span class="number">96</span> min-w-<span class="number">96</span></span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">96px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">96px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">text</span>-<span class="number">30</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">30px</span></span><br><span class="line"></span><br><span class="line">rounded  rounded-<span class="number">2</span></span><br><span class="line">border-radius: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line"></span><br><span class="line">size-<span class="number">50</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"></span><br><span class="line">py-<span class="number">2</span></span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">2px</span>;</span><br><span class="line"></span><br><span class="line">px-<span class="number">4</span></span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">4px</span>;</span><br><span class="line"> <span class="attribute">padding-right</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">font</span>-bold</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border</span>-<span class="number">4</span> // 边框宽度</span><br><span class="line"><span class="attribute">border-width</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">box-<span class="attribute">border</span></span><br><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br><span class="line"></span><br><span class="line">leading-<span class="number">3</span></span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">3px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">text</span>-center</span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">如果你的项目需要一次性自定义颜色，请考虑使用任意值符号来按需为该颜色生成一个类，而不是将其添加到你的主题中：</span><br><span class="line">class=&quot;c-<span class="selector-attr">[#f40]</span>&quot; //必须要用class</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">b</span>-<span class="selector-tag">b</span>-<span class="number">2</span> <span class="selector-tag">b</span>-solid <span class="selector-tag">b</span>-red</span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">2px</span> solid red</span><br><span class="line"></span><br><span class="line">gap10</span><br><span class="line">gap: <span class="number">10px</span>;  <span class="attribute">flex</span>布局盒子之间距离</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502221552580.png&quot; alt=&quot;image-20250222155200521&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://</summary>
      
    
    
    
    <category term="工程化与质量" scheme="http://example.com/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E4%B8%8E%E8%B4%A8%E9%87%8F/"/>
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
    <category term="unocss" scheme="http://example.com/tags/unocss/"/>
    
  </entry>
  
  <entry>
    <title>element-Plus按需加载以及注意事项</title>
    <link href="http://example.com/posts/e3b10f75.html"/>
    <id>http://example.com/posts/e3b10f75.html</id>
    <published>2025-08-22T07:51:08.000Z</published>
    <updated>2025-11-25T13:48:58.500Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、依赖包安装"><a href="#一、依赖包安装" class="headerlink" title="一、依赖包安装"></a><strong><font color='red'>一、依赖包安装</font></strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm install element-plus</span></span><br></pre></td></tr></table></figure><br><h3 id="二、Volar-支持"><a href="#二、Volar-支持" class="headerlink" title="二、Volar 支持"></a><strong><font color='red'>二、Volar 支持</font></strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/ tsconfig.json</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;element-plus/global&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="三、按需自动导入"><a href="#三、按需自动导入" class="headerlink" title="三、按需自动导入"></a><strong><font color='red'>三、按需自动导入</font></strong></h3><h4 id="3-1、安装"><a href="#3-1、安装" class="headerlink" title="3.1、安装 "></a><strong><font color='#10c300'>3.1、安装 </font></strong></h4><p>安装自动导入组件和函数的插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add unplugin-vue-components unplugin-auto-import -D</span></span><br></pre></td></tr></table></figure><br><h4 id="3-2、配置"><a href="#3-2、配置" class="headerlink" title="3.2、配置 "></a><strong><font color='#10c300'>3.2、配置 </font></strong></h4><p>安装完成会默认在根目录生成<code>auto-imports.d.ts</code>和<code>components.d.ts</code>两个文件ts声明文件</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/ vite.<span class="property">config</span>.<span class="property">ts</span>配置</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>将生成的声明文件关联到ts的配置文件中去</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/ tsconfig.app.json</span><br><span class="line"><span class="comment">// 将auto-imports.d.ts和components.d.ts和env.d.ts三个文件统一放到根目录的types文件夹中，然后在include中直接引入types即可</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;types&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// TypeScript编译器编译的文件</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p> 问题：只要新加组件和和函数就又会在根目录生成两个声明文件，但是我需要生成的文件在types文件中，怎么做呢？ 在<code>vite.config.ts</code>文件中配置声明文件存储的路径</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/ vite.<span class="property">config</span>.<span class="property">ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">            <span class="comment">// 自动导入 Vue 相关函数，如：ref, reactive, toRef 等</span></span><br><span class="line">            <span class="attr">imports</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;pinia&#x27;</span>, <span class="string">&#x27;vue-router&#x27;</span>],</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            <span class="comment">// 指定自动导入 函数 TS类型声明文件路径，默认自动导入在根目录。</span></span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/auto-imports.d.ts&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            <span class="comment">// 指定自动导入 组件 TS类型声明文件路径，默认自动导入在根目录。</span></span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/components.d.ts&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>怎么查看<code>components.d.ts</code>声明文件生效？鼠标放到使用的elementPlus组件上，会出现如图的ts。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250217102004143.png" alt="image-20250217102004143"></p><p>忽略<code>auto-imports.d.ts</code>和<code>components.d.ts</code>上传至仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">types/*</span><br><span class="line">!types/env.d.ts</span><br></pre></td></tr></table></figure><br><h3 id="四、element-plus-样式问题"><a href="#四、element-plus-样式问题" class="headerlink" title="四、element-plus 样式问题"></a><strong><font color='red'>四、element-plus 样式问题</font></strong></h3><p>当你使用unplugin-vue-components来引入ui库的时候，message, notification，toast 等引入样式不生效（弹窗在底部）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250217104623237.png" alt="image-20250217104623237"></p><h4 id="4-1、全量引入（不推荐）"><a href="#4-1、全量引入（不推荐）" class="headerlink" title="4.1、全量引入（不推荐） "></a><strong><font color='#10c300'>4.1、全量引入（不推荐） </font></strong></h4><p>在main.ts中引入</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br></pre></td></tr></table></figure><br><h4 id="4-1、按需自动引入"><a href="#4-1、按需自动引入" class="headerlink" title="4.1、按需自动引入"></a><strong><font color='#10c300'>4.1、按需自动引入</font></strong></h4><h5 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add vite-plugin-style-import -D</span></span><br></pre></td></tr></table></figure><br><h5 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>在 <code>vite.config.ts</code> 配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStyleImportPlugin, <span class="title class_">ElementPlusResolve</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-style-import&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">createStyleImportPlugin</span>(&#123;</span><br><span class="line">            <span class="comment">// 预设的和自定义二选一</span></span><br><span class="line">            <span class="attr">resolves</span>: [<span class="title class_">ElementPlusResolve</span>()], <span class="comment">// 预设的样式解析器</span></span><br><span class="line">            <span class="comment">// libs: [&#123; // 自定义样式的加载方式</span></span><br><span class="line">            <span class="comment">//     libraryName: &#x27;element-plus&#x27;,</span></span><br><span class="line">            <span class="comment">//     esModule: true,</span></span><br><span class="line">            <span class="comment">//     resolveStyle: (name: string) =&gt; &#123;</span></span><br><span class="line">            <span class="comment">//         return `element-plus/theme-chalk/$&#123;name&#125;.css`</span></span><br><span class="line">            <span class="comment">//     &#125;,</span></span><br><span class="line">            <span class="comment">// &#125;],</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="五、icon图标自动导入"><a href="#五、icon图标自动导入" class="headerlink" title="五、icon图标自动导入"></a><strong><font color='red'>五、icon图标自动导入</font></strong></h3><p>如果使用unocss原子CSS引擎，也可使用unocss的icon图标引入，详细见<a href="https://shixna.github.io/post/74efe575.html">unocss使用教程</a></p><h4 id="5-1、安装"><a href="#5-1、安装" class="headerlink" title="5.1、安装 "></a><strong><font color='#10c300'>5.1、安装 </font></strong></h4><p>使用<code>unplugin-icons</code>和<code>unplugin-auto-import</code>从<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>中自动导入任何图标集，若安装unplugin-auto-import则不需再次安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add -D unplugin-icons unplugin-auto-import</span></span><br></pre></td></tr></table></figure><br><h4 id="5-2、配置文件"><a href="#5-2、配置文件" class="headerlink" title="5.2、配置文件"></a><strong><font color='#10c300'>5.2、配置文件</font></strong></h4><h5 id="1）vite-config-ts配置"><a href="#1）vite-config-ts配置" class="headerlink" title="1）vite.config.ts配置 "></a><strong><font color='cornflowerblue'>1）vite.config.ts配置 </font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(), </span><br><span class="line">                <span class="comment">// IconsResolver(&#123;</span></span><br><span class="line">                <span class="comment">// prefix: &#x27;i&#x27;,</span></span><br><span class="line">                <span class="comment">// enabledCollections: [&#x27;ep&#x27;],</span></span><br><span class="line">                <span class="comment">// &#125;),</span></span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>网上很多教程有写在AutoImport中也需设置IconsResolver()，实际在AutoImport 下的 IconsResolver 中可以不添加 IconsResolver 配置，只在 Components 下的 IconsResolver 中进行相应配置就行</p><br><h5 id="2）自动导入icon-图标的格式"><a href="#2）自动导入icon-图标的格式" class="headerlink" title="2）自动导入icon 图标的格式"></a><strong><font color='cornflowerblue'>2）自动导入icon 图标的格式</font></strong></h5><p>{prefix}-{collection}-{icon}</p><p>即 ~ “前缀-使用的图标库名称-图标名” 格式形式来使用的，element-plus 的图标库名称是 “ep”，默认前缀是 “i”，需要改的话可以在 Components 配置项 的 IconsResolver 的<code>prefix</code>中进行相应配置</p><p>以elementPlus的<code>icon</code>为例（<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的也一样）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i-ep-Bowl</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-ep-alarmClock</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果设置属性例如颜色、大写则必须使用<code>&lt;el-icon&gt;</code>包裹，然后在其上写属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">:size</span>=<span class="string">&quot;60&quot;</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-ep-Plus</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h5 id="3）IconsResolver配置解析"><a href="#3）IconsResolver配置解析" class="headerlink" title="3）IconsResolver配置解析"></a><strong><font color='cornflowerblue'>3）IconsResolver配置解析</font></strong></h5><p>当IconsResolver()不设置参数的时候，<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的图标都能使用（这里面也包含了elementPlus的图标）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(), </span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172329868.png" alt="image-20250217232957812"></p><p>怎么使用<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的图标呢？举例子</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172349404.png" alt="image-20250217234948316"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172353815.png" alt="image-20250217235318764"></p><p>当IconsResolver()设置参数的时候，自定义图标格式前缀、限制使用图标库。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">                <span class="attr">prefix</span>: <span class="string">&#x27;icon&#x27;</span>,</span><br><span class="line">                <span class="attr">enabledCollections</span>: [<span class="string">&#x27;ep&#x27;</span>, <span class="string">&#x27;mdi&#x27;</span>, <span class="string">&#x27;iconamoon&#x27;</span>],</span><br><span class="line">                &#125;),</span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// xxxx.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">icon-mdi-Bowl</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon-mdi-alarmClock</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon-iconamoon-arrow-bottom-right-1-fill</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502180003832.png" alt="image-20250218000329782"></p><p>怎么去看enabledCollections中定义的这个图标库名称呢？</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502180004288.png" alt="image-20250218000454202"></p><p><strong><code>注意</code></strong></p><p>当没做图标库限制的时候，使用了哪些图标库就会自动安装这个图标库的依赖，因此更建议使用IconsResolver({})自定义的去限制图标库</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250220170724230.png" alt="image-20250220170724230"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、依赖包安装&quot;&gt;&lt;a href=&quot;#一、依赖包安装&quot; class=&quot;headerlink&quot; title=&quot;一、依赖包安装&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、依赖包安装&lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;figure cla</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
    <category term="element-Plus" scheme="http://example.com/tags/element-Plus/"/>
    
  </entry>
  
  <entry>
    <title>0-1搭建vue3项目及配置</title>
    <link href="http://example.com/posts/eb0b56b0.html"/>
    <id>http://example.com/posts/eb0b56b0.html</id>
    <published>2025-08-20T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.325Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。</p><p>核心采用**<code>antfu</code>**大神预设配置 替代prettier和eslint设置，保留stylelint原因是暂时antfu不支持。</p></blockquote><h3 id="1、前置条件"><a href="#1、前置条件" class="headerlink" title="1、前置条件"></a><strong><font color='red'>1、前置条件</font></strong></h3><h4 id="1-1、node版本"><a href="#1-1、node版本" class="headerlink" title="1.1、node版本"></a><strong><font color='#10c300'>1.1、node版本</font></strong></h4><p>node 最好&gt;20 因为eslint9的需要 本次项目node为20.15.1</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103820848.png" alt="image-20240828103820848"></p><h4 id="1-2、包管理器"><a href="#1-2、包管理器" class="headerlink" title="1.2、包管理器"></a><strong><font color='#10c300'>1.2、包管理器</font></strong></h4><p>包管理器 采用pnpm</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241207213915592.png" alt="image-20241207213915592"></p><h4 id="1-3、VsCode插件"><a href="#1-3、VsCode插件" class="headerlink" title="1.3、VsCode插件"></a><strong><font color='#10c300'>1.3、VsCode插件</font></strong></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.vscode/extensions.json</span><br><span class="line">它的作用是：当其他开发者用 VS Code 打开你的项目时，VS Code 会自动弹出提示，建议安装这些插件。</span><br><span class="line">recommendations：数组，列出推荐给团队成员的 VS Code 扩展插件 ID。</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;recommendations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Vue.volar&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;dbaeumer.vscode-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;csstools.postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;stylelint.vscode-stylelint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;antfu.unocss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;simonhe.to-unocss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103527225.png" alt="image-20240828103527225"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103542672.png" alt="image-20240828103542672"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103556492.png" alt="image-20240828103556492"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103620621.png" alt="image-20240828103620621"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103706879.png" alt="image-20240828103706879"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828140147090.png" alt="image-20240828140147090"></p><br><h3 id="2、创建项目"><a href="#2、创建项目" class="headerlink" title="2、创建项目"></a><strong><font color='red'>2、创建项目</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建（二选一）</span></span><br><span class="line">pnpm create vite (vite官方)</span><br><span class="line">pnpm create vue@latest (vue官方)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命名</span></span><br><span class="line">? Project name: » vite-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择框架</span></span><br><span class="line">    Vanilla</span><br><span class="line">&gt;   Vue</span><br><span class="line">    React</span><br><span class="line">    Preact</span><br><span class="line">    Lit</span><br><span class="line">    Svelte</span><br><span class="line">    Solid</span><br><span class="line">    Qwik</span><br><span class="line">    Others</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择自己需要的语言</span></span><br><span class="line">? Select a variant: »</span><br><span class="line">    TypeScript</span><br><span class="line">    JavaScript</span><br><span class="line">&gt;   Customize with create-vue (现成的模板——推荐)</span><br><span class="line">    Nuxt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选配</span></span><br><span class="line">√ 是否使用 TypeScript 语法？ » 是</span><br><span class="line">√ 是否启用 JSX 支持？  » 是</span><br><span class="line">√ 是否引入 Vue Router 进行单页面应用开发？ » 是</span><br><span class="line">√ 是否引入 Pinia 用于状态管理？ » 是</span><br><span class="line">√ 是否引入 Vitest 用于单元测试？  » 是</span><br><span class="line">√ 是否要引入一款端到端（End to End）测试工具？ » 不需要</span><br><span class="line">√ 是否引入 ESLint 用于代码质量检测？ » 否</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化依赖</span></span><br><span class="line">dependencies:</span><br><span class="line">+ pinia 2.3.1</span><br><span class="line">+ vue 3.5.13</span><br><span class="line">+ vue-router 4.5.0</span><br><span class="line"></span><br><span class="line">devDependencies:</span><br><span class="line">+ @tsconfig/node22 22.0.0</span><br><span class="line">+ @types/node 22.10.10</span><br><span class="line">+ @vitejs/plugin-vue 5.2.1</span><br><span class="line">+ @vitejs/plugin-vue-jsx 4.1.1</span><br><span class="line">+ @vue/tsconfig 0.7.0</span><br><span class="line">+ npm-run-all2 7.0.2</span><br><span class="line">+ typescript 5.7.3</span><br><span class="line">+ vite 6.0.11</span><br><span class="line">+ vite-plugin-vue-devtools 7.7.1</span><br><span class="line">+ vue-tsc 2.2.0</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202504020017399.png" alt="image-20250402001720296"></p><p>如果pnpm版本是 v10.1.0 及以上，安装依赖包的时候pnpm i会有这个警告提示。因为pnpm 从 v10.1.0 开始引入安全机制，默认禁止依赖包运行构建脚本（如 <code>postinstall</code>），需要手动批准。若未明确允许 <code>esbuild</code> 的脚本执行，则会出现此警告。</p><p><strong>解决：修改配置文件（适合长期配置）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;onlyBuiltDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esbuild&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、强制使用pnpm"><a href="#3、强制使用pnpm" class="headerlink" title="3、强制使用pnpm"></a><strong><font color='red'>3、强制使用pnpm</font></strong></h3><p><code>engines</code> 字段用于指定支持的 Node.js 版本以及其他依赖包的版本范围。它既不具有提示作用也不具有限制作用，它仅仅是一个标准，告诉使用者该软件包支持哪些版本的环境。</p><p><code>&quot;preinstall&quot;: &quot;npx only-allow pnpm&quot;</code>则具有强制作用，必须使用pnpm。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/ package.json</span><br><span class="line"><span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=20.15.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=9.0.6&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;preinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx only-allow pnpm&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124112043588.png" alt="image-20250124112043588"></p><br><h3 id="4、-vscode-配置文件"><a href="#4、-vscode-配置文件" class="headerlink" title="4、.vscode 配置文件"></a><strong><font color='red'>4、.vscode 配置文件</font></strong></h3><blockquote><p>用于保存带代码格式化功能</p></blockquote><p><strong>.vscode&#x2F;setting.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 这行配置开启了文件嵌套功能，使其在文件资源管理器中生效。</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 这是一个对象，其中定义了多个文件嵌套的模式。每个键值对定义了一个主文件和与之相关联的文件模式</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig, commitlint.config.*, lint-staged.config.*, stylelint.config.*, uno.config.*,.gitignore,.stylelintignore&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsdk&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/typescript/lib&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置 TypeScript 语言服务的 SDK 路径，指向本地的 TypeScript 库。</span></span><br><span class="line">    <span class="attr">&quot;npm.packageManager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置使用的包管理器为 pnpm。 设置主要影响 VS Code 内置的一些自动化任务和脚本运行，但并不会影响你在终端中手动输入的命令。</span></span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 设置编辑器中的制表符宽度为 4 个空格。</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span> <span class="comment">// 指定默认的代码格式化工具为 esbenp.prettier-vscode</span></span><br><span class="line">    <span class="comment">// 保存文件缓慢时，可以考虑开启以下 3 行配置。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.maxOldSpaceSize&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 Vue 服务器端渲染的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.hybridMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 服务器端渲染的混合模式。</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsserver.maxTsServerMemory&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 TypeScript 语言服务的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;files.eol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置文件的行结束符为换行符（\n）。</span></span><br><span class="line">    <span class="attr">&quot;editor.guides.bracketPairs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对高亮显示功能。</span></span><br><span class="line">    <span class="attr">&quot;editor.bracketPairColorization.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对颜色突出显示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.inlayHints.missingProps&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 组件的属性提示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.autoInsert.dotValue&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 自动插入缺失的属性值。</span></span><br><span class="line">    <span class="attr">&quot;explorer.copyRelativePathSeparator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置复制相对路径时使用的分隔符为正斜杠。</span></span><br><span class="line">    <span class="attr">&quot;search.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的搜索。</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log*&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/elehukouben&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.gitignore&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;CHANGELOG.md&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;examples&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;res&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;screenshots&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pnpm i-error.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.pnpm i&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的文件搜索和处理。</span></span><br><span class="line">        <span class="attr">&quot;**/.cache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.editorconfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.eslintcache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.hg&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/CVS&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.watcherExclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置文件监视器中要排除的文件和目录，以减少不必要的文件监视。</span></span><br><span class="line">        <span class="attr">&quot;**/.git/objects/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git/subtree-cache/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint.useFlatConfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 ESLint 的扁平化配置。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 stylelint 验证。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 配置要验证的文件类型，包括 CSS、LESS、SCSS、Vue、Sass。</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sass&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;path-intellisense.mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置路径别名，用于提高代码可读性和开发效率。</span></span><br><span class="line">        <span class="attr">&quot;@/&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/src&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.localesPaths&quot;: [&quot;src/locales/lang&quot;], // 配置 i18n-ally 插件的语言文件路径。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.keystyle&quot;: &quot;nested&quot;, // 配置 i18n-ally 插件的键风格为嵌套。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sortKeys&quot;: true, // 配置 i18n-ally 插件的键排序。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.namespace&quot;: true, // 配置 i18n-ally 插件的命名空间。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.pathMatcher&quot;: &quot;&#123;locale&#125;/&#123;namespaces&#125;.&#123;ext&#125;&quot;, // 配置 i18n-ally 插件的路径匹配器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledParsers&quot;: [&quot;json&quot;], // 配置 i18n-ally 插件的启用解析器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sourceLanguage&quot;: &quot;en&quot;, // 配置 i18n-ally 插件的源语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.displayLanguage&quot;: &quot;zh-CN&quot;, // 配置 i18n-ally 插件的显示语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledFrameworks&quot;: [&quot;vue&quot;, &quot;react&quot;], // 配置 i18n-ally 插件的启用框架。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用默认格式化程序，改用eslint</span></span><br><span class="line">    <span class="attr">&quot;prettier.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 自动修复</span></span><br><span class="line">    <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 保存时格式化</span></span><br><span class="line">        <span class="comment">// 保存时启用eslint格式化</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// &quot;never&quot;表示在保存文件时，不会自动整理或排序import语句。性能消耗大，因此关闭。</span></span><br><span class="line">        <span class="attr">&quot;source.organizeImports&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// 保存时启用stylelint格式化less或是sass</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义 ESLint 规则的行为，关闭某些风格规则的警告，但仍然允许自动修复。</span></span><br><span class="line">     <span class="attr">&quot;eslint.rules.customizations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;style/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;format/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-indent&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spacing&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spaces&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-order&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-dangle&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-newline&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*quotes&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*semi&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用 CSS、LESS 和 SCSS 的内置验证。</span></span><br><span class="line">    <span class="attr">&quot;css.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scss.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 启用 ESLint 支持的所有语言类型</span></span><br><span class="line">    <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;markdown&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;jsonc&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;toml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;xml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;gql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;graphql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;astro&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这两行的作用就是文件嵌套作用</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124144015367.png" alt="image-20250124144015367"></p><br><h3 id="5、styleLint-【采用】"><a href="#5、styleLint-【采用】" class="headerlink" title="5、styleLint 【采用】"></a><strong><font color='red'>5、styleLint 【采用】</font></strong></h3><blockquote><p>less和sass 推荐只选一个</p></blockquote><p><strong><font color='#10c300'>5.1、依赖包 </font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">+ less <span class="number">4.2</span><span class="number">.2</span></span><br><span class="line">+ postcss-less <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">+ sass <span class="number">1.83</span><span class="number">.4</span></span><br><span class="line">+ postcss-scss <span class="number">4.0</span><span class="number">.9</span></span><br><span class="line">+ postcss <span class="number">8.5</span><span class="number">.1</span></span><br><span class="line">+ postcss-html <span class="number">1.8</span><span class="number">.0</span></span><br><span class="line">+ stylelint <span class="number">16.13</span><span class="number">.2</span></span><br><span class="line">+ stylelint-config-recess-order <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">+ stylelint-config-standard <span class="number">37.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.2、安装 </font></strong></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 选择sass</span><br><span class="line">pnpm i sass postcss postcss-scss postcss-html stylelint stylelint-config-standard-scss stylelint-config-recess-order -D</span><br><span class="line"></span><br><span class="line"># 选择lees</span><br><span class="line">pnpm i less postcss postcss-less postcss-html stylelint stylelint-config-standard-less stylelint-config-recess-order -D</span><br></pre></td></tr></table></figure><table><thead><tr><th>依赖</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>stylelint</td><td>stylelint核心库</td><td>stylelint</td></tr><tr><td>stylelint-config-standard</td><td>Stylelint 的标准配置，适用于普通的 CSS 文件</td><td>帮助开发者编写一致、规范的 CSS 代码。</td></tr><tr><td>stylelint-config-standard-scss</td><td>专门为 SCSS（Sass）文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 SCSS 语法的支持</td></tr><tr><td>stylelint-config-standard-less</td><td>专门为 less文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 less语法的支持</td></tr><tr><td>stylelint-config-recess-order</td><td>提供优化样式顺序配置</td><td>css样式书写顺序规范</td></tr><tr><td>postcss</td><td>处理 CSS 的工具</td><td>自动添加浏览器前缀、CSS 进行压缩、去除未使用的 CSS、合并相同的选择器等优化操作等等</td></tr><tr><td>postcss-scss</td><td>postcss的scss解析器</td><td>postcss-scss文档，支持css行类注释</td></tr><tr><td>postcss-html</td><td>解析html(类似html)的postcss语法</td><td>postcss-html文档</td></tr></tbody></table><p><strong>如果项目使用的是scss就使用stylelint-config-standard-scss，如果scss和less都没使用则安装stylelint-config-standard</strong></p><p><strong><font color='#10c300'>5.3、配置文件 </font></strong></p><p><strong>stylelint.config.mjs</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;stylelint&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// stylelint-config-standard 基础配置</span></span><br><span class="line">    <span class="comment">// stylelint-config-recess-order 样式顺序</span></span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;stylelint-config-standard-scss&#x27;</span>, <span class="string">&#x27;stylelint-config-recess-order&#x27;</span>],</span><br><span class="line">    <span class="comment">// 不同文件类型用不同解析器</span></span><br><span class="line">    <span class="attr">overrides</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;**/*.(css|html|vue)&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-html&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 选less可以注释scss</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     files: [&#x27;*.less&#x27;, &#x27;**/*.less&#x27;],</span></span><br><span class="line">        <span class="comment">//     customSyntax: &#x27;postcss-less&#x27;,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// 选sass可以注释上面的less</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;*.scss&#x27;</span>, <span class="string">&#x27;**/*.scss&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-scss&#x27;</span>,</span><br><span class="line">            <span class="attr">rules</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;scss/percent-placeholder-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="comment">// &#x27;prettier/prettier&#x27;: true,</span></span><br><span class="line">        <span class="string">&#x27;media-feature-range-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-not-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;import-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;function-no-unknown&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-class-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-class-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoClasses</span>: [<span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-element-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoElements</span>: [<span class="string">&#x27;v-deep&#x27;</span>, <span class="string">&#x27;:deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;at-rule-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignoreAtRules</span>: [</span><br><span class="line">                    <span class="string">&#x27;tailwind&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;apply&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;variants&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;responsive&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;screen&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;if&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;each&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;include&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;mixin&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;extend&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;use&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;no-empty-source&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;named-grid-areas-no-invalid&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;no-descending-specificity&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;font-family-no-missing-generic-family-keyword&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;rule-empty-line-before&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignore</span>: [<span class="string">&#x27;after-comment&#x27;</span>, <span class="string">&#x27;first-nested&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;unit-no-unknown&#x27;</span>: [<span class="literal">true</span>, &#123; <span class="attr">ignoreUnits</span>: [<span class="string">&#x27;rpx&#x27;</span>] &#125;],</span><br><span class="line">        <span class="string">&#x27;order/order&#x27;</span>: [</span><br><span class="line">            [</span><br><span class="line">                <span class="string">&#x27;dollar-variables&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;custom-properties&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;at-rules&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;declarations&#x27;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;supports&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;media&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;rules&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">            &#123; <span class="attr">severity</span>: <span class="string">&#x27;error&#x27;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ignoreFiles</span>: [<span class="string">&#x27;**/*.js&#x27;</span>, <span class="string">&#x27;**/*.jsx&#x27;</span>, <span class="string">&#x27;**/*.tsx&#x27;</span>, <span class="string">&#x27;**/*.ts&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.4、新增脚本 </font></strong></p><p><strong>package.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 修复报错</span></span><br><span class="line">    <span class="attr">&quot;lint:stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stylelint  \&quot;**/*.&#123;css,scss,less,vue,html&#125;\&quot; --fix&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.4、添加忽略文件 </font></strong></p><p><strong>.stylelintignore</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dist<span class="comment">/*</span></span><br><span class="line"><span class="comment">/public/*</span></span><br></pre></td></tr></table></figure><br><h3 id="6、antfu-组合prettier-eslint-【采用】"><a href="#6、antfu-组合prettier-eslint-【采用】" class="headerlink" title="6、antfu 组合prettier&amp;eslint 【采用】"></a><strong><font color='red'>6、antfu 组合prettier&amp;eslint 【采用】</font></strong></h3><blockquote><p>配置网站 <a href="https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file">https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file</a></p><p>先选一个unocss 免得后续再去安装unocss的@unocss&#x2F;eslint-plugin</p></blockquote><p><strong><font color='#10c300'>6.1、命令行界面 (CLI) 安装 </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ 空格选择 回车下一步</span><br><span class="line">npx @antfu/eslint-config@latest</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124161525291.png" alt="image-20250124161525291"></p><p>最后一步选NO，配置setting.json中的内容，因为之前一次性配置了，因为这里选no。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">+ @antfu/eslint-config <span class="number">3.16</span><span class="number">.0</span></span><br><span class="line">+ @unocss/eslint-plugin <span class="number">65.4</span><span class="number">.3</span></span><br><span class="line">+ eslint <span class="number">9.18</span><span class="number">.0</span></span><br><span class="line">+ eslint-plugin-format <span class="number">1.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p>默认会添加这些依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i</span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>6.2、配置文件 </font></strong></p><blockquote><p>修改生成配置文件<code>eslint.config.js</code>为<code>eslint.config.mjs</code> 用于eslint规则校验</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import antfu from &#x27;@antfu/eslint-config&#x27;</span><br><span class="line"></span><br><span class="line">export default antfu(</span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        stylistic<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            indent<span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 缩进</span></span><br><span class="line">            quotes<span class="punctuation">:</span> &#x27;single&#x27;<span class="punctuation">,</span> <span class="comment">// 单引号</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        formatters<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">//</span></span><br><span class="line">        typescript<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持ts</span></span><br><span class="line">        unocss<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持unocss</span></span><br><span class="line">        isInEditor<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 保存删除未引入的代码</span></span><br><span class="line">        vue<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            overrides<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="comment">// vue文件顺序</span></span><br><span class="line">                &#x27;vue/block-order&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;error&#x27;<span class="punctuation">,</span> <span class="punctuation">&#123;</span> order<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span>&#x27;template&#x27;<span class="punctuation">,</span> &#x27;script&#x27;<span class="punctuation">]</span><span class="punctuation">,</span> &#x27;style&#x27;<span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> </span><br><span class="line">                &#x27;vue/singleline-html-element-content-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭单行元素内容换行</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        rules<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            &#x27;no-console&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭console检查</span></span><br><span class="line">            &#x27;no-debugger&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭debugger检查</span></span><br><span class="line">            &#x27;antfu/top-level-function&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 顶级函数检测(开启时会将箭头函数转换为普通函数)</span></span><br><span class="line">            &#x27;antfu/if-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 禁止换行 例如 if (a) return a使这种return a不会换行</span></span><br><span class="line">            &#x27;style/brace-style&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭大括号风格检查(只要有大括号就会换行的情况)</span></span><br><span class="line">            &#x27;no-alert&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭alert检查</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 9x版本 忽略文件这种配置方式 废弃掉eslintignore</span></span><br><span class="line">        ignores<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            &#x27;*.md&#x27;<span class="punctuation">,</span></span><br><span class="line">            &#x27;**<span class="comment">/*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.sh&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.husky&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.local&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;node_modules&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.woff&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.ttf&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.idea&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;docs/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;public/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;/bin/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;Dockerfile&#x27;,</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>6.3、新增脚本 </font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint .&quot;</span><span class="punctuation">,</span> <span class="comment">// 检测</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --fix&quot;</span> <span class="comment">// 修复</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、-gitignore文件"><a href="#7、-gitignore文件" class="headerlink" title="7、.gitignore文件"></a><strong><font color='red'>7、.gitignore文件</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Logs</span></span><br><span class="line">logs</span><br><span class="line">*.<span class="property">log</span></span><br><span class="line">npm-debug.<span class="property">log</span>*</span><br><span class="line">yarn-debug.<span class="property">log</span>*</span><br><span class="line">yarn-error.<span class="property">log</span>*</span><br><span class="line">lerna-debug.<span class="property">log</span>*</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Diagnostic</span> <span class="title function_">reports</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/report.html)</span></span><br><span class="line">report.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.<span class="property">json</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Runtime</span> data</span><br><span class="line">pids</span><br><span class="line">*.<span class="property">pid</span></span><br><span class="line">*.<span class="property">seed</span></span><br><span class="line">*.<span class="property">pid</span>.<span class="property">lock</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Directory</span> <span class="keyword">for</span> instrumented libs generated by jscoverage/<span class="title class_">JSCover</span></span><br><span class="line">lib-cov</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Coverage</span> directory used by tools like istanbul</span><br><span class="line">coverage</span><br><span class="line">*.<span class="property">lcov</span></span><br><span class="line"></span><br><span class="line"># nyc test coverage</span><br><span class="line">.<span class="property">nyc_output</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Grunt</span> intermediate <span class="title function_">storage</span> (<span class="attr">https</span>:<span class="comment">//gruntjs.com/creating-plugins#storing-task-files)</span></span><br><span class="line">.<span class="property">grunt</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Bower</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//bower.io/)</span></span><br><span class="line">bower_components</span><br><span class="line"></span><br><span class="line"># node-waf configuration</span><br><span class="line">.<span class="property">lock</span>-wscript</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Compiled</span> binary <span class="title function_">addons</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/addons.html)</span></span><br><span class="line">build/<span class="title class_">Release</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Dependency</span> directories</span><br><span class="line">node_modules/</span><br><span class="line">jspm_packages/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Snowpack</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//snowpack.dev/)</span></span><br><span class="line">web_modules/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TypeScript</span> cache</span><br><span class="line">*.<span class="property">tsbuildinfo</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> npm cache directory</span><br><span class="line">.<span class="property">npm</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> eslint cache</span><br><span class="line">.<span class="property">eslintcache</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Microbundle</span> cache</span><br><span class="line">.<span class="property">rpt2_cache</span>/</span><br><span class="line">.<span class="property">rts2_cache_cjs</span>/</span><br><span class="line">.<span class="property">rts2_cache_es</span>/</span><br><span class="line">.<span class="property">rts2_cache_umd</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> <span class="variable constant_">REPL</span> history</span><br><span class="line">.<span class="property">node_repl_history</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Output</span> <span class="keyword">of</span> <span class="string">&#x27;npm pack&#x27;</span></span><br><span class="line">*.<span class="property">tgz</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Yarn</span> <span class="title class_">Integrity</span> file</span><br><span class="line">.<span class="property">yarn</span>-integrity</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># parcel-bundler <span class="title function_">cache</span> (<span class="attr">https</span>:<span class="comment">//parceljs.org/)</span></span><br><span class="line">.<span class="property">cache</span></span><br><span class="line">.<span class="property">parcel</span>-cache</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Next</span>.<span class="property">js</span> build output</span><br><span class="line">.<span class="property">next</span></span><br><span class="line">out</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Nuxt</span>.<span class="property">js</span> build / generate output</span><br><span class="line">.<span class="property">nuxt</span></span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Gatsby</span> files</span><br><span class="line">.<span class="property">cache</span>/</span><br><span class="line"># <span class="title class_">Comment</span> <span class="keyword">in</span> the public line <span class="keyword">in</span> <span class="keyword">if</span> your project uses <span class="title class_">Gatsby</span> and not <span class="title class_">Next</span>.<span class="property">js</span></span><br><span class="line"># <span class="attr">https</span>:<span class="comment">//nextjs.org/blog/next-9-1#public-directory-support</span></span><br><span class="line"># public</span><br><span class="line"></span><br><span class="line"># vuepress build output</span><br><span class="line">.<span class="property">vuepress</span>/dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Serverless</span> directories</span><br><span class="line">.<span class="property">serverless</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">FuseBox</span> cache</span><br><span class="line">.<span class="property">fusebox</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">DynamoDB</span> <span class="title class_">Local</span> files</span><br><span class="line">.<span class="property">dynamodb</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TernJS</span> port file</span><br><span class="line">.<span class="property">tern</span>-port</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Stores</span> <span class="title class_">VSCode</span> versions used <span class="keyword">for</span> testing <span class="title class_">VSCode</span> extensions</span><br><span class="line">.<span class="property">vscode</span>-test</span><br><span class="line"></span><br><span class="line"># yarn v2</span><br><span class="line">.<span class="property">yarn</span>/cache</span><br><span class="line">.<span class="property">yarn</span>/unplugged</span><br><span class="line">.<span class="property">yarn</span>/build-state.<span class="property">yml</span></span><br><span class="line">.<span class="property">yarn</span>/install-state.<span class="property">gz</span></span><br><span class="line">.<span class="property">pnp</span>.*</span><br><span class="line"></span><br><span class="line">stats.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">.<span class="property">stylelintcache</span></span><br></pre></td></tr></table></figure><br><h3 id="8、代码提交检查"><a href="#8、代码提交检查" class="headerlink" title="8、代码提交检查"></a><strong><font color='red'>8、代码提交检查</font></strong></h3><p>Husky + Lint-staged + Commitlint 来配置 Git 提交代码规范。</p><blockquote><p>核心内容是配置 <strong>Husky</strong> 的<code>pre-commit</code>和 <code>commit-msg</code> 两个钩子:</p><p>**<code>pre-commit</code>：**Husky + Lint-staged 整合实现 Git 提交前代码规范检测&#x2F;格式化 (前提：ESlint + Prettier + Stylelint 代码统一规范)；</p><p><strong><code>commit-msg</code>：</strong> Husky + Commitlint 整合实现生成规范化且高度自定义的 Git commit message。</p></blockquote><h4 id="8-1、husky-Git-钩子工具"><a href="#8-1、husky-Git-钩子工具" class="headerlink" title="8.1、husky Git 钩子工具 "></a><strong><font color='#10c300'>8.1、husky Git 钩子工具 </font></strong></h4><p>Husky 是 Git 钩子工具，可以设置在 git 各个阶段（<code>pre-commit</code>、<code>commit-msg</code> 等）触发。</p><p>官网<a href="https://typicode.github.io/husky">https://typicode.github.io/husky</a> 推荐安装指令</p><br><p><font color='orange'>命令行界面 (CLI) 安装</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173230055.png" alt="image-20250124173230055"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207141214268.png" alt="image-20240207141214268"></p><p>默认会添加这个依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/ pnpm i</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173359482.png" alt="image-20250124173359482"></p><br><h4 id="8-2、Lint-staged-检测提交代码"><a href="#8-2、Lint-staged-检测提交代码" class="headerlink" title="8.2、Lint-staged 检测提交代码 "></a><strong><font color='#10c300'>8.2、Lint-staged 检测提交代码 </font></strong></h4><blockquote><p>lint-staged 是一个在 git add 到暂存区的文件运行 linters (ESLint&#x2F;Prettier&#x2F;StyleLint) 的工具进行检测，避免在 git commit 提交时在整个项目执行。</p></blockquote><h5 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i lint-staged -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p><strong>a、新建 lint-staged.config.mjs 配置文件</strong></p><p>cache缓存能使钩子检测速度更快</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;lint-staged&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">&#x27;*.&#123;js,ts,tsx,vue&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;eslint --fix --cache --cache-location .eslintcache&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.&#123;scss,html&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;stylelint --fix --cache --cache-location .stylelintcache --allow-empty-input&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.css&#x27;</span>: [<span class="string">&#x27;prettier --write&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>b、package.json 中添加指令</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint:lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><strong>c、文件<code>.husky/pre-commit</code>修改提交前钩子命令</strong></p><p>提交的时候执行pre-commit文件中命令，然后触发package.json 中的lint:lint-staged，从而执行lint-staged.config.mjs配置文件去做检测。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!<span class="regexp">/usr/</span>bin/env sh</span><br><span class="line">. <span class="string">&quot;$(dirname -- &quot;</span>$0<span class="string">&quot;)/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"># 添加该命令</span><br><span class="line">npm run <span class="attr">lint</span>:lint-staged --allow-empty</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207143016869.png" alt="image-20240207143016869"></p><br><h4 id="8-3、Commitlint-检测提交命名"><a href="#8-3、Commitlint-检测提交命名" class="headerlink" title="8.3、Commitlint 检测提交命名 "></a><strong><font color='#10c300'>8.3、Commitlint 检测提交命名 </font></strong></h4><blockquote><p>Commitlint 检查您的提交消息是否符合 Conventional comm it format 规范。– <a href="https://commitlint.js.org/">Commitlint 官网</a></p></blockquote><h5 id="1）安装-1"><a href="#1）安装-1" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i @commitlint/cli @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure><br><h5 id="2）语法规范"><a href="#2）语法规范" class="headerlink" title="2）语法规范 "></a><strong><font color='cornflowerblue'>2）语法规范 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 语法规范</span><br><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br><span class="line">       </span><br><span class="line">// 示例</span><br><span class="line">feat(用户模块): 新增用户登录功能</span><br><span class="line"></span><br><span class="line">此提交引入了一个新的用户登录功能，允许用户通过邮箱和密码进行身份验证。</span><br><span class="line">同时，还包含了输入字段的验证和错误处理。</span><br><span class="line"></span><br><span class="line">Closes #123</span><br></pre></td></tr></table></figure><br><h5 id="3）语法拆解说明"><a href="#3）语法拆解说明" class="headerlink" title="3）语法拆解说明"></a><strong><font color='cornflowerblue'>3）语法拆解说明</font></strong></h5><ol><li>头部（Header）<ul><li><strong><code>&lt;type&gt;</code></strong>: 提交的类型，常见的类型包括：<ul><li><code>feat</code>: 新增功能</li><li><code>fix</code>: 修复缺陷</li><li><code>docs</code>: 文档变更</li><li><code>style</code>: 代码格式（不影响功能）</li><li><code>refactor</code>: 代码重构</li><li><code>perf</code>: 性能优化</li><li><code>test</code>: 添加测试或改动已有测试</li><li><code>build</code>: 构建过程或外部依赖的变更</li><li><code>ci</code>: 修改 CI 配置</li><li><code>chore</code>: 其他杂项更改</li><li><code>revert</code>: 回滚提交</li></ul></li><li><strong><code>&lt;scope&gt;</code></strong>: 可选，表示提交影响的范围（如模块名、文件名等），例如 <code>ui</code> 或 <code>api</code>。可以用括号括起来。</li><li><strong><code>&lt;subject&gt;</code></strong>: 提交的简要描述，建议不超过 50 个字符，使用祈使句（例如：<code>add login feature</code>）。</li></ul></li><li><strong>正文（Body）</strong><ul><li>可选，用于详细描述提交的内容和背景。可以包含多行，建议每行不超过 72 个字符。</li><li>说明为什么要做这些更改，以及如何解决了问题或实现了功能。</li></ul></li><li><strong>尾部（Footer）</strong><ul><li>可选，通常用于引用相关的任务、问题编号或其他重要的元信息。</li><li>例如：<code>Closes #123</code> 或 <code>Fixes #456</code>，表示这个提交关闭或修复了特定的问题。</li></ul></li></ol><br><h5 id="4）注意"><a href="#4）注意" class="headerlink" title="4）注意 "></a><strong><font color='cornflowerblue'>4）注意 </font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502252255451.png" alt="image-20250225005214324"></p><br><h5 id="5）配置文件"><a href="#5）配置文件" class="headerlink" title="5）配置文件 "></a><strong><font color='cornflowerblue'>5）配置文件 </font></strong></h5><p>根目录创建 <code>commitlint.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&quot;@commitlint/types&quot;).UserConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">ignores</span>: [<span class="function">(<span class="params">commit</span>) =&gt;</span> commit.<span class="title function_">includes</span>(<span class="string">&quot;init&quot;</span>)],</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;@commitlint/config-conventional&quot;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;body-leading-blank&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;footer-leading-blank&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;header-max-length&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>, <span class="number">108</span>],</span><br><span class="line">    <span class="string">&quot;subject-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;type-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;subject-case&quot;</span>: [<span class="number">0</span>],</span><br><span class="line">    <span class="string">&quot;type-enum&quot;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;always&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;feat&quot;</span>, <span class="comment">// 新增功能</span></span><br><span class="line">        <span class="string">&quot;fix&quot;</span>, <span class="comment">// 修复缺陷</span></span><br><span class="line">        <span class="string">&quot;docs&quot;</span>, <span class="comment">// 文档变更</span></span><br><span class="line">        <span class="string">&quot;style&quot;</span>, <span class="comment">// 代码格式（不影响功能，例如空格、分号等格式修正）</span></span><br><span class="line">        <span class="string">&quot;refactor&quot;</span>, <span class="comment">// 代码重构（不包括 bug 修复、功能新增）</span></span><br><span class="line">        <span class="string">&quot;perf&quot;</span>, <span class="comment">// 性能优化</span></span><br><span class="line">        <span class="string">&quot;test&quot;</span>, <span class="comment">// 添加疏漏测试或已有测试改动</span></span><br><span class="line">        <span class="string">&quot;build&quot;</span>, <span class="comment">// 构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）</span></span><br><span class="line">        <span class="string">&quot;ci&quot;</span>, <span class="comment">// 修改 CI 配置、脚本</span></span><br><span class="line">        <span class="string">&quot;revert&quot;</span>, <span class="comment">// 回滚 commit</span></span><br><span class="line">        <span class="string">&quot;chore&quot;</span>, <span class="comment">// 对构建过程或辅助工具和库的更改（不影响源文件、测试用例）</span></span><br><span class="line">        <span class="string">&#x27;wip&#x27;</span>, <span class="comment">// 开发中临时提交</span></span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>执行下面命令生成 <code>commint-msg</code> 钩子用于 git 提交信息校验</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .<span class="property">husky</span>/commit-msg <span class="string">&quot;npx --no -- commitlint --edit $1&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207142542813.png" alt="image-20240207142542813"></p><br><h3 id="9、其他"><a href="#9、其他" class="headerlink" title="9、其他"></a><strong><font color='red'>9、其他</font></strong></h3><blockquote><p><strong>不使用antfu 直接使用prettier&amp;eslint &amp;styleLint</strong></p></blockquote><h4 id="9-1、prettier"><a href="#9-1、prettier" class="headerlink" title="9.1、prettier"></a><strong><font color='#10c300'>9.1、prettier</font></strong></h4><h5 id="1）安装-2"><a href="#1）安装-2" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i prettier -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-1"><a href="#2）配置文件-1" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>根目录创建 <code>prettier.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;prettier&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">$schema</span>: <span class="string">&quot;https://json.schemastore.org/prettierrc&quot;</span>,</span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="9-2、eslint"><a href="#9-2、eslint" class="headerlink" title="9.2、eslint"></a><strong><font color='#10c300'>9.2、eslint</font></strong></h4><blockquote><p><strong>使用9x版本 扁平化设计 导致很多插件版本滞后</strong></p></blockquote><h5 id="1）安装-3"><a href="#1）安装-3" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><p>脚手架快速安装 然后pnpm i安装相关依赖包（如果创建项目的时候安装了，则不需要安装）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create @eslint/config@latest</span><br></pre></td></tr></table></figure><p>额外安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i eslint-define-config eslint-plugin-import -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-2"><a href="#2）配置文件-2" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>修改<code>eslint.config.js</code>为<code>eslint.config.mjs</code>保持风格统一</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> globals <span class="keyword">from</span> <span class="string">&quot;globals&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginJs <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> tseslint <span class="keyword">from</span> <span class="string">&quot;typescript-eslint&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginVue <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginImport <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-import&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineFlatConfig &#125; <span class="keyword">from</span> <span class="string">&quot;eslint-define-config&quot;</span>;</span><br><span class="line"><span class="comment">// 修复 https://eslint.nodejs.cn/blog/2024/05/eslint-compatibility-utilities/</span></span><br><span class="line"><span class="keyword">import</span> &#123; fixupPluginRules &#125; <span class="keyword">from</span> <span class="string">&quot;@eslint/compat&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineFlatConfig</span>([</span><br><span class="line">  <span class="comment">// 上面这一大截是官方的</span></span><br><span class="line">  &#123; <span class="attr">files</span>: [<span class="string">&quot;**/*.&#123;js,mjs,cjs,ts,vue&#125;&quot;</span>] &#125;,</span><br><span class="line">  pluginJs.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123; <span class="attr">globals</span>: globals.<span class="property">browser</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ...tseslint.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  ...pluginVue.<span class="property">configs</span>[<span class="string">&quot;flat/essential&quot;</span>],</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">parser</span>: tseslint.<span class="property">parser</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 这是引入顺序插件</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>, <span class="string">&quot;**/*.?([cm])ts&quot;</span>, <span class="string">&quot;**/*.?([cm])tsx&quot;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="comment">// 修复插件还没升级到9版本</span></span><br><span class="line">      <span class="attr">import</span>: <span class="title function_">fixupPluginRules</span>(pluginImport),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">      <span class="comment">// 插件还没升级到9x版本</span></span><br><span class="line">      <span class="string">&quot;import/first&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/no-duplicates&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/order&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">groups</span>: [</span><br><span class="line">            <span class="comment">/* </span></span><br><span class="line"><span class="comment">              builtin ：内置模块，如 path，fs等 Node.js内置模块。</span></span><br><span class="line"><span class="comment">              external ：外部模块，如 lodash ，react 等第三方库。</span></span><br><span class="line"><span class="comment">              internal ：内部模块，如相对路径的模块、包名前缀为 @ 的模块。</span></span><br><span class="line"><span class="comment">              unknown ：未知模块，如模块名没有指定扩展名或模块路径缺失扩展名。</span></span><br><span class="line"><span class="comment">              parent ：父级目录的模块。</span></span><br><span class="line"><span class="comment">              sibling ：同级目录的模块。</span></span><br><span class="line"><span class="comment">              index ：当前目录的 index 文件。</span></span><br><span class="line"><span class="comment">              object ：使用ES6 导入的模块。</span></span><br><span class="line"><span class="comment">              type ：使用 import type 导入的模块。</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            [<span class="string">&quot;builtin&quot;</span>, <span class="string">&quot;external&quot;</span>],</span><br><span class="line">            <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">            [<span class="string">&quot;parent&quot;</span>, <span class="string">&quot;sibling&quot;</span>],</span><br><span class="line">            <span class="string">&quot;index&quot;</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>,</span><br><span class="line">            <span class="string">&quot;object&quot;</span>,</span><br><span class="line">            <span class="string">&quot;unknown&quot;</span>,</span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">pathGroups</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;../**&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;parent&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;./*.scss&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;sibling&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">          <span class="comment">// 不同组之间是否换行。</span></span><br><span class="line">          <span class="comment">// &#x27;newlines-between&#x27;: &#x27;always&#x27;,</span></span><br><span class="line">          <span class="comment">// 根据字母顺序对每组内的引用进行排序。</span></span><br><span class="line">          <span class="attr">alphabetize</span>: &#123;</span><br><span class="line">            <span class="attr">order</span>: <span class="string">&quot;asc&quot;</span>,</span><br><span class="line">            <span class="attr">caseInsensitive</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><br><h3 id="10、简化组件命名"><a href="#10、简化组件命名" class="headerlink" title="10、简化组件命名"></a><strong><font color='red'>10、简化组件命名</font></strong></h3><p><strong>正常组件命名</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>vite-plugin-vue-setup-extend</code></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vue-setup-extend -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>组件中使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="11、打包环境区分"><a href="#11、打包环境区分" class="headerlink" title="11、打包环境区分"></a><strong><font color='red'>11、打包环境区分</font></strong></h3><p>vite.config.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>返回四个参数：</strong></p><ul><li><code>mode</code>：当前的运行模式（例如 <code>development</code> 或 <code>production</code>），没配置env文件默认就只有这两个值。</li><li><code>command</code>：当前运行的命令（例如 <code>serve</code> 或 <code>build</code>），本地运行返回serve，使用打包之后返回的build</li><li><code>isSsrBuild</code>：是否在进行服务器端渲染的构建。</li><li><code>isPreview</code>：是否在预览模式下运行。</li></ul><p><strong>实践可知：</strong></p><p>在运行本地项目时：</p><p> 有无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回都是<code>mode=&quot;development&quot;</code>，<code>command=&quot;serve&quot;</code>；</p><p>在运行打包项目时：</p><p> 默认无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回<code>mode=&quot;production&quot;</code>，<code>command=&quot;build&quot;</code>；</p><p> 有<code>.env</code>文件时，根据打包的配置来的 ，如果你打包运行的是<code>.env.sit</code>文件，res返回的则是<code>mode=&quot;sit&quot;</code>，<code>command=&quot;build&quot;</code>；</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;run-p type-check \&quot;build-only &#123;@&#125;\&quot; --&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:sit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- sit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:uat&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- uat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- production&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type-check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build-only&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build --mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>vite.config.ts 中访问.env文件：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> process <span class="keyword">from</span> <span class="string">&#x27;node:process&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(env)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.sit</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.uat</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.product</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="12、添加基准路径"><a href="#12、添加基准路径" class="headerlink" title="12、添加基准路径"></a><strong><font color='red'>12、添加基准路径</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="string">&#x27;/pc/&#x27;</span>),</span><br><span class="line">    <span class="attr">routes</span>: [],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">base</span>: env.<span class="property">VITE_BASE_URL</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="13、添加打包的dist文件预览配置"><a href="#13、添加打包的dist文件预览配置" class="headerlink" title="13、添加打包的dist文件预览配置"></a><strong><font color='red'>13、添加打包的dist文件预览配置</font></strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="14、本地代理服务配置"><a href="#14、本地代理服务配置" class="headerlink" title="14、本地代理服务配置"></a><strong><font color='red'>14、本地代理服务配置</font></strong></h3><p>官网<a href="https://cn.vitejs.dev/config/server-options.html#server-proxy">https://cn.vitejs.dev/config/server-options.html#server-proxy</a></p><p><code>vite.config.ts</code>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="comment">// 监听所有公共ip</span></span><br><span class="line">        <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">        <span class="attr">cors</span>: <span class="literal">true</span>, <span class="comment">// 允许所有来源访问本地开发服务器的资源</span></span><br><span class="line">        <span class="attr">port</span>: <span class="number">3300</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123; <span class="comment">// 代理前缀</span></span><br><span class="line">                <span class="comment">// 转发地址 前端请求http://localhost:3000/api/users代理后实际请求          http://www.example.com/users </span></span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;http://www.example.com&#x27;</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 修改 Origin 头为目标地址</span></span><br><span class="line">                <span class="comment">// 移除路径中开头的 /api 前缀 例如：/api/users → /users</span></span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function">(<span class="params">path: string</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>参数解析</strong></p><p>cors和changeOrigin</p><p>在 <code>vite.config.ts</code> 中，<code>cors: true</code> 和 <code>changeOrigin: true</code> 用于解决不同场景下的跨域问题，具体区别如下：</p><p>1、<strong><code>cors: true</code></strong></p><ul><li><strong>作用</strong>：配置开发服务器（Vite Dev Server）的 CORS 响应头，允许浏览器跨域访问本地开发服务器的资源。</li><li><strong>实现方式</strong>：<br>当设置为 <code>true</code> 时，Vite 会默认添加 <code>Access-Control-Allow-Origin: *</code> 响应头，允许所有来源的请求。若需更精细控制（如指定允许的域名），可通过 <code>CorsOptions</code> 对象配置。</li><li><strong>适用场景</strong>：<br>用于本地开发环境，解决前端资源（如静态文件）被其他域名访问时的 CORS 限制。例如，主应用加载微前端子应用的资源时可能需要此配置。</li></ul><p>2、<strong><code>changeOrigin: true</code></strong></p><ul><li><strong>作用</strong>：在代理请求时修改请求头的 <code>Origin</code> 字段为目标服务器的地址，绕过目标服务器的 CORS 校验。</li><li><strong>实现方式</strong>：<br>代理将前端请求的 <code>Origin</code>（如 <code>[http://localhost:3000 ](http://localhost:3000 )</code>）改为目标服务器的域名（如 <code>[https://apiservice.com ](https://apiservice.com )</code>），使目标服务器认为请求来自同源，从而避免 CORS 拦截。</li><li><strong>适用场景</strong>：<br>用于代理接口请求，尤其是当前端与后端分离开发时。例如，将 <code>/api</code> 路径的请求代理到 <code>[http://localhost:8080 ]</code>，并通过 <code>changeOrigin: true</code> 让后端正常响应。</li></ul><p><strong>两者的区别</strong></p><table><thead><tr><th>配置项</th><th>作用对象</th><th>核心目的</th><th>典型使用场景</th></tr></thead><tbody><tr><td><code>cors: true</code></td><td>Vite 开发服务器</td><td>允许浏览器跨域访问本地资源</td><td>微前端资源加载、本地静态服务</td></tr><tr><td><code>changeOrigin: true</code></td><td>代理请求</td><td>绕过目标服务器的 CORS 校验</td><td>接口代理到不同域的后端服务</td></tr></tbody></table><p><strong>注意事项</strong></p><ul><li><strong>优先级</strong>：<br><code>changeOrigin: true</code> 仅影响代理请求的 <code>Origin</code> 头，而 <code>cors: true</code> 影响的是 Vite 开发服务器自身的响应头。两者可同时使用。</li><li><strong>生产环境</strong>：<br><code>cors: true</code> 和代理配置仅在开发环境生效，生产环境需通过后端或 Nginx 配置 CORS。</li><li><strong>冲突处理</strong>：<br>若后端强制校验 <code>Origin</code>，需确保 <code>changeOrigin: true</code> 修改后的值与后端允许的域名一致</li></ul><br><h3 id="15、axios二次封装"><a href="#15、axios二次封装" class="headerlink" title="15、axios二次封装"></a><strong><font color='red'>15、axios二次封装</font></strong></h3><p><code>utils/request.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Base</span> <span class="keyword">from</span> <span class="string">&#x27;@/utils/base&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config: customInternalAxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">headersType</span>) &#123;</span><br><span class="line">        config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = config.<span class="property">headersType</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> base = <span class="title class_">Base</span>()</span><br><span class="line">    base.<span class="property">requestTime</span> = <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYYDDMMHmmss&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; params, data &#125; = config</span><br><span class="line">    <span class="keyword">const</span> newParams = &#123; ...(data || params), ...base &#125;</span><br><span class="line">    <span class="keyword">if</span> (params) &#123;</span><br><span class="line">        config.<span class="property">params</span> = newParams</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        config.<span class="property">data</span> = newParams</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; body, msgCd, msgInfo &#125; = response.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果响应是二进制流，则直接返回，用于下载文件、Excel 导出等(待测试)</span></span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">config</span>.<span class="property">responseType</span> === <span class="string">&#x27;blob&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接口请求成功</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd.<span class="title function_">slice</span>(-<span class="number">5</span>) === <span class="string">&#x27;00000&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> body</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 登录失效</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd === <span class="string">&#x27;MPL99001&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">name</span> !== <span class="string">&#x27;login&#x27;</span>) &#123;</span><br><span class="line">                router.<span class="title function_">replace</span>(&#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">                    <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">fullPath</span> &#125;,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 其他错误</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo || <span class="string">&#x27;错误&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[ajax error]&#x27;</span>, error)</span><br><span class="line">        <span class="keyword">let</span> msgInfo = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> &#123; message &#125; = error</span><br><span class="line">        <span class="keyword">if</span> (message === <span class="string">&#x27;Network Error&#x27;</span>) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;操作失败，网络异常！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;timeout&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;接口请求超时，请刷新页面后重试！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;Request failed with status code&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">`接口请求失败，请稍后重试！<span class="subst">$&#123;message.substr(message.length - <span class="number">3</span>)&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo)</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure><p><code>api/user/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommonAPI</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取首页信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 请求参数，默认为空对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> 包含首页信息的Promise对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">homeInformationQuery</span>(<span class="params">data = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> request&lt;any, <span class="title class_">HomeInformationQueryResult</span>&gt;(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            data,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">CommonAPI</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 请求参数 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 响应参数 */</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">HomeInformationQueryResult</span> &#123;</span><br><span class="line">    <span class="attr">fundInfoList</span>: <span class="title class_">FundInfoList</span></span><br><span class="line">    <span class="attr">newUserFlag</span>: boolean</span><br><span class="line">    <span class="attr">userSignFlag</span>: boolean</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">FundInfo</span> &#123;</span><br><span class="line">    <span class="attr">fundDesc</span>: string</span><br><span class="line">    <span class="attr">fundName</span>: string</span><br><span class="line">    <span class="attr">fundDayLy</span>: string</span><br><span class="line">    <span class="attr">fundIcon</span>: string</span><br><span class="line">    fundElectronicAccount?: any</span><br><span class="line">    <span class="attr">fundCorpId</span>: string</span><br><span class="line">    <span class="attr">fundNo</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储全部基金的数组类型</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">FundInfoList</span> = <span class="title class_">FundInfo</span>[]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>***.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">UserAPI</span> <span class="keyword">from</span> <span class="string">&#x27;@/api/user&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title class_">CommonAPI</span>.<span class="title function_">homeInformationQuery</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">login</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="16、打包分析"><a href="#16、打包分析" class="headerlink" title="16、打包分析"></a><strong><font color='red'>16、打包分析</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/rollup-plugin-visualizer">https://www.npmjs.com/package/rollup-plugin-visualizer</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add rollup-plugin-visualizer -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; visualizer &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-visualizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">visualizer</span>(&#123;</span><br><span class="line">            <span class="comment">// 注意这里要设置为true，否则无效</span></span><br><span class="line">            <span class="attr">open</span>: !!((command === <span class="string">&#x27;build&#x27;</span> &amp;&amp; mode === <span class="string">&#x27;development&#x27;</span>)), </span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;stats.html&#x27;</span>, <span class="comment">// 分析图生成的文件名</span></span><br><span class="line">            <span class="attr">gzipSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 gzip 大小并将其显示</span></span><br><span class="line">            <span class="attr">brotliSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 brotli 大小并将其显示</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="17、gzip压缩"><a href="#17、gzip压缩" class="headerlink" title="17、gzip压缩"></a><strong><font color='red'>17、gzip压缩</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i vite-plugin-compression -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩gzip</span></span><br><span class="line"><span class="keyword">import</span> viteCompression <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-compression&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title function_">viteCompression</span>(&#123;</span><br><span class="line">        <span class="attr">verbose</span>: <span class="literal">true</span>, <span class="comment">// 是否在控制台输出压缩结果</span></span><br><span class="line">        <span class="attr">disable</span>: <span class="literal">false</span>, <span class="comment">// 是否禁用压缩</span></span><br><span class="line">        <span class="attr">deleteOriginFile</span>: <span class="literal">false</span>, <span class="comment">// 删除源文件</span></span><br><span class="line">        <span class="attr">threshold</span>: <span class="number">10240</span>, <span class="comment">// 文件大小超过此值时进行压缩，单位为字节即10kb</span></span><br><span class="line">        <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="comment">// 压缩算法，可选 &#x27;gzip&#x27; 或 &#x27;brotli&#x27;</span></span><br><span class="line">        <span class="attr">ext</span>: <span class="string">&#x27;.gz&#x27;</span> <span class="comment">// 压缩后的文件扩展名</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>nginx服务器上还要对应配置（待实践）</strong></p><p>在server节点下新增以下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    </span><br><span class="line">    # 追加如下配置</span><br><span class="line">gzip on;</span><br><span class="line">    gzip_static on;</span><br><span class="line">    gzip_buffers  4 16k;</span><br><span class="line">    gzip_min_length 1k;</span><br><span class="line">    gzip_comp_level 9;</span><br><span class="line">    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_proxied    any;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6]&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是打包成docker镜像，Dockerfile可配置如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx:1.25.2-alpine-slim</span><br><span class="line"></span><br><span class="line">COPY dist /usr/share/nginx/html/</span><br><span class="line"></span><br><span class="line"># 开启gzip压缩配置</span><br><span class="line">RUN sed -i &#x27;/server_name  localhost;/a \</span><br><span class="line"> gzip on;</span><br><span class="line"> gzip_static on;</span><br><span class="line"> gzip_buffers  4 16k;</span><br><span class="line"> gzip_min_length 1k;</span><br><span class="line"> gzip_comp_level 9;</span><br><span class="line"> gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line"> gzip_proxied    any;</span><br><span class="line"> gzip_vary on;</span><br><span class="line"> gzip_disable &quot;MSIE [1-6]&quot;;&#x27;</span><br><span class="line"></span><br><span class="line"># 指定于外界交互的端口</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure><p>这些配置项的作用如下：</p><ul><li><code>gzip on;</code> 启用 Gzip 功能。</li><li><code>gzip_static on;</code> 允许 Nginx 直接返回已压缩的静态文件。</li><li><code>gzip_types</code> 指定需要压缩的文件类型。</li><li><code>gzip_vary on;</code> 添加 <code>Vary: Accept-Encoding</code> 头部，确保浏览器正确处理压缩文件。</li><li><code>gzip_comp_level</code> 设置压缩级别，数值越大压缩率越高，但性能消耗也越大（1-9）</li><li><code>gzip_buffers</code> 设置缓冲区大小。</li><li><code>gzip_http_version</code> 设置 HTTP 版本。</li><li><code>gzip_disable</code> 禁用对特定浏览器的 Gzip 压缩。</li><li><code>gzip_proxied</code> 用于控制 Gzip 压缩的行为，特别是在处理来自代理服务器的请求时。<strong>any</strong>: 对所有请求（包括来自代理的请求）执行 Gzip 压缩</li></ul><br><h3 id="18、图片压缩"><a href="#18、图片压缩" class="headerlink" title="18、图片压缩"></a><strong><font color='red'>18、图片压缩</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-image-optimizer">vite-plugin-image-optimizer </a>（弃用）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-image-optimizer -D</span><br><span class="line">pnpm add sharp -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ViteImageOptimizer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-optimizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">ViteImageOptimizer</span>(&#123; <span class="comment">// 图片压缩</span></span><br><span class="line">            <span class="attr">png</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpeg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">webp</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">60</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-image-tools">vite-plugin-image-tools</a>（推荐）</p><p>vite插件，支持图片压缩和自动转webp，目前只支持’png’, ‘jpg’, ‘webp’, ‘avif’, ‘tiff’, ‘gif’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D vite-plugin-image-tools</span><br><span class="line">pnpm add spritesmith -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VitePluginImageTools</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-tools&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">VitePluginImageTools</span>(&#123;</span><br><span class="line">      <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">      <span class="attr">enableWebp</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>参数</p><table><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>Description</th></tr></thead><tbody><tr><td>quality</td><td>number</td><td>80</td><td>图片质量 (1-100)</td></tr><tr><td>includes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>‘<code>xxx.png&#39;.includs(inclouds) includes.test(&#39;xxx.png&#39;)</code>jpe?g</td></tr><tr><td>excludes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>排除项，如：!’<code>xxx.png&#39;.includs(inclouds) !includes.test(&#39;xxx.png&#39;)</code></td></tr><tr><td>filter</td><td>function</td><td>() &#x3D;&gt; true</td><td>过滤方法，可自定义过滤图片逻辑，支持async 参数：图片路径 如： filter: (path) &#x3D;&gt; { return path.includes(‘.png’) }</td></tr><tr><td>compatibility</td><td>boolean</td><td>false</td><td>是否兼容低版本浏览器，生产环境生效， true：只有css中的图片会转webp（暂时只支持打包时候处理css） false：全部转webp</td></tr><tr><td>bodyWebpClassName</td><td>string</td><td>webp</td><td>body标签的webp class，用于生成兼容webp的class</td></tr><tr><td>enableWebp</td><td>boolean</td><td>false</td><td>生产环境是否转webp</td></tr><tr><td>enableDev</td><td>boolean</td><td>false</td><td>开发环境是否开启压缩</td></tr><tr><td>enableDevWebp</td><td>boolean</td><td>false</td><td>开发环境是否开启转webp</td></tr><tr><td>cacheDir</td><td>string</td><td>‘node_modules&#x2F;.cache&#x2F;vite-plugin-image’</td><td>缓存路径， 默认，只在开发环境生效</td></tr><tr><td>sharpConfig</td><td>Object</td><td>{ jpeg?: JpegOptions, jpg?: JpegOptions, png?: PngOptions, webp?: WebpOptions, avif?: AvifOptions, tiff?: TiffOptions, gif?: GifOptions}</td><td><a href="https://sharp.pixelplumbing.com/api-output/#_top">sharp配置</a></td></tr><tr><td>svgoConfig</td><td>Object</td><td>{plugins:[‘preset-default’,{name:’removerXMLNS’},{name:’removeViewBox’}],js2svg:{indent:2, pretty: true}}</td><td><a href="https://svgo.dev/docs/preset-default/">https://svgo.dev/docs/preset-default/</a></td></tr></tbody></table><p>✅ <strong>结论</strong>：<br><code>vite-plugin-image-tools</code> 默认不会删除原图，这是有意设计（兼容性考虑）。<br>如果你确定不需要原图，可以写 Node 脚本删除原图（不建议删除）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">removeOriginalImages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;remove-original-images&#x27;</span>,</span><br><span class="line">    <span class="title function_">closeBundle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> outDir = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>) <span class="comment">// 输出目录</span></span><br><span class="line">      <span class="keyword">const</span> extsToRemove = [<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.jpeg&#x27;</span>]</span><br><span class="line">      <span class="keyword">const</span> stack = [outDir]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (stack.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dir = stack.<span class="title function_">pop</span>()!</span><br><span class="line">        <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> file <span class="keyword">of</span> files) &#123;</span><br><span class="line">          <span class="keyword">const</span> fullPath = path.<span class="title function_">join</span>(dir, file)</span><br><span class="line">          <span class="keyword">const</span> stat = fs.<span class="title function_">statSync</span>(fullPath)</span><br><span class="line">          <span class="keyword">if</span> (stat.<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            stack.<span class="title function_">push</span>(fullPath)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (extsToRemove.<span class="title function_">includes</span>(path.<span class="title function_">extname</span>(fullPath).<span class="title function_">toLowerCase</span>())) &#123;</span><br><span class="line">            fs.<span class="title function_">unlinkSync</span>(fullPath)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已删除原始图片文件&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 你的其他插件</span></span><br><span class="line">    <span class="title function_">removeOriginalImages</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="19、解决ts无法识别路由中导入的vue组件"><a href="#19、解决ts无法识别路由中导入的vue组件" class="headerlink" title="19、解决ts无法识别路由中导入的vue组件"></a><strong><font color='red'>19、解决ts无法识别路由中导入的vue组件</font></strong></h3><p><code>env.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;*.vue&#x27; &#123;</span><br><span class="line">    import type &#123; DefineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    const component: DefineComponent</span><br><span class="line">    export default component</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="20、将路由和pinia分离到独立模块"><a href="#20、将路由和pinia分离到独立模块" class="headerlink" title="20、将路由和pinia分离到独立模块"></a><strong><font color='red'>20、将路由和pinia分离到独立模块</font></strong></h3><p>将路由和pinia分离到独立模块，提高可维护性和可扩展性</p><p><code>/src/plugins/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">        <span class="comment">// 路由(router)</span></span><br><span class="line">        <span class="title function_">setupRouter</span>(app)</span><br><span class="line">        <span class="comment">// 状态管理(store)</span></span><br><span class="line">        <span class="title function_">setupStore</span>(app)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/home/index.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span>, <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/store/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册 store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setupStore</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(pinia)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/main.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;@/plugins&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(plugins)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><br><h3 id="21、添加mock工具"><a href="#21、添加mock工具" class="headerlink" title="21、添加mock工具"></a><strong><font color='red'>21、添加mock工具</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-mock-dev-server -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mockDevServerPlugin <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        env.<span class="property">VITE_MOCK_DEV_SERVER</span> === <span class="string">&#x27;true&#x27;</span> ? <span class="title function_">mockDevServerPlugin</span>() : <span class="literal">null</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在项目根目录添加mock文件夹</p><p><code>mock/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;node:path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createDefineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> defineMock = <span class="title function_">createDefineMock</span>(<span class="function">(<span class="params">mock</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 拼接url</span></span><br><span class="line">    mock.<span class="property">url</span> = path.<span class="title function_">join</span>(mock.<span class="property">url</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>tsconfig.app.</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;mock/**/*.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>mock/modules/home.mock.ts</code></p><p>这里命名中间一定要用mock，格式xxx.mock.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;../index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineMock</span>([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取首页信息</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: [<span class="string">&#x27;POST&#x27;</span>],</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">            <span class="attr">msgCd</span>: <span class="string">&#x27;00000&#x27;</span>,</span><br><span class="line">            <span class="attr">mockFlag</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;交易成功&#x27;</span>,</span><br><span class="line">            <span class="attr">body</span>: &#123;</span><br><span class="line">                <span class="attr">newUserFlag</span>: <span class="literal">false</span>, <span class="comment">// 是否新用户</span></span><br><span class="line">                <span class="attr">userSignFlag</span>: <span class="literal">true</span>, <span class="comment">// false需要用户签隐私协议</span></span><br><span class="line">                <span class="attr">fundInfoList</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">funType</span>: <span class="string">&#x27;稳健理财&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDesc</span>: <span class="string">&#x27;稳健理财你真棒&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundName</span>: <span class="string">&#x27;汇添富和聚宝货币市场基金&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDayLy</span>: <span class="string">&#x27;4.26&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundIcon</span>: <span class="string">&#x27;11&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundElectronicAccount</span>: <span class="literal">null</span>,</span><br><span class="line">                        <span class="attr">fundCorpId</span>: <span class="string">&#x27;MS-BANK&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundNo</span>: <span class="string">&#x27;000600&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure><br><h3 id="22、添加ESLint配置检查器-启动项"><a href="#22、添加ESLint配置检查器-启动项" class="headerlink" title="22、添加ESLint配置检查器 启动项"></a><strong><font color='red'>22、添加ESLint配置检查器 启动项</font></strong></h3><p><code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;eslint-config-inspector&quot;: &quot;pnpm dlx eslint --inspect-config&quot;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br><h3 id="23、添加404页"><a href="#23、添加404页" class="headerlink" title="23、添加404页"></a><strong><font color='red'>23、添加404页</font></strong></h3><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="comment">// Vue3 的写法，兼容子路径</span></span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">false</span>, <span class="attr">title</span>: <span class="string">&#x27;中国移动支付-404&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="24、引用scss文件"><a href="#24、引用scss文件" class="headerlink" title="24、引用scss文件"></a><strong><font color='red'>24、引用scss文件</font></strong></h3><p>添加scss文件</p><p><code>src/styles/common.scss</code></p><p><code>src/styles/mixin.scss</code></p><p><code>src/styles/variables.scss</code></p><p><strong><code>vite.config.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="attr">css</span>: &#123;</span><br><span class="line">            <span class="comment">// css预处理器</span></span><br><span class="line">            <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">                <span class="attr">scss</span>: &#123;</span><br><span class="line">                    <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/variables.scss&quot; as *;</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/mixin.scss&quot; as *;`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="25、打包拆分-小图片转base64"><a href="#25、打包拆分-小图片转base64" class="headerlink" title="25、打包拆分 小图片转base64"></a><strong><font color='red'>25、打包拆分 小图片转base64</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add terser -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">assetsInlineLimit</span>: <span class="number">1024</span> * <span class="number">10</span>, <span class="comment">// 10kb以下，转Base64</span></span><br><span class="line">    <span class="attr">chunkSizeWarningLimit</span>: <span class="number">2000</span>, <span class="comment">// 消除打包大小超过500kb警告</span></span><br><span class="line">    <span class="attr">minify</span>: <span class="string">&#x27;terser&#x27;</span>, <span class="comment">// Vite 2.6.x 以上需要配置 minify: &quot;terser&quot;, terserOptions 才能生效</span></span><br><span class="line">    <span class="attr">terserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">compress</span>: &#123;</span><br><span class="line">            <span class="attr">keep_infinity</span>: <span class="literal">true</span>, <span class="comment">// 防止 Infinity 被压缩成 1/0，这可能会导致 Chrome 上的性能问题</span></span><br><span class="line">            <span class="attr">drop_console</span>: mode === <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 生产环境去除 console</span></span><br><span class="line">            <span class="attr">drop_debugger</span>: <span class="literal">true</span>, <span class="comment">// 生产环境去除 debugger</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">format</span>: &#123;</span><br><span class="line">            <span class="attr">comments</span>: <span class="literal">false</span>, <span class="comment">// 删除注释</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">        <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">// 每个node_modules模块分成一个js文件</span></span><br><span class="line">            <span class="title function_">manualChunks</span>(<span class="params">id: string</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (id.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> packageName = id.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;node_modules/.pnpm/&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>].<span class="title function_">toString</span>()</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 1.第三方依赖合并在一起</span></span><br><span class="line">                    <span class="comment">// return &#x27;vendor&#x27;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 2.把第三方依赖单独抽离出来</span></span><br><span class="line">                    <span class="comment">// return packageName</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 3.将较大型或常用的第三方库单独打包</span></span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;pinia&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;axios&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;dayjs&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;bowser&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;bowser&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue-router&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&#x27;vendor&#x27;</span> <span class="comment">// 其他第三方依赖合并在一起</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">entryFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">chunkFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">assetFileNames</span>: <span class="function">(<span class="params">assetInfo: any</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> info = assetInfo.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">                <span class="keyword">let</span> extType = info[info.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> (<span class="regexp">/\.(?:png|jpe?g|gif|svg|webp)(?:\?.*)?$/</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;img&#x27;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/\.(?:mp4|webm|ogg|mp3|wav|aac)(?:\?.*)?$/i</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;media&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;extType&#125;</span>/[name].[hash].[ext]`</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="26、添加Vconsole打印"><a href="#26、添加Vconsole打印" class="headerlink" title="26、添加Vconsole打印"></a><strong><font color='red'>26、添加Vconsole打印</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vconsole vconsole -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> viteVConsole <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vconsole&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">         <span class="title function_">viteVConsole</span>(&#123;</span><br><span class="line">            <span class="attr">entry</span>: [path.<span class="title function_">resolve</span>(<span class="string">&#x27;src/main.ts&#x27;</span>)], <span class="comment">// 项目入口文件 [[1, 6]]</span></span><br><span class="line">            <span class="attr">enabled</span>: mode !== <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 根据环境启用 [[3, 6]]</span></span><br><span class="line">            <span class="attr">localEnabled</span>: <span class="literal">true</span>, <span class="comment">// 本地开发时强制启用 [[6]]</span></span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">theme</span>: <span class="string">&#x27;dark&#x27;</span>, <span class="comment">// 主题配置</span></span><br><span class="line">                <span class="attr">maxLogNumber</span>: <span class="number">1000</span>, <span class="comment">// 日志数量限制</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="27、简化SVG使用"><a href="#27、简化SVG使用" class="headerlink" title="27、简化SVG使用"></a><strong><font color='red'>27、简化SVG使用</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/vite-svg-loader">https://www.npmjs.com/package/vite-svg-loader</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-svg-loader -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> svgLoader <span class="keyword">from</span> <span class="string">&#x27;vite-svg-loader&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">svgLoader</span>(&#123;</span><br><span class="line">            <span class="comment">// &#x27;url&#x27;: img标签引入 &#x27;raw&#x27;：demo元素 v-html引入   &#x27;component&#x27;: 组件展示</span></span><br><span class="line">            <span class="attr">defaultImport</span>: <span class="string">&#x27;url&#x27;</span>,</span><br><span class="line">            <span class="attr">svgo</span>: <span class="literal">true</span>, <span class="comment">// 启用SVGO优化</span></span><br><span class="line">            <span class="attr">svgoConfig</span>: &#123;</span><br><span class="line">                <span class="attr">multipass</span>: <span class="literal">false</span>, <span class="comment">// 关闭对SVG文件进行多次优化迭代（更彻底地压缩 SVG，会增加处理时间）</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// env.d.ts 模块声明</span><br><span class="line">/// &lt;reference types=&quot;vite-svg-loader&quot; /&gt;</span><br></pre></td></tr></table></figure><p><code>.vue文件使用</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;url&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">w100</span> <span class="attr">:src</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;raw&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">w100</span> <span class="attr">v-html</span>=<span class="string">&quot;logo&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;component&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logo</span> <span class="attr">w100</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;@/assets/logo.svg&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="28、px转换"><a href="#28、px转换" class="headerlink" title="28、px转换"></a><strong><font color='red'>28、px转换</font></strong></h3><h4 id="cnjm-postcss-px-to-viewport"><a href="#cnjm-postcss-px-to-viewport" class="headerlink" title="cnjm-postcss-px-to-viewport"></a><strong><font color='#10c300'>cnjm-postcss-px-to-viewport</font></strong></h4><p><strong><code>px转vw/vh</code></strong></p><p>插件网站<a href="https://www.npmjs.com/package/cnjm-postcss-px-to-viewport">https://www.npmjs.com/package/cnjm-postcss-px-to-viewport</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add cnjm-postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import px2viewport from &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br><span class="line"></span><br><span class="line">// https://vite.dev/config/</span><br><span class="line">export default defineConfig((&#123; mode &#125;) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        css: &#123;</span><br><span class="line">            postcss: &#123;</span><br><span class="line">                plugins: [</span><br><span class="line">                    px2viewport(&#123;</span><br><span class="line">                        unitToConvert: &#x27;px&#x27;, // 要转化的单位</span><br><span class="line">                        viewportWidth: 750, // UI设计稿的宽度</span><br><span class="line">                        unitPrecision: 6, // 转换后的精度，即小数点位数</span><br><span class="line">                        propList: [&#x27;*&#x27;], // 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span><br><span class="line">                        viewportUnit: &#x27;vw&#x27;, // 指定需要转换成的视窗单位，默认vw</span><br><span class="line">                        fontViewportUnit: &#x27;vw&#x27;, // 指定字体需要转换成的视窗单位，默认vw</span><br><span class="line">                        selectorBlackList: [&#x27;ignore&#x27;], // 指定不转换为视窗单位的类名，</span><br><span class="line">                        minPixelValue: 1, // 默认值1，小于或等于1px则不进行转换</span><br><span class="line">                        mediaQuery: true, // 是否在媒体查询的css代码中也进行转换，默认false</span><br><span class="line">                        replace: true, // 是否转换后直接更换属性值</span><br><span class="line">                        exclude: [], // 设置忽略文件，用正则做目录名匹配</span><br><span class="line">                        landscape: false, // 是否处理横屏情况</span><br><span class="line">                        // 如果没有使用其他的尺寸来设计，下面这个方法可以不需要， 这个自定义的方法是针对处理vant组件下的设计稿为375问题</span><br><span class="line">                        customFun: (&#123; file &#125;: &#123; file: string &#125;) =&gt; &#123;</span><br><span class="line">                            const designWidth = path.join(file).includes(path.join(&#x27;node_modules&#x27;, &#x27;vant&#x27;))</span><br><span class="line">                                ? 375</span><br><span class="line">                                : 750</span><br><span class="line">                            return designWidth</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;),</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在 TypeScript 中，<code>declare module</code> 用于声明一个模块的类型定义，通常在以下情况下使用：</p><ol><li><strong>没有类型定义文件的第三方库</strong>：如果你正在使用一个第三方库（如 <code>cnjm-postcss-px-to-viewport</code>），但该库没有提供官方的类型定义文件（例如 <code>.d.ts</code> 文件），你可以使用 <code>declare module</code> 来告诉 TypeScript 这个模块存在，从而避免编译时报错。</li><li><strong>临时解决方案</strong>：这是一个临时的声明，通常用于快速解决类型检查问题。它不会为模块提供具体的类型信息，只是告诉 TypeScript 这个模块是有效的。</li></ol><p><code>types/cnjm-postcss-px-to-viewport.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br></pre></td></tr></table></figure><p><code>tsconfig.node.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;extends&quot;: &quot;@tsconfig/node22/tsconfig.json&quot;,</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">        &quot;types&quot;: [&quot;node&quot;, &quot;./types/vite.config.d.ts&quot;],</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;include&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>declare module ‘cnjm-postcss-px-to-viewport</strong></p><p>这行代码的意思是：</p><ul><li>声明一个名为 <code>&#39;cnjm-postcss-px-to-viewport&#39;</code> 的模块。</li><li>TypeScript 不会对该模块的导入进行类型检查。</li><li>你可以在项目中导入并使用这个模块，但它的类型是 <code>any</code>，即没有具体的类型信息。</li></ul><h4 id="vite-plugin-px2rem"><a href="#vite-plugin-px2rem" class="headerlink" title="vite-plugin-px2rem"></a><strong><font color='#10c300'>vite-plugin-px2rem</font></strong></h4><p><strong><code>px转rem</code></strong></p><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem">https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-px2rem -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">px2rem</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">750</span>,</span><br><span class="line">            <span class="attr">rootFontSize</span>: <span class="number">16</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="29、预构建的依赖项"><a href="#29、预构建的依赖项" class="headerlink" title="29、预构建的依赖项"></a><strong><font color='red'>29、预构建的依赖项</font></strong></h3><p>强制预构建的依赖项，在开发服务器启动时，Vite 会预先处理这些库，以确保它们快速加载和解析</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [],</span><br><span class="line">    <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">        <span class="attr">include</span>: [</span><br><span class="line">            <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;vue-router&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pinia&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;@vueuse/core&#x27;</span>,</span><br><span class="line">         ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="30、计算白屏时间"><a href="#30、计算白屏时间" class="headerlink" title="30、计算白屏时间"></a><strong><font color='red'>30、计算白屏时间</font></strong></h3><p>白屏时间（First Paint Time）是一个非常重要的指标。它指的是从用户输入网址并按下回车键，到浏览器开始渲染页面内容的时间段。在这段时间内，用户看到的只是一个空白页面，因此白屏时间的长短直接影响了用户的体验。</p><h4 id="30-1、什么是白屏时间？"><a href="#30-1、什么是白屏时间？" class="headerlink" title="30.1、什么是白屏时间？"></a><strong><font color='#10c300'>30.1、什么是白屏时间？</font></strong></h4><p>白屏时间是指从用户发起页面请求到浏览器首次开始渲染页面内容的时间。具体来说，白屏时间包括以下几个阶段：</p><ol><li><strong>DNS解析</strong>：浏览器将域名解析为IP地址。</li><li><strong>建立TCP连接</strong>：浏览器与服务器建立TCP连接（三次握手）。</li><li><strong>发起HTTP请求</strong>：浏览器向服务器发送HTTP请求。</li><li><strong>服务器响应</strong>：服务器处理请求并返回响应数据。</li><li><strong>浏览器解析HTML</strong>：浏览器解析HTML文档并构建DOM树。</li><li><strong>浏览器渲染页面</strong>：浏览器根据DOM树和CSSOM树生成渲染树，并开始渲染页面。</li><li><strong>页面展示第一个标签</strong>：浏览器首次将页面内容渲染到屏幕上。</li></ol><p>白屏时间的长短直接影响了用户对网站的第一印象。如果白屏时间过长，用户可能会感到不耐烦，甚至直接关闭页面。因此，优化白屏时间是前端性能优化的重要目标之一。</p><br><h4 id="30-2、白屏时间的影响因素"><a href="#30-2、白屏时间的影响因素" class="headerlink" title="30.2、白屏时间的影响因素"></a><strong><font color='#10c300'>30.2、白屏时间的影响因素</font></strong></h4><p>白屏时间的长短受到多种因素的影响，主要包括以下几个方面：</p><ol><li><strong>网络性能</strong>：网络延迟、带宽、DNS解析时间等都会影响白屏时间。如果网络状况不佳，DNS解析和TCP连接建立的时间会变长，从而导致白屏时间增加。</li><li><strong>服务器性能</strong>：服务器的响应速度、处理能力等也会影响白屏时间。如果服务器响应缓慢，浏览器需要等待更长的时间才能接收到HTML文档。</li><li><strong>前端页面结构</strong>：HTML文档的大小、复杂度、外部资源的加载顺序等都会影响白屏时间。如果HTML文档过大或包含大量外部资源，浏览器需要更长的时间来解析和渲染页面。</li><li><strong>浏览器性能</strong>：浏览器的渲染引擎性能、缓存机制等也会影响白屏时间。不同浏览器的渲染性能可能存在差异，导致白屏时间不同。</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 性能 观察器 观察者模式</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 获取所有的 性能 指标</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> entries) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// body 里的第一个 标签的渲染</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// &#x27;first-paint&#x27; 表示页面首次开始绘制的时间点，也就是白屏结束的时间点</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (entry.<span class="property">name</span> === <span class="string">&#x27;first-paint&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> whiteScreenTime = entry.<span class="property">startTime</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 1s=1000ms</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`白屏时间：<span class="subst">$&#123;whiteScreenTime&#125;</span>ms`</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次绘制 first-paint</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次内容绘制 first-contentful-paint 事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// observe 监听性能指标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// buffered 属性设置为 true，表示包含性能时间线缓冲区中已经记录的相关事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 这样即使在创建 PerformanceObserver 之前事件已经发生，也能被捕获到</span></span></span><br><span class="line"><span class="language-javascript">            observer.<span class="title function_">observe</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;paint&#x27;</span>, <span class="attr">buffered</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。&lt;/p&gt;
&lt;p&gt;核心采用**&lt;code&gt;antfu&lt;/code&gt;**大神预设配置 替代prettier和eslint设置，保留stylelint原因是暂时a</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>TypeScrip装饰器</title>
    <link href="http://example.com/posts/5f5fe4d5.html"/>
    <id>http://example.com/posts/5f5fe4d5.html</id>
    <published>2025-08-17T08:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.324Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a><strong><font color='red'>一、简介</font></strong></h3><ol><li>装饰器本质是一种特殊的<strong>函数</strong>，它可以对：类、属性、方法、参数进行扩展，同时能让代码更简洁。</li><li>装饰器自<code>2015</code>年在<code>ECMAScript-6</code>中被提出到现在，已将近10年。</li><li>截止目前，装饰器依然是实验性特性 ，需要开发者手动调整配置，来开启装饰器支持。</li><li>装饰器有 5 种：</li></ol><p>1、类装饰器<br>2、属性装饰器<br>3、方法装饰器<br>4、访问器装饰器<br>5、参数装饰器</p><blockquote><p>备注：虽然<code>TypeScript5.0</code>中可以直接使用<code>**类装饰器**</code>，但为了确保其他装饰器可用，现阶段使用时，仍建议使用<code>experimentalDecorators</code>配置来开启装饰器支持，而且不排除在来的版本中，官方会<strong>进一步调整</strong>装饰器的相关语法！<br>参考：<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0-rc/"><strong>《TypeScript 5.0发版公告》</strong></a></p></blockquote><br><h3 id="二、类装饰器"><a href="#二、类装饰器" class="headerlink" title="二、类装饰器"></a><strong><font color='red'>二、类装饰器</font></strong></h3><h4 id="2-1、基本语法"><a href="#2-1、基本语法" class="headerlink" title="2.1、基本语法"></a><strong><font color='#10c300'>2.1、基本语法</font></strong></h4><p>类装饰器是一个应用在<strong>类声明</strong>上的<strong>函数</strong>，可以为类添加额外的功能，或添加额外的逻辑。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  Demo函数会在Person类定义时执行</span></span><br><span class="line"><span class="comment">  target参数是被装饰的类，即：Person</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用装饰器</span></span><br><span class="line"><span class="meta">@Demo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123; <span class="comment">// 被装饰的类</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>:<span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br></pre></td></tr></table></figure><br><h4 id="2-2、应用举例"><a href="#2-2、应用举例" class="headerlink" title="2.2、应用举例"></a><strong><font color='#10c300'>2.2、应用举例</font></strong></h4><p>需求：定义一个装饰器，实现<code>Person</code>实例调用<code>toString</code>时返回<code>JSON.stringify</code>的执行结果。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用装饰器重写toString方法 + 封闭其原型对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomString</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 向被装饰类的原型上添加自定义的 toString 方法</span></span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 封闭其原型对象，禁止随意操作其原型对象</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(target.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 CustomString 装饰器</span></span><br><span class="line"><span class="meta">@CustomString</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">15</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">toString</span>()); <span class="comment">// [object Object]  使用装饰器后：&#x27;&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:15&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 当封闭其原型对象 此行会报错：Cannot add property a, object is not extensible</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">a</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-3、关于返回值"><a href="#2-3、关于返回值" class="headerlink" title="2.3、关于返回值"></a><strong><font color='#10c300'>2.3、关于返回值</font></strong></h4><p><strong>类装饰器有返回值</strong>：若类装饰器返回一个新的类，那这个新类将<strong>替换</strong>掉被装饰的类。<br><strong>类装饰器无返回值</strong>：若类装饰器无返回值或返回<code>undefined</code>，那被装饰的类<strong>不会</strong>被替换。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"><span class="attr">target</span>:<span class="title class_">Function</span></span>)&#123;</span><br><span class="line">  <span class="comment">// 装饰器有返回值时，该返回值会替换掉被装饰的类</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> &#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">300</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">400</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@demo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-4、关于class构造类型"><a href="#2-4、关于class构造类型" class="headerlink" title="2.4、关于class构造类型"></a><strong><font color='#10c300'>2.4、关于class构造类型</font></strong></h4><blockquote><p>在 TypeScript 中，<code>Function</code> 类型所表示的范围十分广泛，包括：普通函数、箭头函数、方法等等。但并非<code>Function</code> 类型的函数都可以被 <code>new</code> 关键字实例化，例如箭头函数是不能被实例化的，那么 TypeScript 中概如何声明一个构造类型呢？有以下两种方式：</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ○ new     表示：该类型是可以用new操作符调用。</span></span><br><span class="line"><span class="comment">  ○ ...args 表示：构造器可以接受【任意数量】的参数。</span></span><br><span class="line"><span class="comment">  ○ any[]   表示：构造器可以接受【任意类型】的参数。</span></span><br><span class="line"><span class="comment">  ○ &#123;&#125;      表示：返回类型是对象(非null、非undefined的对象)。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义Constructor类型，其含义是构造类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"><span class="attr">fn</span>:<span class="title class_">Constructor</span></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个构造类型，且包含一个静态属性 wife</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = &#123;</span><br><span class="line">  <span class="title function_">new</span>(...<span class="attr">args</span>: <span class="built_in">any</span>[]): &#123;&#125;; <span class="comment">// 构造签名</span></span><br><span class="line">  <span class="attr">wife</span>: <span class="built_in">string</span>; <span class="comment">// wife属性</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> wife = <span class="string">&#x27;asd&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"><span class="attr">fn</span>:<span class="title class_">Constructor</span></span>)&#123;&#125;</span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-5、替换被装饰的类"><a href="#2-5、替换被装饰的类" class="headerlink" title="2.5、替换被装饰的类"></a><strong><font color='#10c300'>2.5、替换被装饰的类</font></strong></h4><p>对于高级一些的装饰器，不仅仅是覆盖一个原型上的方法，还要有更多功能，例如添加新的方法和状态。</p><p>**需求：**设计一个<code>LogTime</code>装饰器，可以给实例添加一个属性，用于记录实例对象的创建时间，再添加一个方法用于读取创建时间。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="title function_">getTime</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义类型Class</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个装饰器，为类添加日志功能和创建时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title class_">LogTime</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Constructor</span>&gt;(<span class="attr">target</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123; <span class="comment">// return一个类并且这个类继承了target传来的类</span></span><br><span class="line">        <span class="attr">createdTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123; <span class="comment">// 构造器可以接受任意数量/类型的参数</span></span><br><span class="line">            <span class="variable language_">super</span>(...args); <span class="comment">// 继承传递的任意参数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">createdTime</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">// 记录对象创建时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`该对象创建时间为：<span class="subst">$&#123;<span class="variable language_">this</span>.createdTime&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@LogTime</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>说：你好啊！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user1 = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">13</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user1.<span class="title function_">getTime</span>());</span><br></pre></td></tr></table></figure><br><h3 id="三、装饰器工厂"><a href="#三、装饰器工厂" class="headerlink" title="三、装饰器工厂"></a><strong><font color='red'>三、装饰器工厂</font></strong></h3><p><strong>装饰器工厂是一个返回装饰器函数的函数（装饰器工厂中会包含一个装饰器）</strong>，可以为装饰器添加参数，可以更灵活地控制装饰器的行为。 </p><p>**需求：**定义一个<code>LogInfo</code>类装饰器工厂，实现<code>Person</code>实例可以调用到<code>introduce</code>方法，且<code>introduce</code>中输出内容的次数，由<code>LogInfo</code>接收的参数决定。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123; <span class="comment">// 因为给原型上添加了个方法，因此要加个类型</span></span><br><span class="line">    <span class="attr">introduce</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个装饰器工厂 LogInfo，它接受一个参数 n，返回一个类装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LogInfo</span>(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123; <span class="comment">// 装饰器函数，target 是被装饰的类</span></span><br><span class="line">        target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@LogInfo</span>(<span class="number">5</span>) <span class="comment">// 装饰器工厂需要有个()</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好呀！&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment">// console.log(p1) // 打印的p1是：_classThis，转换的JS版本比较旧时，会出现，不必纠结</span></span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br><span class="line">p1.<span class="title function_">introduce</span>()</span><br></pre></td></tr></table></figure><br><h3 id="四、装饰器组合"><a href="#四、装饰器组合" class="headerlink" title="四、装饰器组合"></a><strong><font color='red'>四、装饰器组合</font></strong></h3><blockquote><p><strong>装饰器组合</strong>即装饰器工厂和装饰器的组合</p></blockquote><h4 id="4-1、执行顺序"><a href="#4-1、执行顺序" class="headerlink" title="4.1、执行顺序"></a><strong><font color='#10c300'>4.1、执行顺序</font></strong></h4><p>装饰器可以组合使用，执行顺序为：先【<strong>由上到下</strong>】的执行所有的装饰器工厂，依次获取到装饰器，然后再【<strong>由下到上</strong>】执行所有的装饰器。<strong>（先执行装饰器工厂后执行装饰器，装饰器工厂由上往下，装饰器由下往上执行）</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器工厂</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2工厂&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器工厂</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test3工厂&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test3&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test4</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test4&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@test1</span></span><br><span class="line"><span class="meta">@test2</span>()</span><br><span class="line"><span class="meta">@test3</span>()</span><br><span class="line"><span class="meta">@test4</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  控制台打印：</span></span><br><span class="line"><span class="comment">    test2工厂</span></span><br><span class="line"><span class="comment">    test3工厂</span></span><br><span class="line"><span class="comment">    test4</span></span><br><span class="line"><span class="comment">    test3</span></span><br><span class="line"><span class="comment">    test2</span></span><br><span class="line"><span class="comment">    test1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><br><h4 id="4-2、应用"><a href="#4-2、应用" class="headerlink" title="4.2、应用"></a><strong><font color='#10c300'>4.2、应用</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义类型Class</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">introduce</span>(): <span class="built_in">void</span></span><br><span class="line">    <span class="title function_">getTime</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用装饰器重写toString方法 + 封闭其原型对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">customToString</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 向被装饰类的原型上添加自定义的 toString 方法</span></span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 封闭其原型对象，禁止随意操作其原型对象</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(target.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个装饰器，为类添加日志功能和创建时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title class_">LogTime</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Constructor</span>&gt;(<span class="attr">target</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123;</span><br><span class="line">        <span class="attr">createdTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">            <span class="variable language_">super</span>(...args);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">createdTime</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">// 记录对象创建时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`该对象创建时间为：<span class="subst">$&#123;<span class="variable language_">this</span>.createdTime&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个装饰器工厂 LogInfo，它接受一个参数 n，返回一个类装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LogInfo</span>(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 装饰器函数，target 是被装饰的类</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@customToString</span></span><br><span class="line"><span class="meta">@LogInfo</span>(<span class="number">3</span>)</span><br><span class="line"><span class="meta">@LogTime</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好呀！&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">toString</span>()) <span class="comment">// &#123;&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:18,&quot;createdTime&quot;:&quot;2024-11-22T02:49:25.234Z&quot;&#125;</span></span><br><span class="line">p1.<span class="title function_">introduce</span>() <span class="comment">// 打印3次：我的名字：张三，我的年龄：18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getTime</span>()) <span class="comment">// 该对象创建时间为：Fri Nov 22 2024 10:50:19 GMT+0800 (中国标准时间)</span></span><br></pre></td></tr></table></figure><br><h3 id="五、属性装饰器"><a href="#五、属性装饰器" class="headerlink" title="五、属性装饰器"></a><strong><font color='red'>五、属性装饰器</font></strong></h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: 对于静态属性来说值是类，对于实例属性来说值是类的原型对象。</span></span><br><span class="line"><span class="comment">    ○ propertyKey: 属性名。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Demo</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="keyword">static</span> <span class="attr">school</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure><br><h4 id="关于属性遮蔽"><a href="#关于属性遮蔽" class="headerlink" title="关于属性遮蔽"></a><strong><font color='#10c300'>关于属性遮蔽</font></strong></h4><blockquote><p>常规逻辑：给实例对象this添加一个age属性，js会先查看是否有这个属性，没有就查看原型对象上是否有。如下代码在给原型对象添加age属性之前就已经new了一个实例对象，因此实例age是18 原型对象的age是130</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/ 常规</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">P1</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;小明&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">130</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">v</span>) &#123;</span><br><span class="line">        value = v</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">P1</span>);  <span class="comment">// &#123;name: &#x27;小明&#x27;, age: 18&#125;  原型对象上age是130</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202411251647729.png" alt="image-20241125164721617"></p><blockquote><p>**属性遮蔽：**如下代码中：当构造器中的<code>this.age = age</code>试图在实例上赋值时，实际上是调用了原型上<code>age</code>属性的<code>set</code>方法。</p><p>逻辑：第一次执行到this.age &#x3D; age的时候。发现没有age就在原型对象找执行get方法这时候发现age是130，往下执行new一个实例对象的时候，因为这时候的age是原型对象中的，因此会执行set函数，将18赋值给age</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">130</span></span><br><span class="line"><span class="comment">// 使用defineProperty给Person原型添加age属性，并配置对应的get与set</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    value = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1)</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202411251701230.png" alt="image-20241125170107136"></p><br><h4 id="应用举例"><a href="#应用举例" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><blockquote><p>需求：定义一个<code>State</code>属性装饰器，来监视属性的修改。</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一个装饰器函数 State，用于捕获数据的修改</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">State</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 存储属性的内部值</span></span><br><span class="line">    <span class="keyword">let</span> key = <span class="string">`__<span class="subst">$&#123;propertyKey&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 Object.defineProperty 替换类的原始属性</span></span><br><span class="line">    <span class="comment">// 重新定义属性，使其使用自定义的 getter 和 setter</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, propertyKey, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>[key]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params"><span class="attr">newVal</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>的最新值为：<span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">this</span>[key] = newVal</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="comment">//使用State装饰器</span></span><br><span class="line">    <span class="meta">@State</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    school = <span class="string">&#x27;atguigu&#x27;</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;李四&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">p1.<span class="property">age</span> = <span class="number">80</span></span><br><span class="line">p2.<span class="property">age</span> = <span class="number">90</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;------------------&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">age</span>) <span class="comment">//80</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">age</span>) <span class="comment">//90</span></span><br></pre></td></tr></table></figure><br><h3 id="六、方法装饰器"><a href="#六、方法装饰器" class="headerlink" title="六、方法装饰器"></a><strong><font color='red'>六、方法装饰器</font></strong></h3><h4 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: 对于静态方法来说值是类，对于实例方法来说值是类的原型对象。</span></span><br><span class="line"><span class="comment">    ○ propertyKey:方法的名称。</span></span><br><span class="line"><span class="comment">    ○ descriptor: 方法的描述对象，其中value属性是被装饰的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PropertyDescriptor  自带的类型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// Demo装饰实例方法</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Demo装饰静态方法</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-1"><a href="#应用举例-1" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><ol><li>定义一个<code>Logger</code>方法装饰器，用于在方法执行前和执行后，均追加一些额外逻辑。</li><li>定义一个<code>Validate</code>方法装饰器，用于验证数据。</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Logger</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 保存原始方法</span></span><br><span class="line">    <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">    <span class="comment">// 替换原始方法</span></span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>开始执行......`</span>)</span><br><span class="line">        <span class="keyword">const</span> result = original.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>执行完毕......`</span>)</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"><span class="attr">maxValue</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存原始方法</span></span><br><span class="line">        <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">        <span class="comment">// 替换原始方法</span></span><br><span class="line">        descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">            <span class="comment">// 自定义的验证逻辑</span></span><br><span class="line">            <span class="keyword">if</span> (args[<span class="number">0</span>] &gt; maxValue) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;年龄非法！&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果所有参数都符合要求，则调用原始方法</span></span><br><span class="line">            <span class="keyword">return</span> original.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="meta">@Logger</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Validate</span>(<span class="number">120</span>)</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="title function_">isAdult</span>(<span class="number">100</span>))</span><br></pre></td></tr></table></figure><br><h3 id="七、访问器装饰器"><a href="#七、访问器装饰器" class="headerlink" title="七、访问器装饰器"></a><strong><font color='red'>七、访问器装饰器</font></strong></h3><h4 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: </span></span><br><span class="line"><span class="comment">        1. 对于实例访问器来说值是【所属类的原型对象】。</span></span><br><span class="line"><span class="comment">        2. 对于静态访问器来说值是【所属类】。</span></span><br><span class="line"><span class="comment">    ○ propertyKey:访问器的名称。</span></span><br><span class="line"><span class="comment">    ○ descriptor: 描述对象。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="meta">@Demo</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">address</span>()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;北京宏福科技园&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Demo</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">country</span>()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;中国&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-2"><a href="#应用举例-2" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><p>需求：对<code>Weather</code>类的<code>temp</code>属性的<code>set</code>访问器进行限制，设置的最低温度<code>-50</code>，最高温度<code>50</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">RangeValidate</span>(<span class="params"><span class="attr">min</span>: <span class="built_in">number</span>, <span class="attr">max</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存原始的 setter 方法，以便在后续调用中使用</span></span><br><span class="line">        <span class="keyword">const</span> originalSetter = descriptor.<span class="property">set</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重写 setter 方法，加入范围验证逻辑</span></span><br><span class="line">        descriptor.<span class="property">set</span> = <span class="keyword">function</span> (<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">            <span class="comment">// 检查设置的值是否在指定的最小值和最大值之间</span></span><br><span class="line">            <span class="keyword">if</span> (value &lt; min || value &gt; max) &#123;</span><br><span class="line">                <span class="comment">// 如果值不在范围内，抛出错误</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>的值应该在 <span class="subst">$&#123;min&#125;</span> 到 <span class="subst">$&#123;max&#125;</span>之间！`</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果值在范围内，且原始 setter 方法存在，则调用原始 setter 方法</span></span><br><span class="line">            <span class="keyword">if</span> (originalSetter) &#123;</span><br><span class="line">                originalSetter.<span class="title function_">call</span>(<span class="variable language_">this</span>, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_temp</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">_temp</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_temp</span> = _temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置温度范围在 -50 到 50 之间</span></span><br><span class="line">    <span class="meta">@RangeValidate</span>(-<span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">temp</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_temp</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">temp</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_temp</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> w1 = <span class="keyword">new</span> <span class="title class_">Weather</span>(<span class="number">25</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w1)</span><br><span class="line">w1.<span class="property">temp</span> = <span class="number">67</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w1)</span><br></pre></td></tr></table></figure><br><h3 id="八、参数装饰器"><a href="#八、参数装饰器" class="headerlink" title="八、参数装饰器"></a><strong><font color='red'>八、参数装饰器</font></strong></h3><h4 id="基本语法-3"><a href="#基本语法-3" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target:</span></span><br><span class="line"><span class="comment">      1.如果修饰的是【实例方法】的参数，target 是类的【原型对象】。</span></span><br><span class="line"><span class="comment">      2.如果修饰的是【静态方法】的参数，target 是【类】。</span></span><br><span class="line"><span class="comment">    ○ propertyKey：参数所在的方法的名称。</span></span><br><span class="line"><span class="comment">    ○ parameterIndex: 参数在函数参数列表中的索引，从 0 开始。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(parameterIndex)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span>) &#123; &#125;</span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"><span class="meta">@Demo</span> <span class="attr">message1</span>: <span class="built_in">any</span>, <span class="attr">mesage2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>想对说：<span class="subst">$&#123;message1&#125;</span>，<span class="subst">$&#123;mesage2&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-3"><a href="#应用举例-3" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><p>需求：定义方法装饰器<code>Validate</code>，同时搭配参数装饰器<code>NotNumber</code>，来对<code>speak</code>方法的参数类型进行限制。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">NotNumber</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 初始化或获取当前方法的参数索引列表</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">    <span class="comment">// 将当前参数索引添加到列表中</span></span><br><span class="line">    notNumberArr.<span class="title function_">push</span>(parameterIndex);</span><br><span class="line">    <span class="comment">// 将列表存储回目标对象</span></span><br><span class="line">    target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] = notNumberArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法装饰器定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> method = descriptor.<span class="property">value</span>;</span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取被标记为不能为空的参数索引列表</span></span><br><span class="line">        <span class="keyword">const</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">        <span class="comment">// 检查参数是否为 null 或 undefined</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> index <span class="keyword">of</span> notNumberArr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> args[index] === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`方法 <span class="subst">$&#123;propertyKey&#125;</span> 中索引为 <span class="subst">$&#123;index&#125;</span> 的参数不能是数字！`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用原始方法</span></span><br><span class="line">        <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Validate</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"><span class="meta">@NotNumber</span> <span class="attr">message1</span>: <span class="built_in">any</span>, <span class="attr">mesage2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>想对说：<span class="subst">$&#123;message1&#125;</span>，<span class="subst">$&#123;mesage2&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">s1.<span class="title function_">speak</span>(<span class="number">100</span>, <span class="number">200</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、简介&quot;&gt;&lt;a href=&quot;#一、简介&quot; class=&quot;headerlink&quot; title=&quot;一、简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、简介&lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;装饰器本质是一种特殊的&lt;st</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="typeScript" scheme="http://example.com/tags/typeScript/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript快速上手</title>
    <link href="http://example.com/posts/9dd4ce81.html"/>
    <id>http://example.com/posts/9dd4ce81.html</id>
    <published>2025-08-17T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.322Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、-TypeScript简介"><a href="#一、-TypeScript简介" class="headerlink" title="一、 TypeScript简介"></a><strong><font color='red'>一、 TypeScript简介</font></strong></h3><ol><li><p>TypeScript 由**<code>微软</code><strong>开发，是基于JavaScript 的一个</strong><code>扩展语言</code>**。</p></li><li><p>TypeScript 包含了JavaScript 的所有内容，即: TypeScript 是JavaScript的**<code>超集</code>**。</p></li><li><p>TypeScript 增加了：静态类型检查、接口、泛型等很多**<code>现代开发特性</code><strong>，因此更适合</strong><code>大型项目</code>**的开发。</p></li><li><p>TypeScript 需要**<code>编译</code>**为JavaScript ，然后交给浏览器或其他JavaScript 运行环境执行。</p></li></ol><h3 id="二、为何需要TypeScript"><a href="#二、为何需要TypeScript" class="headerlink" title="二、为何需要TypeScript"></a><strong><font color='red'>二、为何需要TypeScript</font></strong></h3><h4 id="2-1、今非昔比的JavaScript-了解"><a href="#2-1、今非昔比的JavaScript-了解" class="headerlink" title="2.1、今非昔比的JavaScript (了解) "></a><strong><font color='#10c300'>2.1、今非昔比的JavaScript (了解) </font></strong></h4><ul><li>JavaScript当年诞生时的定位是浏览器**<code>脚本语言</code><strong>，用于在网页中嵌入一些</strong><code>简单的逻辑</code>**，而且代码量很少。</li><li>随着时间的推移，JavaScript变得越来越流行，如今的JavaScript已经可以**<code>全栈编程</code>**了。</li><li>现如今的JavaScript**<code>应用场景</code><strong>比当年</strong><code>丰富</code><strong>的多，</strong><code>代码量</code><strong>也比当年</strong><code>大很多</code>**，随便一 个JavaScript项目的代码量，可以轻松的达到几万行，甚至十几万行!</li><li>然而JavaScript当年 “<strong><code>出生简陋</code></strong>“，没考虑到如今的应用场景和代码量，逐渐的就出现了**<code>很多困扰</code>**。</li></ul><h4 id="2-2、JavaScript中的困扰"><a href="#2-2、JavaScript中的困扰" class="headerlink" title="2.2、JavaScript中的困扰"></a><strong><font color='#10c300'>2.2、JavaScript中的困扰</font></strong></h4><h5 id="1）、不清不楚的数据类型"><a href="#1）、不清不楚的数据类型" class="headerlink" title="1）、不清不楚的数据类型"></a><strong><font color='cornflowerblue'>1）、不清不楚的数据类型</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> welcome = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="title function_">welcome</span>() <span class="comment">//此行报错: TypeError: welcome is not a function</span></span><br></pre></td></tr></table></figure><h5 id="2）、有漏洞的逻辑"><a href="#2）、有漏洞的逻辑" class="headerlink" title="2）、有漏洞的逻辑"></a><strong><font color='cornflowerblue'>2）、有漏洞的逻辑</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? <span class="string">&#x27;奇数&#x27;</span> : <span class="string">&#x27;偶数 &#x27;</span></span><br><span class="line"><span class="keyword">if</span> (str !== <span class="string">&#x27;奇数&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;偶数&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3）、访问不存在的属性"><a href="#3）、访问不存在的属性" class="headerlink" title="3）、访问不存在的属性"></a><strong><font color='cornflowerblue'>3）、访问不存在的属性</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">15</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> area = obj.<span class="property">width</span> * obj.<span class="property">heigth</span>; <span class="comment">// heigth单词写错找不到这个属性</span></span><br></pre></td></tr></table></figure><h5 id="4）、低级的拼写错误"><a href="#4）、低级的拼写错误" class="headerlink" title="4）、低级的拼写错误"></a><strong><font color='cornflowerblue'>4）、低级的拼写错误</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;hello , world&#x27;</span></span><br><span class="line">message.<span class="title function_">toUperCase</span>() <span class="comment">// toUperCase拼写错误</span></span><br></pre></td></tr></table></figure><h4 id="2-3、静态类型检查"><a href="#2-3、静态类型检查" class="headerlink" title="2.3、静态类型检查"></a><strong><font color='#10c300'>2.3、静态类型检查</font></strong></h4><ul><li>在代码运行前进行检查，发现代码的错误或不合理之处，减小运行时异常的出现的几率，此种检查叫**<code>「静态类型检查』</code><strong>，TypeScript 和核心就是「静态类型检查』，简言之就是</strong><code>把运行时的错误前置</code>**。</li><li>同样的功能，TypeScript的代码量要**<code>大于</code><strong>JavaScript，但由于 TypeScript 的代码结构更加清晰，在后期代码的维护中 TypeScript 却</strong><code>远胜于</code>** JavaScript。</li></ul><br><h3 id="三、编译TypeScript"><a href="#三、编译TypeScript" class="headerlink" title="三、编译TypeScript"></a><strong><font color='red'>三、编译TypeScript</font></strong></h3><p>ypeScript 官方提供的编译器叫做 tsc，可以将 TypeScript 脚本编译成 JavaScript 脚本。</p><blockquote><p>浏览器不能直接运行TypeScript代码，需要编译为JavaScript再交由浏览器解析器执行。</p></blockquote><h4 id="3-1、命令行编译"><a href="#3-1、命令行编译" class="headerlink" title="3.1、命令行编译"></a><strong><font color='#10c300'>3.1、命令行编译</font></strong></h4><blockquote><p>要把.ts 文件编译为.js 文件，需要配置TypeScript 的编译环境，步骤如下:</p></blockquote><p><strong>1）、创建一个demo.ts文件</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;person.name&#125;</span>,我今年<span class="subst">$&#123;person.age&#125;</span>岁了`</span>)</span><br></pre></td></tr></table></figure><p><strong>2）、全局安装TypeScript</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -g</span><br><span class="line">tsc -v 查看版本号</span><br></pre></td></tr></table></figure><p><strong>3）、使用命令编译.ts文件</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc demo.ts</span><br></pre></td></tr></table></figure><br><h4 id="3-2、自动化编译"><a href="#3-2、自动化编译" class="headerlink" title="3.2、自动化编译"></a><strong><font color='#10c300'>3.2、自动化编译</font></strong></h4><p><strong>1）、创建TypeScript编译控制文件</strong></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><blockquote><p>工程中会生成一个tsconfig. json配置文件，其中包含着很多编译时的配置。<br>观察发现，默认编译的JS版本是ES7，我们可以手动调整为其他版本。</p></blockquote><p><strong>2）、监视目录中的.ts 文件变化</strong></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tsc --watch  // 监视整个工程的ts文件</span><br><span class="line">tsc --watch index.ts   // 监视指定的ts文件</span><br></pre></td></tr></table></figure><p><strong>3）、小优化：当编译出错时不生成.js 文件</strong></p><p>在tsconfig. json文件中配置 “noEmitOnError”: true,  </p><br><h3 id="四、ts-node-模块"><a href="#四、ts-node-模块" class="headerlink" title="四、ts-node 模块"></a><strong><font color='red'>四、ts-node 模块</font></strong></h3><p><a href="https://github.com/TypeStrong/ts-node">ts-node</a> 是一个非官方的 npm 模块，可以直接运行 TypeScript 代码。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">全局安装</span><br><span class="line">npm install -g ts-node</span><br><span class="line"></span><br><span class="line">在当前目录运行 TypeScript 脚本</span><br><span class="line">ts-node index.ts</span><br></pre></td></tr></table></figure><p>如果只是想简单运行 TypeScript 代码看看结果，ts-node 不失为一个便捷的方法。</p><br><h3 id="五、类型声明"><a href="#五、类型声明" class="headerlink" title="五、类型声明"></a><strong><font color='red'>五、类型声明</font></strong></h3><p>使⽤ : 来对变量或函数形参，进⾏类型声明：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span> <span class="comment">//变量a只能存储字符串</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="built_in">number</span> <span class="comment">//变量b只能存储数值</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="built_in">boolean</span> <span class="comment">//变量c只能存储布尔值</span></span><br><span class="line"> </span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">a = <span class="number">100</span> <span class="comment">//警告：不能将类型“number”分配给类型“string”</span></span><br><span class="line"></span><br><span class="line">b = <span class="number">666</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span><span class="comment">//警告：不能将类型“string”分配给类型“number”</span></span><br><span class="line"></span><br><span class="line">c = <span class="literal">true</span></span><br><span class="line">c = <span class="number">666</span> <span class="comment">//警告：不能将类型“number”分配给类型“boolean”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数x必须是数字，参数y也必须是数字，函数返回值也必须是数字</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"><span class="attr">x</span>:<span class="built_in">number</span>,<span class="attr">y</span>:<span class="built_in">number</span></span>):<span class="built_in">number</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="string">&#x27;200&#x27;</span>) <span class="comment">//警告：类型“string”的参数不能赋给类型“number”的参数</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>) <span class="comment">//警告：应有 2 个参数，但获得 3 个</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>) </span><br></pre></td></tr></table></figure><p>在 : 后也可以写字⾯量类型，不过实际开发中⽤的不多。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="string">&#x27;你好&#x27;</span> <span class="comment">//a的值只能为字符串“你好”</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="number">100</span> <span class="comment">//b的值只能为数字100</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&#x27;欢迎&#x27;</span><span class="comment">//警告：不能将类型“&quot;欢迎&quot;”分配给类型“&quot;你好&quot;”</span></span><br><span class="line">b = <span class="number">200</span> <span class="comment">//警告：不能将类型“200”分配给类型“100”</span></span><br></pre></td></tr></table></figure><br><h3 id="六、类型推断"><a href="#六、类型推断" class="headerlink" title="六、类型推断"></a><strong><font color='red'>六、类型推断</font></strong></h3><p>TS 会根据我们的代码，进⾏类型推导，例如下⾯代码中的变量 d ，只能存储数字</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = -<span class="number">99</span> <span class="comment">// TypeScript会推断出变量d的类型是数字</span></span><br><span class="line">d = <span class="literal">false</span> <span class="comment">// 警告：不能将类型“boolean”分配给类型“number”</span></span><br></pre></td></tr></table></figure><blockquote><p>但要注意，类型推断不是万能的，⾯对复杂类型时推断容易出问题，所以尽量还是明确的编写类<br>型声明！</p></blockquote><br><h3 id="七、类型总览"><a href="#七、类型总览" class="headerlink" title="七、类型总览"></a><strong><font color='red'>七、类型总览</font></strong></h3><h4 id="7-1、JavaScript-中的数据类型"><a href="#7-1、JavaScript-中的数据类型" class="headerlink" title="7.1、JavaScript 中的数据类型"></a><strong><font color='#10c300'>7.1、JavaScript 中的数据类型</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">① string</span><br><span class="line">② number</span><br><span class="line">③ boolean</span><br><span class="line">④ <span class="literal">null</span></span><br><span class="line">⑤ <span class="literal">undefined</span></span><br><span class="line">⑥ bigint</span><br><span class="line">⑦ symbol</span><br><span class="line">⑧ object</span><br><span class="line">备注：其中 object 包含： <span class="title class_">Array</span> 、 <span class="title class_">Function</span> 、 <span class="title class_">Date</span> 、 <span class="title class_">Error</span> 等......</span><br></pre></td></tr></table></figure><h4 id="7-2、TypeScript-中的数据类型"><a href="#7-2、TypeScript-中的数据类型" class="headerlink" title="7.2、TypeScript 中的数据类型"></a><strong><font color='#10c300'>7.2、TypeScript 中的数据类型</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 上述所有 <span class="title class_">JavaScript</span> 类型</span><br><span class="line"><span class="number">2.</span> 六个新类型：</span><br><span class="line">    ① any</span><br><span class="line">    ② unknown</span><br><span class="line">    ③ never</span><br><span class="line">    ④ <span class="keyword">void</span></span><br><span class="line">    ⑤ tuple</span><br><span class="line">    ⑥ enum</span><br><span class="line"><span class="number">3.</span> 两个⽤于⾃定义类型的⽅式：</span><br><span class="line">    ① type</span><br><span class="line">    ② interface</span><br></pre></td></tr></table></figure><h4 id="7-3、注意点"><a href="#7-3、注意点" class="headerlink" title="7.3、注意点"></a><strong><font color='#10c300'>7.3、注意点</font></strong></h4><blockquote><p>在 JavaScript 中的这些内置构造函数： Number 、 String 、 Boolean ，⽤于创建对应的包装对象， 在⽇常开发时很少使⽤，在 TypeScript 中也是同理，所以在 TypeScript 中进⾏类型声明时，通常都是⽤⼩写的 number 、 string 、 boolean</p></blockquote><p>例如下⾯代码：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">// str1 = new String(&#x27;hello&#x27;) //报错</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="title class_">String</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// 创建一个包装对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str2) <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2.<span class="title function_">valueOf</span>()) <span class="comment">// &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><ol><li><p>原始类型 VS 包装对象<br> **原始类型：**如 number 、 string 、 boolean ，在 JavaScript 中是简单数据类型，它们在内存中占⽤空间少，处理速度快。<br> **包装对象：**如 Number 对象、 String 对象、 Boolean 对象，是复杂类型，在内存中占⽤更多空间，在⽇常开发时很少由开发⼈员⾃⼰创建包装对象。</p></li><li><p>⾃动装箱：JavaScript 在必要时会⾃动将原始类型包装成对象，以便调⽤⽅法或访问属性</p></li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始类型字符串</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当访问str.length时，JavaScript引擎做了以下⼯作：</span></span><br><span class="line"><span class="keyword">let</span> size = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1. ⾃动装箱：创建⼀个临时的String对象包装原始字符串</span></span><br><span class="line">    <span class="keyword">let</span> tempStringObject = <span class="keyword">new</span> <span class="title class_">String</span>(str);</span><br><span class="line">    <span class="comment">// 2. 访问String对象的length属性</span></span><br><span class="line">    <span class="keyword">let</span> lengthValue = tempStringObject.<span class="property">length</span>;</span><br><span class="line">    <span class="comment">// 3. 销毁临时对象，返回⻓度值</span></span><br><span class="line">    <span class="comment">// （JavaScript引擎⾃动处理对象销毁，开发者⽆感知）</span></span><br><span class="line">    <span class="keyword">return</span> lengthValue;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(size); <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure><br><h3 id="八、常用类型与语法"><a href="#八、常用类型与语法" class="headerlink" title="八、常用类型与语法"></a><strong><font color='red'>八、常用类型与语法</font></strong></h3><h4 id="8-1、any"><a href="#8-1、any" class="headerlink" title="8.1、any"></a><strong><font color='#10c300'>8.1、any</font></strong></h4><blockquote><p><code>any</code> 的含义是：任意类型，⼀旦将变量类型限制为 any ，那就意味着放弃了对该变量的类型检查。</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 明确的表示a的类型是 any —— 【显式的any】</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下对a的赋值，均⽆警告</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有明确的表示b的类型是any，但TS主动推断出来b是any —— 隐式的any</span></span><br><span class="line"><span class="keyword">let</span> b</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下对b的赋值，均⽆警告</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">b = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注意点：any类型的变量，可以赋值给任意类型的变量 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>:<span class="built_in">any</span></span><br><span class="line">c = <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = c <span class="comment">// ⽆警告</span></span><br></pre></td></tr></table></figure><br><h4 id="8-2、unknown"><a href="#8-2、unknown" class="headerlink" title="8.2、unknown"></a><strong><font color='#10c300'>8.2、unknown</font></strong></h4><blockquote><p><code>unknown</code> 的含义是：未知类型，适⽤于：起初不确定数据的具体类型，要后期才能确定</p></blockquote><p><font color='orange' size="3">1）、unknown 可以理解为⼀个类型安全的 any </font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下对a的赋值，均符合规范</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置x的数据类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = a <span class="comment">//警告：不能将类型“unknown”分配给类型“string”</span></span><br></pre></td></tr></table></figure><p><font color='orange' size="3">2）、unknown 会强制开发者在使用之前进行类型检查，从而提供更强的类型安全性</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>:<span class="built_in">string</span></span><br><span class="line"><span class="comment">// x = a // 不能将类型“unknown”分配给类型“string”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决</span></span><br><span class="line"><span class="comment">//第⼀种⽅式：加类型判断</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line"> x = a</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第⼆种⽅式：加断⾔</span></span><br><span class="line">x = a <span class="keyword">as</span> <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种⽅式：加断⾔</span></span><br><span class="line">x = &lt;<span class="built_in">string</span>&gt;a</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、读取 any 类型数据的任何属性都不会报错，而 unknown 正好与之相反</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str1.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="built_in">any</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str3</span>: <span class="built_in">unknown</span></span><br><span class="line">str3 = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">str3.<span class="title function_">toUpperCase</span>() <span class="comment">//警告：“str3”的类型为“未知”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤断⾔强制指定str3的类型为string</span></span><br><span class="line">(str3 <span class="keyword">as</span> <span class="built_in">string</span>).<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line">(&lt;<span class="built_in">string</span>&gt;str3).<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br></pre></td></tr></table></figure><br><h4 id="8-3、never"><a href="#8-3、never" class="headerlink" title="8.3、never"></a><strong><font color='#10c300'>8.3、never</font></strong></h4><blockquote><p><code>never</code> 的含义是：任何值都不是，即：不能有值，例如 undefined 、 null 、 ‘’ 、 0 都不⾏！</p><p>注意：在函数中不写return，默认返回undeifned。</p></blockquote><p><font color='orange' size="3">1）、几乎不用 never 去直接限制变量，因为没有意义，例如：</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 指定a的类型为never，那就意味着a以后不能存任何的数据了 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下对a的所有赋值都会有警告</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">a = <span class="literal">true</span></span><br><span class="line">a = <span class="literal">undefined</span></span><br><span class="line">a = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p><font color='orange' size="3">2）、never ⼀般是 TypeScript 主动推断出来的，例如：</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定a的类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span></span><br><span class="line"><span class="comment">// 给a设置⼀个值</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// TypeScript会推断出此处的a是never，因为没有任何⼀个值符合此处的逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、never 也可用于限制函数的返回值</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制throwError函数不需要有任何返回值，任何值都不⾏，像undeifned、null都不⾏</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params"><span class="attr">str</span>: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;程序异常退出:&#x27;</span> + str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="8-4、void"><a href="#8-4、void" class="headerlink" title="8.4、void "></a><strong><font color='#10c300'>8.4、void </font></strong></h4><blockquote><p><code>void</code> 的含义是空，即：函数不返回任何值，调⽤者也不应依赖其返回值进⾏<strong><code>任何操作</code></strong>，即不能对返回值进行操作！</p></blockquote><p><font color='orange' size="3">1）、void 通常用于函数返回值声明</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br></pre></td></tr></table></figure><p>**注意：**编码者没有编写 return 指定函数返回值，所以 logMessage 函数是没有显式返回值的，但会有⼀个隐式返回值 ，是 undefined ，虽然函数返回类型为 void ，但也是可以接受 undefined 的，简单记： undefined 是 void 可以接受的⼀种“空”。</p><p><font color='orange' size="3">2）、以下写法均符合规范</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、那限制函数返回值时，是不是 undefined 和 void 就没区别呢？</font></p><p>有区别。因为还有这句话 ：<strong>【返回值类型为 void 的函数，调用者不应依赖其返回值进行任何操作！】</strong></p><p>对比下面两段代码：<strong>可知返回类型为void的不能操作其返回值，返回类型为undefined的可操作其返回值</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (result) &#123;</span><br><span class="line">  <span class="comment">// 此⾏报错：⽆法测试 &quot;void&quot; 类型的表达式的真实性</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;logMessage有返回值&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="literal">undefined</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (result) &#123;</span><br><span class="line">  <span class="comment">// 此⾏⽆警告</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;logMessage有返回值&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>理解 void 与 undefined</strong><br>void 是⼀个广泛的概念，⽤来表达“空”，⽽ undefined 则是这种“空”的具体实现。</p><p>​因此可以说 undefined 是 void 能接受的⼀种“空”的状态。</p><p>​也可以理解为： void 包含 undefined ，但 void 所表达的语义超越了 undefined ， void 是⼀种意图上的约定，而不仅仅是特定值的限制。 </p></blockquote><p><strong>总结：</strong></p><p>如果⼀个函数返回类型为 void ，那么：</p><ol><li>从语法上讲：函数是可以返回 undefined 的，至于显式返回，还是隐式返回，这无所谓！</li><li>从语义上讲：函数调用者不应关心函数返回的值，也不应依赖返回值进行任何操作！即使我们知道它返回了 undefined 。</li></ol><br><h4 id="8-5、object"><a href="#8-5、object" class="headerlink" title="8.5、object"></a><strong><font color='#10c300'>8.5、object</font></strong></h4><blockquote><p>关于 object 与 Object ，直接说结论：实际开发中⽤的相对较少，因为范围太⼤了。</p></blockquote><h5 id="1）、object（小写）和Object（大写）"><a href="#1）、object（小写）和Object（大写）" class="headerlink" title="1）、object（小写）和Object（大写）"></a><strong><font color='cornflowerblue'>1）、object（小写）和Object（大写）</font></strong></h5><p><strong>object（小写）</strong></p><p><strong><code>object</code></strong> （小写）的含义是：所有**<code>非原始类型</code><strong>，可存储：对象、函数、数组等，由于限制的范围</strong><code>比较宽泛</code><strong>，在实际开发中使用的</strong><code>相对较少</code>**。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">object</span> <span class="comment">//a的值可以是任何【⾮原始类型】，包括：对象、函数、数组等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，是将【⾮原始类型】赋给a，所以均符合要求</span></span><br><span class="line">a = &#123;&#125;</span><br><span class="line">a = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">a = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，是将【原始类型】赋给a，有警告</span></span><br><span class="line">a = <span class="number">1</span> <span class="comment">// 警告：不能将类型“number”分配给类型“object”</span></span><br><span class="line">a = <span class="literal">true</span> <span class="comment">// 警告：不能将类型“boolean”分配给类型“object”</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// 警告：不能将类型“string”分配给类型“object” </span></span><br><span class="line">a = <span class="literal">null</span> <span class="comment">// 警告：不能将类型“null”分配给类型“object”</span></span><br><span class="line">a = <span class="literal">undefined</span> <span class="comment">// 警告：不能将类型“undefined”分配给类型“object”</span></span><br></pre></td></tr></table></figure><p><strong>Object（大写）</strong></p><ul><li>官方描述：所有可以调用Object 方法的类型。</li><li>简单记忆：除了 undefined 和 null 的任何值。</li><li>由于限制的范围实在太大了！所以实际开发中使用频率极低。</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:<span class="title class_">Object</span> <span class="comment">//b的值必须是Object的实例对象（除去undefined和null的任何值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，均⽆警告，因为给a赋的值，都是Object的实例对象</span></span><br><span class="line">b = &#123;&#125;</span><br><span class="line">b = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">b = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line">b = <span class="number">1</span> <span class="comment">// 1不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="literal">true</span> <span class="comment">// truue不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// “你好”不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均有警告</span></span><br><span class="line">b = <span class="literal">null</span> <span class="comment">// 警告：不能将类型“null”分配给类型“Object”</span></span><br><span class="line">b = <span class="literal">undefined</span> <span class="comment">// 警告：不能将类型“undefined”分配给类型“Object”</span></span><br></pre></td></tr></table></figure><br><h5 id="2）、声明对象类型"><a href="#2）、声明对象类型" class="headerlink" title="2）、声明对象类型"></a><strong><font color='cornflowerblue'>2）、声明对象类型</font></strong></h5><p><strong>A. 实际开发中，限制一般对象，通常使用以下形式</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制person1对象必须有name属性，age为可选属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person1</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>?: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 含义同上，也能⽤分号做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person2</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">age</span>?: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 含义同上，也能⽤换⾏做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person3</span>: &#123;</span><br><span class="line"> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"> <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如下赋值均可以</span></span><br><span class="line">person1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;</span><br><span class="line">person2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如下赋值不合法，因为person3的类型限制中，没有对gender属性的说明</span></span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>,<span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p><strong>B.索引签名： 允许定义对象可以具有<code>任意数量的属性</code>，这些属性的键和类型是可变的，<code>常用于：描述类型不确定的属性，（具有动态属性的对象）</code></strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制person对象必须有name属性，可选age属性但值必须是数字，同时可以有任意数量、任意类型的其他属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line"> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"> <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line"> [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 索引签名，完全可以不⽤key这个单词，换成其他的也可以</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值合法</span></span><br><span class="line">person = &#123;</span><br><span class="line"> <span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line"> <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line"> <span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="3）、声明函数类型"><a href="#3）、声明函数类型" class="headerlink" title="3）、声明函数类型"></a><strong><font color='cornflowerblue'>3）、声明函数类型</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">count</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">count = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>备注：</strong></p><ul><li>TypeScript 中的 &#x3D;&gt; 在函数类型声明时表示函数类型，描述其<strong>参数类型和返回类型</strong>。</li><li>JavaScript 中的 &#x3D;&gt; 是⼀种定义函数的语法，是具体的函数实现。</li><li>函数类型声明还可以使用：接口、自定义类型等方式，下文中会详细讲解</li></ul></blockquote><br><h5 id="4）、声明数组类型"><a href="#4）、声明数组类型" class="headerlink" title="4）、声明数组类型"></a><strong><font color='cornflowerblue'>4）、声明数组类型</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">string</span>[]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>:<span class="title class_">Array</span>&lt;&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>?:<span class="built_in">number</span></span><br><span class="line">    [<span class="attr">key</span>:<span class="built_in">string</span>]:<span class="built_in">any</span></span><br><span class="line">&#125;&gt;</span><br><span class="line">    </span><br><span class="line">arr1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">arr2 = [<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br><span class="line">arr3 = [&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">123</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&#x27;male&#x27;</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>备注：上述代码中的 Array<string> 属于泛型，下⽂会详细讲解。</p><br><h4 id="8-6、-tuple"><a href="#8-6、-tuple" class="headerlink" title="8.6、 tuple"></a><strong><font color='#10c300'>8.6、 tuple</font></strong></h4><blockquote><p>元组 (Tuple) 是⼀种特殊的<strong>数组类型</strong>，可以<strong>存储固定数量</strong>的元素，并且每个元素的类型是<strong>已知的</strong>且<strong>可以不同</strong>。元组⽤于精确描述⼀组值的类型， ? 表示可选元素。</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第⼀个元素必须是 string 类型，第⼆个元素必须是 number 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: [<span class="built_in">string</span>,<span class="built_in">number</span>]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型，第⼆个元素是可选的，如果存在，必须是 boolean 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: [<span class="built_in">number</span>,<span class="built_in">boolean</span>?]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型，后⾯的元素可以是任意数量的 string 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: [<span class="built_in">number</span>,...<span class="built_in">string</span>[]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以赋值</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>]</span><br><span class="line">arr2 = [<span class="number">100</span>,<span class="literal">false</span>]</span><br><span class="line">arr2 = [<span class="number">200</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不可以赋值，arr1声明时是两个元</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>,<span class="literal">false</span>]</span><br></pre></td></tr></table></figure><br><h4 id="8-7、enum"><a href="#8-7、enum" class="headerlink" title="8.7、enum"></a><strong><font color='#10c300'>8.7、enum</font></strong></h4><blockquote><p>枚举（ enum ）可以定义**<code>⼀组命名常量</code>**，它能增强代码的可读性，也让代码更好维护。</p></blockquote><p>如下代码的功能是：根据调用walk 时传⼊的不同参数，执行不同的逻辑，存在的问题是调用 walk 时**<code>传参</code>时没有任何提示，编码者很容易写错<code>传参字符串内容</code>**；并且用于判断逻辑的 up 、 down 、 left 、 right 是连续且相关的⼀组值，那此时就特别适合使用枚举（ enum ）。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params"><span class="attr">str</span>:<span class="built_in">string</span></span>) &#123;</span><br><span class="line"> <span class="keyword">if</span> (str === <span class="string">&#x27;up&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【上】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;down&#x27;</span>) &#123; <span class="comment">// 或在这里写错单词导致和传入的参数不一致没有提示报错</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【下】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;left&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【左】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;right&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【右】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知⽅向&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;up&#x27;</span>)</span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;down&#x27;</span>) <span class="comment">// 在这里写错传参没有提示</span></span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;right&#x27;</span>)</span><br></pre></td></tr></table></figure><br><h5 id="1）、数字枚举"><a href="#1）、数字枚举" class="headerlink" title="1）、数字枚举"></a><strong><font color='cornflowerblue'>1）、数字枚举</font></strong></h5><p>数字枚举⼀种最常见的枚举类型，其成员的值会**<code>自动递增</code><strong>，且数字枚举还具备</strong><code>反向映射</code><strong>的特点，在下面代码的打印中，不难发现：可以</strong><code>通过值来获取对应的枚举成员名称</code>** 。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义⼀个描述【上下左右】⽅向的枚举Direction</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>) <span class="comment">// 打印Direction会看到如下内容</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment">     0:&#x27;Up&#x27;, </span></span><br><span class="line"><span class="comment">     1:&#x27;Down&#x27;, </span></span><br><span class="line"><span class="comment">     2:&#x27;Left&#x27;, </span></span><br><span class="line"><span class="comment">     3:&#x27;Right&#x27;, </span></span><br><span class="line"><span class="comment">     Up:0, </span></span><br><span class="line"><span class="comment">     Down:1, </span></span><br><span class="line"><span class="comment">     Left:2,</span></span><br><span class="line"><span class="comment">     Right:3</span></span><br><span class="line"><span class="comment"> &#125; </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反向映射</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>[<span class="number">0</span>]) <span class="comment">// Up</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此⾏代码报错，枚举中的属性是只读的</span></span><br><span class="line"><span class="title class_">Direction</span>.<span class="property">Up</span> = <span class="string">&#x27;shang&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241015001709926.png" alt="image-20241015001709926"></p><p>也可以指定枚举成员的初始值，其后的成员值会自动递增。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span> = <span class="number">6</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>); <span class="comment">// 输出: 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>); <span class="comment">// 输出: 7</span></span><br></pre></td></tr></table></figure><p>使用数字枚举完成刚才 walk 函数中的逻辑，此时我们发现： 代码更加直观易读，而且类型安全，同时也更易于维护。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span>,</span><br><span class="line">  <span class="title class_">Down</span>,</span><br><span class="line">  <span class="title class_">Left</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params"><span class="attr">n</span>: <span class="title class_">Direction</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Up</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【上】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【下】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Left</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【左】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Right</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【右】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知⽅向&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>);</span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>);</span><br></pre></td></tr></table></figure><br><h5 id="2）、字符串枚举"><a href="#2）、字符串枚举" class="headerlink" title="2）、字符串枚举"></a><strong><font color='cornflowerblue'>2）、字符串枚举</font></strong></h5><p>枚举成员的值是字符串，丢失反向映射。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span> = <span class="string">&quot;up&quot;</span>,</span><br><span class="line"> <span class="title class_">Down</span> = <span class="string">&quot;down&quot;</span>,</span><br><span class="line"> <span class="title class_">Left</span> = <span class="string">&quot;left&quot;</span>,</span><br><span class="line"> <span class="title class_">Right</span> = <span class="string">&quot;right&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">dir</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">Up</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dir); <span class="comment">// 输出: &quot;up&quot;</span></span><br></pre></td></tr></table></figure><br><h5 id="3）、常量枚举"><a href="#3）、常量枚举" class="headerlink" title="3）、常量枚举"></a><strong><font color='cornflowerblue'>3）、常量枚举</font></strong></h5><blockquote><p>官⽅描述：常量枚举是⼀种特殊枚举类型，它使⽤ const 关键字定义，在编译时会被**<code>内联</code><strong>，</strong><code>避免</code><strong>生成⼀些</strong><code>额外</code>**的代码。</p></blockquote><p><strong>何为编译时内联？</strong><br>所谓“内联”其实就是 TypeScript 在编译时，会将<strong>枚举成员引⽤<strong>替换为它们的</strong>实际值</strong>，而不是生成额外的枚举对象。这可以减少生成的 JavaScript 代码量，并提⾼运行时性能。</p><p>使用普通枚举的 TypeScript 代码如下</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Directions</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>; <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>编译后⽣成的 JavaScript 代码量较⼤ ：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Directions</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params">Directions</span>) &#123;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Up&quot;</span>] = <span class="number">0</span>] = <span class="string">&quot;Up&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Down&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;Down&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Left&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;Left&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Right&quot;</span>] = <span class="number">3</span>] = <span class="string">&quot;Right&quot;</span>;</span><br><span class="line">&#125;)(<span class="title class_">Directions</span> || (<span class="title class_">Directions</span> = &#123;&#125;));</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure><p>  使用常量枚举的 TypeScript 代码如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="title class_">Directions</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure><p>编译后生成的 JavaScript 代码量较小：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">0</span> <span class="comment">/* Directions.Up */</span>;</span><br></pre></td></tr></table></figure><br><h4 id="8-8、type"><a href="#8-8、type" class="headerlink" title="8.8、type"></a><strong><font color='#10c300'>8.8、type</font></strong></h4><blockquote><p><strong><code>type</code></strong> 可以为任意类型创建别名，让代码更简洁、可读性更强，同时能更⽅便地进⾏类型复⽤和扩展。</p></blockquote><h5 id="1）、基本用法"><a href="#1）、基本用法" class="headerlink" title="1）、基本用法"></a><font color='orange' size="4">1）、基本用法</font></h5><p>类型别名使用 type 关键字定义， type后跟类型名称，例如下⾯代码中 num 是类型别名。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> num = <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">price</span>: num</span><br><span class="line">price = <span class="number">100</span></span><br></pre></td></tr></table></figure><h5 id="2）、联合类型"><a href="#2）、联合类型" class="headerlink" title="2）、联合类型"></a><strong><font color='cornflowerblue'>2）、联合类型</font></strong></h5><p>联合类型是⼀种⾼级类型，它表示⼀个值可以是几种不同类型之⼀。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Status</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Gender</span> = <span class="string">&#x27;男&#x27;</span> | <span class="string">&#x27;⼥&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printStatus</span>(<span class="params"><span class="attr">status</span>: <span class="title class_">Status</span></span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logGender</span>(<span class="params"><span class="attr">str</span>:<span class="title class_">Gender</span></span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printStatus</span>(<span class="number">404</span>);</span><br><span class="line"><span class="title function_">printStatus</span>(<span class="string">&#x27;200&#x27;</span>);</span><br><span class="line"><span class="title function_">printStatus</span>(<span class="string">&#x27;501&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;男&#x27;</span>)</span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;⼥&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="3）、交叉类型"><a href="#3）、交叉类型" class="headerlink" title="3）、交叉类型"></a><strong><font color='cornflowerblue'>3）、交叉类型</font></strong></h5><p>交叉类型（Intersection Types）允许将多个类型合并为⼀个类型。合并后的类型将拥有所有被合并类型的成员。交叉类型通常⽤于对象类型。 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//⾯积</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Area</span> = &#123;</span><br><span class="line">  <span class="attr">height</span>: <span class="built_in">number</span>; <span class="comment">//⾼</span></span><br><span class="line">  <span class="attr">width</span>: <span class="built_in">number</span>; <span class="comment">//宽</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//地址</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Address</span> = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="built_in">number</span>; <span class="comment">//楼号</span></span><br><span class="line">  <span class="attr">cell</span>: <span class="built_in">number</span>; <span class="comment">//单元号</span></span><br><span class="line">  <span class="attr">room</span>: <span class="built_in">string</span>; <span class="comment">//房间号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类型House，且House是Area和Address组成的交叉类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">House</span> = <span class="title class_">Area</span> &amp; <span class="title class_">Address</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">house</span>: <span class="title class_">House</span> = &#123;</span><br><span class="line">  <span class="attr">height</span>: <span class="number">180</span>,</span><br><span class="line">  <span class="attr">width</span>: <span class="number">75</span>,</span><br><span class="line">  <span class="attr">num</span>: <span class="number">6</span>,</span><br><span class="line">  <span class="attr">cell</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">room</span>: <span class="string">&quot;702&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h4 id="8-9、⼀个特殊情况"><a href="#8-9、⼀个特殊情况" class="headerlink" title="8.9、⼀个特殊情况"></a><strong><font color='#10c300'>8.9、⼀个特殊情况</font></strong></h4><p>先来观察如下两段代码：</p><p><strong>代码段1（正常）</strong></p><p>在函数定义时，限制函数返回值为 void ，那么函数的返回值就必须是空。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// 返回undefined合法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 以下返回均不合法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure><p><strong>代码段2（特殊）</strong></p><p>使用**<code>类型声明</code>**限制函数返回值为 void 时， <strong><code>TypeScript 并不会严格要求函数返回空</code></strong>。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f1</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f2</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="number">200</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f3</span>: <span class="title class_">LogFunc</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">300</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>为什么会这样？</strong></p><p>​       是为了确保如下代码成⽴，我们知道 Array.prototype.push 的返回值是⼀个数字，而 Array.prototype.forEach ⽅法期望其回调的返回类型是 void 。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> src = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> dst = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">src.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> dst.<span class="title function_">push</span>(el));</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410161530513.png" alt="image-20241016153006361"></p><br><h4 id="8-10、class类相关知识"><a href="#8-10、class类相关知识" class="headerlink" title="8.10、class类相关知识"></a><strong><font color='#10c300'>8.10、class类相关知识</font></strong></h4><ol><li>通过class 关键字创建类，类名我们还是习惯性定义<strong>首字母大写</strong>；</li><li>类里面有个constructor 函数，可以接受传递过来的参数，同时返回实例对象；</li><li>constructor 函数，只要 new 生成实例时，就会自动调用这个函数，如果我们不写这个函数，类也会自动生成这个函数；</li><li>多个函数方法之间不需要添加逗号分隔；</li><li>生成实例 new 不能省略；</li><li>语法规范： 创建类，类名后面不要加小括号。生成实例，类名后面加小括号。构造函数不需要加function；</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person实例</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;蔡徐坤&quot;</span>, <span class="number">23</span>, <span class="string">&quot;唱跳rap&quot;</span>);</span><br><span class="line">p1.<span class="title function_">info</span>()</span><br><span class="line">p1.<span class="title function_">hobbyCategory</span>()</span><br><span class="line"><span class="comment">// 个人信息：我叫蔡徐坤，今年23岁！</span></span><br><span class="line"><span class="comment">// 个人爱好：我爱唱跳rap！</span></span><br><span class="line"><span class="comment">// 个人信息：我叫蔡徐坤，今年23岁！</span></span><br></pre></td></tr></table></figure><br><h5 id="1）、子类继承父类–extends"><a href="#1）、子类继承父类–extends" class="headerlink" title="1）、子类继承父类–extends"></a><strong><font color='cornflowerblue'>1）、子类继承父类–extends</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Student实例   继承了父类的构造器和方法，即子类中有了一个和父类一样的构造器和方法</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小阿米&quot;</span>, <span class="number">18</span>, <span class="string">&quot;打篮球&quot;</span>);</span><br><span class="line">s1.<span class="title function_">info</span>()</span><br><span class="line">s1.<span class="title function_">hobbyCategory</span>()</span><br><span class="line"><span class="comment">// 个人信息：我叫小阿米，今年18岁！</span></span><br><span class="line"><span class="comment">// 个人爱好：我爱打篮球！</span></span><br><span class="line"><span class="comment">// 个人信息：我叫小阿米，今年18岁！</span></span><br></pre></td></tr></table></figure><p><strong>注意点：</strong></p><p>当在有继承的子类中给构造器添加属性，必须使用super，要不然会报错：派生类的构造函数必须包含 “super” 调用。<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410171520923.png" alt="image-20241017152057771"></p><p>如下便是super的使用方法</p><br><h5 id="2）、子类访问父类–super"><a href="#2）、子类访问父类–super" class="headerlink" title="2）、子类访问父类–super"></a><strong><font color='cornflowerblue'>2）、子类访问父类–super</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sex</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;男/女&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 当子类使用继承extends时，在子类即相当继承了父类的构造器constructor和方法，如果需要在子类给自己添加属性，在构造器的入参需要添加父类属性对应的参数。</span></span><br><span class="line">    <span class="comment">// 例如这里父类构造器的属性name、age和hobby，也要写在子类构造器的入参中，最后添加子类添加自己新增的形参(name: string, age: number, hobby: string, grade: number)。</span></span><br><span class="line">    <span class="comment">// super 必须在子类this之前调用，super(name, age, hobby)</span></span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span>, <span class="attr">grade</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, hobby)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">grade</span> = grade</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁，数学考了<span class="subst">$&#123;<span class="variable language_">this</span>.grade&#125;</span>分`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>() <span class="comment">// super.info() 两个一样</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="title function_">sex</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;在子类重写从父类继承的方法：男&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;许诺&quot;</span>, <span class="number">16</span>, <span class="string">&quot;打篮球&quot;</span>, <span class="number">98</span>);</span><br><span class="line">s1.<span class="title function_">study</span>()</span><br><span class="line">s1.<span class="title function_">sex</span>()</span><br><span class="line"><span class="comment">// 我叫许诺，今年16岁，数学考了98分</span></span><br><span class="line"><span class="comment">// 个人信息：我叫许诺，今年16岁！</span></span><br><span class="line"><span class="comment">// 在子类重写从⽗类继承的⽅法：男</span></span><br></pre></td></tr></table></figure><p><strong>override修饰符的作用</strong></p><p>在子类重写从父类继承的方法时，如果方法名和父类不一致的时候会报错提示。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410211437631.png" alt="image-20241021143724489"></p><br><h4 id="8-11、属性修饰符-ts中才有"><a href="#8-11、属性修饰符-ts中才有" class="headerlink" title="8.11、属性修饰符(ts中才有)"></a><strong><font color='#10c300'>8.11、属性修饰符(ts中才有)</font></strong></h4><table><thead><tr><th>修饰符</th><th>含义</th><th>具体规则</th></tr></thead><tbody><tr><td>public</td><td>公开的</td><td>可以被：<strong><code>类内部</code></strong>、<strong><code>子类</code></strong>、**<code>类外部</code>**访问 。</td></tr><tr><td>protected</td><td>受保护的</td><td>可以被：<strong><code>类内部</code></strong>、**<code>子类</code>**访问。</td></tr><tr><td>private</td><td>私有的</td><td>可以被：**<code>类内部</code>**访问。</td></tr><tr><td>readonly</td><td>只读属性</td><td>属性⽆法修改。</td></tr></tbody></table><br><h5 id="1）、public-修饰符"><a href="#1）、public-修饰符" class="headerlink" title="1）、public 修饰符"></a><strong><font color='cornflowerblue'>1）、public 修饰符</font></strong></h5><p>一般不写public，默认就是 public。可以被：<strong><code>类内部</code></strong>、<strong><code>子类</code></strong>、**<code>类外部</code>**访问 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>:<span class="built_in">string</span>, <span class="attr">age</span>:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 1、类内部访问</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 2、子类访问</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;45&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;18&#x27;</span>)</span><br><span class="line"><span class="comment">// 3、外部访问</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1.<span class="property">name</span>);</span><br></pre></td></tr></table></figure><p><strong>属性的简写形式</strong></p><p>必须有修饰符才能简写</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ 完整写法</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ 简写形式 </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="2）、protected-修饰符"><a href="#2）、protected-修饰符" class="headerlink" title="2）、protected 修饰符"></a><strong><font color='cornflowerblue'>2）、protected 修饰符</font></strong></h5><p>  可以被：<strong><code>类内部</code></strong>、**<code>子类</code>**访问。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">getDetails</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的name和age属性</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我叫：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，年龄是：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">introduce</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的getDetails⽅法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">getDetails</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ⼦类中可以访问getDetails</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getDetails</span>()</span><br><span class="line">        <span class="comment">// ⼦类中可以访问name</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在努⼒学习`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;杨超越&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;杨哈哈&#x27;</span>, <span class="number">33</span>)</span><br><span class="line">p1.<span class="title function_">introduce</span>()</span><br><span class="line">s1.<span class="title function_">study</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.getDetails()</span></span><br><span class="line"><span class="comment">// p1.name</span></span><br><span class="line"><span class="comment">// p1.age</span></span><br></pre></td></tr></table></figure><br><h5 id="3）、private-修饰符"><a href="#3）、private-修饰符" class="headerlink" title="3）、private 修饰符"></a><strong><font color='cornflowerblue'>3）、private 修饰符</font></strong></h5><p>可以被：**<code>类内部</code>**访问。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="comment">// IDCard属性为私有的(private)属性，只能在【类内部】使⽤</span></span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="title class_">IDCard</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">getPrivateInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问私有的(private)属性 —— IDCard</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`身份证号码为：<span class="subst">$&#123;<span class="variable language_">this</span>.IDCard&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问受保护的(protected)属性 —— name和age</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年刚满<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getFullInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问公开的getInfo⽅法，也可以访问私有的getPrivateInfo⽅法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getInfo</span>() + <span class="string">&#x27;，&#x27;</span> + <span class="variable language_">this</span>.<span class="title function_">getPrivateInfo</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;110114198702034432&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getFullInfo</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getInfo</span>())</span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.IDCard</span></span><br><span class="line"><span class="comment">// p1.getPrivateInfo()</span></span><br></pre></td></tr></table></figure><br><h5 id="4）、readonly-修饰符"><a href="#4）、readonly-修饰符" class="headerlink" title="4）、readonly 修饰符"></a><strong><font color='cornflowerblue'>4）、readonly 修饰符</font></strong></h5><p>  属性无法修改。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">vin</span>: <span class="built_in">string</span>, <span class="comment">//⻋辆识别码，为只读属性</span></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">year</span>: <span class="built_in">number</span>, <span class="comment">//出⼚年份，为只读属性</span></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">color</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">sound</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// 打印⻋辆信息</span></span><br><span class="line">    <span class="title function_">displayInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">            识别码：<span class="subst">$&#123;<span class="variable language_">this</span>.vin&#125;</span>,</span></span><br><span class="line"><span class="string">            出⼚年份：<span class="subst">$&#123;<span class="variable language_">this</span>.year&#125;</span>,</span></span><br><span class="line"><span class="string">            颜⾊：<span class="subst">$&#123;<span class="variable language_">this</span>.color&#125;</span>,</span></span><br><span class="line"><span class="string">            ⾳响：<span class="subst">$&#123;<span class="variable language_">this</span>.sound&#125;</span></span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&#x27;1HGCM82633A123456&#x27;</span>, <span class="number">2018</span>, <span class="string">&#x27;⿊⾊&#x27;</span>, <span class="string">&#x27;Bose⾳响&#x27;</span>);</span><br><span class="line">car.<span class="property">color</span> = <span class="string">&#x27;红色&#x27;</span></span><br><span class="line">car.<span class="title function_">displayInfo</span>()</span><br><span class="line"><span class="comment">// 以下代码均错误：不能修改 readonly 属性</span></span><br><span class="line"><span class="comment">// car.vin = &#x27;897WYE87HA8SGDD8SDGHF&#x27;; </span></span><br><span class="line"><span class="comment">// car.year = 2020; </span></span><br></pre></td></tr></table></figure><br><h4 id="8-12、抽象类"><a href="#8-12、抽象类" class="headerlink" title="8.12、抽象类"></a><strong><font color='#10c300'>8.12、抽象类</font></strong></h4><blockquote><ul><li>概述：抽象类是⼀种**<code>无法被实例化</code><strong>的类，专门用来定义类的</strong><code>结构和行为</code><strong>，类中可以写</strong><code>抽象方法</code><strong>，也可以写</strong><code>具体实现</code><strong>。抽象类主要用来为其派生类提供⼀个</strong><code>基础结构</code><strong>，要求其派生类(子类)</strong><code>必须实现</code>**其中的抽象方法。</li><li>简记：抽象类**<code>不能实例化</code><strong>，其属性和方法是</strong><code>可以被继承</code><strong>，抽象类⾥可以有</strong><code>普通方法</code><strong>、也可以有</strong><code>抽象方法</code><strong>、抽象类中</strong><code>写抽象方法</code><strong>，在</strong><code>子类实现</code><strong>抽象方法、抽象类和抽象方法需要</strong><code>用abstract定义</code>**。</li></ul></blockquote><p><strong>通过以下场景，理解抽象类：</strong></p><p>我们定义⼀个抽象类 Package ，表示所有包裹的基本结构。任何包裹都有重量属性 weight，包裹都需要计算运费。但不同类型的包裹（如：标准速度、特快专递）都有不同的运费计算方式，因此用于计算运费的calculate方法是⼀个抽象方法，必须由具体的派生类(子类)实现。 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">weight</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象⽅法：⽤来计算运费，不同类型包裹有不同的计算⽅式</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">calculate</span>(): <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通⽤⽅法：打印包裹详情</span></span><br><span class="line">    <span class="title function_">printPackage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`包裹重量为: <span class="subst">$&#123;<span class="variable language_">this</span>.weight&#125;</span>kg，运费为: <span class="subst">$&#123;<span class="variable language_">this</span>.calculate()&#125;</span>元`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标准包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StandardPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现抽象⽅法：计算运费</span></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 特快包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExpressPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> (<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="attr">additional</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weight</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span> + (<span class="variable language_">this</span>.<span class="property">weight</span> - <span class="number">10</span>) * <span class="variable language_">this</span>.<span class="property">additional</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建标准包裹实例</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">StandardPackage</span>(<span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">s1.<span class="title function_">printPackage</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建特快包裹实例</span></span><br><span class="line"><span class="keyword">const</span> e1 = <span class="keyword">new</span> <span class="title class_">ExpressPackage</span>(<span class="number">13</span>,<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">e1.<span class="title function_">printPackage</span>()</span><br></pre></td></tr></table></figure><p><strong>总结：何时使用抽象类？</strong></p><ol><li>定义通用接口：⼀组相关的类定义通用的⾏为（方法或属性）时。</li><li>提供基础实现：在抽象类中提供某些方法或为其提供基础实现，这样派⽣类就可以继承这些实现。</li><li>确保关键实现：强制派生类实现⼀些关键行为。</li><li>共享代码和逻辑：当多个类需要共享部分代码时，抽象类可以避免代码重复。</li></ol><br><h4 id="8-13、interface（接口）"><a href="#8-13、interface（接口）" class="headerlink" title="8.13、interface（接口）"></a><strong><font color='#10c300'>8.13、interface（接口）</font></strong></h4><h5 id="1）、定义类接口"><a href="#1）、定义类接口" class="headerlink" title="1）、定义类接口"></a><strong><font color='cornflowerblue'>1）、定义类接口</font></strong></h5><p>类是无法直接使用extends继承接口的，只能使用implements去实现接口。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PersonInterface接⼝，⽤与限制Person类的格式</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义⼀个类 Person，实现 PersonInterface 接⼝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// 实现接⼝中的 speak ⽅法</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; n; index++) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建⼀个 Person 类的实例 p1</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;雷军&#x27;</span>, <span class="number">44</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>(<span class="number">3</span>)</span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br></pre></td></tr></table></figure><br><h5 id="2）、定义对象接口"><a href="#2）、定义对象接口" class="headerlink" title="2）、定义对象接口"></a><strong><font color='cornflowerblue'>2）、定义对象接口</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">UserInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">gender</span>: <span class="built_in">string</span> <span class="comment">// 只读属性</span></span><br><span class="line">    <span class="attr">age</span>?: <span class="built_in">number</span> <span class="comment">// 可选属性</span></span><br><span class="line">    <span class="attr">run</span>: <span class="function">(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">UserInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">run</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`奔跑了<span class="subst">$&#123;n&#125;</span>⽶`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="3）、定义函数接口"><a href="#3）、定义函数接口" class="headerlink" title="3）、定义函数接口"></a><strong><font color='cornflowerblue'>3）、定义函数接口</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">CountInterface</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">count</span>: <span class="title class_">CountInterface</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里注意区分接口定义类型和普通定义类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">count</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">count = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="4）、接口之间的继承"><a href="#4）、接口之间的继承" class="headerlink" title="4）、接口之间的继承"></a><strong><font color='cornflowerblue'>4）、接口之间的继承</font></strong></h5><p>⼀个 interface 继承另⼀个 interface ，从而实现代码的复用</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="5）、接口自动合并（可重复定义）"><a href="#5）、接口自动合并（可重复定义）" class="headerlink" title="5）、接口自动合并（可重复定义）"></a><strong><font color='cornflowerblue'>5）、接口自动合并（可重复定义）</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">PersonInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>总结：何时使⽤接口？</strong></p><ol><li>定义对象的格式： 描述数据模型、API 响应格式、配置对象……..等等，是开发中用的最多的场景。</li><li>类的契约：规定⼀个类需要实现哪些属性和⽅法。</li><li>扩展已有接⼝：⼀般用于扩展第三⽅库的类型， 这种特性在⼤型项目中可能会用到。</li></ol></blockquote><br><h4 id="8-14、一些相似概念的区别"><a href="#8-14、一些相似概念的区别" class="headerlink" title="8.14、一些相似概念的区别"></a><strong><font color='#10c300'>8.14、一些相似概念的区别</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="1）、interface-与-type-的区别"><a href="#1）、interface-与-type-的区别" class="headerlink" title="1）、interface 与 type 的区别"></a><strong><font color='cornflowerblue'>1）、interface 与 type 的区别</font></strong></h5><blockquote><p><strong>相同点：</strong> interface 和 type 都可以⽤于定义**<code>对象结构</code>**，在定义对象结构时两者可以互换。</p><p><strong>不同点：</strong></p><ul><li>interface ：更专注于定义**<code>对象</code><strong>和</strong><code>类</code>**的结构，⽀持继承、合并。</li><li>type ：可以定义**<code>类型别名、联合类型、交叉类型</code>**，但不支持继承和自动合并。</li></ul></blockquote><p><strong>interface 和 type 都可以定义对象结构</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使⽤ interface 定义 Person 对象</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤ type 定义 Person 对象</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤PersonInterface</span></span><br><span class="line"><span class="comment">// let person: PersonInterface = &#123;</span></span><br><span class="line"><span class="comment">//     name: &#x27;张三&#x27;,</span></span><br><span class="line"><span class="comment">//     age: 18,</span></span><br><span class="line"><span class="comment">//     speak() &#123;</span></span><br><span class="line"><span class="comment">//         console.log(`我叫：$&#123;this.name&#125;，年龄：$&#123;this.age&#125;`)</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤PersonType</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>interface 可以继承、合并</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼⼆&#x27;</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>type 的交叉类型</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使⽤ type 定义 Person 类型，并通过交叉类型实现属性的合并</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 年龄</span></span><br><span class="line">&#125; &amp; &#123;</span><br><span class="line">    <span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤ type 定义 Student 类型，并通过交叉类型继承 PersonType</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StudentType</span> = <span class="title class_">PersonType</span> &amp; &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span>; <span class="comment">// 年级</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼⼆&#x27;</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="2）、interface-与-抽象类的区别"><a href="#2）、interface-与-抽象类的区别" class="headerlink" title="2）、interface 与 抽象类的区别"></a><strong><font color='cornflowerblue'>2）、interface 与 抽象类的区别</font></strong></h5><blockquote><p>**相同点：**都能定义⼀个类的格式（定义类应遵循的契约）</p><p><strong>不相同：</strong></p><ul><li>接口：<strong><code>只能</code><strong>描述</strong><code>结构</code></strong>，<strong><code>不能</code><strong>有任何</strong><code>实现代码</code></strong>，⼀个类可以实现**<code>多个</code>**接口。</li><li>抽象类：既可以包含**<code>抽象方法</code><strong>，也可以包含</strong><code>具体方法</code><strong>， ⼀个类只能继承</strong><code>⼀个</code>**抽象类。</li></ul></blockquote><p><strong>⼀个类可以实现多个接⼝</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FlyInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FlyInterface</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义 SwimInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">    <span class="title function_">swim</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Duck 类实现了 FlyInterface 和 SwimInterface 两个接⼝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Duck</span> <span class="keyword">implements</span> <span class="title class_">FlyInterface</span>, <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以⻜&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">swim</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以游泳&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建⼀个 Duck 实例</span></span><br><span class="line"><span class="keyword">const</span> duck = <span class="keyword">new</span> <span class="title class_">Duck</span>();</span><br><span class="line">duck.<span class="title function_">fly</span>(); <span class="comment">// 输出: 鸭⼦可以⻜</span></span><br><span class="line">duck.<span class="title function_">swim</span>(); <span class="comment">// 输出: 鸭⼦可以游泳</span></span><br></pre></td></tr></table></figure><br><h3 id="九、泛型"><a href="#九、泛型" class="headerlink" title="九、泛型"></a><strong><font color='red'>九、泛型</font></strong></h3><blockquote><p>泛型允许我们在定义函数、类或接口时，使用类型参数来**<code>表示未指定的类型</code><strong>，这些参数</strong><code>在具体使用时</code><strong>，才被</strong><code>指定具体的类型</code>**，泛型能让同⼀段代码适用于多种类型，同时仍然保持类型的安全性。</p></blockquote><p>举例：如下代码中<code>&lt;T&gt;</code>就是泛型，（不一定非叫 T ），设置泛型后即可在函数中使用 T 来表示该类型：</p><h4 id="9-1、泛型函数"><a href="#9-1、泛型函数" class="headerlink" title="9.1、泛型函数"></a><strong><font color='#10c300'>9.1、泛型函数</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logData</span>(<span class="params"><span class="attr">data</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">logData</span>(<span class="number">11</span>)</span><br><span class="line"><span class="title function_">logData</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// 报错：类型“string”的参数不能赋给类型“number”的参数</span></span><br></pre></td></tr></table></figure><p>上述当定义好了函数的形参是一个数值类型，那么在调用函数时传入的实参也必须时数值类型。</p><p><strong>思考？能不能让函数的形参是一个动态的类型呢？根据函数实参传入的类型而动态变化呢……</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> logData&lt;T&gt;(<span class="attr">data</span>: T): <span class="built_in">void</span> &#123; <span class="comment">// 这里的&lt;&gt;中的值就像形参的类型，（）中就类似使用该类型</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>&gt;(<span class="number">11</span>) <span class="comment">// &lt;&gt;中的值就像传的实参类型</span></span><br><span class="line">logData&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回的结果即传入参数时</span></span><br><span class="line"><span class="keyword">function</span> logData&lt;T&gt;(<span class="attr">data</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>&gt;(<span class="number">11</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>泛型可以有多个</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> logData&lt;T, U&gt;(<span class="attr">data1</span>: T, <span class="attr">data2</span>: U): T | U &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data1, data2)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? data1 : data2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logData&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;(<span class="number">100</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>, <span class="built_in">boolean</span>&gt;(<span class="string">&#x27;ok&#x27;</span>, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><br><h4 id="9-2、泛型接口"><a href="#9-2、泛型接口" class="headerlink" title="9.2、泛型接口"></a><strong><font color='#10c300'>9.2、泛型接口</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">JobInfo</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p1</span>:<span class="title class_">PersonInterface</span>&lt;<span class="built_in">string</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: <span class="string">&#x27;成绩棒棒哒&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p2</span>:<span class="title class_">PersonInterface</span>&lt;<span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: <span class="number">250</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p3</span>:<span class="title class_">PersonInterface</span>&lt;<span class="title class_">JobInfo</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;你好&#x27;</span>,</span><br><span class="line">        <span class="attr">company</span>: <span class="string">&#x27;亚新科技&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="9-3、泛型约束"><a href="#9-3、泛型约束" class="headerlink" title="9.3、泛型约束"></a><strong><font color='#10c300'>9.3、泛型约束</font></strong></h4><p>T extends object 是泛型约束的一种表现。</p><p>extends表示具体的泛型类型只能是 object 类型， 某个变量如果能断言成 object类型[变量 as object ] ， 那么这个变量的类型符合 <strong>T extends object</strong> 。就是说该变量的类型可以是T的具体化类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">LengthInterface</span> &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 约束规则是：传⼊的类型T必须满足这个接口的类型</span></span><br><span class="line"><span class="keyword">function</span> logPerson&lt;T <span class="keyword">extends</span> <span class="title class_">LengthInterface</span>&gt;(<span class="attr">data</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line">logPerson&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错：因为number不具备length属性</span></span><br><span class="line"><span class="comment">// logPerson&lt;number&gt;(100)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">通过 T <span class="keyword">extends</span> <span class="title class_">LengthInterface</span>，我们告知 <span class="title class_">TypeScript</span> 编译器，T 必须具备 <span class="title class_">LengthInterface</span> 中的所有属性（即 length 属性）。</span><br></pre></td></tr></table></figure><br><h4 id="9-4、泛型类"><a href="#9-4、泛型类" class="headerlink" title="9.4、泛型类"></a><strong><font color='#10c300'>9.4、泛型类</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">extraInfo</span>: T</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">extraInfo</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 测试代码1</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, <span class="number">250</span>);</span><br><span class="line"><span class="comment">// 测试代码2</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">JobInfo</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="title class_">JobInfo</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;研发总监&#x27;</span>, <span class="attr">company</span>: <span class="string">&#x27;发发发科技公司&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure><br><h3 id="十、类型声明文件"><a href="#十、类型声明文件" class="headerlink" title="十、类型声明文件"></a><strong><font color='red'>十、类型声明文件</font></strong></h3><p>类型声明文件是 TypeScript 中的⼀种特殊文件，通常以 .d.ts 作为扩展名。它的主要作用是为现有的 JavaScript 代码提供类型信息，使得 TypeScript 能够在使⽤这些 JavaScript 库或模块时进行类型检查和提示。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo.d.ts   这个文件一般不需要自己写</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; add, mul &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, mul &#125; <span class="keyword">from</span> <span class="string">&quot;./demo.js&quot;</span>; <span class="comment">// 如果没有提供demo.d.ts文件这里会报错。</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">// x 类型为 number</span></span><br><span class="line"><span class="keyword">const</span> y = <span class="title function_">mul</span>(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// y 类型为 number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y)</span><br></pre></td></tr></table></figure><p>xxx.d.ts 项目中这个这种类型的文件一般都放在@types文件夹中，一般主流的js库都会提供这个文件，例如jquery</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241107234141285.png" alt="image-20241107234141285"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、-TypeScript简介&quot;&gt;&lt;a href=&quot;#一、-TypeScript简介&quot; class=&quot;headerlink&quot; title=&quot;一、 TypeScript简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、 TypeScript简介</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="typeScript" scheme="http://example.com/tags/typeScript/"/>
    
  </entry>
  
  <entry>
    <title>vue3快速上手</title>
    <link href="http://example.com/posts/2b28ddcc.html"/>
    <id>http://example.com/posts/2b28ddcc.html</id>
    <published>2025-08-15T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.321Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、-Vue3简介"><a href="#一、-Vue3简介" class="headerlink" title="一、 Vue3简介"></a><strong><font color='red'>一、 Vue3简介</font></strong></h2><ul><li><p>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</p></li><li><p>经历了：<a href="https://github.com/vuejs/core/commits/main">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors">300+贡献者</a></p></li><li><p>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece · vuejs&#x2F;core</a></p></li><li><p>截止2023年10月，最新的公开版本为：<code>3.3.4</code></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256164.png" alt="image.png" style="zoom:30%;" /> &#96;&#96;</p></li></ul><h3 id="1-1、性能的提升"><a href="#1-1、性能的提升" class="headerlink" title="1.1、性能的提升 "></a><strong><font color='#10c300'>1.1、性能的提升 </font></strong></h3><ul><li><p>打包大小减少<code>41%</code>。</p></li><li><p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p></li><li><p>内存减少<code>54%</code>。</p></li></ul><h3 id="1-2、源码的升级"><a href="#1-2、源码的升级" class="headerlink" title="1.2、源码的升级 "></a><strong><font color='#10c300'>1.2、源码的升级 </font></strong></h3><ul><li><p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p></li><li><p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p></li></ul><h3 id="1-3、拥抱TypeScript"><a href="#1-3、拥抱TypeScript" class="headerlink" title="1.3、拥抱TypeScript "></a><strong><font color='#10c300'>1.3、拥抱TypeScript </font></strong></h3><ul><li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li></ul><h3 id="1-4、新的特性"><a href="#1-4、新的特性" class="headerlink" title="1.4、新的特性 "></a><strong><font color='#10c300'>1.4、新的特性 </font></strong></h3><ol><li><p><code>Composition API</code>（组合<code>API</code>）：</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>与<code>reactive</code></p></li><li><p><code>computed</code>与<code>watch</code></p><p>……</p></li></ul></li><li><p>新的内置组件：</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>……</p></li></ul></li><li><p>其他改变：</p><ul><li><p>新的生命周期钩子</p></li><li><p><code>data</code> 选项应始终被声明为一个函数</p></li><li><p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p><p>……</p></li></ul></li></ol><br><h2 id="二、创建Vue3工程"><a href="#二、创建Vue3工程" class="headerlink" title="二、创建Vue3工程"></a><strong><font color='red'>二、创建Vue3工程</font></strong></h2><h3 id="2-1、基于-vue-cli-创建"><a href="#2-1、基于-vue-cli-创建" class="headerlink" title="2.1、基于 vue-cli 创建 "></a><strong><font color='#10c300'>2.1、基于 vue-cli 创建 </font></strong></h3><p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">官方文档</a></p><blockquote><p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行创建命令</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  随后选择3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><br><h3 id="2-2、基于-vite-创建（推荐）"><a href="#2-2、基于-vite-创建（推荐）" class="headerlink" title="2.2、基于 vite 创建（推荐） "></a><strong><font color='#10c300'>2.2、基于 vite 创建（推荐） </font></strong></h3><p><code>vite</code> 是新一代前端构建工具，官网地址：<a href="https://vitejs.cn/">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p><ul><li>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</li><li>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</li><li>真正的按需编译，不再等待整个应用编译完成。</li><li><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256390.png" alt="webpack构建" title="webpack构建" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256695.png" alt="vite构建" title="vite构建" style="zoom: 20%;box-shadow:0 0 10px black" /></p><ul><li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">官方文档</a>）</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.创建命令</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.具体配置</span></span><br><span class="line"><span class="comment">## 配置项目名称</span></span><br><span class="line">√ Project name: vue3_test</span><br><span class="line"><span class="comment">## 是否添加TypeScript支持</span></span><br><span class="line">√ Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## 是否添加JSX支持</span></span><br><span class="line">√ Add JSX Support?  No</span><br><span class="line"><span class="comment">## 是否添加路由环境</span></span><br><span class="line">√ Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## 是否添加pinia环境</span></span><br><span class="line">√ Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## 是否添加单元测试</span></span><br><span class="line">√ Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## 是否添加端到端测试方案</span></span><br><span class="line">√ Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? » No</span><br><span class="line"><span class="comment">## 是否添加ESLint语法检查</span></span><br><span class="line">√ Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## 是否添加Prettiert代码格式化</span></span><br><span class="line">√ Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p><code>自己动手编写一个</code>App组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>, <span class="comment">// 组件名</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.app</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>安装官方推荐的<code>vscode</code>插件： </p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152308687.png" alt="image-20240515230813598"></p><p>总结：</p><ul><li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li><li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的<code>JavaScript</code>。</li><li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li></ul><br><h3 id="2-3、一个简单的效果"><a href="#2-3、一个简单的效果" class="headerlink" title="2.3、一个简单的效果 "></a><strong><font color='#10c300'>2.3、一个简单的效果 </font></strong></h3><p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            年龄+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span></span><br><span class="line">            点我查看联系方式</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tel</span>: <span class="string">&#x27;13888888888&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;zhang-san&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">tel</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h2 id="三、Vue3核心语法"><a href="#三、Vue3核心语法" class="headerlink" title="三、Vue3核心语法"></a><strong><font color='red'>三、Vue3核心语法</font></strong></h2><h3 id="3-1、OptionsAPI-与-CompositionAPI"><a href="#3-1、OptionsAPI-与-CompositionAPI" class="headerlink" title="3.1、OptionsAPI 与 CompositionAPI"></a><strong><font color='#10c300'>3.1、OptionsAPI 与 CompositionAPI</font></strong></h3><ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li><li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul><br><h4 id="1）、Options-API-的弊端"><a href="#1）、Options-API-的弊端" class="headerlink" title="1）、Options API 的弊端"></a><strong><font color='cornflowerblue'>1）、Options API 的弊端</font></strong></h4><p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312523.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312829.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><br><h4 id="2）、Composition-API-的优势"><a href="#2）、Composition-API-的优势" class="headerlink" title="2）、Composition API 的优势"></a><strong><font color='cornflowerblue'>2）、Composition API 的优势</font></strong></h4><p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312436.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312956.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>说明：以上四张动图原创作者：大帅老猿</p></blockquote><br><h3 id="3-2、拉开序幕的-setup"><a href="#3-2、拉开序幕的-setup" class="headerlink" title="3.2、拉开序幕的 setup"></a><strong><font color='#10c300'>3.2、拉开序幕的 setup</font></strong></h3><h4 id="1）、setup-概述"><a href="#1）、setup-概述" class="headerlink" title="1）、setup 概述"></a><strong><font color='cornflowerblue'>1）、setup 概述</font></strong></h4><p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong><em><strong>”</strong></em>，组件中所用到的：数据、方法、计算属性、监视……等等，均配置在<code>setup</code>中。</p><p>特点如下：</p><ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li><li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li><li><strong><code>setup</code></strong> <strong>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的</strong>。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            年龄+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span></span><br><span class="line">            点我查看联系方式</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> age = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 方法，原来写在methods中</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            name = <span class="string">&#x27;zhang-san&#x27;</span> <span class="comment">// 注意：此时这么修改name页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            age += <span class="number">1</span> <span class="comment">// 注意：此时这么修改age页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 返回一个对象，对象中的内容，模板中可以直接使用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; name, age, tel, changeName, changeAge, showTel &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="2）、setup-的返回值"><a href="#2）、setup-的返回值" class="headerlink" title="2）、setup 的返回值"></a><strong><font color='cornflowerblue'>2）、setup 的返回值</font></strong></h4><ul><li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**</li><li>若返回一个<strong>函数</strong>：则可以自定义渲染内容将直接渲染在页面，代码如下：</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;你好啊！&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3）、setup-与-Options-API-的关系"><a href="#3）、setup-与-Options-API-的关系" class="headerlink" title="3）、setup 与 Options API 的关系"></a><font color='orange' size="4">3）、setup 与 Options API 的关系</font></h4><ul><li><p><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>……）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; c &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; name &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">c</span>: <span class="variable language_">this</span>.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>……）。</p></li><li><p>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</p></li></ul><br><h4 id="4）、setup-语法糖"><a href="#4）、setup-语法糖" class="headerlink" title="4）、setup 语法糖"></a><strong><font color='cornflowerblue'>4）、setup 语法糖</font></strong></h4><p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去（默认会把里面的数据return出去），代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changAge&quot;</span>&gt;</span>年龄+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">//undefined</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 数据（注意：此时的name、age、tel都不是响应式数据）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    name = <span class="string">&#x27;李四&#x27;</span><span class="comment">//注意：此时这么修改name页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span></span><br><span class="line"><span class="language-javascript">    age += <span class="number">1</span> <span class="comment">//注意：此时这么修改age页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**扩展：**上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p><ol><li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>第二步：<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>第三步：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span> name=<span class="string">&quot;Person&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><br><h3 id="3-3、ref-创建：基本类型的响应式数据"><a href="#3-3、ref-创建：基本类型的响应式数据" class="headerlink" title="3.3、ref 创建：基本类型的响应式数据"></a><strong><font color='#10c300'>3.3、ref 创建：基本类型的响应式数据</font></strong></h3><ul><li>**作用：**定义响应式变量。</li><li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li><li>**返回值：**一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li><li><strong>注意点：</strong><ul><li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li><li>对于<code>let name = ref(&#39;张三&#39;)</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span>年龄+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// tel就是一个普通的字符串，不是响应式的</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// JS中操作ref对象时候需要.value</span></span></span><br><span class="line"><span class="language-javascript">    name.<span class="property">value</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// name = ref(&#x27;zhang-san&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// JS中操作ref对象时候需要.value</span></span></span><br><span class="line"><span class="language-javascript">    age.<span class="property">value</span> += <span class="number">1</span> </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-4、reactive-创建：对象类型的响应式数据"><a href="#3-4、reactive-创建：对象类型的响应式数据" class="headerlink" title="3.4、reactive 创建：对象类型的响应式数据"></a><strong><font color='#10c300'>3.4、reactive 创建：对象类型的响应式数据</font></strong></h3><ul><li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li><li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li><li>**返回值：**一个<code>Proxy</code>的实例对象，简称：响应式对象。</li><li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>游戏列表：<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123;obj.a.b.c.d&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCarPrice&quot;</span>&gt;</span>修改汽车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFirstGame&quot;</span>&gt;</span>修改第一游戏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa02&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa03&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;原神&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">a</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">b</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">c</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">d</span>:<span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCarPrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  car.<span class="property">price</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeFirstGame</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  games[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;流星蝴蝶剑&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  obj.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span>.<span class="property">d</span> = <span class="number">999</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-5、ref-创建：对象类型的响应式数据"><a href="#3-5、ref-创建：对象类型的响应式数据" class="headerlink" title="3.5、ref 创建：对象类型的响应式数据"></a><strong><font color='#10c300'>3.5、ref 创建：对象类型的响应式数据</font></strong></h3><ul><li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li><li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>游戏列表：<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123;obj.a.b.c.d&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCarPrice&quot;</span>&gt;</span>修改汽车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFirstGame&quot;</span>&gt;</span>修改第一游戏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> car = <span class="title function_">ref</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">ref</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa02&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa03&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;原神&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">a</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">b</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">c</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">d</span>:<span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(car)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCarPrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  car.<span class="property">value</span>.<span class="property">price</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeFirstGame</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  games.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;流星蝴蝶剑&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  obj.<span class="property">value</span>.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span>.<span class="property">d</span> = <span class="number">999</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-6、ref-对比-reactive"><a href="#3-6、ref-对比-reactive" class="headerlink" title="3.6、ref 对比 reactive"></a><strong><font color='#10c300'>3.6、ref 对比 reactive</font></strong></h3><p><strong>宏观角度看：</strong></p><ol><li><p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p></li><li><p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p></li></ol><ul><li><strong>区别：</strong></li></ul><ol><li><p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>Vue - Official</code>插件自动添加<code>.value</code>）。</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312093.png" alt="自动补充value" style="zoom:50%;border-radius:20px" /> </li><li><p><strong><code>reactive</code>重新分配一个新对象，会失去响应式（可以使用Object.assign去整体替换）。</strong></p></li></ol><ul><li><strong>使用原则：</strong></li></ul><ol><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li><li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li><li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol><br><h3 id="3-7、toRefs-与-toRef"><a href="#3-7、toRefs-与-toRef" class="headerlink" title="3.7、toRefs 与 toRef"></a><strong><font color='#10c300'>3.7、toRefs 与 toRef</font></strong></h3><blockquote><p>从一个响应式对象中解构对象，解构出来的属性必丢失响应，因此需要使用到toRefs 与 toRef</p><p>例如：let route &#x3D; useRoute()<br>let { query } &#x3D; route  &#x2F;&#x2F; 这里的query响应必定会丢失<br>修改：let { query } &#x3D; toRefs(route)</p></blockquote><ul><li>作用：将一个响应式对象中的每一个属性，<strong>转换为ref对象</strong>（响应式）。</li><li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li><li>语法如下：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别：&#123;&#123;person.gender&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span>修改年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeGender&quot;</span>&gt;</span>修改性别<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref,reactive,toRefs,toRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> &#123;name,gender&#125; =  <span class="title function_">toRefs</span>(person) <span class="comment">// 将person中的属性名对应的属性值都转变成ref对象</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 通过toRef将person对象中的age属性取出，且依然保持响应式的能力</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="title function_">toRef</span>(person,<span class="string">&#x27;age&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    name.<span class="property">value</span> += <span class="string">&#x27;~&#x27;</span> <span class="comment">// 因为转换成了ref对象，所以用.value赋值</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    age.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeGender</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    gender.<span class="property">value</span> = <span class="string">&#x27;女&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-8、computed"><a href="#3-8、computed" class="headerlink" title="3.8、computed"></a><strong><font color='#10c300'>3.8、computed</font></strong></h3><p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312559.gif" style="zoom:20%;" />  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFullName&quot;</span>&gt;</span>全名改为：li-si<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref,computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> firstName = <span class="title function_">ref</span>(<span class="string">&#x27;zhang&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> lastName = <span class="title function_">ref</span>(<span class="string">&#x27;san&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 计算属性——只读取，不修改</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* let fullName = computed(()=&gt;&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    return firstName.value + &#x27;-&#x27; + lastName.value</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">  &#125;) */</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">   <span class="comment">/* function changeFullName() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    fullName.value = &#x27;li-si&#x27;;  // 报错：无法为“value”赋值，因为它是只读属性</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">  &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 计算属性——既读取又修改</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 读取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> firstName.<span class="property">value</span> + <span class="string">&#x27;-&#x27;</span> + lastName.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 修改</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">set</span>(<span class="params">newVal</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人修改了fullName&#x27;</span>,val)</span></span><br><span class="line"><span class="language-javascript">      firstName.<span class="property">value</span> = newVal.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">      lastName.<span class="property">value</span> = newVal.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeFullName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    fullName.<span class="property">value</span> = <span class="string">&#x27;li-si&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125; </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-9、watch"><a href="#3-9、watch" class="headerlink" title="3.9、watch"></a><strong><font color='#10c300'>3.9、watch</font></strong></h3><ul><li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li><li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：<blockquote><ol><li><code>ref</code>定义的数据。</li><li><code>reactive</code>定义的数据。</li><li>函数返回一个值（<code>getter</code>函数）。</li><li>一个包含上述内容的数组。</li></ol></blockquote></li></ul><p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p><h4 id="1）、情况一：监视ref定义的基本类型数据"><a href="#1）、情况一：监视ref定义的基本类型数据" class="headerlink" title="1）、情况一：监视ref定义的基本类型数据"></a><strong><font color='cornflowerblue'>1）、情况一：监视ref定义的基本类型数据</font></strong></h4><p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况一：监视【ref】定义的【基本类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            点我sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况一：监视【ref】定义的【基本类型】数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWatch = <span class="title function_">watch</span>(sum, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newValue &gt;= <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当值大于等于10的时候就停止监听</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWatch</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2）、情况二：监视ref定义的对象类型数据"><a href="#2）、情况二：监视ref定义的对象类型数据" class="headerlink" title="2）、情况二：监视ref定义的对象类型数据"></a><strong><font color='cornflowerblue'>2）、情况二：监视ref定义的对象类型数据</font></strong></h4><p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p><blockquote><p>注意：</p><ul><li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p></li><li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p></li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况二：监视【ref】定义的【对象类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">90</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第一个参数是：被监视的数据</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第二个参数是：监视的回调</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第三个参数是：配置对象（deep、immediate等等.....）</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">*/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 这里有几个问题需要注意：</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1、监视【ref】定义的【对象类型】数据，监视的是对象的地址值(整个对象变化才会触发监听)</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName和changeAge方法不会触发这个监听，changePerson则会触发</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2、若想监视对象内部属性的变化，需要手动开启深度监视</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName、changeAge、changePerson方法都会会触发这个监听</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName、changeAge监听某属性值的变化，新值和旧值都是一样的，因为这里没有改变对象的地址值，导致指向的都是同一个地址(reactive定义的对象也一样)。changePerson是对person赋予一个新的对象，引用地址改变了因此新值和旧值才会不一样</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3）、情况三：监视reactive定义的对象类型数据"><a href="#3）、情况三：监视reactive定义的对象类型数据" class="headerlink" title="3）、情况三：监视reactive定义的对象类型数据"></a><strong><font color='cornflowerblue'>3）、情况三：监视reactive定义的对象类型数据</font></strong></h4><p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况三：监视【reactive】定义的【对象类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123; obj.a.b.c &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">            修改obj.a.b.c</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">a</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">b</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">c</span>: <span class="number">666</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(person, &#123; <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">80</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    obj.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">888</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// changeName、hangeAge这里改变的对象里面的属性值，对象的引用地址没改变因此新值和旧值都是一样，   changePerson中由于是reactive定义的响应式对象不能直接赋值，需要使用Object.assign()给源对象添加可枚        举属性，因为是给原对象添加可枚举属性，所以可知原对象的引用地址没变，因此新值和旧值也是一样的。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(obj, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Obj变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4）、情况四：监视ref-reactive定义的对象类型数据中的某个属性"><a href="#4）、情况四：监视ref-reactive定义的对象类型数据中的某个属性" class="headerlink" title="4）、情况四：监视ref&#x2F;reactive定义的对象类型数据中的某个属性"></a><strong><font color='cornflowerblue'>4）、情况四：监视ref&#x2F;reactive定义的对象类型数据中的某个属性</font></strong></h4><p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p><ol><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li><li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li></ol><p><strong>结论：监视的要是对象里的属性，那么最好写函数式</strong></p><p><strong>注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC1&quot;</span>&gt;</span></span><br><span class="line">            修改第一台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC2&quot;</span>&gt;</span></span><br><span class="line">            修改第二台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar&quot;</span>&gt;</span></span><br><span class="line">            修改整个车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">car</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c1</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c2</span>: <span class="string">&#x27;宝马&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c1</span> = <span class="string">&#x27;奥迪&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c2</span> = <span class="string">&#x27;大众&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span> = &#123; <span class="attr">c1</span>: <span class="string">&#x27;雅迪&#x27;</span>, <span class="attr">c2</span>: <span class="string">&#x27;爱玛&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 这里有几个问题需要注意：</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1、监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">name</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.name变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2、监视响应式对象中的某个属性，且该属性是对象类型的</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2-1、直接写监听的属性对象person.car(不推荐)，当改变整个car对象不会触发监听，当改变car对象中的某个属性则会触发监听。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person.<span class="property">car</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2-2、直接写监听的属性为一个有返回值的函数() =&gt; person.car  推荐，当改变整个car对象会触发监听，当改变car对象中的某个属性则不会触发监听，需开启深度监听。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">car</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5）、情况五：监视上述的多个数据"><a href="#5）、情况五：监视上述的多个数据" class="headerlink" title="5）、情况五：监视上述的多个数据"></a><strong><font color='cornflowerblue'>5）、情况五：监视上述的多个数据</font></strong></h4><p>监视上述的多个数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况五：监视上述的多个数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC1&quot;</span>&gt;</span></span><br><span class="line">            修改第一台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC2&quot;</span>&gt;</span></span><br><span class="line">            修改第二台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar&quot;</span>&gt;</span></span><br><span class="line">            修改整个车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">car</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c1</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c2</span>: <span class="string">&#x27;宝马&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c1</span> = <span class="string">&#x27;奥迪&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c2</span> = <span class="string">&#x27;大众&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span> = &#123; <span class="attr">c1</span>: <span class="string">&#x27;雅迪&#x27;</span>, <span class="attr">c2</span>: <span class="string">&#x27;爱玛&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况五：监视上述的多个数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(</span></span><br><span class="line"><span class="language-javascript">    [<span class="function">() =&gt;</span> person.<span class="property">name</span>, person.<span class="property">car</span>],</span></span><br><span class="line"><span class="language-javascript">    <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue) <span class="comment">// 生成的是一个数组</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-10、watchEffect"><a href="#3-10、watchEffect" class="headerlink" title="3.10、watchEffect"></a><strong><font color='#10c300'>3.10、watchEffect</font></strong></h3><ul><li><p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p></li><li><p><code>watch</code>对比<code>watchEffect</code></p><blockquote><ol><li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p></li><li><p><code>watch</code>：要明确指出监视的数据</p></li><li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性），初始化的时候会执行一次。</p></li></ol></blockquote></li><li><p>示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>需求：水温达到50℃，或水位达到20cm，则联系服务器<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">            水温：&#123;&#123; temp &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>水位：&#123;&#123; height &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePrice&quot;</span>&gt;</span></span><br><span class="line">            水温+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            水位+10</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> temp = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> height = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    temp.<span class="property">value</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    height.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用watch实现，需要明确的指出要监视：temp、height</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWtach1 = <span class="title function_">watch</span>([temp, height], <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 从value中获取最新的temp值、height值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> [newTemp, newHeight] = value</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newTemp &gt;= <span class="number">50</span> || newHeight &gt;= <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>)?.<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;联系服务器&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newTemp &gt;= <span class="number">100</span> || newHeight &gt;= <span class="number">50</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;清理了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWtach1</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用watchEffect实现，不用</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWtach = <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (temp.<span class="property">value</span> &gt;= <span class="number">50</span> || height.<span class="property">value</span> &gt;= <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>)?.<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;联系服务器&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 水温达到100，或水位达到50，取消监视</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (temp.<span class="property">value</span> === <span class="number">100</span> || height.<span class="property">value</span> === <span class="number">50</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;清理了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWtach</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="3-11、标签的-ref-属性"><a href="#3-11、标签的-ref-属性" class="headerlink" title="3.11、标签的 ref 属性"></a><font color='red' size="">3.11、标签的 ref 属性</font></h3><p>作用：用于注册模板引用。</p><blockquote><ul><li><p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p></li><li><p>用在组件标签上，获取的是组件实例对象。</p></li></ul></blockquote><p>用在普通<code>DOM</code>标签上：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;guiGu&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;title1&quot;</span>&gt;</span></span><br><span class="line">            尚硅谷</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&quot;title2&quot;</span>&gt;</span></span><br><span class="line">            前端</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">ref</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span><br><span class="line">            Vue</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showLog&quot;</span>&gt;</span></span><br><span class="line">            点我打印内容</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title1 = <span class="title function_">ref</span>() <span class="comment">// 变量命名要和ref定义的命名一致</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title2 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title3 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">showLog</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 通过id获取元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> t1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;guiGu&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 打印内容(三种ts的断言方式)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>((t1 <span class="keyword">as</span> <span class="title class_">HTMLElement</span>).<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log((&lt;HTMLElement&gt;t1).innerText);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log(t1?.innerText)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/************************************/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 通过ref获取元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title1.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title2.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title3.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>用在组件标签上：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件father.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateGeGe&quot;</span>&gt;</span></span><br><span class="line">            更新哥哥的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateDiDi&quot;</span>&gt;</span></span><br><span class="line">            更新弟弟的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person</span> <span class="attr">ref</span>=<span class="string">&quot;ren&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person1</span> <span class="attr">ref</span>=<span class="string">&quot;ren1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person1</span> <span class="keyword">from</span> <span class="string">&#x27;./Person1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./Person.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateGeGe</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="title function_">execute</span>()</span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;张大三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="property">age</span> = <span class="number">22</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateDiDi</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ren1.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;大米&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    ren1.<span class="property">value</span>.<span class="property">age</span> = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.index</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span> <span class="number">193</span> <span class="number">170</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gege&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>哥哥组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已执行哥哥组件中的方法&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age, execute &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.gege</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">160</span> <span class="number">235</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件Person1.vue中要使用defineExpose暴露内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;didi&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>弟弟组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;小米&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">12</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.didi</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">163</span> <span class="number">157</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-12、组件的-refs-属性"><a href="#3-12、组件的-refs-属性" class="headerlink" title="3.12、组件的$refs  属性"></a><strong><font color='#10c300'>3.12、组件的$refs  属性</font></strong></h3><blockquote><p>获取到页面所有组件的ref实例对象</p></blockquote><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408080057790.png" alt="image-20240808005710611"></p><p><strong>父组件（father.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;update($refs)&quot;</span>&gt;</span></span><br><span class="line">            更新兄弟的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person</span> <span class="attr">ref</span>=<span class="string">&quot;ren&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person1</span> <span class="attr">ref</span>=<span class="string">&quot;ren1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person1</span> <span class="keyword">from</span> <span class="string">&#x27;./index1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./index.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params">refs: any</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(refs)</span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="property">name</span> = <span class="string">&#x27;张大三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="property">age</span> = <span class="number">22</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="title function_">execute</span>()</span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren1</span>.<span class="property">name</span> = <span class="string">&#x27;大米&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren1</span>.<span class="property">age</span> = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.index</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span> <span class="number">193</span> <span class="number">170</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件（Person.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gege&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>哥哥组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已执行哥哥组件中的方法&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age, execute &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.gege</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">160</span> <span class="number">235</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件（Person1.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;didi&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>弟弟组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;小米&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">12</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.didi</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">163</span> <span class="number">157</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-13、props"><a href="#3-13、props" class="headerlink" title="3.13、props"></a><strong><font color='#10c300'>3.13、props</font></strong></h3><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/ types/index.<span class="property">ts</span></span><br><span class="line"><span class="comment">// 定义一个接口，限制每个Person对象的格式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:<span class="built_in">string</span>,</span><br><span class="line"><span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个自定义类型Persons</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>中代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Person</span> <span class="attr">:list</span>=<span class="string">&quot;persons&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> type &#123; <span class="title class_">Persons</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Person.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let persons:Persons = reactive([</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> persons = reactive&lt;<span class="title class_">Persons</span>&gt;([</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e12&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e13&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e14&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>中代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; item.name &#125;&#125;--&#123;&#123; item.age &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineProps &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第一种写法：仅接收</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let props = defineProps([&#x27;list&#x27;])</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第二种写法：接收+限制类型，因为传来的可能不止一个数据，因此在泛型中用一个对象包裹</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let props = defineProps&lt;&#123; list: Persons; aa?: string &#125;&gt;();</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第三种写法：接收+限制类型+指定默认值+限制必要性</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....withDefaults  指定默认值</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....Persons 限制类型</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....list?: 限制必要性 :父组件必须要  ?: 父组件可不传  ts语法</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;&#123; list?: <span class="title class_">Persons</span> &#125;&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">list</span>: <span class="function">() =&gt;</span> [&#123; <span class="attr">id</span>: <span class="string">&#x27;asdasg01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;小猪佩奇&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;],</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(props)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><p><strong>易懂</strong></p><p>在 Vue 3 中使用 TypeScript 时，你可以通过 withDefaults 函数来为 defineProps 定义的 props 设置默认值。withDefaults 函数允许你指定默认值，同时保持 TypeScript 的类型检查。</p><p>以下是如何在 TypeScript 中为 defineProps 设置默认值的示例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">假设你有一个子组件 PasswordDialog.vue，你可以这样定义和接收 lianlianMercNo，并为其设置默认值：</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用接收到的 lianlianMercNo --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Merchant Number: &#123;&#123; lianlianMercNo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineProps, withDefaults &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 定义 props 的类型</span></span></span><br><span class="line"><span class="language-javascript">interface <span class="title class_">Props</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    lianlianMercNo?: number <span class="comment">// 将其设为可选</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用 withDefaults 来为 props 设置默认值</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">Props</span>&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">lianlianMercNo</span>: <span class="number">1234</span>, <span class="comment">// 设置默认值</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在父组件中，你可以这样使用这个子组件并传递 lianlianMercNo：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">PasswordDialog</span> <span class="attr">ref</span>=<span class="string">&quot;passwordRef&quot;</span> <span class="attr">lianlian-merc-no</span>=<span class="string">&quot;4444&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">PasswordDialog</span> <span class="keyword">from</span> <span class="string">&#x27;./PasswordDialog.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这个示例中：</p><p>子组件 PasswordDialog.vue 中定义了一个 Props 接口，其中 lianlianMercNo 属性是可选的（使用 ? 标记）。<br>使用 withDefaults 函数将 defineProps<Props>() 包裹起来，并为 lianlianMercNo 设置默认值 1234。<br>如果父组件没有传递 lianlianMercNo，则 PasswordDialog 组件会使用默认值 1234。<br>这样，你就可以在 TypeScript 中为 defineProps 设置默认值，同时保持类型检查。</p><br><h3 id="3-14、生命周期"><a href="#3-14、生命周期" class="headerlink" title="3.14、生命周期"></a><strong><font color='#10c300'>3.14、生命周期</font></strong></h3><ul><li><p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p></li><li><p>规律：</p><blockquote><p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p></blockquote></li><li><p><code>Vue2</code>的生命周期</p><blockquote><p>创建阶段：<code>beforeCreate</code>、<code>created</code></p><p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p><p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p><p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>的生命周期</p><blockquote><p>创建阶段：<code>setup</code></p><p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p><p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p><p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p></blockquote></li><li><p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p></li><li><p><strong>注意项：(重点)</strong></p><p><strong>到底是子组件挂载(onMounted)先执行还是父组件的挂载(onMounted)先执行？</strong></p><p>答：先执行子组件的挂载再执行父组件的挂载，vue项目中app.vue是所有组件的顶级组件，因此它的挂载是最后执行</p></li><li><p>示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            点我sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- vue3写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    onBeforeMount,</span></span><br><span class="line"><span class="language-javascript">    onBeforeUnmount,</span></span><br><span class="line"><span class="language-javascript">    onBeforeUpdate,</span></span><br><span class="line"><span class="language-javascript">    onMounted,</span></span><br><span class="line"><span class="language-javascript">    onUnmounted,</span></span><br><span class="line"><span class="language-javascript">    onUpdated,</span></span><br><span class="line"><span class="language-javascript">    ref,</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setup&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 生命周期钩子</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;挂载之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;挂载完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;卸载之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;卸载完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="3-15、自定义hook"><a href="#3-15、自定义hook" class="headerlink" title="3.15、自定义hook"></a><strong><font color='#10c300'>3.15、自定义hook</font></strong></h3><blockquote><p>接口地址：<a href="https://dog.ceo/api/breed/pembroke/images/random">https://dog.ceo/api/breed/pembroke/images/random</a>  随机获取一张狗的图片(有的时候须要梯子)</p></blockquote><ul><li><p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p></li><li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p></li><li><p>useSum.ts和useDog.ts中的可以分别写onMounted钩子</p></li></ul><p>示例代码：</p><ul><li><p><code>useSum.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getDog</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            dogList.<span class="title function_">push</span>(res.<span class="property">data</span>.<span class="property">message</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getDog</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 向外暴露数据</span></span><br><span class="line">    <span class="keyword">return</span> &#123; dogList, loading, getDog &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>组件中具体使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span></span><br><span class="line">        点我+1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span></span><br><span class="line">        点我-1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-for</span>=<span class="string">&quot;(u, index) in dogList.urlList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;(u as string)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;dogList.isLoading&quot;</span>&gt;</span>加载中......<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getDog&quot;</span>&gt;</span></span><br><span class="line">        再来一只狗</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useDog <span class="keyword">from</span> <span class="string">&#x27;./hooks/useDog&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useSum <span class="keyword">from</span> <span class="string">&#x27;./hooks/useSum&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; sum, increment, decrement &#125; = <span class="title function_">useSum</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; dogList, getDog &#125; = <span class="title function_">useDog</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h2 id="四、-路由"><a href="#四、-路由" class="headerlink" title="四、 路由"></a><strong><font color='red'>四、 路由</font></strong></h2><h3 id="4-1、对路由的理解"><a href="#4-1、对路由的理解" class="headerlink" title="4.1、对路由的理解"></a><strong><font color='#10c300'>4.1、对路由的理解</font></strong></h3><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313677.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <br><h3 id="4-2、基本切换效果"><a href="#4-2、基本切换效果" class="headerlink" title="4.2、基本切换效果"></a><strong><font color='#10c300'>4.2、基本切换效果</font></strong></h3><ul><li><p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p></li><li><p>路由配置文件代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个路由器，并暴露出去</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/About.vue&#x27;</span></span><br><span class="line"><span class="comment">// 引入一个一个可能要呈现组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/News.vue&#x27;</span></span><br><span class="line"><span class="comment">// 第一步：引入createRouter</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二步：创建路由器</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">// 路由器的工作模式（稍后讲解）</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        <span class="comment">// 一个一个的路由规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暴露出去router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>代码如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Vue路由测试<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 导航区 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/news&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>新闻<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 展示区 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterView</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;<span class="title class_">RouterLink</span>,<span class="title class_">RouterView</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>  </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="4-3、-两个注意点"><a href="#4-3、-两个注意点" class="headerlink" title="4.3、 两个注意点"></a><strong><font color='#10c300'>4.3、 两个注意点</font></strong></h3><blockquote><ol><li><p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p></li><li><p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p></li></ol></blockquote><br><h3 id="4-4、路由器工作模式"><a href="#4-4、路由器工作模式" class="headerlink" title="4.4、路由器工作模式"></a><strong><font color='#10c300'>4.4、路由器工作模式</font></strong></h3><ol><li><p><strong><code>history</code>模式</strong></p><blockquote><p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p><p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//history模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><strong><code>hash</code>模式</strong></p><blockquote><p>优点：兼容性更好，因为不需要服务器端处理路径。</p><p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hash模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><br><h3 id="4-5、to的两种写法"><a href="#4-5、to的两种写法" class="headerlink" title="4.5、to的两种写法"></a><strong><font color='#10c300'>4.5、to的两种写法</font></strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 第一种：to的字符串写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 第二种：to的对象写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="4-6、命名路由"><a href="#4-6、命名路由" class="headerlink" title="4.6、命名路由"></a><strong><font color='#10c300'>4.6、命名路由</font></strong></h3><p>作用：可以简化路由跳转及传参（后面就讲）。</p><p>给路由规则命名：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>跳转路由：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/news/detail&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="4-7、嵌套路由"><a href="#4-7、嵌套路由" class="headerlink" title="4.7、嵌套路由"></a><strong><font color='#10c300'>4.7、嵌套路由</font></strong></h3><ol><li><p>编写<code>News</code>的子路由：<code>Detail.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; query.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>配置路由规则，使用<code>children</code>配置项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>, <span class="comment">// 子路由的路径不需要加斜杠/</span></span><br><span class="line">                    <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>记得去<code>News.vue</code>组件中预留一个<code>&lt;router-view&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// News.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;News&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> list = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻1的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻2的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻3的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202406140004977.png" alt="image-20240614000448855"></p><br><h3 id="4-8、路由传参"><a href="#4-8、路由传参" class="headerlink" title="4.8、路由传参"></a><strong><font color='#10c300'>4.8、路由传参</font></strong></h3><h4 id="1）、query参数"><a href="#1）、query参数" class="headerlink" title="1）、query参数"></a><strong><font color='cornflowerblue'>1）、query参数</font></strong></h4><p><strong>传递参数</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// News.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;News&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> list = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻1的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻2的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻3的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>接收参数：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// Detail.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; query.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="2）、params参数"><a href="#2）、params参数" class="headerlink" title="2）、params参数"></a><strong><font color='#10c300'>2）、params参数</font></strong></h4><p><strong><code>需在路由中占位</code></strong></p><p><strong>传递参数</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        params: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>接收参数：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; params.id &#125;&#125;、&#123;&#123; params.content &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; params &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>在路由中占位：</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">// 路由的工作模式</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/News.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:content?&#x27;</span>, <span class="comment">// 占位要和跳转传参保持一致  ？：是可传可不传</span></span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/Detail.vue&#x27;</span>),</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p><p>备注2：传递<code>params</code>参数时，需要提前在路由中占位。</p></blockquote><br><h3 id="4-9、路由的props配置"><a href="#4-9、路由的props配置" class="headerlink" title="4.9、路由的props配置"></a><strong><font color='#10c300'>4.9、路由的props配置</font></strong></h3><blockquote><p>上述路由接收参数的时候、需要写大量的代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> &#123; params, query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>());</span><br></pre></td></tr></table></figure></blockquote><p>props作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件），在组件中直接用defineProps便可接收到其他路由组件传递过来的参数</p><p>这种写法其实就是类似于自定义组件的传参</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类似于<span class="tag">&lt;<span class="name">Detail</span> <span class="attr">a</span>=<span class="string">“1”</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> <span class="attr">c</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Detail</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>1）、props的布尔值写法（只适用于params传参）</font></strong></p><p>作用：将路由收到的所有<strong>params参数</strong>作为props传给当前组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">params</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>: <span class="string">&#x27;323243&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;详情内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;detail&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:content?&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">    props:true</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>2）、props的函数写法</font></strong></p><p>作用：把返回的对象中每一组key-value作为props传给Detail组件(params、query可使用，更推荐query使用)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">query</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>: <span class="string">&#x27;323243&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;详情内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;detail&#x27;,</span><br><span class="line">path:&#x27;detail&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">  props(route)&#123; // route中能取到query和params</span><br><span class="line">        return route.query</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>3）、props的对象写法</font></strong></p><p>作用：把对象中的每一组key-value作为props传给Detail组件（不常用）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;xiang&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:content?&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">  props: &#123; // 这种不能接收到动态参数，在业务中意义不大，不常用</span><br><span class="line">        id: 666,</span><br><span class="line">        content: &#x27;哈哈&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span>&#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>**注意：**这里都是应用在路由组件中，而不是自定义组件中。所以当组件中有使用defineProps接收参数的时候，首先要确认这是路由组件还是自定义组件。</p><br><h3 id="4-10、-replace属性"><a href="#4-10、-replace属性" class="headerlink" title="4.10、 replace属性"></a><strong><font color='#10c300'>4.10、 replace属性</font></strong></h3><ol><li><p>作用：控制路由跳转时操作浏览器历史记录的模式。</p></li><li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p><ul><li><code>push</code>是追加历史记录（默认值）。</li><li><code>replace</code>是替换当前记录。</li></ul></li><li><p>开启<code>replace</code>模式：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">replace</span> <span class="attr">.......</span>&gt;</span>News<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h3 id="4-11、-编程式导航"><a href="#4-11、-编程式导航" class="headerlink" title="4.11、 编程式导航"></a><strong><font color='#10c300'>4.11、 编程式导航</font></strong></h3><p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><br><h3 id="4-12、-重定向"><a href="#4-12、-重定向" class="headerlink" title="4.12、 重定向"></a><strong><font color='#10c300'>4.12、 重定向</font></strong></h3><ol><li><p>作用：将特定的路径，重新定向到已有路由。</p></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><br><h2 id="五、pinia"><a href="#五、pinia" class="headerlink" title="五、pinia "></a><strong><font color='red'>五、pinia </font></strong></h2><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313396.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h3 id="5-1、-搭建-pinia-环境"><a href="#5-1、-搭建-pinia-环境" class="headerlink" title="5.1、 搭建 pinia 环境"></a><strong><font color='#10c300'>5.1、 搭建 pinia 环境</font></strong></h3><p>第一步：<code>npm install pinia</code></p><p>第二步：操作<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引入createPinia，用于创建pinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建pinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用插件 */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>此时开发者工具中已经有了<code>pinia</code>选项</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313752.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><br><h3 id="5-2、-选项式-Stores"><a href="#5-2、-选项式-Stores" class="headerlink" title="5.2、 选项式 Stores"></a><strong><font color='#10c300'>5.2、 选项式 Stores</font></strong></h3><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;&#125;) <span class="comment">// 第二个参数是个对象</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="1）、存储-读取数据"><a href="#1）、存储-读取数据" class="headerlink" title="1）、存储+读取数据"></a><strong><font color='cornflowerblue'>1）、存储+读取数据</font></strong></h4><ol><li><p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p></li><li><p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p></li><li><p>具体编码：<strong><code>src/store/countStore.ts</code></strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span>,</span><br><span class="line">      <span class="attr">school</span>: <span class="string">&#x27;尚硅谷&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>具体编码：<strong><code>src/store/loveTalkStore.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loveTalkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;你今天有点怪，哪里怪？怪好看的！&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;草莓、蓝莓、蔓越莓，你想我了没？&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;心里给你留了一块地，我的死心塌地&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中使用<code>state</code>中的数据</p><p><strong><code>Count.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; countStore.sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 引入对应的useXxxxxStore</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;useCountStore&#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/countStore&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="string">``</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 调用useXxxxxStore得到对应的store</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><code>LoveTalk.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;talk in loveTalkStore.loveTalkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;talk.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useLoveTalkStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/loveTalkStore&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> loveTalkStore = <span class="title function_">useLoveTalkStore</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h4 id="2）、-修改数据-三种方式"><a href="#2）、-修改数据-三种方式" class="headerlink" title="2）、 修改数据 (三种方式)"></a><strong><font color='cornflowerblue'>2）、 修改数据 (三种方式)</font></strong></h4><ol><li><p><strong>第一种修改方式，直接修改</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在vue组件中修改</span></span><br><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p><strong>第二种修改方式：批量修改</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在vue组件中修改</span></span><br><span class="line"><span class="comment">// 1）对象形式</span></span><br><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2）函数形式</span></span><br><span class="line">countStore.$patch(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  state.<span class="property">sum</span>=<span class="number">999</span>,</span><br><span class="line">  state.<span class="property">school</span>=<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><strong>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在pinia中修改</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//加</span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//操作countStore中的sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中调用action</span></span><br><span class="line"><span class="keyword">let</span> optVal = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"><span class="comment">//在函数中调用</span></span><br><span class="line">countStore.<span class="title function_">increment</span>(optVal.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><br><h4 id="3）、-storeToRefs"><a href="#3）、-storeToRefs" class="headerlink" title="3）、 storeToRefs"></a><strong><font color='cornflowerblue'>3）、 storeToRefs</font></strong></h4><ul><li>借助<code>storeToRefs</code>将<code>store</code>中的<strong>数据</strong>(state，getters)转为<code>ref</code>响应对象，方便在模板中使用。</li><li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中所有的数据（actions  state等等）。</li><li>action 的 increment 可以直接解构，无需使用 storeToRefs</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useCountStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/count&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* 引入storeToRefs */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">/* 得到countStore */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* 使用storeToRefs转换countStore，随后解构(action 的 increment 可以直接解构无需使用storeToRefs) */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123;sum&#125; = <span class="title function_">storeToRefs</span>(countStore)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202406250019336.png" alt="image-20240625001950272"></p><br><h4 id="4）、-getters"><a href="#4）、-getters" class="headerlink" title="4）、 getters"></a><strong><font color='cornflowerblue'>4）、 getters</font></strong></h4><ol><li><p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p></li><li><p>追加<code>getters</code>配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// 箭头函数</span></span><br><span class="line">    <span class="attr">doubleSum</span>: (state): <span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> * <span class="number">2</span>,</span><br><span class="line">    <span class="comment">// 普通函数</span></span><br><span class="line">    <span class="title function_">upperSchool</span>(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">school</span> = <span class="string">&#x27;希望小学&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;, 当前sun的两倍&#123;&#123; doubleSum &#125;&#125;。 小明的多大了？ &#123;&#123; age &#125;&#125;岁<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前学校为：&#123;&#123; upperSchool &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useCountStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/countStore&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; sum, age, doubleSum, upperSchool &#125; = <span class="title function_">storeToRefs</span>(countStore)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><br><h4 id="5）、-subscribe"><a href="#5）、-subscribe" class="headerlink" title="5）、 $subscribe"></a><strong><font color='cornflowerblue'>5）、 $subscribe</font></strong></h4><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loveTalkStore.ts</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;loveTalk&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">loveTalkList</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">getLoveTalk</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;</span><br><span class="line">                <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">            &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">loveTalkList</span>.<span class="title function_">unshift</span>(&#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), title &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在组件中使用 LoveTalk.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;LoveTalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;queryLoveTalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            获取一句土味情话</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in loveTalkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;&#123; item.title &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useLoveTalkStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/loveTalkStore&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> loveTalkStore = <span class="title function_">useLoveTalkStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; getLoveTalk &#125; = loveTalkStore</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; loveTalkList &#125; = <span class="title function_">storeToRefs</span>(loveTalkStore)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">queryLoveTalk</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">getLoveTalk</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 组件中使用$subscribe</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">loveTalkStore.$subscribe(<span class="function">(<span class="params">mutate, state</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;talkStore里面保存的数据发生了变化&#x27;</span>, mutate, state)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state.<span class="property">loveTalkList</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="5-3、-store组合式写法"><a href="#5-3、-store组合式写法" class="headerlink" title="5.3、 store组合式写法"></a><strong><font color='#10c300'>5.3、 store组合式写法</font></strong></h3><p>和选项式写法唯一不同的是pinia中的defineStor()中的写法不一样，其他都一样(在组件中修改数据，使用一些api)</p><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">// 第二个参数是个函数</span></span><br><span class="line">    <span class="keyword">return</span> &#123;&#125; <span class="comment">// 需要把定义的数据/方法return出去</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote><p> <strong><code>loveTalkStore.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;loveTalk&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// talkList就是state</span></span><br><span class="line">    <span class="keyword">const</span> loveTalkList = <span class="title function_">reactive</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>) <span class="keyword">as</span> string) || [])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getATalk函数相当于action</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getLoveTalk</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span></span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">        &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">        <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">        <span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), title &#125;</span><br><span class="line">        <span class="comment">// 放到数组中</span></span><br><span class="line">        loveTalkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; loveTalkList, getLoveTalk &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong><code>countStore.ts </code></strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StoreData</span> &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">school</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> school = <span class="title function_">ref</span>(<span class="string">&#x27;school&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> doubleSum = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> sum.<span class="property">value</span> * <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">const</span> upperSchool = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> school)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"><span class="attr">val</span>: <span class="title class_">StoreData</span></span>) =&gt; &#123;</span><br><span class="line">        sum.<span class="property">value</span> += val.<span class="property">sum</span></span><br><span class="line">        school.<span class="property">value</span> = val.<span class="property">school</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; sum, school, doubleSum, upperSchool, increment &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h2 id="六、组件通信"><a href="#六、组件通信" class="headerlink" title="六、组件通信"></a><strong><font color='red'>六、组件通信</font></strong></h2><p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p><ul><li>移出事件总线，使用<code>mitt</code>代替。</li></ul><ul><li><code>vuex</code>换成了<code>pinia</code>。</li><li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li><li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li><li><code>$children</code>被砍掉了。</li></ul><p><strong>常见搭配形式：</strong></p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313505.png" alt="image-20231119185900990" style="zoom:60%;" /> <br><h3 id="6-1、-props"><a href="#6-1、-props" class="headerlink" title="6.1、 props"></a><strong><font color='#10c300'>6.1、 props</font></strong></h3><p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p><ul><li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li><li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li></ul><p><strong><code>父组件：Father.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>汽车：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>儿子给的玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:car</span>=<span class="string">&quot;car&quot;</span> <span class="attr">:send-toy</span>=<span class="string">&quot;getToy&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">ref</span>(<span class="string">&#x27;奔驰&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getToy</span>(<span class="params">val: string</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    toy.<span class="property">value</span> = val</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>子组件：Child.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父亲给的车：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;giveToy&quot;</span>&gt;</span></span><br><span class="line">            把玩具给父亲</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;sendToy&#x27;</span>]) <span class="comment">// 接收参数</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">giveToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    props.<span class="title function_">sendToy</span>(toy.<span class="property">value</span>) <span class="comment">// 通过函数的形参将子级的数据传递给父级函数的实参并调用</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-2、-自定义事件defineEmits"><a href="#6-2、-自定义事件defineEmits" class="headerlink" title="6.2、 自定义事件defineEmits"></a><strong><font color='#10c300'>6.2、 自定义事件defineEmits</font></strong></h3><ol><li>概述：自定义事件常用于：<strong>子 &#x3D;&gt; 父。</strong></li><li>注意区分好：原生事件、自定义事件。</li></ol><ul><li>原生事件：<ul><li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）    </li><li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li></ul></li><li>自定义事件：<ul><li>事件名是任意名称</li><li><strong style="color:red">事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong ></li></ul></li></ul><p><strong><code>父组件：Father.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>子给的玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给子组件Child绑定事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;saveToy&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;______&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用于保存传递过来的玩具</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">saveToy</span>(<span class="params">value: string</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    toy.<span class="property">value</span> = value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>子组件：Child.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;giveToy&quot;</span>&gt;</span></span><br><span class="line">            把玩具给父亲</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&#x27;send-toy&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">giveToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emits</span>(<span class="string">&#x27;send-toy&#x27;</span>, toy.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>扩展</strong>：当有多个参数的时候，获取事件对象就需要使用$event去占位</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test(5, 6, $event)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           测试</span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;<span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a, b, e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><br><h3 id="6-3、-mitt"><a href="#6-3、-mitt" class="headerlink" title="6.3、 mitt"></a><strong><font color='#10c300'>6.3、 mitt</font></strong></h3><p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p><p>【第一步】：安装<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add mitt</span><br></pre></td></tr></table></figure><p>【第二步】：新建文件：<code>src\utils\emitter.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建emitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并暴露mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 其他页面使用的语法</span></span><br><span class="line"><span class="comment">  // 绑定事件(接收)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abc事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyz事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 触发事件(传递)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 解绑事某个件</span></span><br><span class="line"><span class="comment">     emitter.off(&#x27;abc&#x27;)</span></span><br><span class="line"><span class="comment">    // 清理全部事件</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>【第三步】：<strong>接收数据的组件中</strong>：绑定事件、同时在销毁前解绑事件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toy事件被触发&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 解绑事件</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>【第四步】：<strong>提供数据的组件</strong>，在合适的时候触发事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 触发事件</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p><br><h3 id="6-4、-v-model"><a href="#6-4、-v-model" class="headerlink" title="6.4、 v-model"></a><strong><font color='#10c300'>6.4、 v-model</font></strong></h3><p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p><h4 id="1）、v-model用在html标签上（前序知识）"><a href="#1）、v-model用在html标签上（前序知识）" class="headerlink" title="1）、v-model用在html标签上（前序知识）"></a><strong><font color='cornflowerblue'>1）、v-model用在html标签上（前序知识）</font></strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html标签上使用v-model指令 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- html标签上使用v-model本质 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">input</span>=<span class="string">&quot;userName = ($event.target as HTMLInputElement).value&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;userName = ($event.target as HTMLInputElement).value&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">---------- 等同于如下代码 ----------</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;change&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> userName = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">change</span>(<span class="params">e: Event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> inputElement = e.<span class="property">target</span> <span class="keyword">as</span> <span class="title class_">HTMLInputElement</span></span></span><br><span class="line"><span class="language-javascript">    userName.<span class="property">value</span> = inputElement.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2）、v-model用在组件标签上（前序知识）"><a href="#2）、v-model用在组件标签上（前序知识）" class="headerlink" title="2）、v-model用在组件标签上（前序知识）"></a><strong><font color='cornflowerblue'>2）、v-model用在组件标签上（前序知识）</font></strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件标签上使用v-model指令 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 组件标签上v-model的本质 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">:modelValue</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">update:model-value</span>=<span class="string">&quot;userName = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">**注意：**</span><br><span class="line"><span class="comment">&lt;!-- 在组件标签上v-model本质中，vue2和vue3稍微有所不同 --&gt;</span></span><br><span class="line"></span><br><span class="line">传参名：</span><br><span class="line">- vue2</span><br><span class="line">:value</span><br><span class="line">- vue3</span><br><span class="line">:modelValue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">自定义事件名：</span><br><span class="line">- vue2</span><br><span class="line">@input</span><br><span class="line">- vue3</span><br><span class="line">@update:model-value</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><p><code>Father.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><code>AtguiguInput.vue</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;modelValue&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">input</span>=<span class="string">&quot;emit(&#x27;update:model-value&#x27;, $event.target.value)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 接收props</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;modelValue&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:model-value&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// Vue 3.4+ 写法</span><br><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;model&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1. 就这一行，没了！</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> model = <span class="title function_">defineModel</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>案例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">VanPopupComponent</span> <span class="attr">v-model:sign-show</span>=<span class="string">&quot;signShow&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> signShow = <span class="title function_">ref</span>(<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:show</span>=<span class="string">&quot;localSignShow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">position</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span> <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">update:show</span>=<span class="string">&quot;onUpdateSignShow&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;popup-title&quot;</span>&gt;</span>签约提示<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup-content&quot;</span>&gt;</span>54545<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">interface <span class="title class_">VanPopupProps</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">signShow</span>: boolean</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">VanPopupProps</span>&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">signShow</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:signShow&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> localSignShow = <span class="title function_">ref</span>(props.<span class="property">signShow</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> props.<span class="property">signShow</span>, <span class="function"><span class="params">val</span> =&gt;</span> localSignShow.<span class="property">value</span> = val)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">onUpdateSignShow</span> = (<span class="params">val: boolean</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    localSignShow.<span class="property">value</span> = val</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&#x27;update:signShow&#x27;</span>, val)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Vue 3.4+ 简写</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">VanPopupComponent</span> <span class="attr">v-model:sign-show</span>=<span class="string">&quot;signShow&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> signShow = <span class="title function_">ref</span>(<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:show</span>=<span class="string">&quot;signShow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">position</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span> <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;popup-title&quot;</span>&gt;</span>签约提示<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup-content&quot;</span>&gt;</span>54545<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 因为父组件将v-model默认名modelValue改成了sign-show，因此defineModel(&#x27;signShow&#x27;)中需要传递个修改之后的名字</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> signShow = defineModel&lt;boolean&gt;(<span class="string">&#x27;signShow&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-1、修改传递参数的默认值"><a href="#2-1、修改传递参数的默认值" class="headerlink" title="2-1、修改传递参数的默认值"></a>2-1、修改传递参数的默认值</h5><p>更换<code>modelValue</code>，例如改成<code>abc</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 也可以更换value，例如改成abc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model:abc</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 上面代码的本质如下 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">:abc</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">update:abc</span>=<span class="string">&quot;userName = $event&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;abc&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">input</span>=<span class="string">&quot;emit(&#x27;update:abc&#x27;, $event.target.value)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 接收props</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;abc&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:abc&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-2、组件标签上多次使用v-model"><a href="#2-2、组件标签上多次使用v-model" class="headerlink" title="2-2、组件标签上多次使用v-model"></a>2-2、组件标签上多次使用<code>v-model</code></h5><p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 组件标签上多次使用`v-model` --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;ming&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;emits(&#x27;update:ming&#x27;, ($event.target as HTMLInputElement).value)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;mima&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;emits(&#x27;update:mima&#x27;, ($event.target as HTMLInputElement).value)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;ming&#x27;</span>, <span class="string">&#x27;mima&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:ming&#x27;</span>, <span class="string">&#x27;update:mima&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3、v-model二次封装组件"><a href="#2-3、v-model二次封装组件" class="headerlink" title="2-3、v-model二次封装组件"></a>2-3、<code>v-model</code>二次封装组件</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">v-model</span>=<span class="string">&quot;getShow&quot;</span> <span class="attr">title</span>=<span class="string">&quot;Shipping address&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80%&quot;</span>&gt;</span></span><br><span class="line">        你好</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&quot;update:model-value&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> getShow = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">get</span>: <span class="function">() =&gt;</span> props.<span class="property">modelValue</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">set</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">emits</span>(<span class="string">&quot;update:model-value&quot;</span>, val);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StatisticsDialog</span> <span class="attr">v-model</span>=<span class="string">&quot;dialogTableVisible&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> dialogTableVisible = <span class="title function_">ref</span>(<span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-5、-attrs"><a href="#6-5、-attrs" class="headerlink" title="6.5、 $attrs"></a><strong><font color='#10c300'>6.5、 $attrs</font></strong></h3><ol><li><p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p></li><li><p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p><blockquote><p> 注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)，即<code>$attrs</code>中可以取到组件传递过来的参数，如果传值过来的参数在<code>props</code>中声明了，则不会在 <code>$attrs</code>中展示</p></blockquote></li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408072317842.png" alt="image-20240807231752669"></p><p><strong><code>知识扩展</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">v-bind</span>=<span class="string">&quot;&#123;x:100,y:200&#125;&quot;</span>/&gt;</span></span><br><span class="line">等价于</span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">:x:100</span> <span class="attr">:y:200</span>&#125;&quot;/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>父组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:a</span>=<span class="string">&quot;a&quot;</span> <span class="attr">:b</span>=<span class="string">&quot;b&quot;</span> <span class="attr">:c</span>=<span class="string">&quot;c&quot;</span> <span class="attr">:d</span>=<span class="string">&quot;d&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;&#123; x: 100, y: 200 &#125;&quot;</span> <span class="attr">:update-a</span>=<span class="string">&quot;updateA&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> a = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> b = <span class="title function_">ref</span>(<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c = <span class="title function_">ref</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> d = <span class="title function_">ref</span>(<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateA</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">value</span> += value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">GrandChild</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&#x27;./GrandChild.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>孙组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grand-child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>孙组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>a：&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>b：&#123;&#123; b &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>c：&#123;&#123; c &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>d：&#123;&#123; d &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>x：&#123;&#123; x &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>y：&#123;&#123; y &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateA(666)&quot;</span>&gt;</span></span><br><span class="line">            点我更新A</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;GrandChild&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;updateA&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-6、-refs-parent"><a href="#6-6、-refs-parent" class="headerlink" title="6.6、 $refs  $parent"></a><strong><font color='#10c300'>6.6、 $refs  $parent</font></strong></h3><ol><li><p>概述：</p><ul><li><code>$refs</code>用于 ：<strong>父→子。</strong></li><li><code>$parent</code>用于：<strong>子→父。</strong></li></ul></li><li><p>原理如下：</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td></tr><tr><td><code>$parent</code></td><td>值为对象，当前组件的父组件实例对象。</td></tr></tbody></table></li></ol><p><strong>父组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>房产：&#123;&#123; house &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeToy&quot;</span>&gt;</span></span><br><span class="line">            修改Child1的玩具</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeComputer&quot;</span>&gt;</span></span><br><span class="line">            修改Child2的电脑</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getAllChild($refs)&quot;</span>&gt;</span></span><br><span class="line">            让所有孩子的书变多</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child1</span> <span class="attr">ref</span>=<span class="string">&quot;c1&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child2</span> <span class="attr">ref</span>=<span class="string">&quot;c2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child1</span> <span class="keyword">from</span> <span class="string">&#x27;./Child1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child2</span> <span class="keyword">from</span> <span class="string">&#x27;./Child2.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c2 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> house = <span class="title function_">ref</span>(<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    c1.<span class="property">value</span>.<span class="property">toy</span> = <span class="string">&#x27;小猪佩奇&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeComputer</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    c2.<span class="property">value</span>.<span class="property">computer</span> = <span class="string">&#x27;华为&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getAllChild</span>(<span class="params">refs: &#123; [key: string]: any &#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> refs) &#123;</span></span><br><span class="line"><span class="language-javascript">        refs[key].<span class="property">book</span> += <span class="number">3</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 向外部提供数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; house &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">165</span> <span class="number">164</span> <span class="number">164</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：Child1.vue</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件1<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>书籍：&#123;&#123; book &#125;&#125; 本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;minusHouse($parent)&quot;</span>&gt;</span></span><br><span class="line">            干掉父亲的一套房产</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child1&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> book = <span class="title function_">ref</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">minusHouse</span>(<span class="params">parent: any</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(parent)</span></span><br><span class="line"><span class="language-javascript">    parent.<span class="property">house</span> -= <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 把数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; toy, book &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.child1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：Child2.vue</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件2<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>电脑：&#123;&#123; computer &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>书籍：&#123;&#123; book &#125;&#125; 本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child2&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> computer = <span class="title function_">ref</span>(<span class="string">&#x27;联想&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> book = <span class="title function_">ref</span>(<span class="number">6</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 把数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; computer, book &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.child2</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408112200074.png" alt="image-20240811220050879"></p><br><h3 id="6-7、-provide、inject"><a href="#6-7、-provide、inject" class="headerlink" title="6.7、 provide、inject"></a><strong><font color='#10c300'>6.7、 provide、inject</font></strong></h3><ol><li><p>概述：实现<strong>祖孙组件</strong>直接通信</p></li><li><p>具体使用：</p><ul><li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li><li>在后代组件中通过<code>inject</code>配置来声明接收数据</li></ul></li><li><p>具体编码：</p><p>【第一步】父组件中，使用<code>provide</code>提供数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>银子：&#123;&#123; money &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>车子：一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; provide, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> money = <span class="title function_">ref</span>(<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateMoney</span>(<span class="params">value: number</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    money.<span class="property">value</span> -= value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 向后代提供数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 语法：provide(命名, 传参);</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">provide</span>(<span class="string">&#x27;moneyContext&#x27;</span>, &#123; money, updateMoney &#125;) <span class="comment">// 注意money不能用money.value，用.vue就是传递的一个数字 而不是一个响应式数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>, car)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">165</span> <span class="number">164</span> <span class="number">164</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p></blockquote><p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grand-child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是孙组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>银子：&#123;&#123; money &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>车子：一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateMoney(6)&quot;</span>&gt;</span></span><br><span class="line">            花爷爷的钱</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;GrandChild&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// inject(命名, 默认参数);</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; money, updateMoney &#125; = <span class="title function_">inject</span>(<span class="string">&#x27;moneyContext&#x27;</span>, &#123; <span class="attr">money</span>: <span class="number">0</span>, <span class="attr">updateMoney</span>: <span class="function">(<span class="params">param: number</span>) =&gt;</span> &#123;&#125; &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>, &#123; <span class="attr">brand</span>: <span class="string">&#x27;未知&#x27;</span>, <span class="attr">price</span>: <span class="number">0</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.grand-child</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><br><h3 id="6-8、-pinia"><a href="#6-8、-pinia" class="headerlink" title="6.8、 pinia"></a><strong><font color='#10c300'>6.8、 pinia</font></strong></h3><p>参考之前<code>pinia</code>部分的讲解</p><br><h3 id="6-9、-slot"><a href="#6-9、-slot" class="headerlink" title="6.9、 slot"></a><strong><font color='#10c300'>6.9、 slot</font></strong></h3><h4 id="1）、-默认插槽"><a href="#1）、-默认插槽" class="headerlink" title="1）、 默认插槽"></a><strong><font color='cornflowerblue'>1）、 默认插槽</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313702.png" alt="img"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;今日热门游戏&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2）、-具名插槽"><a href="#2）、-具名插槽" class="headerlink" title="2）、 具名插槽"></a><strong><font color='cornflowerblue'>2）、 具名插槽</font></strong></h4><p>父组件：v-slot: xxx<br>子组件：name&#x3D; “xxx”</p><p>其中v-slot: xxx 可以简写成 #xxx</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;今日热门游戏&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:s1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">s2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;s1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;s2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3）、-作用域插槽"><a href="#3）、-作用域插槽" class="headerlink" title="3）、 作用域插槽 "></a><strong><font color='cornflowerblue'>3）、 作用域插槽 </font></strong></h4><ol><li><p>理解：插槽的内容无法访问到子组件的状态，然而在某些场景下插槽的内容可能想要同时使用父组件域内和子组件域内的数据。要做到这一点，我们需要一种方法来让子组件在渲染时将一部分数据提供给插槽。</p></li><li><p>具体编码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">  <span class="tag">&lt;<span class="name">Game</span> <span class="attr">v-slot</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span>  // 这几种写法都一样</span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game v-slot:default=&quot;slotProps&quot;&gt; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game #default=&quot;slotProps&quot;&gt; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game #=&quot;params&quot;&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in slotProps.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Game</span>&gt;</span></span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>今日游戏榜单<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span> <span class="attr">a</span>=<span class="string">&quot;哈哈&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Category&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;英雄联盟&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;王者荣耀&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;红色警戒&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;斗罗大陆&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h2 id="七、-directive自定义指令"><a href="#七、-directive自定义指令" class="headerlink" title="七、 directive自定义指令"></a><strong><font color='red'>七、 directive自定义指令</font></strong></h2><blockquote><p>TIP</p><p>只有当所需功能只能通过直接的 DOM 操作来实现时，才应该使用自定义指令。其他情况下应该尽可能地使用 <code>v-bind</code> 这样的内置指令来声明式地使用模板，这样更高效，也对服务端渲染更友好。</p></blockquote><p>自定义指令会有<strong>指令钩子</strong>，当需要在指令中用到多个钩子则需要使用对象的形式来完成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 局部</span></span><br><span class="line"><span class="keyword">const</span> vFocus = &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">... ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line"><span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">... ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>如果只需要需要在 <code>mounted</code> 和 <code>updated</code> 钩子上上实现相同的行为，除此之外并不需要其他钩子。这种情况下我们可以直接用一个函数来定义指令</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 局部</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">vFocus</span> = el =&gt; el.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">(<span class="params">el, binding, vnode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="7-1、-局部自定义指令"><a href="#7-1、-局部自定义指令" class="headerlink" title="7.1、 局部自定义指令"></a><strong><font color='#10c300'>7.1、 局部自定义指令</font></strong></h3><h4 id="1）、在使用语法糖"><a href="#1）、在使用语法糖" class="headerlink" title="1）、在使用语法糖"></a><strong><font color='cornflowerblue'>1）、在使用语法糖</font></strong></h4><p>在使用<code>&lt;script setup&gt;</code>的情况下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vFocus = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">mounted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>(),</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 简写形式</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// const vFocus = el =&gt; el.focus();</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1）、在未使用语法糖"><a href="#1）、在未使用语法糖" class="headerlink" title="1）、在未使用语法糖"></a><strong><font color='cornflowerblue'>1）、在未使用语法糖</font></strong></h4><p>在没有使用 <code>&lt;script setup&gt;</code> 的情况下，自定义指令需要通过 <code>directives</code> 选项注册：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">directives</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">mounted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>(),</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 简写形式1</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// focus(el) &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// el.focus();</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 简写形式2</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// focus: el =&gt; el.focus()</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* ... */</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="7-2、-全局自定义指令"><a href="#7-2、-全局自定义指令" class="headerlink" title="7.2、 全局自定义指令"></a><strong><font color='#10c300'>7.2、 全局自定义指令</font></strong></h3><p>将一个自定义指令全局注册到应用层级也是一种常见的做法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使 v-focus 在所有组件中都可用</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">  ... ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">(<span class="params">el, binding, vnode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure> <br><h3 id="7-3、-指令钩子"><a href="#7-3、-指令钩子" class="headerlink" title="7.3、 指令钩子"></a><strong><font color='#10c300'>7.3、 指令钩子</font></strong></h3><p>一个指令的定义对象可以提供几种钩子函数 (都是可选的)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> myDirective = &#123;</span><br><span class="line">      <span class="comment">// 在绑定元素的 attribute 前</span></span><br><span class="line">      <span class="comment">// 或事件监听器应用前调用</span></span><br><span class="line">      <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">        <span class="comment">// 下面会介绍各个参数的细节</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 在元素被插入到 DOM 前调用</span></span><br><span class="line">      <span class="title function_">beforeMount</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 在绑定元素的父组件</span></span><br><span class="line">      <span class="comment">// 及他自己的所有子节点都挂载完成后调用</span></span><br><span class="line">      <span class="title function_">mounted</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件更新前调用</span></span><br><span class="line">      <span class="title function_">beforeUpdate</span>(<span class="params">el, binding, vnode, prevVnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 在绑定元素的父组件</span></span><br><span class="line">      <span class="comment">// 及他自己的所有子节点都更新后调用</span></span><br><span class="line">      <span class="title function_">updated</span>(<span class="params">el, binding, vnode, prevVnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件卸载前调用</span></span><br><span class="line">      <span class="title function_">beforeUnmount</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件卸载后调用</span></span><br><span class="line">      <span class="title function_">unmounted</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><font color='orange' size="4">钩子参数</font></strong></p><p>指令的钩子会传递以下几种参数：</p><ul><li><code>el</code>：指令绑定到的元素。这可以用于直接操作 DOM。</li><li><code>binding</code>：一个对象，包含以下属性。<ul><li><code>value</code>：传递给指令的值。例如在 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，值是 <code>2</code>。</li><li><code>oldValue</code>：之前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。无论值是否更改，它都可用。</li><li><code>arg</code>：传递给指令的参数 (如果有的话)。例如在 <code>v-my-directive:foo</code> 中，参数是 <code>&quot;foo&quot;</code>。</li><li><code>modifiers</code>：一个包含修饰符的对象 (如果有的话)。例如在 <code>v-my-directive.foo.bar</code> 中，修饰符对象是 <code>&#123; foo: true, bar: true &#125;</code>。</li><li><code>instance</code>：使用该指令的组件实例。</li><li><code>dir</code>：指令的定义对象。</li></ul></li><li><code>vnode</code>：代表绑定元素的底层 VNode。</li><li><code>prevVnode</code>：代表之前的渲染中指令所绑定元素的 VNode。仅在 <code>beforeUpdate</code> 和 <code>updated</code> 钩子中可用。</li></ul><p>举例来说，像下面这样使用指令：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-example:foo.bar</span>=<span class="string">&quot;baz&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>binding</code> 参数会是一个这样的对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  arg: &#x27;foo&#x27;,</span><br><span class="line">  modifiers: &#123; bar: true &#125;,</span><br><span class="line">  value: /* `baz` 的值 */,</span><br><span class="line">  oldValue: /* 上一次更新时 `baz` 的值 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>和内置指令类似，自定义指令的参数也可以是动态的。举例来说：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="attr">example</span>:[arg]=<span class="string">&quot;value&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="comment">// 这里指令的参数会基于组件的 arg 数据属性响应式地更新。</span></span><br></pre></td></tr></table></figure><br><h3 id="7-4、-简化形式"><a href="#7-4、-简化形式" class="headerlink" title="7.4、 简化形式"></a><strong><font color='#10c300'>7.4、 简化形式</font></strong></h3><p>对于自定义指令来说，一个很常见的情况是仅仅需要在 <code>mounted</code> 和 <code>updated</code> 上实现相同的行为，除此之外并不需要其他钩子。这种情况下我们可以直接用一个函数来定义指令，如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-color</span>=<span class="string">&quot;color&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 这会在 `mounted` 和 `updated` 时都调用</span></span><br><span class="line">  el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h2 id="八、-其它-API"><a href="#八、-其它-API" class="headerlink" title="八、 其它 API"></a><strong><font color='red'>八、 其它 API</font></strong></h2><h3 id="8-1、-shallowRef-与-shallowReactiv"><a href="#8-1、-shallowRef-与-shallowReactiv" class="headerlink" title="8.1、 shallowRef 与 shallowReactiv"></a><strong><font color='#10c300'>8.1、 shallowRef 与 shallowReactiv</font></strong></h3><h4 id="1）、-shallowRef"><a href="#1）、-shallowRef" class="headerlink" title="1）、 shallowRef"></a><strong><font color='cornflowerblue'>1）、 shallowRef</font></strong></h4><ol><li><p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>特点：只跟踪<strong>引用值</strong>的变化，不关心值内部的属性变化。简单来说只对 XXX.value &#x3D; ‘111’的生效   对 obj.value.xxx &#x3D; ‘111’不生效。</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>名字为：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄为：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">shallowRef</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">shallowRef</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123; <span class="comment">// 未改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123; <span class="comment">// 未改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;tony&#x27;</span>, <span class="attr">age</span>: <span class="number">100</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2）、-shallowReactive"><a href="#2）、-shallowReactive" class="headerlink" title="2）、 shallowReactive"></a><strong><font color='cornflowerblue'>2）、 shallowReactive</font></strong></h4><ol><li><p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。<strong>简单来说只对第一层的属性值生效</strong></p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>名字为：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄为：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车为：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeBrand&quot;</span>&gt;</span></span><br><span class="line">            修改品牌</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeColor&quot;</span>&gt;</span></span><br><span class="line">            修改颜色</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeEngine&quot;</span>&gt;</span></span><br><span class="line">            修改发动机</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">shallowReactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">barnd</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">options</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="string">&#x27;红色&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">engine</span>: <span class="string">&#x27;V8&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeBrand</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">barnd</span> = <span class="string">&#x27;宝马&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeColor</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">options</span>.<span class="property">color</span> = <span class="string">&#x27;紫色&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeEngine</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">options</span>.<span class="property">engine</span> = <span class="string">&#x27;V12&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3）、-总结"><a href="#3）、-总结" class="headerlink" title="3）、 总结"></a><strong><font color='cornflowerblue'>3）、 总结</font></strong></h4><blockquote><p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p></blockquote><br><h3 id="8-2、-readonly-与-shallowReadonly"><a href="#8-2、-readonly-与-shallowReadonly" class="headerlink" title="8.2、 readonly 与 shallowReadonly"></a><strong><font color='#10c300'>8.2、 readonly 与 shallowReadonly</font></strong></h3><h4 id="1）、-readonly"><a href="#1）、-readonly" class="headerlink" title="1）、 readonly"></a><strong><font color='cornflowerblue'>1）、 readonly</font></strong></h4><ol><li><p>作用：用于创建一个对象的深只读副本。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original); <span class="comment">// readonly的参数必须是一个响应式数据</span></span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li>对象的所有嵌套属性都将变为只读。</li><li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li></ul></li><li><p>应用场景：</p><ul><li>创建不可变的状态快照。</li><li>保护全局状态或配置不被修改。</li></ul></li></ol><h4 id="2）、-shallowReadonly"><a href="#2）、-shallowReadonly" class="headerlink" title="2）、 shallowReadonly"></a><strong><font color='cornflowerblue'>2）、 shallowReadonly</font></strong></h4><ol><li><p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li><p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p></li><li><p>适用于只需保护对象顶层属性的场景。</p></li></ul></li></ol><br><h3 id="8-3、toRaw-与-markRaw"><a href="#8-3、toRaw-与-markRaw" class="headerlink" title="8.3、toRaw 与 markRaw"></a><strong><font color='#10c300'>8.3、toRaw 与 markRaw</font></strong></h3><h4 id="1）、-toRaw"><a href="#1）、-toRaw" class="headerlink" title="1）、 toRaw"></a><strong><font color='cornflowerblue'>1）、 toRaw</font></strong></h4><ol><li><p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p><blockquote><p>官网描述：这是一个可以用于临时读取而不引起代理访问&#x2F;跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p></blockquote><blockquote><p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p></blockquote></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// 响应式对象</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// 原始对象</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br></pre></td></tr></table></figure></li></ol><h4 id="2）、-markRaw"><a href="#2）、-markRaw" class="headerlink" title="2）、 markRaw "></a><strong><font color='cornflowerblue'>2）、 markRaw </font></strong></h4><ol><li><p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p><blockquote><p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p></blockquote></li><li><p>编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;,    </span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;天津&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;重庆&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><br><h3 id="8-4、customRef-自定义ref"><a href="#8-4、customRef-自定义ref" class="headerlink" title="8.4、customRef(自定义ref)"></a><strong><font color='#10c300'>8.4、customRef(自定义ref)</font></strong></h3><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p><p>实现防抖效果hooks（<code>useSumRef.ts</code>）：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"><span class="attr">initValue</span>: <span class="built_in">string</span>, <span class="attr">delay</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// track() 跟踪   trigger() 触发</span></span><br><span class="line">    <span class="keyword">const</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">timer</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="title function_">track</span>() <span class="comment">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span></span><br><span class="line">                <span class="keyword">return</span> initValue</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">                timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    initValue = value</span><br><span class="line">                    <span class="title function_">trigger</span>() <span class="comment">// 通知Vue数据msg变化了</span></span><br><span class="line">                &#125;, delay)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; msg &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>组件中使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useMsgRef <span class="keyword">from</span> <span class="string">&#x27;./useMsgRef&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用Vue提供的默认ref定义响应式数据，数据一变，页面就更新</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let msg = ref(&#x27;你好&#x27;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用useMsgRef来定义一个响应式数据且有延迟效果</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; msg &#125; = <span class="title function_">useMsgRef</span>(<span class="string">&#x27;你好&#x27;</span>, <span class="number">2000</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h2 id="九、Vue3新组件"><a href="#九、Vue3新组件" class="headerlink" title="九、Vue3新组件"></a><strong><font color='red'>九、Vue3新组件</font></strong></h2><h3 id="9-1、-Teleport"><a href="#9-1、-Teleport" class="headerlink" title="9.1、 Teleport"></a><strong><font color='#10c300'>9.1、 Teleport</font></strong></h3><ul><li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li></ul><p><code> app.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        你好</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">        // to：插到指定的html位置</span><br><span class="line">        <span class="tag">&lt;<span class="name">Modal</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Modal</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Modal.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Modal.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是弹窗中的一些内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="9-2、-Suspense-实验性功能"><a href="#9-2、-Suspense-实验性功能" class="headerlink" title="9.2、 Suspense(实验性功能)"></a><strong><font color='#10c300'>9.2、 Suspense(实验性功能)</font></strong></h3><ul><li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验 </li><li>使用步骤： <ul><li>异步引入组件</li><li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// defineAsyncComponent可使组件变成异步组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>)) </span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是App组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>加载中.......<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="9-3、-全局API转移到应用对象"><a href="#9-3、-全局API转移到应用对象" class="headerlink" title="9.3、 全局API转移到应用对象"></a><strong><font color='#10c300'>9.3、 全局API转移到应用对象</font></strong></h3><ul><li><p><code>app.component</code>：注册全局组件</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- hello.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>helloWord<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- main.<span class="property">ts</span> --&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Child.vue&#x27;</span>;</span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;Child&#x27;</span>, <span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line">&lt;!-- app.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>app.config.globalProperties</code>：用于注册能够被应用内所有组件实例访问到的全局属性的对象</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- main.<span class="property">ts</span> --&gt;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">msg</span> = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;vue&#x27;</span> &#123; <span class="comment">// 解决msg在其他页面使用时ts报错，可单独写一个文件中，不推荐过度使用</span></span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="built_in">number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- app.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>app.mount</code></p></li><li><p><code>app.unmount</code></p></li><li><p><code>app.use</code></p></li></ul><br><h3 id="9-4、其他"><a href="#9-4、其他" class="headerlink" title="9.4、其他"></a><strong><font color='#10c300'>9.4、其他</font></strong></h3><ul><li><p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p></li><li><p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p></li><li><p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p></li><li><p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p></li><li><p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p></li><li><p>移除了过滤器 <code>filter</code>。</p></li><li><p>移除了<code>$children</code> 实例 <code>propert</code>。</p><p>……&#96;&#96;</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、-Vue3简介&quot;&gt;&lt;a href=&quot;#一、-Vue3简介&quot; class=&quot;headerlink&quot; title=&quot;一、 Vue3简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、 Vue3简介&lt;/font&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;ul</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>ES6模块化之export和import的用法</title>
    <link href="http://example.com/posts/82ba275f.html"/>
    <id>http://example.com/posts/82ba275f.html</id>
    <published>2025-08-12T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.320Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ES6中export和import一般的用法有两种</p><ol><li>命名导出（Named exports）</li><li>默认导出（Default exports）</li></ol></blockquote><h2 id="一、export-命名导出"><a href="#一、export-命名导出" class="headerlink" title="一、export 命名导出"></a>一、export 命名导出</h2><p>就是每一个需要导出的数据类型都要有一个name(变量名)，统一引入一定要带有<code>&#123;&#125;</code>，即便只有一个需要导出的数据类型。<strong>这种写法清爽直观，是推荐的写法。</strong></p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/ profile.<span class="property">js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法1：</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> firstName = <span class="string">&#x27;Michael&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法2(常用)：</span></span><br><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;Michael&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">firstName,</span><br><span class="line">    v2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span>中</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入该文件应该使用重命名之后的变量名</span></span><br><span class="line"><span class="keyword">import</span> &#123; firstName, v2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./profile.js&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="1-1、别名引入（Aliasing-named-imports）"><a href="#1-1、别名引入（Aliasing-named-imports）" class="headerlink" title="1.1、别名引入（Aliasing named imports）"></a><font color='red' size="">1.1、别名引入（Aliasing named imports）</font></h3><p>当从不同模块引入的变量名相同的时候</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;speak&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;speak&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br></pre></td></tr></table></figure><p>这些写法显然会造成混乱</p><p>正切应该使用<code>as</code>关键字，将输入的变量重命名。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;speak <span class="keyword">as</span> cowSpeak&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;speak <span class="keyword">as</span> goatSpeak&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br></pre></td></tr></table></figure><p>可是，当从每个模块需要引入的方法很多的时候，这种写法就显得十分的繁琐、冗长，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  speak <span class="keyword">as</span> cowSpeak,</span><br><span class="line">  eat <span class="keyword">as</span> cowEat,</span><br><span class="line">  drink <span class="keyword">as</span> cowDrink</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  speak <span class="keyword">as</span> goatSpeak,</span><br><span class="line">  eat <span class="keyword">as</span> goatEat,</span><br><span class="line">  drink <span class="keyword">as</span> goatDrink</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">cowSpeak</span>() <span class="comment">// moo</span></span><br><span class="line"><span class="title function_">cowEat</span>() <span class="comment">// cow eats</span></span><br><span class="line"><span class="title function_">goatSpeak</span>() <span class="comment">// baa</span></span><br><span class="line"><span class="title function_">goatDrink</span>() <span class="comment">// goat drinks</span></span><br></pre></td></tr></table></figure><p>解决方案就是命名空间引入了</p><h3 id="1-2、命名空间引入（Namespace-imports）"><a href="#1-2、命名空间引入（Namespace-imports）" class="headerlink" title="1.2、命名空间引入（Namespace imports）"></a><font color='red' size="">1.2、命名空间引入（Namespace imports）</font></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> cow <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> goat <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br><span class="line"></span><br><span class="line">cow.<span class="title function_">speak</span>() <span class="comment">// moo</span></span><br><span class="line">goat.<span class="title function_">speak</span>() <span class="comment">// baa</span></span><br></pre></td></tr></table></figure><p>十分的简洁优雅</p><h3 id="1-3、as关键字重命名"><a href="#1-3、as关键字重命名" class="headerlink" title="1.3、as关键字重命名"></a><font color='red' size="">1.3、as关键字重命名</font></h3><p>通常情况下，<code>export</code>输出的变量就是本来的名字，但是可以<strong>使用<code>as</code>关键字重命名</strong>。</p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ profile.<span class="property">js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v1</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  v1 <span class="keyword">as</span> streamV1,</span><br><span class="line">  v2 <span class="keyword">as</span> streamV2</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span>中</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入该文件应该使用重命名之后的变量名</span></span><br><span class="line"><span class="keyword">import</span> &#123; streamV1, streamV2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./profile.js&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="二、export-default-默认导出"><a href="#二、export-default-默认导出" class="headerlink" title="二、export default 默认导出"></a>二、export default 默认导出</h2><p>默认导出就不需要name了，但是一个js文件中只能有一个export default。</p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="keyword">export</span>-<span class="keyword">default</span>.<span class="property">js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者写成</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> foo;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span></span><br><span class="line"><span class="comment">// 加载该模块时，`import`命令可以为该匿名函数指定任意名字。</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">&#x27;./export-default&#x27;</span>;</span><br><span class="line"><span class="title function_">customName</span>();</span><br></pre></td></tr></table></figure><p>其实这种导出方式可以看成是命名导出的变异 ，只不过把命名写成了default。</p><h4 id="2-1、export-default也能导出多个变量"><a href="#2-1、export-default也能导出多个变量" class="headerlink" title="2.1、export default也能导出多个变量"></a><font color='red' size="">2.1、export default也能导出多个变量</font></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="keyword">export</span>-<span class="keyword">default</span>.<span class="property">js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">v2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">aa</span>: <span class="number">6666</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者写成</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">v2</span> = (<span class="params"></span>) =&gt; &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> aa = <span class="number">6666</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  v2,</span><br><span class="line">  aa</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># main.<span class="property">js</span></span><br><span class="line"><span class="keyword">import</span> fn <span class="keyword">from</span> <span class="string">&#x27;.export-default.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn.<span class="title function_">v2</span>(), fn.<span class="property">aa</span>)  <span class="comment">// 这是一个函数  6666</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ES6中export和import一般的用法有两种&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;命名导出（Named exports）&lt;/li&gt;
&lt;li&gt;默认导出（Default exports）&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;一</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>Date()/Math()对象方法</title>
    <link href="http://example.com/posts/79541cc.html"/>
    <id>http://example.com/posts/79541cc.html</id>
    <published>2025-08-07T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.319Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Date-对象"><a href="#Date-对象" class="headerlink" title="Date 对象"></a>Date 对象</h3><p>Date 对象用于处理日期与时间。</p><p>创建 Date 对象： <strong>new Date()</strong></p><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>()    <span class="comment">//Sat Aug 10 2019 10:47:16 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="keyword">let</span> y = dt.<span class="title function_">getFullYear</span>()    <span class="comment">//年</span></span><br><span class="line"><span class="keyword">let</span> m = dt.<span class="title function_">getMonth</span>() + <span class="number">1</span>   <span class="comment">//月</span></span><br><span class="line"><span class="keyword">let</span> d = dt.<span class="title function_">getDate</span>()        <span class="comment">//日</span></span><br><span class="line"><span class="keyword">let</span> hh = dt.<span class="title function_">getHours</span>()      <span class="comment">//时</span></span><br><span class="line"><span class="keyword">let</span> mm = dt.<span class="title function_">getMinutes</span>()    <span class="comment">//分</span></span><br><span class="line"><span class="keyword">let</span> ss = dt.<span class="title function_">getSeconds</span>()    <span class="comment">//秒</span></span><br><span class="line"><span class="keyword">let</span> ww = dt.<span class="title function_">getDay</span>()        <span class="comment">//星期</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y + <span class="string">&#x27;年-&#x27;</span> + m + <span class="string">&#x27;月-&#x27;</span> + d + <span class="string">&#x27;日-&#x27;</span> + hh + <span class="string">&#x27;:&#x27;</span> + mm + <span class="string">&#x27;:&#x27;</span> + ss + <span class="string">&#x27; 星期&#x27;</span> + ww);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mi = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()    </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mi);   <span class="comment">// 返回 1970 年 1 月 1 日至今的毫秒数。</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Date</span>.<span class="title function_">now</span>()  <span class="comment">//返回 1970 年 1 月 1 日至今的毫秒数。</span></span><br><span class="line"></span><br><span class="line">#<span class="number">1514345477</span>毫秒的时间</span><br><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1514345477</span>)   <span class="comment">//Sun Jan 18 1970 20:39:05 GMT+0800 (中国标准时间)</span></span><br><span class="line">#当前的时间</span><br><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>()    <span class="comment">//Sat Aug 10 2019 10:47:16 GMT+0800 (中国标准时间)</span></span><br><span class="line">#当不足两位数的时候就在前面补<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> m = (dt.<span class="title function_">getMonth</span>() + <span class="number">1</span> +<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStar</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>new Date().getTime() 和 Date.now() 和new Date().valueOf()和+new Date()</strong></p><p><strong>都是获取1970年1月1日截止到现在时刻的时间戳，但是从性能上来讲</strong> <strong>Date.now()要快于new.Date().getTime()可以从代码执行上来看</strong></p><p><strong>+new Date()等同于new Date().valueOf()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>()</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()</span><br><span class="line">  &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>()    <span class="comment">//default: 8.759033203125ms</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">  <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>()   <span class="comment">//default: 2.578125ms</span></span><br></pre></td></tr></table></figure><br><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2025-11-13T10:01:53</span><br></pre></td></tr></table></figure><p>这里的 <strong><code>T</code></strong> 是一种常见的时间格式分隔符，通常出现在 <strong>ISO 8601</strong> 标准的日期时间表示法中。</p><p>解释：</p><ul><li><strong><code>2025-11-13</code></strong> 表示日期（年-月-日）</li><li><strong><code>T</code></strong> 是日期与时间的分隔符（不是字母 T 的含义，而是标准规定的一个字符）</li><li><strong><code>10:01:53</code></strong> 表示时间（时:分:秒）</li></ul><p>ISO 8601 格式特点：</p><ul><li>使用 <code>YYYY-MM-DD</code> 表示日期</li><li>用 <code>T</code> 分隔日期和时间</li><li>时间可以带时区信息，例如：<ul><li><code>2025-11-13T10:01:53Z</code> 表示 UTC 时间</li><li><code>2025-11-13T10:01:53+08:00</code> 表示东八区时间（中国标准时间）</li></ul></li></ul><p>举例：</p><ul><li><code>2025-11-13T10:01:53</code> → 2025年11月13日 上午10点01分53秒（没有时区信息，通常默认本地时间）</li><li><code>2025-11-13T10:01:53Z</code> → UTC 时间</li><li><code>2025-11-13T10:01:53+08:00</code> → UTC+8 时区时间</li></ul><br><h3 id="Math-对象"><a href="#Math-对象" class="headerlink" title="Math 对象"></a>Math 对象</h3><p>Math 对象用于执行数学任务。</p><p>Math 对象并不像 Date 和 String 那样是对象的类，因此没有构造函数 Math()。</p><h4 id="1、abs-方法"><a href="#1、abs-方法" class="headerlink" title="1、abs() 方法"></a>1、abs() 方法</h4><blockquote><p>返回一个数的绝对值。</p></blockquote><h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">abs</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">7.25</span>);  <span class="comment">//7.25</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">abs</span>(-<span class="number">7.25</span>); <span class="comment">//7.25</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="literal">null</span>);  <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">//NaN</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">2</span>+<span class="number">3</span>);  <span class="comment">//5</span></span><br></pre></td></tr></table></figure><h4 id="2、ceil-方法"><a href="#2、ceil-方法" class="headerlink" title="2、ceil() 方法"></a>2、ceil() 方法</h4><blockquote><p>向上取整</p></blockquote><h6 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">ceil</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.60</span>); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.40</span>); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5.1</span>); <span class="comment">//6</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.1</span>); <span class="comment">//-5</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.9</span>); <span class="comment">//-5</span></span><br></pre></td></tr></table></figure><h4 id="3、floor-方法"><a href="#3、floor-方法" class="headerlink" title="3、floor() 方法"></a>3、floor() 方法</h4><blockquote><p>向下取整</p></blockquote><h6 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">floor</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.60</span>); <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.40</span>); <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5.1</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.1</span>); <span class="comment">//-6</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.9</span>); <span class="comment">//-6</span></span><br></pre></td></tr></table></figure><h4 id="4、random-方法"><a href="#4、random-方法" class="headerlink" title="4、random() 方法"></a>4、random() 方法</h4><blockquote><p>返回介于 0（包含） ~ 1（不包含） 之间的一个随机数。</p></blockquote><h6 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">random</span>()</span><br></pre></td></tr></table></figure><h6 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#实例<span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line"></span><br><span class="line">#实例<span class="number">2</span>  取得介于 <span class="number">1</span> 到 <span class="number">10</span> 之间的一个随机数</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10</span>)+<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h4 id="5、round-方法"><a href="#5、round-方法" class="headerlink" title="5、round() 方法"></a>5、round() 方法</h4><blockquote><p>四舍五入</p></blockquote><h6 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">round</span>(x)</span><br><span class="line">x：必需。必须是一个数值</span><br></pre></td></tr></table></figure><h6 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#实例<span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.60</span>);  <span class="comment">//3</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.50</span>);  <span class="comment">//3</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.49</span>);  <span class="comment">//2</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.60</span>);  <span class="comment">//-3</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.50</span>);  <span class="comment">//-2</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.49</span>);  <span class="comment">//-2</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;Date-对象&quot;&gt;&lt;a href=&quot;#Date-对象&quot; class=&quot;headerlink&quot; title=&quot;Date 对象&quot;&gt;&lt;/a&gt;Date 对象&lt;/h3&gt;&lt;p&gt;Date 对象用于处理日期与时间。&lt;/p&gt;
&lt;p&gt;创建 Date 对象： &lt;strong&gt;new D</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>String方法集</title>
    <link href="http://example.com/posts/5e5dbec2.html"/>
    <id>http://example.com/posts/5e5dbec2.html</id>
    <published>2025-08-05T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.319Z</updated>
    
    <content type="html"><![CDATA[<h3 id="charAt"><a href="#charAt" class="headerlink" title="charAt() "></a><strong><font color='red'>charAt() </font></strong></h3><p>**返回新的值，**返回指定位置的字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charAt</span>(<span class="number">2</span>)</span><br><span class="line">#返回值</span><br><span class="line">L</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charAt</span>(str.<span class="property">length</span>-<span class="number">1</span>); </span><br><span class="line">#返回值</span><br><span class="line">D</span><br></pre></td></tr></table></figure><br><h3 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt()"></a><strong><font color='red'>charCodeAt()</font></strong></h3><p>**返回新的值，**返回指定位置字符的 Unicode 编码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charCodeAt</span>(<span class="number">0</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">72</span></span><br></pre></td></tr></table></figure><br><h3 id="fromCharCode"><a href="#fromCharCode" class="headerlink" title="fromCharCode() "></a><strong><font color='red'>fromCharCode() </font></strong></h3><p>**返回新的值，**可接受一个指定的 Unicode 值，返回一个字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">72</span>,<span class="number">69</span>,<span class="number">76</span>,<span class="number">76</span>,<span class="number">79</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;HELLO&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="concat"><a href="#concat" class="headerlink" title="concat() "></a><strong><font color='red'>concat() </font></strong></h3><p>**返回新的值，**用于连接两个或多个字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;中国&#x27;</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&#x27;真的&#x27;</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&#x27;很伟大&#x27;</span></span><br><span class="line"><span class="keyword">let</span> d = a.<span class="title function_">concat</span>(b, c)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;中国真的很伟大&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a><strong><font color='red'>indexOf()</font></strong></h3><p>返回某个指定的字符串值在字符串中<strong>首次出现</strong>的位置(<strong>空格也算一个位置</strong>)。如果没有找到匹配的字符串则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">indexOf</span>(searchvalue,start)</span><br><span class="line">searchvalue：必需。规定需检索的字符串值。</span><br><span class="line">start：可选的整数参数，规定在字符串中开始检索的位置。</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">indexOf</span>(<span class="string">&quot;e&quot;</span>);  <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> n= str.<span class="title function_">indexOf</span>(<span class="string">&quot;o&quot;</span>,<span class="number">5</span>); <span class="comment">// 7 这个的o是从索引5开始的 也就是字符串中的第二o</span></span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">indexOf</span>(<span class="string">&#x27;z&#x27;</span>)； <span class="comment">//-1 字符串中没有z   就返回-1</span></span><br></pre></td></tr></table></figure><br><h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf() "></a><strong><font color='red'>lastIndexOf() </font></strong></h3><p>返回一个指定的字符串值<strong>最后出现</strong>的位置，如果没有找到匹配的字符串则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;abcdefabcdef&quot;</span>;  </span><br><span class="line"><span class="comment">//从右往左第一个f的索引</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;f&quot;</span>);  <span class="comment">//11 最后一个f的索引</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;f&quot;</span>,<span class="number">6</span>); <span class="comment">//5 从后前前去除6个 取剩下字符串的最后一个f的索引</span></span><br></pre></td></tr></table></figure><br><h3 id="slice"><a href="#slice" class="headerlink" title="slice() "></a><strong><font color='red'>slice() </font></strong></h3><p>**返回新的值，**截取字符串的某个部分，和substring类似</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">slice</span>(start,end)</span><br><span class="line">start：必须. 从哪一个下标开始截取（包含）。第一个字符位置为 <span class="number">0</span></span><br><span class="line">end：可选。 紧接着要截取到下标为多少的（不包含）。若未指定此参数，则从start到最后</span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;ello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(<span class="number">3</span>); </span><br><span class="line">#返回值</span><br><span class="line">lo world!</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是负数的话-1就是截取一个 -2就是截取2个 以此类推</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(-<span class="number">1</span>);   <span class="comment">//d</span></span><br></pre></td></tr></table></figure><br><h3 id="substring"><a href="#substring" class="headerlink" title="substring()"></a><strong><font color='red'>substring()</font></strong></h3><p>**返回新的值，**截取字符串的某个部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">substring</span>(<span class="keyword">from</span>, to)</span><br><span class="line"><span class="keyword">from</span>：必需。从哪一个下标开始截取（包含）。第一个字符位置为 <span class="number">0</span></span><br><span class="line">to：可选。紧接着要截取到下标为多少的（不包含）</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">substring</span>(<span class="number">3</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;lo world!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">substring</span>(<span class="number">3</span>,<span class="number">7</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;lo w&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="substr"><a href="#substr" class="headerlink" title="substr() "></a><strong><font color='red'>substr() </font></strong></h3><p>**返回新的值，**在字符串中截取从开始下标开始的指定数目的字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">substr</span>(start,length)</span><br><span class="line">start：必需。要抽取的子串的起始下标(包含)。必须是数值。</span><br><span class="line">ength：可选。截取的位数。如果省略了该参数，那么返回的是从开始位置到结尾的字串。</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">substr</span>(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;llo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">substr</span>(<span class="number">2</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;llo world!&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="replace"><a href="#replace" class="headerlink" title="replace()"></a><strong><font color='red'>replace()</font></strong></h3><p>**返回新的值，**用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">replace</span>(regexp/substr,replacement)</span><br><span class="line">regexp/<span class="attr">substr</span>: 必需。规定子字符串或要替换的模式的 <span class="title class_">RegExp</span> 对象。</span><br><span class="line">    <span class="attr">replacement</span>: 必需。一个字符串值。规定了替换文本或生成替换文本的函数。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Visit Microsoft! Visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">replace</span>(<span class="string">&quot;Microsoft&quot;</span>,<span class="string">&quot;Runoob&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Visit Runoob!Visit Microsoft!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr Blue has a blue house and a blue car&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">replace</span>(<span class="regexp">/blue/g</span>,<span class="string">&quot;red&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Mr Blue has a red house and a red car&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;我是你爸爸&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = <span class="string">&#x27;叫爷爷&#x27;</span></span><br><span class="line"><span class="comment">//这里不能用/str/gi去接收一个参数  只能用new RegExp(str, &#x27;g&#x27;)接收一个赋值的参数</span></span><br><span class="line"><span class="comment">// let a = str.replace(/str/gi,&#x27;爷&#x27;); </span></span><br><span class="line"><span class="keyword">let</span> a = str.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(str, <span class="string">&#x27;g&#x27;</span>), newStr);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;叫爷爷&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="match"><a href="#match" class="headerlink" title="match() "></a><strong><font color='red'>match() </font></strong></h3><p>**返回新的值，**可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。它返回指定的值（数组）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">match</span>(searchvalue)  <span class="comment">// 匹配字符串</span></span><br><span class="line"># string.<span class="title function_">match</span>(regexp)  <span class="comment">// 匹配正则</span></span><br><span class="line"><span class="attr">searchvalue</span>: 规定要检索的字符串值。</span><br><span class="line"><span class="attr">regexp</span>: 规定要匹配的模式的 <span class="title class_">RegExp</span> 对象。</span><br><span class="line">    </span><br><span class="line">regexp的时候在很大程度上有赖于 regexp 是否具有标志 g。</span><br><span class="line">没有标志 g，那么 <span class="title function_">match</span>() 方法就只能在 string 中执行一次匹配。如果没有找到任何匹配的文本， <span class="title function_">match</span>() 将返回 <span class="literal">null</span>。否则，它将返回一个数组，其中存放了与它找到的匹配文本有关的信息。该数组的第 <span class="number">0</span> 个元素存放的是匹配文本，而其余的元素存放的是与正则表达式的子表达式匹配的文本。除了这些常规的数组元素之外，返回的数组还含有两个对象属性。index 属性声明的是匹配文本的起始字符在 stringObject 中的位置，input 属性声明的是对 string 的引用</span><br></pre></td></tr></table></figure><p><strong>匹配字符串</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world!&quot;</span></span><br><span class="line"><span class="keyword">var</span> value = str.<span class="title function_">match</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> value1 = str.<span class="title function_">match</span>(<span class="string">&quot;world&quot;</span>).<span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">var</span> value2 = str.<span class="title function_">match</span>(<span class="string">&quot;World&quot;</span>) <span class="comment">// W是大写</span></span><br><span class="line">#返回值分别是</span><br><span class="line">[<span class="string">&#x27;world&#x27;</span>, <span class="attr">index</span>: <span class="number">6</span>, <span class="attr">input</span>: <span class="string">&#x27;Hello world!&#x27;</span>, <span class="attr">groups</span>: <span class="literal">undefined</span>]</span><br><span class="line"><span class="string">&#x27;world&#x27;</span></span><br><span class="line"><span class="literal">null</span></span><br></pre></td></tr></table></figure><p><strong>匹配正则</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;chrome MicroMessenger&#x27;</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">match</span>(<span class="regexp">/chrome/i</span>)</span><br><span class="line"><span class="keyword">var</span> n1 = str.<span class="title function_">match</span>(<span class="regexp">/chrome/i</span>).<span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">var</span> n2 = str.<span class="title function_">match</span>(<span class="regexp">/chrome/g</span>)</span><br><span class="line">#返回值分别是</span><br><span class="line">[<span class="string">&#x27;chrome&#x27;</span>, <span class="attr">index</span>: <span class="number">0</span>, <span class="attr">input</span>: <span class="string">&#x27;chrome MicroMessenger&#x27;</span>, <span class="attr">groups</span>: <span class="literal">undefined</span>]</span><br><span class="line"><span class="string">&#x27;chrome&#x27;</span></span><br><span class="line">[<span class="string">&#x27;chrome&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="search"><a href="#search" class="headerlink" title="search() "></a><strong><font color='red'>search() </font></strong></h3><p>**返回新的值，**用于检索指定字符或检索与正则表达式相匹配字符，如果没有找到任何匹配项，则返回 -1。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr. Blue has a blue house&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">search</span>(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">15</span></span><br><span class="line"></span><br><span class="line">#实例<span class="number">1</span>  忽略大小写</span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr. Blue has a blue house&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">search</span>(<span class="regexp">/blue/i</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><br><h3 id="includes"><a href="#includes" class="headerlink" title="includes() "></a><strong><font color='red'>includes() </font></strong></h3><p>**返回布尔值，**判断字符串是否包含指定的字符。如果找到匹配的字符串则返回 true，否则返回 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob。&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">includes</span>(<span class="string">&quot;world&quot;</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">includes</span>(<span class="string">&quot;world&quot;</span>, <span class="number">12</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="split"><a href="#split" class="headerlink" title="split()"></a><strong><font color='red'>split()</font></strong></h3><p>**返回新的值，**把一个字符串分割成字符串数组（字符串转数组）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">split</span>(separator,limit)</span><br><span class="line">separator：可选。字符串或正则表达式，从该参数指定的地方分割 string <span class="title class_">Object</span>。</span><br><span class="line">limit：可选。 该参数可指定返回的数组的最大长度。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;H&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;How are you doing today?&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>,<span class="number">3</span>); <span class="comment">// 用空格分割，并且数组长度为3</span></span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;How&#x27;</span>,<span class="string">&#x27;are&#x27;</span>,<span class="string">&#x27;you&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="trim"><a href="#trim" class="headerlink" title="trim()"></a><strong><font color='red'>trim()</font></strong></h3><p>**返回新的值，**去除字符串的头尾空格。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;       Runoob        &quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">trim</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Runoob</span></span><br></pre></td></tr></table></figure><br><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat() "></a><strong><font color='red'>repeat() </font></strong></h3><p><strong>返回新的值</strong>，字符串复制指定次数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">repeat</span>(count)</span><br><span class="line">count：必需，设置要复制的次数。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Runoob&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">repeat</span>(<span class="number">2</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;RunoobRunoob&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase() "></a><strong><font color='red'>toLowerCase() </font></strong></h3><p>**返回新的值，**用于把字符串转换为小写。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;RUNRON&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">toLowerCase</span>()  </span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;runron&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase()"></a><strong><font color='red'>toUpperCase()</font></strong></h3><p>**返回新的值，**用于把字符串转换为大写。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;runron&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">toUpperCase</span>()</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;RUNRON&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="startsWith"><a href="#startsWith" class="headerlink" title="startsWith() "></a><strong><font color='red'>startsWith() </font></strong></h3><p>**返回新的值，**判断参数字符串是否在原字符串的头部。如果是以指定的子字符串开头返回 true，否则 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">startsWith</span>(searchvalue, start)</span><br><span class="line">searchvalue：必需，要查找的字符串。</span><br><span class="line">start：可选，查找的开始位置，默认为 <span class="number">0</span>。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">startsWith</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">startsWith</span>(<span class="string">&quot;world&quot;</span>, <span class="number">6</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="endsWith"><a href="#endsWith" class="headerlink" title="endsWith()"></a><strong><font color='red'>endsWith()</font></strong></h3><p>**返回新的值，**判断参数字符串是否在原字符串的尾部。如果是以指定的子字符串开头返回 true，否则 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">endsWith</span>(searchvalue, start)</span><br><span class="line">searchvalue：必需，要查找的字符串。</span><br><span class="line">start：可选，查找的开始位置，默认为 <span class="number">0</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> string = <span class="string">&quot;apple,banana,orange&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = string.<span class="title function_">endsWith</span>(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="padStart"><a href="#padStart" class="headerlink" title="padStart()"></a><strong><font color='red'>padStart()</font></strong></h3><p>**返回新的值，**表示用参数字符串补全头部；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">padStart</span>(num，<span class="title class_">String</span>)</span><br><span class="line">num：第一个参数是指定生成的字符串的最小长度</span><br><span class="line"><span class="title class_">String</span>：补全字符串的参数字符串 如果没有指定第二个参数，默认用空格填充。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> n =a.<span class="title function_">padStart</span>(<span class="number">5</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;ooabc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果指定的长度小于或者等于原字符串的长度，则返回原字符串:</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="string">&quot;hello&quot;</span>.<span class="title function_">padStart</span>(<span class="number">5</span>,<span class="string">&quot;A&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果原字符串加上补全字符串长度大于指定长度，则截去超出的补的字符串</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="string">&quot;qqqqq4&quot;</span>.<span class="title function_">padStart</span>(<span class="number">11</span>,<span class="string">&quot;,wwwwww6&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;,wwwwqqqqq4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">var</span> n = a.<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;01&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="padEnd"><a href="#padEnd" class="headerlink" title="padEnd() "></a><strong><font color='red'>padEnd() </font></strong></h3><p>返回新的值，表示用参数字符串补全尾部；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> n =a.<span class="title function_">padStart</span>(<span class="number">5</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;abcoo&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf() "></a><strong><font color='red'>valueOf() </font></strong></h3><p>返回 String 对象的原始值。</p><p>通常由 JavaScript 在后台自动进行调用，而不是显式地处于代码中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">valueOf</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Hello world!&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;charAt&quot;&gt;&lt;a href=&quot;#charAt&quot; class=&quot;headerlink&quot; title=&quot;charAt() &quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;charAt() &lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;**返回新的</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>Array方法集</title>
    <link href="http://example.com/posts/2b2e443a.html"/>
    <id>http://example.com/posts/2b2e443a.html</id>
    <published>2025-08-03T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.318Z</updated>
    
    <content type="html"><![CDATA[<p>**改变原数组(变异)：**push()和pop()，shift() 和 unshift()，sort()，splice()，reverse()</p><p>**返回新数组(非变异)：**join()，concat()，slice()… …等</p><h3 id="map"><a href="#map" class="headerlink" title="map()"></a><strong><font color='red'>map()</font></strong></h3><p>**返回新的数组，**获取某个数组对象中满足条件的单个属性组成一个新的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStudentsName = students.<span class="title function_">map</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span>)</span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&quot;sam&quot;</span>, <span class="string">&quot;john&quot;</span>, <span class="string">&quot;dean&quot;</span>, <span class="string">&quot;timothy&quot;</span>, <span class="string">&quot;frank&quot;</span>, <span class="string">&quot;timothy&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStudentsName = students.<span class="title function_">map</span>(<span class="function"><span class="params">student</span> =&gt;</span> (&#123;<span class="attr">name</span>: student.<span class="property">name</span>&#125;))</span><br><span class="line">#返回值：</span><br><span class="line">[<span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a><strong><font color='red'>filter()</font></strong></h3><p>**返回新的数组，**返回所有满足条件的新数组（遍历数组所有内容 返回所有满足条件的），如果没有符合条件的元素返回 undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> filteredStudentAge = students.<span class="title function_">filter</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &gt;= <span class="number">24</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">[&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;sam&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">26</span>, <span class="string">&quot;score&quot;</span>: <span class="number">80</span>&#125;,&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;john&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">25</span>, <span class="string">&quot;score&quot;</span>: <span class="number">86</span>&#125;]</span><br></pre></td></tr></table></figure><h3 id="find"><a href="#find" class="headerlink" title="find()"></a><strong><font color='red'>find()</font></strong></h3><p>**返回新的值，**如果有一个元素满足条件就返回这个元素，剩余的元素不会再执行检测，如果没有符合条件的元素返回 undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> findStudentsName = students.<span class="title function_">find</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span> === <span class="string">&#x27;timothy&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;timothy&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="string">&quot;score&quot;</span>: <span class="number">95</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">findStudentsName.<span class="property">name</span> = <span class="string">&#x27;小米&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(students)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;sam&#x27;, age: 26, score: 80 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;john&#x27;, age: 25, score: 86 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;dean&#x27;, age: 20, score: 78 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;小米&#x27;, age: 18, score: 95 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;frank&#x27;, age: 21, score: 67 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;timothy&#x27;, age: 8, score: 30 &#125;</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><br><h3 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex() "></a><strong><font color='red'>findIndex() </font></strong></h3><p>**返回新的值，**如果有一个元素满足条件就返回这个元素的索引，剩余的元素不会再执行检测，如果没有符合条件的元素返回-1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> findStudentsName = students.<span class="title function_">findIndex</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span> === <span class="string">&#x27;timothy&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><br><h3 id="some"><a href="#some" class="headerlink" title="some()"></a><strong><font color='red'>some()</font></strong></h3><p>**返回一个布尔值，**如果有一个元素满足条件，则表达式返回true, 剩余的元素不会再执行检测</p><p>some在碰到return true的时候，中止循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> someStudentsName = students.<span class="title function_">some</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &lt; <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="every"><a href="#every" class="headerlink" title="every()"></a><strong><font color='red'>every()</font></strong></h3><p>**返回一个布尔值，**数组内所有元素都要满足条件才返回true， 如有一个不满足就返回false 剩余的元素不会再执行检测，不会对空数组进行检测，空数组调用返回的是true</p><p>every在碰到return false的时候，中止循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> everyStudentsName = students.<span class="title function_">every</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &lt; <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a><strong><font color='red'>includes()</font></strong></h3><p>**返回一个布尔值，**用来判断一个数组是否包含一个指定的值，包含则返回true，否则false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>,<span class="string">&#x27;lemon&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> includesApple = fruitArr.<span class="title function_">includes</span>(<span class="string">&#x27;apple&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a><strong><font color='red'>reduce()</font></strong></h3><p><strong>累加器 计算总分数</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, arr</span>) =&gt;</span> &#123;...&#125;, init)</span><br><span class="line"> <span class="attr">prev</span>: 必需。初始值init, 或者计算结束后的返回值。初始值<span class="number">0</span>即init设置的值</span><br><span class="line">        <span class="attr">cur</span>: 必需。当前正在处理的数组元素(类似遍历出来的每一项)</span><br><span class="line">        <span class="attr">index</span>: 可选。表示当前正在处理的数组元素的索引，若提供init值，则索引为<span class="number">0</span>，否则索引为<span class="number">1</span>；</span><br><span class="line">        <span class="attr">arr</span>: 可选。当前元素所属的数组。</span><br><span class="line">        <span class="attr">init</span>: 可选。传递给函数的初始值，不传值默认为数组第一项（第一次传给prev的）</span><br><span class="line">        </span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reduceSum = students.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> prev + cur.<span class="property">score</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">436</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">65</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> aa = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(prev); <span class="comment">// init不传值默认初始值是65</span></span><br><span class="line"><span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">125</span></span><br></pre></td></tr></table></figure><br><h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight()"></a><strong><font color='red'>reduceRight()</font></strong></h3><p><strong>累加器 计算总分数</strong></p><p>reduceRight() 方法的功能和 <a href="https://www.runoob.com/jsref/jsref-reduce.html">reduce()</a> 功能是一样的，不同的是 reduceRight() 从数组的末尾向前将数组中的数组项做累加。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">reduceRight</span>(<span class="function">(<span class="params">prev, cur, index, arr</span>) =&gt;</span> &#123;...&#125;, init)</span><br><span class="line"> <span class="attr">prev</span>: 必需。初始值init, 或者计算结束后的返回值。初始值<span class="number">0</span>即init设置的值</span><br><span class="line">        <span class="attr">cur</span>: 必需。当前正在处理的数组元素(类似遍历出来的每一项)</span><br><span class="line">        <span class="attr">index</span>: 可选。表示当前正在处理的数组元素的索引，若提供init值，则索引为<span class="number">0</span>，否则索引为<span class="number">1</span>；</span><br><span class="line">        <span class="attr">arr</span>: 可选。当前元素所属的数组。</span><br><span class="line">        <span class="attr">init</span>: 可选。传递给函数的初始值，不传值默认为数组最后一项（第一次传给prev的）</span><br><span class="line">       </span><br><span class="line"> <span class="keyword">var</span> numbers = [<span class="number">65</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">4</span>];</span><br><span class="line"> <span class="keyword">let</span> aa = numbers.<span class="title function_">reduceRight</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(prev); <span class="comment">// init不传值默认初始值是4</span></span><br><span class="line">   <span class="keyword">return</span> prev + cur;</span><br><span class="line"> &#125;);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">125</span></span><br></pre></td></tr></table></figure><br><h3 id="concat"><a href="#concat" class="headerlink" title="concat()"></a><strong><font color='red'>concat()</font></strong></h3><p>**返回新的数组，**连接两个或更多的数组，并返回结果</p><p>现在推荐扩展运算符：const concatArray &#x3D; […[1, 2, 3, 4, 5],  …[‘a’, ‘b’]]</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> concatArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].<span class="title function_">concat</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span> ]</span><br></pre></td></tr></table></figure><br><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a><strong><font color='red'>indexOf()</font></strong></h3><p><strong>返回数组中某个指定的第一个元素的索引</strong>。如果在数组中没找到指定元素则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">indexOf</span>(item,start)</span><br><span class="line">     <span class="attr">item</span>:必须。查找的元素。</span><br><span class="line">     <span class="attr">start</span>:可选的整数参数，规定在数组中开始检索的位置</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>,<span class="string">&#x27;lemon&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> indexOfArray = fruitArr.<span class="title function_">indexOf</span>(<span class="string">&#x27;apple&#x27;</span>)</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> indexOfArray = fruitArr.<span class="title function_">indexOf</span>(<span class="string">&#x27;apple&#x27;</span>, <span class="number">3</span>)</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><br><h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf() "></a><strong><font color='red'>lastIndexOf() </font></strong></h3><p><strong>返回数组中某个指定的元素最后出现的索引</strong>。如果在数组中没找到指定元素则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#语法：array.<span class="title function_">lastIndexOf</span>(item,start)</span><br><span class="line">     <span class="attr">item</span>:必须。查找的元素。</span><br><span class="line">     <span class="attr">start</span>:可选的整数参数，规定在数组中开始检索的位置</span><br><span class="line">     </span><br><span class="line">从右往左第一个<span class="title class_">Apple</span>的索引</span><br><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Orange&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> a = fruits.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line">从索引<span class="number">4</span>(包含)开始从右往左第一个<span class="title class_">Apple</span>的索引</span><br><span class="line"><span class="keyword">const</span> fruits=[<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Orange&quot;</span>,<span class="string">&quot;Apple&quot;</span>,<span class="string">&quot;Mango&quot;</span>,<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Orange&quot;</span>,<span class="string">&quot;Apple&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> a = fruits.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;Apple&quot;</span>,<span class="number">4</span>); <span class="comment">//2</span></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><br><h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a><strong><font color='red'>splice()</font></strong></h3><p>**改变原数组，**可以实现删除、插入和替换元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">splice</span>(index,howmany,item1,.....,itemX)</span><br><span class="line">      <span class="attr">index</span>: 必需。规定从何处添加/删除元素。该参数是开始插入和（或）删除的数组元素的索引，必须是数字。</span><br><span class="line">      howmany：可选。删除的项数(删除多少元素)。必须是数字，<span class="number">0</span>就是不删除。如果未规定此参数，则删除从 index    开始到原数组结尾的所有元素。</span><br><span class="line">      item1, ..., itemX：可选。要添加到数组的新元素</span><br><span class="line">   </span><br><span class="line">      </span><br><span class="line">删除：可以删除任意数量的项，只需指定<span class="number">2</span>个参数：要删除的第一项的位置和要删除的项数。例如， <span class="title function_">splice</span>(<span class="number">0</span>,<span class="number">2</span>)会删除数组中的前两项。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  <span class="comment">// [&#x27;orange&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">//  [&#x27;mango&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  <span class="comment">// [&#x27;mango&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">//  [&#x27;apple&#x27;, &#x27;orange&#x27;]</span></span><br><span class="line"></span><br><span class="line">插入：可以向指定位置插入任意数量的项，只需提供<span class="number">3</span>个参数：起始位置、 <span class="number">0</span>（要删除的项数）和 要插入的项。例如，<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&#x27;lemon&#x27;</span>,<span class="string">&#x27;6&#x27;</span>)会从当前数组的索引<span class="number">2</span>开始插入lemon和<span class="number">6</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;lemon&#x27;</span>, <span class="string">&#x27;6&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  </span><br><span class="line"><span class="comment">// [&#x27;mango&#x27;, &#x27;apple&#x27;, &#x27;lemon&#x27;, &#x27;6&#x27;, &#x27;orange&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">替换：可以向指定位置插入任意数量的项，且同时删除任意数量的项，只需指定 <span class="number">3</span> 个参数：起始位置、要删除的项数和要插入的任意数量的项。插入的项数不必与删除的项数相等。例如，<span class="title function_">splice</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;lemon&#x27;</span>)会删除当前数组位置 <span class="number">1</span> 的项，然后再从位置 <span class="number">2</span> 开始插入<span class="string">&#x27;lemon&#x27;</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;lemon&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray) <span class="comment">// [&#x27;mango&#x27;, &#x27;lemon&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">// [&#x27;apple&#x27;, &#x27;orange&#x27;]</span></span><br></pre></td></tr></table></figure><br><h3 id="slice"><a href="#slice" class="headerlink" title="slice()"></a><strong><font color='red'>slice()</font></strong></h3><p>**返回新的数组，**取数组的某个部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> heroes = [<span class="string">&quot;李白&quot;</span>, <span class="string">&#x27;蔡文姬&#x27;</span>, <span class="string">&#x27;韩信&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>, <span class="string">&#x27;妲己&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>) <span class="comment">// 从索引0开始截取(包含)，截取到索引3(不包含)</span></span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&#x27;李白&#x27;</span>, <span class="string">&#x27;蔡文姬&#x27;</span>, <span class="string">&#x27;韩信&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(<span class="number">2</span>, -<span class="number">1</span>) <span class="comment">// 从索引2开始截取(包含)，-1代表截取到倒数第一位（不含）</span></span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&#x27;韩信&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(-<span class="number">4</span>) <span class="comment">// 截取后四位</span></span><br><span class="line">#返回值：[<span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach() "></a><strong><font color='red'>forEach() </font></strong></h3><p>遍历数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#原生的foreach是无法跳出循环的  <span class="keyword">for</span>遍历用<span class="keyword">break</span>跳出循环   jq的each的用<span class="keyword">return</span> falsel来替代<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">#forEach</span><br><span class="line"><span class="keyword">let</span> paymentMethodIndex = <span class="string">&#x27;&#x27;</span></span><br><span class="line">students.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    paymentMethodIndex = index;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 退出不了循环</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex) <span class="comment">// 打印5</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">for</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; students.<span class="property">length</span>; index++) &#123;</span><br><span class="line">    paymentMethodIndex = index</span><br><span class="line">    <span class="keyword">break</span> <span class="comment">// 遍历第一次就终止循环了</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex); <span class="comment">// 打印0</span></span><br><span class="line"></span><br><span class="line">#$.each</span><br><span class="line">$.<span class="title function_">each</span>(students, <span class="keyword">function</span> (<span class="params">index, item</span>) &#123;</span><br><span class="line">    paymentMethodIndex = index</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 遍历第一次就终止循环了</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex); <span class="comment">// 打印0</span></span><br><span class="line"></span><br><span class="line"># 利用forEach给遍历出来的对象添加属性</span><br><span class="line"><span class="keyword">let</span> list1 = []</span><br><span class="line">students.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> newList = item <span class="comment">// 直接给item赋值会报错</span></span><br><span class="line">    newList.<span class="property">value</span> = index.<span class="title function_">toString</span>();</span><br><span class="line">    list1 = [...list1, newList]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(list1);</span><br><span class="line">返回值：</span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;0&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;4&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;5&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br><h3 id="join"><a href="#join" class="headerlink" title="join()"></a><strong><font color='red'>join()</font></strong></h3><p><strong>返回新的数组</strong>，用于把数组中的所有元素用指定的字符串连接起来（数组转字符串）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> energy = fruits.<span class="title function_">join</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Banana</span>,<span class="title class_">Orange</span>,<span class="title class_">Apple</span>,<span class="title class_">Mango</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> energy = fruits.<span class="title function_">join</span>(<span class="string">&quot; / &quot;</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Banana</span> / <span class="title class_">Orange</span> / <span class="title class_">Apple</span> / <span class="title class_">Mango</span></span><br></pre></td></tr></table></figure><br><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString() "></a><strong><font color='red'>toString() </font></strong></h3><p>**返回新数组，**把数组转换为字符串，并返回结果。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruitArr = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> fruitString = fruits.<span class="title function_">toString</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span></span><br></pre></td></tr></table></figure><br><h3 id="fill"><a href="#fill" class="headerlink" title="fill() "></a><strong><font color='red'>fill() </font></strong></h3><p>**改变原数组，**用一个值替换数组中的元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#array.<span class="title function_">fill</span>(value, start, end)</span><br><span class="line">value：必需。填充的值（替换数组中的值）。</span><br><span class="line">start：可选。开始填充位置。已经填充</span><br><span class="line">end：可选。停止填充位置 (默认为 array.<span class="property">length</span>) 没填充</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">fill</span>(<span class="string">&quot;88&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">fill</span>(<span class="string">&quot;66&quot;</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;66&quot;</span>, <span class="string">&quot;Mango&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="from"><a href="#from" class="headerlink" title="from()"></a><strong><font color='red'>from()</font></strong></h3><p><strong>1、用来将两种对象转换成数组转换成数组（ES6）</strong></p><p>两种对象：</p><p>（1）.部署了Iterator接口的对象，比如：Set，Map，Array。</p><p>（2）.类数组对象，什么叫类数组对象，就是一个对象必须有length属性，没有length，转出来的就是空数组，类数组对象的属性名必须为数值型或字符串型的数字（属性名不是数值或字符串数值返回的是一个都是undefined的数组）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k1&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k2&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k3&#x27;</span>, <span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(map));</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&#x27;k1&#x27;</span>, <span class="number">1</span>],[<span class="string">&#x27;k2&#x27;</span>, <span class="number">2</span>],[<span class="string">&#x27;k3&#x27;</span>, <span class="number">3</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(set));</span><br><span class="line">#返回值</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123; <span class="number">0</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="number">1</span>: [<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>], <span class="string">&#x27;length&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;tom&#x27;</span>,[<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123;  <span class="comment">// 属性名不是数字或字符串数值，因此不是类数组</span></span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, </span><br><span class="line">    <span class="string">&#x27;friends&#x27;</span>: [<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>],</span><br><span class="line">    <span class="attr">length</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike)</span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">// [ undefined, undefined ]</span></span><br></pre></td></tr></table></figure><p><strong>2、<code>Array.from</code>还可以接受第二个参数，作用类似于数组的<code>map</code>方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</strong></p><p><strong>返回新的数组</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(arr)</span><br><span class="line"><span class="keyword">let</span> newArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(set, <span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">1</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><br><h3 id="isArray"><a href="#isArray" class="headerlink" title="isArray() "></a><strong><font color='red'>isArray() </font></strong></h3><p>**返回一个布尔值，**用于判断一个对象是否为数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> x = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(fruits);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse() "></a><strong><font color='red'>reverse() </font></strong></h3><p>**改变原数组，**颠倒数组中元素的顺序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">reverse</span>()</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;Mango&#x27;</span>, <span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Orange&#x27;</span>, <span class="string">&#x27;Banana&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="sort"><a href="#sort" class="headerlink" title="sort() "></a><strong><font color='red'>sort() </font></strong></h3><p>**改变原数组，**对数组的元素进行排序，默认排序顺序为按字母或数字(个位数)升序。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">sort</span>();</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Apple&quot;</span>,<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Mango&quot;</span>,<span class="string">&quot;Orange&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[1,2,3,4,5,6,7]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// a遍历出来是降序 100 40 25 10 5 1</span></span><br><span class="line"><span class="comment">// b遍历出来是升序 1 5 10 25 40 100</span></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">// 降序</span></span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[100, 40, 25, 10, 5, 1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);  <span class="comment">// 升序</span></span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[1,5,10,25,40,100]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr1 = [</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;张飞&#x27;</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;曹操&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;关旭&#x27;</span>, <span class="attr">age</span>:<span class="number">60</span>&#125;</span><br><span class="line">]</span><br><span class="line">arr1.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">age</span> - b.<span class="property">age</span>)</span><br><span class="line">#返回值</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;曹操&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;张飞&#x27;</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;关旭&#x27;</span>, <span class="attr">age</span>:<span class="number">60</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br><h3 id="push"><a href="#push" class="headerlink" title="push() "></a><strong><font color='red'>push() </font></strong></h3><p>**改变原数组，**向数组的尾部添加一个或更多元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">push</span>(<span class="string">&quot;11&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>, <span class="string">&quot;11&quot;</span>];</span><br></pre></td></tr></table></figure><br><h3 id="pop"><a href="#pop" class="headerlink" title="pop()"></a><strong><font color='red'>pop()</font></strong></h3><p>**改变原数组，**删除数组的尾部最后一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> res = fruits.<span class="title function_">pop</span>()</span><br><span class="line">#返回值</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits) <span class="comment">// [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// &#x27;Mango&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="shift"><a href="#shift" class="headerlink" title="shift() "></a><strong><font color='red'>shift() </font></strong></h3><p>**改变原数组，**把数组的第一个元素从其中删除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> res = fruits.<span class="title function_">shift</span>()</span><br><span class="line">#返回值</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits) <span class="comment">// [&#x27;Orange&#x27;, &#x27;Apple&#x27;, &#x27;Mango&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// &#x27;Banana&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a><strong><font color='red'>unshift()</font></strong></h3><p>**改变原数组，**向数组的开头添加一个或更多元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">unshift</span>(<span class="string">&quot;Lemon&quot;</span>,<span class="string">&quot;Pineapple&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Lemon</span>,<span class="title class_">Pineapple</span>,<span class="title class_">Banana</span>,<span class="title class_">Orange</span>,<span class="title class_">Apple</span>,<span class="title class_">Mango</span></span><br></pre></td></tr></table></figure><br><h3 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin()"></a><strong><font color='red'>copyWithin()</font></strong></h3><p>**返回新数组，**用于从数组的指定位置拷贝元素到数组的另一个指定位置中。  原数组长度保持不变。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># array.<span class="title function_">copyWithin</span>(target, start, end)</span><br><span class="line">target：必需。复制到指定目标索引位置。</span><br><span class="line">start：可选。元素复制的起始位置。</span><br><span class="line">end：可选。停止复制的索引位置 (默认为 array.<span class="property">length</span>)。如果为负值，表示倒数。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;的&quot;</span>, <span class="string">&quot;好&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> n = fruits.<span class="title function_">copyWithin</span>(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;的&quot;</span>, <span class="string">&quot;好&quot;</span>, <span class="string">&quot;吗&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> n = fruits.<span class="title function_">copyWithin</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>,<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>,<span class="string">&quot;好&quot;</span>, <span class="string">&quot;吗&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="entries"><a href="#entries" class="headerlink" title="entries() "></a><strong><font color='red'>entries() </font></strong></h3><p>**返回新的数组，**返回一个数组的迭代对象，该对象包含数组的键值对 (key&#x2F;value)。</p><p>迭代对象中数组的索引值作为 key， 数组元素作为 value。</p><p><strong>可迭代对象：可以使用for循环遍历的对象,我们称之为可迭代对象.</strong></p><p><code>Object.entries()</code> 可以把一个对象的键值以数组的形式遍历出来，结果和 <code>for...in</code> 一致，但不会遍历原型属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;你&#x27;</span>, <span class="string">&#x27;啊&#x27;</span>, <span class="string">&#x27;的&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> newArr = <span class="title class_">Object</span>.<span class="title function_">entries</span>(arr)</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&quot;0&quot;</span>, <span class="string">&quot;你&quot;</span>],[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;啊&quot;</span>],[<span class="string">&quot;2&quot;</span>, <span class="string">&quot;的&quot;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">baz</span>: <span class="string">&#x27;abc&#x27;</span> &#125;; </span><br><span class="line"><span class="keyword">const</span> newobjr = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>], [<span class="string">&#x27;baz&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>]]</span><br></pre></td></tr></table></figure><br><h3 id="keys"><a href="#keys" class="headerlink" title="keys() "></a><strong><font color='red'>keys() </font></strong></h3><p>**返回新的数组，**用于从数组创建一个包含数组键的可迭代对象。</p><p>如果对象是数组返回 true，否则返回 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="string">&#x27;a&#x27;</span>: <span class="number">123</span>, <span class="string">&quot;b&quot;</span>: <span class="number">456</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> newObj = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;asfdw&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> newstr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(str)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">24</span>, <span class="number">45</span>, <span class="number">67</span>];</span><br><span class="line"><span class="keyword">let</span> newArr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(arr)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="flat"><a href="#flat" class="headerlink" title="flat()"></a><strong><font color='red'>flat()</font></strong></h3><p>**返回新的数组，**用于将嵌套的数组“拉平</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#array.<span class="title function_">fill</span>(num)</span><br><span class="line">num：默认<span class="number">1</span>，<span class="number">1</span>拉平一层数组  <span class="number">2</span>拉平两层数组  <span class="title class_">Infinity</span>拉平多层</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,[<span class="number">11</span>]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,[<span class="number">11</span>, [<span class="number">666</span>]]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, [<span class="number">11</span>, [<span class="number">666</span>, [<span class="string">&#x27;qqq&#x27;</span>]]]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;**改变原数组(变异)：**push()和pop()，shift() 和 unshift()，sort()，splice()，reverse()&lt;/p&gt;
&lt;p&gt;**返回新数组(非变异)：**join()，concat()，slice()… …等&lt;/p&gt;
&lt;h3 id=&quot;ma</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>前端部署真的不简单</title>
    <link href="http://example.com/posts/32ed7c92.html"/>
    <id>http://example.com/posts/32ed7c92.html</id>
    <published>2025-07-25T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.317Z</updated>
    
    <content type="html"><![CDATA[<p> 现在大部分的中小型公司部署前端代码都是比较简单的，主要步骤如下:</p><p>首先，通过脚手架提供的命令<code>npm run build</code>打包前端代码，生成<code>dist</code>文件夹；</p><p>最后，将<code>dist</code>文件夹丢给后台开发人员放在他们的工程里面，随后台一起部署；现在普遍是前后端分开部署，因此，利用<code>nginx</code>起一个web服务器，将<code>dist</code>文件夹放到指定的路径下，配置下<code>nginx</code>访问路径，对于请求接口使用<code>proxy_pass</code>进行转发，解决跨域的问题。</p><p>更加高端一点的操作，是利用<code>CI/CD + Docker</code>进行自动化部署。</p><p>但是，你是否真的想过前端部署真的就这么简单吗？</p><p><strong>这其实是一个非常严肃且复杂的问题，因为这关系到线上生产环境的稳定</strong>。</p><p>有一天，从自知乎上看到一篇张云龙大佬在2014年写的文章，非常有启发，即使这篇文章距离现在有快10年了，但是其中的思想仍然熠熠生辉。</p><p>因为写的真的是太好了，为了让更多的人看到，所以大部分内容直接就照搬过来，为了让自己加深印象。如果想看原文，原文网址<sup>[1]</sup>在这里。</p><p>那让我们从原始的前端开发讲起。</p><p>下图是一个 <code>index.html</code> 页面和它的样式文件 <code>a.css</code>，无需编译，本地预览，丢到服务器，等待用户访问。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-5f35ebfcb7889871.png" alt="image.png"></p><p>哇，前端这么简单，门槛好低啊。这也是前端有太多人涌入进来的原因。</p><p>接着，我们访问页面，看到效果，再查看一下网络请求，200！不错，太完美了！</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-e8d7f68eefc2e525.png" alt="image.png"></p><p>那么，研发完成。。。。了么？</p><p>等等，这还没完呢！</p><p>对于像 BAT 这种公司来说，那些变态的访问量和性能指标，将会让前端一点也不好玩。</p><p>看看那个 <code>a.css</code> 的请求，如果每次用户访问页面都要加载，是不是很影响性能，很浪费带宽啊，我们希望最好这样：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-91691e2c859803f0.png" alt="image.png"></p><p>利用<code>304</code>，让浏览器使用本地缓存。</p><p>但，这样也就够了吗？</p><p>不够！</p><p><code>304</code>叫协商缓存，这玩意还是要和服务器通信一次，我们的优化级别是变态级，所以必须彻底灭掉这个请求，要变成这样：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-b0853d7744a48a4c.png" alt="image.png"></p><p>强制浏览器使用本地缓存(<code>cache-control/expires</code>)，不要和服务器通信。</p><p>好了，请求方面的优化已经达到变态级别，那问题来了：<strong>你都不让浏览器发资源请求了，这缓存咋更新</strong>？</p><p>很好，相信有人想到了办法：<strong>通过更新页面中引用的资源路径，让浏览器主动放弃缓存，加载新资源</strong>。</p><p>像这样：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-15516e4ffb4b2c41.png" alt="image.png"></p><p>下次上线，把链接地址改成新的版本，这就更新资源了。</p><p>问题解决了么？当然没有，思考这种情况：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-153b7d83737d3593.png" alt="image.png"></p><p>页面引用了3个 css 文件，而某次上线只改了其中的<code>a.css</code>，如果所有链接都更新版本，就会导致<code>b.css</code>，<code>c.css</code>的缓存也失效，那岂不是又有浪费了？</p><p>不难发现，要解决这种问题，<strong>必须让url的修改与文件内容关联，也就是说，只有文件内容变化，才会导致相应url的变更，从而实现文件级别的精确缓存控制</strong>。</p><p>什么东西与文件内容相关呢？</p><p>我们会很自然的联想到利用<strong>数据摘要要算法</strong>对文件求摘要信息，摘要信息与文件内容一一对应，就有了一种可以精确到单个文件粒度的缓存控制依据了。</p><p>OK，那我们把 url 改成带摘要信息的：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-3573d077d3fcb269.png" alt="image.png"></p><p>这回再有文件修改，就只更新那个文件对应的 url 了，想到这里貌似很完美了。你觉得这就够了么？</p><p>图样图森破！</p><p>现代互联网企业，为了进一步提升网站性能，会把<strong>静态资源和动态网页分集群部署</strong>，静态资源会被部署到<code>CDN</code>节点上，网页中引用的资源也会变成对应的部署路径：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-4f47e87bcf50f76c.png" alt="image.png"></p><p>好了，当我要更新静态资源的时候，同时也会更新 html 中的引用吧，就好像这样：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-063e2c3806f2dcfc.png" alt="image.png"></p><p>这次发布，同时改了页面结构和样式，也更新了静态资源对应的url地址。现在重点来了，现在要发布代码上线，亲爱的前端研发同学，你来告诉我，<strong>咱们是先上线页面，还是先上线静态资源</strong>？</p><blockquote><p>这里的静态资源不仅仅包括css文件，也包括图片，以及不怎么经常变的资源。</p></blockquote><ol><li><p><strong>先部署动态页面，再部署静态资源</strong>：在二者部署的时间间隔内，如果有用户访问页面，就会在新的页面结构中加载旧的资源，并且把这个旧版本的资源当做新版本缓存起来，其结果就是：用户访问到了一个样式错乱的页面，除非手动刷新，否则在资源缓存过期之前，页面会一直执行错误。</p></li><li><p><strong>先部署静态资源，再部署动态页面</strong>：在部署时间间隔之内，有旧版本资源本地缓存的用户访问网站，由于请求的页面是旧版本的，资源引用没有改变，浏览器将直接使用本地缓存，这种情况下页面展现正常；但没有本地缓存或者缓存过期的用户访问网站，就会出现旧版本页面加载新版本资源的情况，导致页面执行错误，但当页面完成部署，这部分用户再次访问页面又会恢复正常了。</p></li></ol><p>好的，上面一坨分析想说的就是：先部署谁都不成！都会导致部署过程中发生页面错乱的问题。</p><p>所以，<strong>访问量不大的项目，可以让研发同学苦逼一把，等到半夜偷偷上线，先上静态资源，再部署页面，看起来问题少一些</strong>。这也是很多公司的部署方案。</p><p>但是，大公司超变态，没有这样的绝对低峰期，只有相对低峰期。</p><p>所以，为了稳定的服务，还得继续追求极致啊！</p><p>这个奇葩问题，起源于资源的 <strong>覆盖式发布</strong>，用待发布资源覆盖已发布资源，就有这种问题。</p><p>解决它也好办，就是实现 <strong>非覆盖式发布</strong>。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-16f1c876b1a4103b.png" alt="image.png"></p><p>看上图，用文件的摘要信息来对资源文件进行重命名，把摘要信息放到资源文件发布路径中，这样，内容有修改的资源就变成了一个新的文件发布到线上，不会覆盖已有的资源文件。上线过程中，<strong>先全量部署静态资源，再灰度部署页面</strong>，整个问题就比较完美的解决了。</p><p>因为很多前端开发同学不怎么接触部署，对灰度部署不太熟悉，下面将介绍下什么是灰度部署。</p><p>软件开发一般都是一个版本一个版本的迭代。新版本上线前都会经过测试，但就算这样，也不能保证上线了不出问题。</p><p>所以，在公司里上线新版本代码一般都是通过灰度系统。灰度系统可以把流量划分成多份，一份走新版本代码，一份走老版本代码。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-ce400daf8a625568.png" alt="image.png"></p><p>而且灰度系统支持设置流量的比例，比如可以把走新版本代码的流程设置为 5%，没啥问题了再放到 10%，50%，最后放到 100% 全量。这样可以把出现问题的影响降到最低。</p><p>不然一上来就全量，万一出了线上问题，那就是大事故。</p><p>另外，灰度系统不止这一个用途，比如，产品不确定某些改动是不是有效的，就要做 AB 实验，也就是要把流量分成两份，一份走 A 版本代码，一份走 B 版本代码。</p><p>那这样的灰度系统是怎么实现的呢？其实很多都是用 <code>nginx</code> 实现的。</p><p><code>nginx</code> 是一个反向代理的服务，用户请求发给它，由它转发给具体的应用服务器。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-377975742d586cd1.png" alt="image.png"></p><p>它的过程如下图所示：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-23caeb79b60d2fd2.png" alt="image.png"></p><p>首先，需要对流量进行染色，即对这个用户进行标注，让这个用户访问服务1，另外的用户访问服务2。染色的方式有很多，可以通过<code>cookie</code>来完成。不同的用户携带的<code>cookie</code>是不同的。第一染色的时候，所有的用户都访问服务1。</p><p>然后，第二次访问的时候，<code>nginx</code>根据用户携带的<code>cookie</code>进行转发到不同的服务，这样就完成了灰度访问。</p><p>好了，灰度部署就介绍到这里，回到原文讲的<code>先全量部署静态资源，再灰度部署页面</code>，这是什么意思呢？</p><p>首先，部署静态资源的时候，不要删除原来的静态资源，而是把新的静态资源发复制过去，因为文件名用摘要算法重命名的，所以不会发生重名的问题。</p><p>其次，灰度部署动态页面，也就是一部分用户访问老的页面，一部分用户访问新的页面。访问老页面的用户请求的还是老资源，直接使用缓存。访问新页面的用户访问新资源，此时新资源已经部署完成，所以不会访问老的资源，导致页面出现错误。</p><p>最后，根据访问情况，利用灰度系统，逐渐把访问老页面的用户过渡到访问新页面上。</p><p>所以，大公司的静态资源优化方案，基本上要实现这么几个东西：</p><ol><li><p><strong>配置超长时间的本地缓存：节省带宽，提高性能</strong></p></li><li><p><strong>采用内容摘要作为缓存更新依据：精确的缓存控制</strong></p></li><li><p><strong>静态资源CDN部署：优化网络请求</strong></p></li><li><p><strong>更资源发布路径实现非覆盖式发布：平滑升级</strong></p></li></ol><p>全套做下来，就是相对比较完整的静态资源缓存控制方案了，而且，还要注意的是，静态资源的缓存控制要求在<strong>前端所有静态资源加载的位置都要做这样的处理</strong>。</p><p>是的，所有！</p><p>什么js、css自不必说，还要包括js、css文件中引用的资源路径，由于涉及到摘要信息，引用资源的摘要信息也会引起引用文件本身的内容改变，从而形成级联的摘要变化，大概就是：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/19366098-237bd7ce92c8d511.png" alt="image.png"></p><p>到这里本文结束了，我们已经了解了前端部署中关于静态资源缓存要面临的优化和部署问题，新的问题又来了：这™让工程师怎么写码啊！！！</p><p>这又会扯出一堆有关模块化开发、资源加载、请求合并、前端框架等等的工程问题。</p><p>转载：<a href="https://mp.weixin.qq.com/s/RVnhy3YJfDVw-Iga3hiPvw">https://mp.weixin.qq.com/s/RVnhy3YJfDVw-Iga3hiPvw</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; 现在大部分的中小型公司部署前端代码都是比较简单的，主要步骤如下:&lt;/p&gt;
&lt;p&gt;首先，通过脚手架提供的命令&lt;code&gt;npm run build&lt;/code&gt;打包前端代码，生成&lt;code&gt;dist&lt;/code&gt;文件夹；&lt;/p&gt;
&lt;p&gt;最后，将&lt;code&gt;dist&lt;/cod</summary>
      
    
    
    
    <category term="后端与运维" scheme="http://example.com/categories/%E5%90%8E%E7%AB%AF%E4%B8%8E%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="nginx" scheme="http://example.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>移动端布局适配的方案</title>
    <link href="http://example.com/posts/e57c66af.html"/>
    <id>http://example.com/posts/e57c66af.html</id>
    <published>2025-07-01T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.316Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、移动端基础概念"><a href="#一、移动端基础概念" class="headerlink" title="一、移动端基础概念"></a><strong>一、移动端基础概念</strong></h2><h3 id="1-1、英寸"><a href="#1-1、英寸" class="headerlink" title="1.1、英寸"></a><strong><font color='red'>1.1、英寸</font></strong></h3><p>一般用英寸描述屏幕的物理大小，如电脑显示器的**<code>17</code><strong>、</strong><code>22</code><strong>，手机显示器的</strong><code>4.8</code><strong>、</strong><code>5.7</code>**等使用的单位都是英寸。</p><p>需要注意，上面的尺寸都是屏幕对角线的长度：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213392.png" alt="image-20231128223216371"></p><p>英寸(<strong><code>inch</code></strong>,缩写为**<code>in</code>**)在荷兰语中的本意是大拇指，一英寸就是指甲底部普通人拇指的宽度。</p><p>英寸和厘米的换算：<strong><code>1英寸 = 2.54 厘米</code></strong></p><br><h3 id="1-2、像素"><a href="#1-2、像素" class="headerlink" title="1.2、像素"></a><strong><font color='red'>1.2、像素</font></strong></h3><p>像素即一个小方块，它具有特定的位置和颜色。</p><p>图片、电子屏幕（手机、电脑）就是由无数个具有特定颜色和特定位置的小方块拼接而成。</p><p>像素可以作为图片或电子屏幕的最小组成单位。</p><p>下面我们使用<code>sketch</code>打开一张图片，将这些图片放大即可看到这些像素点：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213781.png" alt="&#96;&#96;image-20231128231437798&#96;&#96;"></p><p> 通常我们所说的分辨率有两种，屏幕分辨率和图像分辨率</p><br><h4 id="1）物理像素（分辨率）"><a href="#1）物理像素（分辨率）" class="headerlink" title="1）物理像素（分辨率）"></a><strong><font color='#10c300'>1）物理像素（分辨率）</font></strong></h4><h5 id="屏幕分辨率"><a href="#屏幕分辨率" class="headerlink" title="屏幕分辨率"></a><strong><font color='cornflowerblue'>屏幕分辨率</font></strong></h5><p>屏幕分辨率指一个屏幕具体由多少个像素点组成。下面是**<code>apple</code>**的官网上对手机分辨率的描述：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213831.png" alt="image-20231128231712585"></p><p><strong><code>iPhone XS Max</code><strong>和</strong><code>iPhone SE</code><strong>的分辨率分别为</strong><code>2688 x 1242</code><strong>和</strong><code>1136 x 640</code></strong>。这表示手机分别在垂直和水平上所具有的像素点数，出厂就设定好的。</p><p>当然分辨率高不代表屏幕就清晰，屏幕的清晰程度还与尺寸有关。</p><br><h5 id="图像分辨率"><a href="#图像分辨率" class="headerlink" title="图像分辨率"></a><strong><font color='cornflowerblue'>图像分辨率</font></strong></h5><p>我们通常说的**<code>图片分辨率</code><strong>其实是指图片含有的</strong>像素数**，比如一张图片的分辨率为**<code>800 x 400</code><strong>。这表示图片分别在垂直和水平上所具有的像素点数为</strong><code>800</code><strong>和</strong><code>400</code>**。</p><p>同一尺寸的图片，分辨率越高，图片越清晰。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213414.jpeg" alt="1701187735265"></p><br><h5 id="PPI（屏幕）"><a href="#PPI（屏幕）" class="headerlink" title="PPI（屏幕）"></a><strong><font color='cornflowerblue'>PPI（屏幕）</font></strong></h5><p><strong><code>PPI(Pixel Per Inch)</code></strong>：每英寸包括的像素数。</p><p>**<code>PPI</code>**可以用于描述屏幕的清晰度以及一张图片的质量。</p><p><strong>使用<code>PPI</code>描述图片时，<code>PPI</code>越高，图片质量越高，使用<code>PPI</code>描述屏幕时，<code>PPI</code>越高，屏幕越清晰。</strong></p><p>在上面描述手机分辨率的图片中，我们可以看到：<strong><code>iPhone XS Max</code><strong>和</strong><code>iPhone SE</code><strong>的</strong><code>PPI</code><strong>分别为</strong><code>458</code><strong>和</strong><code>326</code></strong>，这足以证明前者的屏幕更清晰。</p><p>由于手机尺寸为手机对角线的长度，我们通常使用如下的方法计算<code>PPI</code>:<br>$$<br>\frac {\sqrt{水平像素点数^{2}+垂直像素点数^{2}}} {尺寸}<br>$$<br>**<code>iPhone 6</code><strong>的</strong><code>PPI</code><strong>为：<br>$$<br>\frac {\sqrt{1334^{2}+750^{2}}} {4.7} &#x3D;325.6<br>$$<br>那它每英寸约含有</strong><code>326</code>**个物理像素点。</p><br><h5 id="DPI（打印-）"><a href="#DPI（打印-）" class="headerlink" title="DPI（打印 ）"></a><strong><font color='cornflowerblue'>DPI（打印 ）</font></strong></h5><p><strong><code>DPI(Dot Per Inch)</code></strong>：即每英寸包括的点数。</p><p>这里的点是一个抽象的单位，它可以是屏幕像素点、图片像素点也可以是打印机的墨点。</p><p>平时你可能会看到使用**<code>DPI</code><strong>来描述图片和屏幕，这时的</strong><code>DPI</code><strong>应该和</strong><code>PPI</code><strong>是等价的，</strong><code>DPI</code>最常用的是用于描述打印机，表示打印机每英寸可以打印的点数。**</p><p>一张图片在屏幕上显示时，它的像素点数是规则排列的，每个像素点都有特定的位置和颜色。</p><p>当使用打印机进行打印时，打印机可能不会规则的将这些点打印出来，而是使用一个个打印点来呈现这张图像，这些打印点之间会有一定的空隙，这就是<font color='orange' size="4"><code>DPI</code></font>所描述的：打印点的密度。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213851.png" alt="image-20231129004447572"></p><p>在上面的图像中我们可以清晰的看到，打印机是如何使用墨点来打印一张图像。</p><p>所以，打印机的**<code>DPI</code>**越高，打印图像的精细程度就越高，同时这也会消耗更多的墨点和时间。</p><br><h4 id="2）CSS像素（PX）"><a href="#2）CSS像素（PX）" class="headerlink" title="2）CSS像素（PX）"></a><strong><font color='#10c300'>2）CSS像素（PX）</font></strong></h4><p>在写<code>CSS</code>时，我们用到最多的单位是**<code>px</code><strong>，即</strong><code>CSS像素</code><strong>，当页面缩放比例为<code>100%</code>时，一个</strong><code>CSS像素</code><strong>等于一个设备独立像素。</strong>（width&#x3D;device-width; initial-scale&#x3D;1;  即页面缩放比为100%）**</p><p>但是**<code>CSS像素</code><strong>是很容易被改变的，当用户对浏览器进行了放大，</strong><code>CSS像素</code><strong>会被放大，这时一个</strong><code>CSS像素</code>**会跨越更多的物理像素，<strong>即元素的css像素数量不会改变，改变的只是每个css像素的大小</strong></p><p>也就是说<code>width: 128px</code>的元素在缩放200%以后，宽度依然是128个css像素，只不过<strong>每个css像素的宽度和高度</strong>变为原来的两倍。如果原本元素宽度为128个<strong>设备独立像素</strong>，那么缩放200%以后元素宽度为256个设备独立像素（css像素宽度始终是128）。</p><p><strong><code>页面的缩放系数 = CSS像素 / 设备独立像素</code></strong></p><br><h4 id="3）设备独立像素-重点"><a href="#3）设备独立像素-重点" class="headerlink" title="3）设备独立像素(重点)"></a><strong><font color='#10c300'>3）设备独立像素(重点)</font></strong></h4><p>智能手机发展非常之快，在几年之前，我们还用着分辨率非常低的手机，比如下面左侧的白色手机，它的分辨率是**<code>320x480</code>**，我们可以在上面浏览正常的文字、图片等等。</p><p>但是，随着科技的发展，低分辨率的手机已经不能满足我们的需求了。很快，更高分辨率的屏幕诞生了，比如下面的黑色手机，它的分辨率是**<code>640x940</code>**，正好是白色手机的两倍。</p><p>理论上来讲，在白色手机上相同大小的图片和文字，在黑色手机上会被缩放一倍，因为它的分辨率提高了一倍。这样，岂不是后面出现更高分辨率的手机，页面元素会变得越来越小吗？</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213903.png" alt="image-20231128214943725"></p><p>然而，事实并不是这样的，我们现在使用的智能手机，不管分辨率多高，他们所展示的界面比例都是基本类似的。乔布斯在**<code>iPhone4</code><strong>的发布会上首次提出了</strong><code>Retina Display</code>**视网膜屏幕)的概念，它正是解决了上面的问题，这也使它成为一款跨时代的手机。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213775.png" alt="image-20231128215037801"></p><p>在**<code>iPhone4</code><strong>使用的视网膜屏幕中，把</strong><code>2x2</code><strong>个像素当</strong><code>1</code>**个像素使用，这样让屏幕看起来更精致，但是元素的大小却不会改变。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213532.png" alt="image-20231128215126588"></p><p>如果黑色手机使用了视网膜屏幕的技术，那么显示结果应该是下面的情况，<strong>比如列表的宽度为<code>300</code>个像素，那么在一条水平线上，白色手机会用<code>300</code>个物理像素去渲染它，而黑色手机实际上会用<code>600</code>个物理像素去渲染它。</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213196.png" alt="image-20231128215850609"></p><p>我们必须用一种单位来同时告诉不同分辨率的手机，它们在界面上显示元素的大小是多少，这个单位就是设备独立像素(<strong><code>Device Independent Pixels</code></strong>)简称**<code>DIPs</code><strong>或</strong><code>DP</code><strong>。上面我们说，列表的宽度为</strong><code>300</code><strong>个像素，实际上我们可以说：列表的宽度为</strong><code>300</code>**个设备独立像素。</p><p><font color='cornflowerblue' size="">至于为什么出现设备独立像素这种虚拟像素单位概念，下面举个例子：</font></p><p>iPhone 3GS 和 iPhone 4&#x2F;4s 的尺寸都是 3.5 寸，但 iPhone 3GS 的分辨率是 320x480，iPhone 4&#x2F;4s 的分辨率是 640x960，这意味着，iPhone 3GS 有 320 个物理像素，iPhone 4&#x2F;4s 有 640 个物理像素。</p><p>如果我们按照真实的物理像素进行布局，比如说我们按照 320 物理像素进行布局，到了 640 物理像素的手机上就会有一半的空白，为了避免这种问题，就产生了虚拟像素单位</p><p>iPhone 3GS 和 iPhone 4&#x2F;4s 都是 320 个虚拟像素，在一条水平线上，在 iPhone 3GS 上，最终 1 个虚拟像素换算成 1 个物理像素。在 iphone 4s 中，1 个虚拟像素最终换算成 2 个物理像素，即用2个物理像素才能将1个虚拟像素渲染满。</p><p><strong>这是如何做到的呢？对于那些像素密度高的屏幕，将多个设备像素划分为一个逻辑像素。至于将多少设备像素划分为一个逻辑像素，这由操作系统决定。</strong></p><p>打开**<code>chrome</code><strong>的开发者工具，我们可以模拟各个手机型号的显示情况，每种型号上面会显示一个尺寸，比如</strong><code>iPhone X</code><strong>显示的尺寸是</strong><code>375x812</code><strong>，实际</strong><code>iPhone X</code>**的分辨率会比这高很多，这里显示的就是设备独立像素。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213705.png" alt="image-20231128220655412"></p><p>所以说，1 个虚拟像素被换算成几个物理像素，这个数值我们称之为设备像素比，也就是下面介绍的<code>dpr</code></p><p><strong>在<code>javaScript</code>中可以通过<code>window.screen.width/ window.screen.height</code> 查看</strong></p><p><code>screen.width: 屏幕宽度</code></p><br><h4 id="4）设备像素比（DPR）"><a href="#4）设备像素比（DPR）" class="headerlink" title="4）设备像素比（DPR）"></a><strong><font color='#10c300'>4）设备像素比（DPR）</font></strong></h4><p>devicePixelRatio，简称为 DPR，用来描述物理像素与设备独立像素的比例，其值等于 <strong>“物理像素 &#x2F; 设备独立像素”</strong>。</p><p>在javascript中，可以通过<strong>js</strong>获取到当前设备的dpr：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">devicePixelRatio</span></span><br></pre></td></tr></table></figure><p>在<code>css</code>中，可以使用媒体查询**<code>min-device-pixel-ratio</code><strong>，区分</strong><code>dpr</code>**：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">2</span>),(<span class="attribute">min-device-pixel-ratio</span>: <span class="number">2</span>)&#123; &#125;</span><br></pre></td></tr></table></figure><p>可知，iPhone6物理像素（分辨率）宽高为 <strong>750×1334</strong>，设备独立像素宽高为<strong>375×667</strong>，<strong>750&#x3D;375 * 2，1334&#x3D;667 * 2</strong>，所以 iPhone6 的 DPR 为 <strong>2</strong>。</p><p>反之，iPhone6的设备宽度和高度为375px * 667px,可以理解为设备的独立像素；而其dpr为<code>2</code>，根据上面公式，我们可以很轻松得知其物理像素（分辨率）为750px * 1334px。</p><p><strong><font color='cornflowerblue' size="">计算公式如下：</font></strong></p><p>当设备像素比为1:1时，使用1（1×1）个设备像素显示1个CSS像素</p><p>当设备像素比为2:1时，使用4（2×2）个设备像素显示1个CSS像素</p><p>当设备像素比为3:1时，使用9（3×3）个设备像素显示1个CSS像素</p><p><strong>如下图所示：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214280.png" alt="image-20230917002614959"></p><p>当然，上面的规则也有例外，<strong><code>iPhone 6、7、8 Plus</code><strong>的实际物理像素是</strong><code>1080 x 1920</code></strong>，在开发者工具中我们可以看到：它的设备独立像素是**<code>414 x 736</code><strong>，设备像素比为</strong><code>3</code><strong>，设备独立像素和设备像素比的乘积并不等于</strong><code>1080 x 1920</code><strong>，而是等于</strong><code>1242 x 2208</code>**。</p><p>实际上，手机会自动把**<code>1242 x 2208</code><strong>个像素点塞进</strong><code>1080 * 1920</code><strong>个物理像素点来渲染，我们不用关心这个过程，而</strong><code>1242 x 2208</code><strong>被称为屏幕的</strong><code>设计像素</code><strong>。我们开发过程中也是以这个</strong><code>设计像素</code>**为准。</p><p>实际上，从苹果提出视网膜屏幕开始，才出现设备像素比这个概念，因为在这之前，移动设备都是直接使用物理像素来进行展示。</p><p>紧接着，**<code>Android</code>**同样使用了其他的技术方案来实现<code>DPR</code>大于<code>1</code>的屏幕，不过原理是类似的。由于<code>Android</code>屏幕尺寸非常多、分辨率高低跨度非常大，不像苹果只有它自己的几款固定设备、尺寸。所以，为了保证各种设备的显示效果，<code>Android</code>按照设备的像素密度将设备分成了几个区间：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214489.png" alt="image-20231210230453792"></p><p>当然，所有的**<code>Android</code>**设备不一定严格按照上面的分辨率，每个类型可能对应几种不同分辨率，所以，每个<code>Android</code>手机都能根据给定的区间范围，确定自己的<code>DPR</code>，从而拥有类似的显示。当然，仅仅是类似，由于各个设备的尺寸、分辨率上的差异，设备独立像素也不会完全相等，所以各种<code>Android</code>设备仍然不能做到在展示上完全相等。</p><br><h4 id="5）视网膜屏（Retina）"><a href="#5）视网膜屏（Retina）" class="headerlink" title="5）视网膜屏（Retina）"></a><strong><font color='#10c300'>5）视网膜屏（Retina）</font></strong></h4><p>苹果公司在2010年的WWDC上发布了iPhone4，第一次向世人展示了retina屏幕，并在后续发布了一系列r屏产品。</p><p><strong>所谓“Retina”是一种显示技术，可以将更多的像素点压缩至一块屏幕里，从而达到更高的分辨率并提高屏幕显示的细腻程度。这种分辨率在正常观看距离下足以使人肉眼无法分辨其中的单独像素。</strong></p><p>让多个物理像素渲染一个独立像素只是<code>Retina</code>屏幕为了达到效果而使用的一种技术。<strong>而不是所有<code>DPR &gt; 1</code>的屏幕就是<code>Retina</code>屏幕</strong>。</p><p>比如：给你一块超大尺寸的屏幕，即使它的<code>PPI</code>很高，<code>DPR</code>也很高，在近距离你也能看清它的像素点，这就不算<code>Retina</code>屏幕。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214265.png" alt="image-20230616001034228"></p><center>WWDC 2010上非r屏与r屏显示效果对比</center><p>受 windows操作系统的影响，多数人心中会产生这样的逻辑：<strong>分辨率越高，字会显得越小</strong>。</p><p>这是因为整个屏幕的面积主要由像素面积构成，即在相同面积下，分辨率越高，像素数量也越多，单个像素的面积也一定越小。于是高分辨率就对应着小像素，而像素小，则由像素构成的文字就小。所以就有了『分辨率越高，字会显得越小』的印象。</p><p>可是，苹果的r屏产品并没有让显示的文字变得很小，这又是怎么回 事呢？既然苹果产品的2倍r屏所包含的像素数量约为同面积非r屏的4倍，即每个像素尺寸约为非r屏像素的1&#x2F;4，那为什么显示出来的文字没有缩减成1&#x2F;4呢？</p><p>这是因为操作系统的HiDPI渲染方式，它决定了一个文字或图标最终以多少个像素来表达。2倍 r屏它在表达屏幕上每个元素时，都使用了4倍于非r屏的像素个数。这样算下来，像素尺寸为1&#x2F;4，像素数目为4倍，于是最终渲染出来的文字和图标的大小与非r屏的相当。</p><p><strong>举例说明</strong>，对一个标准屏来说，渲染一个宽高 <code>2px*2px</code> 的盒子将会使用 <code>2px* 2px</code> 物理像素，如我们的普通电脑屏；但是对于一个 2 倍屏来说，渲染一个 <code>2px*2px</code> 的盒子将会使用 <code>（2px* 2） *（2px* 2）</code> 物理像素，即宽高都放大了2倍，也就是1个css像素对应 4个物理像素(1:4)，反向理解就是</p><p>如我们的 iPhone 4、5、6、7，如下图：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214482.png" alt="image-20230616002208274"></p><br><h3 id="1-3、视口viewport"><a href="#1-3、视口viewport" class="headerlink" title="1.3、视口viewport"></a><strong><font color='red' size="">1.3、视口viewport</font></strong></h3><p>视口（viewport）就是浏览器显示页面内容的屏幕区域。视口可以分为<strong>布局视口</strong>、<strong>视觉视口</strong>和<strong>理想视口</strong>。</p><h4 id="1）布局视口-layout-viewport"><a href="#1）布局视口-layout-viewport" class="headerlink" title="1）布局视口 layout viewport"></a><strong><font color='#10c300'>1）布局视口 layout viewport</font></strong></h4><p>一般移动端设备的浏览器都默认了一个布局视口，用于解决早期pc端页面在手机端显示的问题。</p><p>在PC浏览器上，布局视口就等于当前浏览器的窗口大小（不包括borders, margins, 滚动条）。 在移动端ios、安卓基本都将这个视口分辨率设置为980px，所以pc上网页大多都能在手机上展示，不过页面元素看上去很小，一般默认可以通过手动缩放网页。</p><p>在创建一个新的html文件的时候，默认会帮忙适配视口的，所以想要了解布局视口和视觉视口的关系的话，需要把默认适配的代码先注释掉</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214830.png" alt="image-20230613233657377"></p><p>给网页添加一个宽100px，高100px的div盒子。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214408.png" alt="image-20230613233814484"></p><p>在pc端的效果：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214512.png" alt="image-20230613233935314"></p><p>没有问题，和理想中的情况差不多，来看一下移动端的效果</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214304.png" alt="image-20230613234032837"></p><p>在PC端的网页在移动端显示的100px也太小了呀，这是为什么？</p><ul><li>第一，它会按照宽度为980px来布局一个页面的盒子和内容；</li><li>第二，为了显示可以完整的显示在页面中，对整个页面进行缩小；</li></ul><p>所以我们在<strong>PC端</strong>进行布局的时候会相对于980px进行布局，这个<strong>默认980px</strong>的视口称为<strong>布局视口</strong> </p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214998.png" alt="image-20230613234712931"></p><p><strong>我们可以通过调用<code>document.documentElement.clientWidth  | document.body.clientWidth</code>来获取布局视口大小</strong>  不包含滚动条</p><br><h4 id="2）视觉视口-visual-viewport"><a href="#2）视觉视口-visual-viewport" class="headerlink" title="2）视觉视口 visual viewport"></a><strong><font color='#10c300'>2）视觉视口 visual viewport</font></strong></h4><p>如果默认情况下，我们按照980px显示内容，那么右侧有一部分区域 就会无法显示，所以手机端浏览器会默认对页面进行<strong>缩放</strong>以显示到用 户的可见区域中；</p><p>那么显示在<strong>可见区域</strong>的这个视口，就是<strong>视觉视口</strong>。简单来说就是我们人眼能看到的可视区域大小，默认等于浏览器的宽度</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214681.png" alt="image-20230613235203504"></p><p>当用户对浏览器进行缩放时，不会改变布局视口的大小，所以页面布局是不变的，但是缩放会改变视觉视口的大小。 比如：将浏览器窗口放大200%，css像素会随着视觉视口的放大而放大，这时一个css像素会跨越更多物理像素。</p><p>所以，<strong><code>布局视口会限制你的CSS布局而视觉视口决定用户具体能看到什么。</code></strong></p><p><strong>我们可以通过调用<code>window.innerWidth</code>来获取视觉视口大小。</strong></p><p><code>innerWidth: 返回窗口的文档显示区的宽度，如果有水平滚动条，也包括滚动条高度。</code></p><br><h4 id="3）理想视口-ideal-viewport"><a href="#3）理想视口-ideal-viewport" class="headerlink" title="3）理想视口 ideal viewport"></a><strong><font color='#10c300'>3）理想视口 ideal viewport</font></strong></h4><p>布局视口在移动端展示的效果并不是一个理想的效果，能不能让布局视口和视觉视口相同呢？反正在移动端看到的视口只有那么大，如果视口相同了，就好布局了。下面引入理想视口的概念。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214004.png" alt="image-20230613235520555"></p><p><strong>如果所有的网页都按照980px在移动端布局，那么最终页面都会被缩放显示。</strong></p><ul><li>事实上这种方式是不利于我们进行移动的开发的，我们希望的是设置100px，那么显示的就是100px；</li><li>如何做到这一点呢？通过设置理想视口（ideal viewport）；</li></ul><p>我们可以对布局视口（layout viewport）进行宽度和缩放的设置，以满足正常在一个移动端窗口的布局，就是布局视口和视觉视口的大小相同。</p><p><strong>页面的缩放系数 &#x3D; CSS像素&#x2F;设备独立像素，实际上 &#x3D; 理想视口宽度&#x2F;视觉视口更准确。当页面缩放比例为100%时，CSS像素 &#x3D; 设备独立像素，理想视口 &#x3D; 视觉视口</strong></p><p><strong>我们可以通过调用<code>window.screen.width</code>来获取理想视口大小。</strong></p><br><h4 id="4）Meta-Viewport"><a href="#4）Meta-Viewport" class="headerlink" title="4）Meta Viewport"></a><strong><font color='#10c300'>4）Meta Viewport</font></strong></h4><p><code>&lt;meta&gt;</code> 元素用于提供关于文档的元信息，其中name属性用于定义元信息的名称，content属性用于定义元信息的值。</p><p>我们可以借助<code>&lt;meta&gt;</code>元素的<code>viewport</code>来帮助我们设置视口、缩放等，从而让移动端得到更好的展示效果。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th><code>Value</code></th><th>可能值</th><th>描述</th></tr></thead><tbody><tr><td><code>width</code></td><td>正整数或<code>device-width</code></td><td>以<code>pixels</code>（像素）为单位， 定义布局视口的宽度。<br>device-width:  device 即设备的意思，就是设备宽度也就是视觉宽度，即将布局视口的宽度设置为设备宽度大小</td></tr><tr><td><code>height</code></td><td>正整数或<code>device-height</code></td><td>以<code>pixels</code>（像素）为单位， 定义布局视口的高度。<strong>没有浏览器用过</strong></td></tr><tr><td><code>initial-scale</code></td><td><code>0.0 - 10.0</code></td><td>定义页面初始缩放比率，相对于理想视口缩放，进行<code>100%</code>的缩放，也就是缩放值为<code>1</code>。<strong>一般设置为1的效果和device-width是一样的</strong></td></tr><tr><td><code>minimum-scale</code></td><td><code>0.0 - 10.0</code></td><td>定义缩放的最小值；必须小于或等于<code>maximum-scale</code>的值。</td></tr><tr><td><code>maximum-scale</code></td><td><code>0.0 - 10.0</code></td><td>定义缩放的最大值；必须大于或等于<code>minimum-scale</code>的值。</td></tr><tr><td><code>user-scalable</code></td><td>一个布尔值（<code>yes</code>或者<code>no</code>）</td><td>如果设置为 <code>no</code>，用户将不能放大或缩小网页。默认值为 yes。</td></tr></tbody></table><h5 id="width-device-width"><a href="#width-device-width" class="headerlink" title="width&#x3D;device-width"></a><strong><font color='cornflowerblue'>width&#x3D;device-width</font></strong></h5><p>content&#x3D; “width&#x3D;device-width”</p><p>当前的viewport宽度设置为 ideal viewport(理想视口) 的宽度</p><p>要得到 <strong>理想视口</strong>（ideal viewport）就必须把默认的<strong>布局视口</strong>（ layout viewport）<strong>的宽度设为移动设备的屏幕宽度</strong>。因为meta viewport中的width能控制 <strong>布局视口</strong>（layout viewport）的宽度，所以我们只需要把width设为width-device这个特殊的值就行了。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span><span class="attr">content</span>=<span class="string">&quot;width=device-width&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>下图是这句代码在各大移动端浏览器上的测试结果：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214508.png" alt="image-20230614002433803"></p><p>可以看到通过width&#x3D;device-width，所有浏览器都能把当前的viewport宽度变成ideal viewport的宽度，但要<strong>注意的是，在iphone和ipad上，无论是竖屏还是横屏，宽度都是竖屏时 理想视口 的宽度。</strong></p><br><h5 id="initial-scale-1"><a href="#initial-scale-1" class="headerlink" title="initial-scale&#x3D;1"></a><strong><font color='cornflowerblue'>initial-scale&#x3D;1</font></strong></h5><p>content&#x3D; “initial-scale&#x3D;1“</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span><span class="attr">content</span>=<span class="string">&quot;initial-scale=1&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这句代码也能达到和前一句代码一样的效果，也可以把当前的的viewport变为 理想视口。</p><p>从理论上来讲，这句代码的作用<strong>只是不对当前的页面进行缩放</strong>，也就是页面本该是多大就是多大。那为什么会有 width&#x3D;device-width 的效果呢？</p><p>首先你得弄明白这个缩放是相对于什么来缩放的，因为这里的缩放值是1，也就是没缩放，但却达到了 <strong>理想视口</strong> 的效果，所以，缩放是相对于 <strong>理想视口</strong> 来进行缩放的，当对  <strong>理想视口</strong> 进行100%的缩放，也就是缩放值为1的时候，不就得到了  <strong>理想视口</strong> 吗？</p><p>下图是这句代码在各大移动端浏览器上的测试结果：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214742.png" alt="image-20230614002857633"></p><p>测试结果表明 initial-scale&#x3D;1 也能把当前的viewport宽度变成  <strong>理想视口</strong> 的宽度，但这次轮到了windows phone 上的IE 无论是竖屏还是横屏都把宽度设为竖屏时   <strong>理想视口</strong> 的宽度。</p><p>所以，最完美的写法应该是，两者都写上去，这样就 initial-scale&#x3D;1 解决了 iphone、ipad的毛病，width&#x3D;device-width则解决了IE的毛病：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width; initial-scale=1;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h5 id="width和initial-scale"><a href="#width和initial-scale" class="headerlink" title="width和initial-scale"></a><strong><font color='cornflowerblue'>width和initial-scale</font></strong></h5><p><code>width</code> 和 <code>initial-scale</code> 同时出现，并且出现了冲突</p><p>比如：<strong><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=400, initial-scale=1&quot;&gt;</code></strong></p><p><strong><code>width=400</code><strong>表示把 <strong>布局视口(layout viewport)</strong> 的宽度设为</strong><code>400px</code></strong>，<strong><code>initial-scale=1</code><strong>则表示把 <strong>布局视口(layout viewport)</strong> 的宽度设为 <strong>理想视口(ideal viewport)</strong> 的宽度（不一定是</strong><code>400px</code></strong>），那么浏览器到底该服从哪个命令呢？</p><p><font color='red' size="3"><strong>布局视口宽度取的是<code>width</code>和视觉视口宽度的最大值！(重点)</strong></font></p><p>例如：若在手机的理想视口宽度是320的前提下：<br>设置**<code>width=400， initial-scale=1</code><strong>，此时布局视口的宽度会取400px（</strong><code>视觉视口宽度 = 理想视口宽度 / initial-scale </code>**即320 &#x2F; 1 &#x3D; 320，400&gt;320即取400px）</p><p>设置**<code>width=400， initial-scale=0.5</code><strong>，此时布局视口的宽度会取640px（</strong><code>视觉视口宽度 = 理想视口宽度 / initial-scale </code>**即320 &#x2F; 0.5 &#x3D; 640，400&lt;640即取640px）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140214972.gif" alt="aa"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=0.5&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如图中所示，在<code>iPhoneX</code>中，<strong>理想视口</strong>的宽度 和 <strong>设备宽度</strong> 都是**<code>375px</code><strong>（screen.width），此时设置<code>initial-scale</code>为<code>0.5</code>，则此时的</strong>视觉视口<strong>的宽度为 <code>375 / 0.5 = 750</code>。所以，从图上也可以看到</strong>视觉视口**（<code>window.innerWidth</code>）是<code>750px</code>，同时<strong>布局视口</strong>（<code>document.documentElement.clientWidth</code>）会取<code>375px</code>和 <code>750px</code>中的最大值，即<code>750px</code>作为宽度值。</p><p><strong>最完美的写法应该是：</strong>—-布局视口等于设备宽度(视觉视口宽度)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width; initial-scale=1;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h5 id="initial-scale的默认值"><a href="#initial-scale的默认值" class="headerlink" title="initial-scale的默认值"></a><strong><font color='cornflowerblue' size="3">initial-scale的默认值</font></strong></h5><p>视觉视口宽度 &#x3D; 理想视口宽度 &#x2F; 当前缩放值</p><p>当前缩放值 &#x3D; 理想视口宽度 &#x2F; 视觉视口宽度</p><p><strong>现在再来说下<code>initial-scale</code>的默认值问题，就是不写这个属性的时候，它的默认值会是多少呢？</strong></p><p><strong>很显然不会是1</strong>，因为当 <strong><code>initial-scale = 1</code></strong> 时，当前的<strong>布局视口宽度</strong>会被设为 <strong>理想视口宽度</strong>，但前面说了，各浏览器默认的 <strong>布局视口宽度</strong>一般都是<code>980px</code>，<code>1024px</code>，<code>800px</code>等等这些值，没有一开始就是 <strong>理想视口的宽度</strong>，所以 <code>initial-scale</code>的默认值肯定不是1。</p><p>**安卓设备上的<code>initial-scale</code>**默认值好像没有方法能够得到，或者就是干脆它就没有默认值，一定要你显示的写出来这个东西才会起作用，我们不管它了，这里我们重点说一下iphone和ipad上的<code>initial-scale</code>默认值。</p><p>根据测试，我们可以在iphone和ipad上得到一个结论:</p><p><strong>在iphone和ipad上，无论你给<code>viewport</code>设的宽是多少，如果没有指定默认的缩放值，则iphone和ipad会自动计算这个缩放值，以达到当前页面不会出现横向滚动条(或者说<code>viewport</code>的宽度就是屏幕的宽度)的目的。</strong></p><br><h4 id="5）视口小结"><a href="#5）视口小结" class="headerlink" title="5）视口小结"></a><strong><font color='#10c300'>5）视口小结</font></strong></h4><p>首先如果不设置<code>meta viewport</code>标签，那么移动设备上浏览器默认的宽度值为<code>800px</code>，<code>980px</code>，<code>1024px</code>等这些**（大部分是980px）**，总之是大于屏幕宽度的。这里的宽度所用的单位px都是指css中的<code>px</code>，它跟代表实际屏幕物理像素的<code>px</code>不是一回事。</p><p>第二、每个移动设备浏览器中都有一个理想的宽度，这个理想的宽度是指css中的宽度，跟设备的物理宽度没有关系，在css中，这个宽度就相当于<code>100%</code>所代表的那个宽度。我们可以用<code>meta</code>标签把<code>viewport</code>的宽度设为那个理想的宽度，如果不知道这个设备的理想宽度是多少，那么用**<code>device-width</code><strong>这个特殊值就行了，同时</strong><code>initial-scale=1</code>**也有把<code>viewport</code>的宽度设为理想宽度的作用。所以，我们可以使用 <strong><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</code></strong> 来得到一个理想的<code>viewport</code>（也就是前面说的<code>ideal viewport</code>）。</p><br><h3 id="1-4、常见问题"><a href="#1-4、常见问题" class="headerlink" title="1.4、常见问题"></a><strong><font color='red' size="">1.4、常见问题</font></strong></h3><h4 id="1）图片虚化问题"><a href="#1）图片虚化问题" class="headerlink" title="1）图片虚化问题"></a><strong><font color='#10c300'>1）图片虚化问题</font></strong></h4><p>当一个位图在标准屏显示时，一位图像素对应的就是一物理像素，这样就保证了一个完全保真的显示。但是当在 2 倍屏下时，物理像素面积是图像素面积的4倍(css 中的1设备独立像素相当于2物理像素)，图片需要要放大四倍（宽高各两倍）来保持相同的物理像素的大小，这样就会丢失很多细节，造成失真的情形，也就是我们常说的图片虚化问题。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215504.jpeg" alt="1703083119963"></p><p><strong>那么怎么解决该问题呢？</strong></p><p>我们可以把要使用的图片扩大一倍，如要用的图片大小为 2px  × 2px，我们可以使用 4px ×  4px 的图片然后设置图片大小为 2px  × 2px，这样对于2倍屏则正好，而标准屏则减少像素取样（一定程度上的浪费），现在设计直接提供二倍图即4px × 4px，之后我们将图片设置2px × 2px即可。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215108.png" alt="image-20231220225505317"></p><p><font color='cornflowerblue' size="3"><strong>背景图：</strong></font></p><p><strong>a、采用媒体查询的方式</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span>&#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">conardLi_1x.png</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>:<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="selector-class">.avatar</span>&#123;</span><br><span class="line">        <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">conardLi_2x.png</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>:<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="selector-class">.avatar</span>&#123;</span><br><span class="line">        <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">conardLi_3x.png</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>b、使用-image-set</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">   <span class="attribute">background-image</span>: <span class="built_in">-webkit-image-set</span>( <span class="string">&quot;conardLi_1x.png&quot;</span> <span class="number">1</span>x, <span class="string">&quot;conardLi_2x.png&quot;</span> <span class="number">2</span>x );</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><font color='cornflowerblue' size="3"><strong>img标签：</strong></font></p><p><strong>a、使用img的srcset属性，浏览器会根据像素密度匹配显示适当的照片</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;conardLi_1x.png&quot;</span> <span class="attr">srcset</span>=<span class="string">&quot; conardLi_2x.png 2x, conardLi_3x.png 3x&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>b、用base64或是svg格式的图片</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;conardLi.svg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;data:image/svg+xml;base64,[data]&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h4 id="2）1px问题"><a href="#2）1px问题" class="headerlink" title="2）1px问题"></a><strong><font color='#10c300'>2）1px问题</font></strong></h4><p>我们先看一个demo，截图如下（iPhone 6截图）：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215600.png" alt="image-20230616005048007"></p><p>如果我们把上图与我们手机系统上的 1px 边框进行对比，如下图：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215446.png" alt="image-20230616005102142"></p><p>我们会发现，上面两个上下线条，下线条的粗细才是正确的，上线条就显得有点粗了。但是上线条我们是用纯正的 1px border生成的，而下线条我们实际是采用transform压缩了1px高度的一半模拟实现的，也就相当于 0.5px 的高度了。</p><p>为了适配各种屏幕，我们写代码时一般使用设备独立像素来对页面进行布局。</p><p>而在<strong>设备像素比</strong>大于1的屏幕上，我们写的1px实际上是被多个物理像素渲染，这就会出现1px在有些屏幕上看起来很粗的现象。</p><p><strong>以下举例解决1px问题。</strong></p><p><strong><font color='orange'>1、viewport + rem 实现</font></strong></p><blockquote><p>**优点：**所有场景都能满足，一套代码，可以兼容基本所有布局<br>**缺点：**老项目修改代价过大，只适用于新项目</p></blockquote><p>通过设置缩放，让CSS像素等于真正的物理像素。<br>当设备像素比为3时，我们将页面缩放<code>1/3</code>倍，这时<code>1px</code>等于一个真正的屏幕像素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scale = <span class="number">1</span> / <span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>;</span><br><span class="line"><span class="keyword">const</span> viewport = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;meta[name=&quot;viewport&quot;]&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (!viewport) &#123;</span><br><span class="line">    viewport = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;meta&#x27;</span>);</span><br><span class="line">    viewport.<span class="title function_">setAttribute</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;viewport&#x27;</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(viewport);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">viewport.<span class="title function_">setAttribute</span>(<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;width=device-width,user-scalable=no,initial-scale=&#x27;</span> + scale + <span class="string">&#x27;,maximum-scale=&#x27;</span> + scale + <span class="string">&#x27;,minimum-scale=&#x27;</span> + scale);</span><br></pre></td></tr></table></figure><p>实际上，上面这种方案是早先<code>flexible</code>采用的方案，大概是通过判断DPR去动态生成viewport的mate标签</p><p><strong>在DPR &#x3D; 2 时，输出viewport：</strong></p><p><code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no&quot;&gt;</code></p><p><strong>在DPR &#x3D; 3时，输出viewport：</strong></p><p><code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=0.3333, maximum-scale=0.3333, minimum-scale=0.3333, user-scalable=no&quot;&gt;</code></p><p><strong><font color='orange'>2、伪类 + transform 实现</font></strong></p><p>原理是把原先元素的 border 去掉，然后利用 :before 或者 :after 重做 border ，并 transform 的 scale 缩小一半，原先的元素相对定位，新做的 border 绝对定位。</p><blockquote><p>**优点：**所有场景都能满足，支持圆角(伪类和本体类都需要加border-radius)</p><p>**缺点：**对于已经使用伪类的元素(例如clearfix)，可能需要多层嵌套</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.scale-1px</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scale-1px</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>:<span class="number">2</span>)&#123;</span><br><span class="line"><span class="selector-class">.border_1px</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>:<span class="number">3</span>)&#123;</span><br><span class="line"><span class="selector-class">.border_1px</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">         <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.33</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="二、pc端扩展"><a href="#二、pc端扩展" class="headerlink" title="二、pc端扩展"></a><strong>二、pc端扩展</strong></h2><h3 id="2-1、viewpoet"><a href="#2-1、viewpoet" class="headerlink" title="2.1、viewpoet"></a><strong><font color='red' size="">2.1、viewpoet</font></strong></h3><p>viewport的功能在于控制你网站的最高块状（block）容器：<code>&lt;html&gt;</code>元素。</p><p><strong>听起来有点玄乎，举个例子~假设你定义了一个可变尺寸的布局，且你定义一个侧边栏的宽度为width: 10%。当你改变浏览器窗口大小时，该侧边栏会自动扩张和收缩。这是什么原理呢？技术上讲，原理是侧边栏的宽度为它父元素宽度的10%，我们设它的父元素是且你未指定宽度。那么问题就变为了<code>&lt;body&gt;</code>的宽度到底是多少？</strong></p><p>通常，一个块级元素占有起父元素的100%的宽度（这里有异常情况，暂时忽略）。所以<code>&lt;body&gt;</code>的宽度就是其父元素<code>&lt;html&gt;</code>的宽度。</p><p>**那么<code>&lt;html&gt;</code>元素到底有多宽？**因为它的宽度恰好为浏览器的宽度。所以你的侧边栏宽度width: 10%会占用10%的浏览器宽度。所以的web开发人员都直观的知道和使用该特性了。 但是你也许不知道原理。<strong>在原理上，<code>&lt;html&gt;</code>的宽度受viewport所限制，<code>&lt;html&gt;</code>元素为viewport宽度的100%。</strong></p><p>反过来，viewport是严格的等于浏览器的窗口：定义就是如此。viewport不是一个HTML的概念，所以你不能通过CSS修改它。它就是为浏览器窗口的宽度高度 – 在桌面浏览器上如此，移动设备浏览器上有点复杂。</p><p><strong><font color='orange'>影响</font></strong></p><p>缩放事件有一些奇怪的影响，你可以在<a href="http://www.quirksmode.org/mobile/viewports.html">本站上实验</a>。页面滚动到最上面，放大浏览器2-3倍，网站的宽度会超过浏览器窗口。再将页面滚动到最右边，你会发现网站最上面的蓝色栏目不再对齐了。如图<br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215930.jpeg" alt="1700124921062"></p><p>这个效果反应了viewport是如何被定义的。我定义了最上面蓝色栏目的宽度为width: 100%。什么的100%？当然是html的宽度，同样是viewport的宽度，同样是浏览器窗口的宽度。</p><p>**重点：**缩放比例100%的情况下很正常，现在我们放大浏览器，viewport变得比网站的总宽度更小。对viewport无影响，但页面的内容溢出了<code>&lt;html&gt;</code>元素，但它却有属性<code>overflow: visible</code>。意味着溢出的部分依然会被显示。</p><p>但蓝色栏目却不会溢出。我定义了它宽度为width: 100%，结果浏览器为他赋值宽度为viewport的宽度。浏览器不会在乎这个栏目的宽度是不是过窄了。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215161.png" alt="image-20231116165615979"></p><h3 id="2-2、小结"><a href="#2-2、小结" class="headerlink" title="2.2、小结"></a><strong><font color='red' size="">2.2、小结</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215634.jpeg" alt="1702393811372"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">布局视口/视口viewport：document.documentElement.clientWidth/clientHeight | document.body.clientWidth/clientHeight(包括内边距，但不包括滚动条，边框和外边距)</span><br><span class="line"></span><br><span class="line">html元素尺寸：document.documentElement.offsetWidth/offseHeight(包含滚动卷去的距离)</span><br><span class="line"></span><br><span class="line">滚动移位：window.pageYOffset/pageXOffset</span><br><span class="line"></span><br><span class="line">视觉视口/浏览器尺寸：window.innerWidth/innerHeight(包含滚动条)</span><br><span class="line"></span><br><span class="line">理想视口/pc屏幕尺寸/设备独立像素：screen.width/height</span><br><span class="line"></span><br><span class="line">事件坐标：</span><br><span class="line">pageX/Y：从&lt;html&gt;原点到事件触发点的CSS的 pixels</span><br><span class="line">clientX/Y：从viewport原点（浏览器窗口）到事件触发点的CSS的 pixels</span><br><span class="line">screenX/Y：从用户显示器窗口原点到事件触发点的设备 的 pixels</span><br></pre></td></tr></table></figure><h4 id="1）度量viewport"><a href="#1）度量viewport" class="headerlink" title="1）度量viewport"></a><strong><font color='#10c300'>1）度量viewport</font></strong></h4><p><strong>document. documentElement. clientWidth&#x2F;Height</strong></p><p>你也许想要知道viewport的尺寸，他们可以通过document. documentElement. clientWidth&#x2F;Height来获取。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215255.png" alt="image-20231116170156080"></p><p>如果你熟悉DOM，你会知道<code>document.documentElement</code>实际上就是<code>&lt;html&gt;</code>元素：HTML文档的根元素。然而viewport是比<code>&lt;html&gt;</code>更高级别的元素，打个比喻，它是容纳<code>&lt;html&gt;</code>元素的元素。</p><br><h4 id="2）度量HTML"><a href="#2）度量HTML" class="headerlink" title="2）度量HTML"></a><strong><font color='#10c300'>2）度量HTML</font></strong></h4><p><strong>document. documentElement. offsetWidth&#x2F;Height</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215281.png" alt="image-20231116170412296"></p><p>这个特性对真实的让你访问块级元素<code>&lt;html&gt;</code>元素，如果你为<code>&lt;html&gt;</code>元素赋值了宽度，offsetWidth会真实的反应出来。</p><br><h4 id="3）滚动移位"><a href="#3）滚动移位" class="headerlink" title="3）滚动移位"></a><strong><font color='#10c300'>3）滚动移位</font></strong></h4><p><strong>window.pageXOffset&#x2F;pageYOffset</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215869.png" alt="image-20231116171142875"></p><br><h4 id="4）事件坐标"><a href="#4）事件坐标" class="headerlink" title="4）事件坐标"></a><strong><font color='#10c300'>4）事件坐标</font></strong></h4><p><strong>pageX&#x2F;Y：从<code>&lt;html&gt;</code>原点到事件触发点的CSS的 pixels</strong></p><p><strong>clientX&#x2F;Y：从viewport原点（浏览器窗口）到事件触发点的CSS的 pixels</strong></p><p><strong>screenX&#x2F;Y：从用户显示器窗口原点到事件触发点的设备 的 pixels</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215175.png" alt="image-20231116171519702"></p><br><h2 id="三、移动端开发选择"><a href="#三、移动端开发选择" class="headerlink" title="三、移动端开发选择"></a><strong>三、移动端开发选择</strong></h2><h3 id="3-1、单独制作移动端页面（主流）"><a href="#3-1、单独制作移动端页面（主流）" class="headerlink" title="3.1、单独制作移动端页面（主流）"></a><strong><font color='red'>3.1、单独制作移动端页面（主流）</font></strong></h3><p>通常情况下，网址域名前面加 m(mobile) 可以打开移动端。通过判断设备，如果是移动设备打开，则跳到移动端页面。也就是说，做PC端和移动端两套网站代码，pc端是pc端的样式，移动端再写一套，专门针对移动端适配的一套网站。<br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215519.png" alt="image-20230623000102917"></p><br><h3 id="3-2、响应式页面兼容移动端（其次）"><a href="#3-2、响应式页面兼容移动端（其次）" class="headerlink" title="3.2、响应式页面兼容移动端（其次）"></a><strong><font color='red'>3.2、响应式页面兼容移动端（其次）</font></strong></h3><p>pc和移动端共用一套网站，只不过在不同屏幕下，样式会自动适配一套代码适配多个终端（用户体验不好）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215222.png" alt="image-20230623000349497"></p><br><h2 id="四、移动端技术解决方案"><a href="#四、移动端技术解决方案" class="headerlink" title="四、移动端技术解决方案"></a><strong>四、移动端技术解决方案</strong></h2><h3 id="4-1、移动端浏览器兼容问题"><a href="#4-1、移动端浏览器兼容问题" class="headerlink" title="4.1、移动端浏览器兼容问题"></a><strong><font color='red'>4.1、移动端浏览器兼容问题</font></strong></h3><ul><li>移动端浏览器基本以webkit内核为主，因此我们就考虑webkit兼容性问题。</li><li>我们可以放心使用H5标签和CSS3样式。</li><li>同时我们浏览器的私有前缀我们只需要考虑添加-webkit-即可。</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140215915.png" alt="image-20230623001557207"></p><br><h3 id="4-2、移动端CSS初始化"><a href="#4-2、移动端CSS初始化" class="headerlink" title="4.2、移动端CSS初始化"></a><strong><font color='red'>4.2、移动端CSS初始化</font></strong></h3><p>移动端 CSS 初始化推荐使用 normalize.css</p><p>官网地址： <a href="http://necolas.github.io/normalize.css/">http://necolas.github.io/normalize.css/</a></p><br><h3 id="4-3、CSS3盒模型"><a href="#4-3、CSS3盒模型" class="headerlink" title="4.3、CSS3盒模型"></a><strong><font color='red'>4.3、CSS3盒模型</font></strong></h3><p>传统模式宽度计算：盒子的宽度 &#x3D; CSS中设置的width + border + padding</p><p>CSS3盒子模型： 盒子的宽度&#x3D; CSS中设置的宽度width 里面包含了 border 和 padding</p><p>也就是说，我们的CSS3中的盒子模型， padding 和 border 不会撑大盒子</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*CSS3盒子模型*/</span></span><br><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br><span class="line"><span class="comment">/*传统盒子模型*/</span></span><br><span class="line"><span class="attribute">box-sizing</span>: content-box;</span><br></pre></td></tr></table></figure><ul><li>移动端可以全部CSS3 盒子模型</li><li>PC端如果完全需要兼容，我们就用传统模式，如果不考虑兼容性，我们就选择 CSS3 盒子模型</li></ul><br><h3 id="4-4、移动端特殊样式-去除样式"><a href="#4-4、移动端特殊样式-去除样式" class="headerlink" title="4.4、移动端特殊样式(去除样式)"></a><strong><font color='red'>4.4、移动端特殊样式(去除样式)</font></strong></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*CSS3盒子模型*/</span></span><br><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">-webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*点击高亮我们需要清除清除 设置为transparent 完成透明*/</span></span><br><span class="line">-webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*在移动端浏览器默认的外观在iOS上加上这个属性才能给按钮和输入框自定义样式*/</span></span><br><span class="line">-webkit-<span class="attribute">appearance</span>: none;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*禁用长按页面时的弹出菜单*/</span></span><br><span class="line"><span class="selector-tag">img</span>,<span class="selector-tag">a</span> &#123; -webkit-touch-callout: none; &#125;</span><br></pre></td></tr></table></figure><br><h2 id="五、移动端常见布局方式"><a href="#五、移动端常见布局方式" class="headerlink" title="五、移动端常见布局方式"></a><strong>五、移动端常见布局方式</strong></h2><h3 id="5-1、流式布局-百分比布局"><a href="#5-1、流式布局-百分比布局" class="headerlink" title="5.1、流式布局(百分比布局)"></a><strong><font color='red'>5.1、流式布局(百分比布局)</font></strong></h3><ul><li>流式布局，就是百分比布局，也称非固定像素布局。</li><li>通过盒子的宽度设置成百分比来根据屏幕的宽度来进行伸缩，不受固定像素的限制，内容向两侧填充。</li><li>流式布局方式是移动web开发使用的比较常见的布局方式。</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721025.png" alt="image-20230623005939630"></p><p><strong>注意事项</strong></p><p>制作过程中，需要定义页面的最大和最小支持宽度。</p><ul><li>max-width 限制页面最大宽度</li><li>max-height 限制页面最大高度</li><li>min-width 限制页面最小宽度 当小于最小宽度就出现滚动条</li><li>min-height 限制页面最小高度</li></ul><br><h3 id="5-2、flex弹性布局-推荐"><a href="#5-2、flex弹性布局-推荐" class="headerlink" title="5.2、flex弹性布局(推荐)"></a><strong><font color='red'>5.2、flex弹性布局(推荐)</font></strong></h3><h4 id="1）传统布局和flex布局对比"><a href="#1）传统布局和flex布局对比" class="headerlink" title="1）传统布局和flex布局对比"></a><strong><font color='#10c300'>1）传统布局和flex布局对比</font></strong></h4><p><strong>传统布局</strong></p><ul><li>兼容性好</li><li>布局繁琐</li><li>局限性，不能在移动端很好的布局</li></ul><p><strong>flex布局</strong></p><ul><li>操作方便，布局极其简单，移动端使用比较广泛</li><li>pc端浏览器支持情况比较差</li><li>IE11或更低版本不支持flex或仅支持部分</li></ul><p><strong>注意：</strong></p><p>如果是pc端页面布局，还是采用传统方式<br>如果是移动端或者是不考虑兼容问题的pc端，则采用flex布局</p><br><h4 id="2）flex布局原理"><a href="#2）flex布局原理" class="headerlink" title="2）flex布局原理"></a><strong><font color='#10c300'>2）flex布局原理</font></strong></h4><ol><li>当我们为父盒子设为 flex（display&#x3D;“flex”;） 布局以后，子元素的 float、clear 和 vertical-align 属性将失效。块级元素会在同一行显示。</li><li>flex布局又叫伸缩布局 、弹性布局 、伸缩盒布局 、弹性盒布局。</li><li>采用 Flex 布局的元素，称为 Flex 容器（flexcontainer），简称”容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flexitem），简称”项目”。</li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721062.png" alt="image-20230624172635718"></p><p><strong>总结：</strong></p><ul><li>就是通过给父盒子添加flex属性，来控制子盒子的位置和排列方式</li><li>给父盒子添加display&#x3D;”flex”就可以直接改父级里面的行内元素的宽高</li></ul><br><h4 id="3）flex布局常见属性"><a href="#3）flex布局常见属性" class="headerlink" title="3）flex布局常见属性"></a><strong><font color='#10c300'>3）flex布局常见属性</font></strong></h4><h5 id="父项常见属性"><a href="#父项常见属性" class="headerlink" title="父项常见属性"></a><strong><font color='cornflowerblue'>父项常见属性</font></strong></h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>flex-direction</td><td>设置主轴的方向</td></tr><tr><td>justify-content</td><td>设置主轴上的子元素排列方式</td></tr><tr><td>flex-wrap</td><td>设置子元素是否换行 (子元素的大小小于父盒子的大小是换行不了的)</td></tr><tr><td>align-items</td><td>设置侧轴上的子元素排列方式（单行）</td></tr><tr><td>align-content</td><td>设置侧轴上的子元素的排列方式（多行）</td></tr><tr><td>flex-flow</td><td>复合属性，相当于同时设置了 flex-direction 和 flex-wrap</td></tr></tbody></table><h6 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction "></a><strong><font color='orange'>flex-direction </font></strong></h6><p>主轴方向</p><p>在 flex 布局中，是分为主轴和侧轴两个方向，同样的叫法有 ： 行和列、x 轴和y 轴。</p><ul><li>默认主轴方向就是 x 轴方向，水平向右</li><li>默认侧轴方向就是 y 轴方向，水平向下</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721053.png" alt="image-20230624232821265"></p><p>主轴和侧轴是会变化的，就看 flex-direction 设置谁为主轴，剩下的就是侧轴。而我们的子元素是跟着主轴来排列的</p><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>row</td><td>默认值，从左往右</td></tr><tr><td>row-reverse</td><td>从右往左</td></tr><tr><td>column（常用）</td><td>从上往下</td></tr><tr><td>column-reverse</td><td>从下往上</td></tr></tbody></table><br><h6 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a><strong><font color='orange'>justify-content</font></strong></h6><p> 主轴上的子元素排列方式</p><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>flex-start</td><td>头部对齐，如果主轴是x轴，则左对齐(默认)。 如果主轴是y轴，则顶部对齐</td></tr><tr><td>flex-end</td><td>尾部对齐，如果主轴是x轴，则右对齐。 如果主轴是y轴，则底部对齐</td></tr><tr><td>center</td><td>在主轴居中对齐(主轴为x 水平居中，主轴为y 垂直居中)</td></tr><tr><td>space-around</td><td>每个元素分配周围相同的空间</td></tr><tr><td>space-between</td><td>先两边贴边，再每个元素分配周围相同的空间</td></tr><tr><td>space-evenly</td><td>每个元素之间的间隔相等</td></tr></tbody></table><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721029.png" alt="image-20230625000511842"></p><br><h6 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap "></a><strong><font color='orange'>flex-wrap </font></strong></h6><p>是否换行</p><p>默认情况下，项目都排在一条线（又称”轴线”）上。flex-wrap属性定义，flex布局中默认是不换行的。</p><p><strong>如果多个子元素的大小大于父盒子的大小，则会缩小子元素大小，占一行。只有换行才能到第二行。</strong></p><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>nowrap</td><td>默认值，不换行</td></tr><tr><td>wrap</td><td>换行</td></tr></tbody></table><br><h6 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a><strong><font color='orange'>align-items</font></strong></h6><p> 侧轴上的子元素排列方式(单行)</p><p>该属性是控制子项在侧轴（默认是y轴）上的排列方式 在子项为单项（单行）的时候使用</p><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>flex-start</td><td>元素位于容器的开头</td></tr><tr><td>flex-end</td><td>元素位于容器的结尾</td></tr><tr><td>center</td><td>垂直居中显示</td></tr><tr><td>stretch</td><td>默认值，拉伸（子盒子不要给高度才有效果）</td></tr><tr><td>baseline</td><td>基线对齐</td></tr></tbody></table><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721069.png" alt="image-20230625232741235"></p><br><h6 id="align-content"><a href="#align-content" class="headerlink" title="align-content "></a><strong><font color='orange'>align-content </font></strong></h6><p>侧轴上的子元素的排列方式(多行)</p><p>只能用于子项出现 <strong>换行且flex容器设置了高度</strong> 的情况（多行），<strong>在单行下是没有效果的</strong>。</p><table><thead><tr><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>flex-start</td><td>在侧周的头部开始排序</td></tr><tr><td>flex-end</td><td>在侧周的尾部开始排序</td></tr><tr><td>center</td><td>在侧轴的中间显示</td></tr><tr><td>space-around</td><td>每个元素周围分配相同的空间</td></tr><tr><td>space-between</td><td>首个元素放置于起点，末尾元素放置于终点 (重点) 两端对齐中间平分</td></tr><tr><td>stretch</td><td>默认值，设置子项元素高度平分元素高度（子盒子不要给高度才有效果）</td></tr></tbody></table><br><h6 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a><strong><font color='orange'>flex-flow</font></strong></h6><p>flex-flow 属性是 flex-direction 和 flex-wrap 属性的复合属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">flex-flow</span>: row wrap</span><br></pre></td></tr></table></figure><h5 id="子项常见属性"><a href="#子项常见属性" class="headerlink" title="子项常见属性"></a><strong><font color='cornflowerblue'>子项常见属性</font></strong></h5><h6 id="flex-属性"><a href="#flex-属性" class="headerlink" title="flex 属性"></a><strong><font color='orange'>flex 属性</font></strong></h6><table><thead><tr><th>属性</th><th>属性值</th></tr></thead><tbody><tr><td>flex</td><td>0 默认值，定义子项目分配剩余空间，用flex来表示占多少份数。</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721019.png" alt="image-20230626112003992"></p><p>上述代码表示：flex：1即三个div盒子分配section盒子的空间，每个盒子都占一份空间，也就是说每个盒子分配的空间站总空间的三分之一。</p><p><strong>每个盒子占总空间比例： 1 ÷ 3 &#x3D; 1&#x2F;3</strong></p><p>在上述代码基础上将第二个div盒子分配了三分空间</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">section</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">section</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">3</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid seagreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721542.png" alt="image-20230626114151858"></p><p>上述第一个div盒子占一份，第二个div占3份，第三个div占1份，一共5份。第一个盒子占了1&#x2F;5，第二个盒子占3&#x2F;5，第三个盒子占1&#x2F;5</p><p><strong>得出公式：</strong></p><p>某子项占总空间的比例 &#x3D; 某子项的flex值  ÷  所有子项的flex值的总和</p><p><strong>注意</strong><br>子项是行内块元素，其宽度小于父元素的时候 flex:1; 会铺满 如果行内块元素的宽度大于容器 则不会铺满(子元素img不会进行收缩的)</p><br><h6 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a><strong><font color='orange'>align-self</font></strong></h6><p>控制子项自己在侧轴上的排列方式</p><p>align-self 属性允许某个子项有与其他子项有不一样的对齐方式，可覆盖 align-items 属性。默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素或是没高度，则等同于 stretch，该属性不生效。</p><p><strong>未添加align-self</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#6b6b6b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex</span>: <span class="number">3</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-self</span>: flex-end;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721525.png" alt="image-20230626151622289"></p><br><h6 id="order"><a href="#order" class="headerlink" title="order"></a><strong><font color='orange'>order</font></strong></h6><p>定义项目的排列顺序</p><p>默认值为0，以0位临界点。-1往前排列，1往后排列，以此类推。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">section</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">3</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291721585.png" alt="image-20230626152305107"></p><h4 id="4）flex布局案例"><a href="#4）flex布局案例" class="headerlink" title="4）flex布局案例"></a><strong><font color='#10c300'>4）flex布局案例</font></strong></h4><p><a href="https://jihulab.com/shixna/demo/-/tree/flex%E5%B8%83%E5%B1%80%E6%A1%88%E4%BE%8B">https://jihulab.com/shixna/demo/-/tree/flex%E5%B8%83%E5%B1%80%E6%A1%88%E4%BE%8B</a></p><br><h3 id="5-3、rem布局"><a href="#5-3、rem布局" class="headerlink" title="5.3、rem布局"></a><strong><font color='red'>5.3、rem布局</font></strong></h3><h4 id="1）rem和em"><a href="#1）rem和em" class="headerlink" title="1）rem和em"></a><strong><font color='#10c300'>1）rem和em</font></strong></h4><p><strong>1、em</strong>是参考的是自身字体大小，如果自身未设置字体大小，默认参考父元素的字体大小，父元素也没有就一直往上找，直到html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span>&#123; <span class="comment">/*这个盒子大小就是120×120px*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">10em</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">10em</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2、rem</strong>参考html元素的字体大小来计算的，即1rem &#x3D; html的font-size。比如，根元素（html）设置font-size&#x3D;12px，非根元素设置width:2rem， 则换成px表示就是24px。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123; <span class="comment">/* 根html 为 12px */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123; <span class="comment">/* 此时 div 的字体大小就是 24px */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>rem的优点就是可以通过修改html里面的文字大小来改变页面中元素大小，可以很好来控制整个页面的元素大小。</strong></p><br><h4 id="2）媒体查询"><a href="#2）媒体查询" class="headerlink" title="2）媒体查询"></a><strong><font color='#10c300'>2）媒体查询</font></strong></h4><p>媒体查询（Media Query）是CSS3新语法。</p><ul><li>使用 @media查询，可以针对不同的媒体类型定义不同的样式</li><li>@media 可以针对不同的屏幕尺寸设置不同的样式</li><li>当你重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面</li><li>目前针对很多苹果手机、Android手机，平板等设备都用得到多媒体查询</li></ul><h5 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a><strong><font color='cornflowerblue'>语法规范</font></strong></h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> mediatype <span class="keyword">and</span>/<span class="keyword">not</span>/<span class="keyword">only</span> (media feature) &#123;&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>@media</td><td>固定写法，用 @media开头 注意@符号</td></tr><tr><td>mediatype</td><td>媒体类型<br>**all：**用于所有设备；**print：**用于打印机和打印预览；**screen：**用于电脑屏幕，平板电脑，智能手机等</td></tr><tr><td>and&#x2F;not&#x2F;only</td><td>关键字<br/>**and：**可以将多个媒体特性连接到一起，相当于“且”的意思。<br>**not：**排除某个媒体类型，相当于“非”的意思，可以省略。<br>**or：**可以测试多个媒体查询条件，只要有一个条件成立就执行，相当于“或”的意思。<br>**only：**指定某个特定的媒体类型，可以省略。</td></tr><tr><td>media feature</td><td>媒体特性，**width：**宽度；**min-width：**最小宽度；**max-width：**最大宽度</td></tr></tbody></table><br><h5 id="书写规则"><a href="#书写规则" class="headerlink" title="书写规则"></a><strong><font color='cornflowerblue'>书写规则</font></strong></h5><p>为了防止混乱，媒体查询我们要按照从小到大或者从大到小的顺序来写,但是我们最喜欢的还是从小到大来写（min-width到max-width），这样代码更简洁。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291723367.jpeg" alt="1687852275901"></p><br><h5 id="案例示范"><a href="#案例示范" class="headerlink" title="案例示范"></a><strong><font color='cornflowerblue'>案例示范</font></strong></h5><p><strong>案例一：</strong></p><p>屏幕小于540px时，背景为蓝色；屏幕大于等于540px并且小于970px的时候，背景为绿色；屏幕大于等于970的时候，背景为红色；</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">539px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">540px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">969px</span>) &#123; <span class="comment">/*可优化成：@media screen and (min-width:540px)*/</span></span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">970px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>案例二：</strong></p><p>rem实现元素动态大小变化</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">320px</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">640px</span>) &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.top</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">1rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">0.5rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291723484.gif" alt="1688029086053-20230629_165709"></p><br><h5 id="不同分辨率的font-size值"><a href="#不同分辨率的font-size值" class="headerlink" title="不同分辨率的font-size值"></a><strong><font color='cornflowerblue'>不同分辨率的font-size值</font></strong></h5><p>首先假设我上面的页面设计稿给我时候是按照640的标准尺寸给我的前提下，（当然这个尺寸肯定不一定是640，可以是320，或者480，又或是375）来看一组表格。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291723411.jpeg" alt="1688032688789"></p><p>页面是以640的宽度去切的，怎么计算不同宽度下font-site的值，大家看表格上面的数值变化应该能明白。</p><p>**举个例子：**384&#x2F;640 &#x3D; 0.6，384是640的0.6倍，所以384页面宽度下的font-size也等于它的0.6倍，这时384的font-size就等于12px。在不同设备的宽度计算方式以此类推。</p><br><h5 id="媒体查询加载css文件"><a href="#媒体查询加载css文件" class="headerlink" title="媒体查询加载css文件"></a><strong><font color='cornflowerblue'>媒体查询加载css文件</font></strong></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style1.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;screen and (min-width: 320px)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style2.css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;screen and (min-width: 640px)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* style.css */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: gold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* style1.css */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* style2.css */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当小于320px的时候整个页面背景色为gold色，在320-640px之间为pink色，大于640ppx为skyblue色。</p><br><h3 id="5-4、响应布局"><a href="#5-4、响应布局" class="headerlink" title="5.4、响应布局"></a><strong><font color='red'>5.4、响应布局</font></strong></h3><h4 id="1）响应式开发原理"><a href="#1）响应式开发原理" class="headerlink" title="1）响应式开发原理"></a><strong><font color='#10c300'>1）响应式开发原理</font></strong></h4><p>就是使用媒体查询针对不同宽度的设备进行布局和样式的设置，从而适配不同设备的目的。<br>设备的划分情况：</p><table><thead><tr><th>设备划分</th><th>尺寸区间</th></tr></thead><tbody><tr><td>超小屏幕（手机）</td><td>&lt; 768px</td></tr><tr><td>小屏设备（平板）</td><td>&gt;&#x3D; 768px ~ &lt; 992px</td></tr><tr><td>中等屏幕（桌面显示器）</td><td>&gt;&#x3D; 992px~ &lt; 1200px</td></tr><tr><td>宽屏设备（大桌面显示器）</td><td>&gt;&#x3D;1200px</td></tr></tbody></table><br><h4 id="2）响应式布局容器"><a href="#2）响应式布局容器" class="headerlink" title="2）响应式布局容器"></a><strong><font color='#10c300'>2）响应式布局容器</font></strong></h4><p>响应式需要一个<strong>父级作为布局容器</strong>，来配合子级元素来实现变化效果。</p><p>原理就是在不同屏幕下，通过媒体查询来改变这个布局容器的大小，再改变里面子元素的排列方式和大小，从而实现不同屏幕下，看到不同的页面布局和样式变化。</p><br><p><strong><font color='orange'>父容器版心的尺寸划分</font></strong></p><ul><li>超小屏幕（手机，小于 768px）：设置宽度为 100%</li><li>小屏幕（平板，大于等于 768px）：设置宽度为 750px （设置的宽度比屏幕宽度小 是因为让两侧留白更美观）</li><li>中等屏幕（桌面显示器，大于等于 992px）：宽度设置为 970px</li><li>大屏幕（大桌面显示器，大于等于 1200px）：宽度设置为 1170px</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">750px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: gray;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">992px</span>) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">970px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: gold;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">1170px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291725467.gif" alt="screenshots"></p><p><strong><font color='orange'>案例demo</font></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css//normalize.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css//index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="selector-tag">ul</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">        <span class="selector-tag">li</span> &#123;</span><br><span class="line">            <span class="attribute">background-color</span>: <span class="number">#f40</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">            <span class="selector-tag">line</span>-<span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">            <span class="selector-tag">text</span>-align: center;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">            <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.nav</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="selector-tag">ul</span> &#123;</span><br><span class="line">            <span class="selector-tag">li</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.nav</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">750px</span>;</span><br><span class="line">        <span class="selector-tag">ul</span> &#123;</span><br><span class="line">            <span class="selector-tag">li</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.nav</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">970px</span>;</span><br><span class="line">        <span class="selector-tag">ul</span> &#123;</span><br><span class="line">            <span class="selector-tag">li</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">33.3%</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.nav</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">970px</span>;</span><br><span class="line">        <span class="selector-tag">ul</span> &#123;</span><br><span class="line">            <span class="selector-tag">li</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291725430.gif" alt="screenshots"></p><h4 id="3）响应式布局框架—bootstrap"><a href="#3）响应式布局框架—bootstrap" class="headerlink" title="3）响应式布局框架—bootstrap"></a><strong><font color='#10c300'>3）响应式布局框架—bootstrap</font></strong></h4><p><strong><font color='orange'>Bootstrap简介</font></strong></p><p>Bootstrap 来自 Twitter（推特），是目前最受欢迎的前端框架。Bootstrap 是基于HTML、CSS 和 JAVASCRIPT 的，它简洁灵活，使得 Web 开发更加快捷。</p><p>框架：顾名思义就是一套架构，它有一套比较完整的网页功能解决方案，而且控制权在框架本身，有预制样式库、组件和插件。使用者要按照框架所规定的某种规范进行开发。</p><p><strong><font color='orange'>bootstrap优点</font></strong></p><ul><li>标准化的html+css编码规范</li><li>提供了一套简洁、直观、强悍的组件</li><li>有自己的生态圈，不断的更新迭代</li><li>让开发更简单，提高了开发的效率</li></ul><p><strong><font color='orange'>版本简介</font></strong></p><ul><li>2.x.x：停止维护,兼容性好,代码不够简洁，功能不够完善。</li><li>3.x.x：目前使用最多,稳定,但是放弃了IE6-IE7。对 IE8 支持但是界面效果不好,偏向用于开发响应式布局、移动设备优先的WEB 项目。</li><li>4.x.x：最新版，目前还不是很流行</li></ul><p><strong><font color='orange'>bootstrap基本使用</font></strong></p><p>在现阶段我们还没有接触JS相关课程，所以我们只考虑使用它的样式库。</p><p>Bootstrap 使用四步曲：</p><p><strong>1.创建文件夹结构</strong><br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291725292.png" alt="image-20240121231839494"></p><p><strong>2.创建 html 骨架结构</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Bootstrap 101 Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Bootstrap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--[if lt IE 9] 解决ie9以下浏览器对html5新增标签的不识别 并导致css不起作用的问题--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 解决ie9以下的浏览器对css3 media Query的不识别 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/respond.js/1.4.2/respond.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好，世界！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jQuery (necessary for Bootstrap&#x27;s JavaScript plugins) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/jquery/1.11.3/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.引入相关样式文件</strong></p><p>引入bootsrap的css样式就不要加公共样式了 它自带公共样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Bootstrap 核心样式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;bootstrap/css/bootstrap.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4.书写内容</strong></p><ul><li>直接拿Bootstrap 预先定义好的样式来使用</li><li>修改Bootstrap 原来的样式，注意权重问题</li><li>学好Bootstrap 的关键在于知道它定义了哪些样式，以及这些样式能实现什么样的效果</li></ul><p><strong><font color='orange'>bootstrap布局容器</font></strong></p><p>Bootstrap 需要为页面内容和栅格系统包裹一个 .container 或者.container-fluid 容器，它提供了两个作此用处的类。</p><table><thead><tr><th><strong>.container</strong></th><th><strong>.container-fluid</strong></th></tr></thead><tbody><tr><td>响应式布局的容器固定宽度<br />大屏 ( &gt;&#x3D;1200px) 宽度定为 1170px <br />中屏 ( &gt;&#x3D;992px) 宽度定为 970px <br />小屏 ( &gt;&#x3D;768px) 宽度定为 750px <br />超小屏 (100%)</td><td>流式布局容器 百分百宽度 <br />占据全部视口（viewport）的容器。</td></tr></tbody></table><p><a href="https://www.bootcss.com/">详见查看Bootstrap官网</a></p><br><h4 id="4）阿里百秀案例"><a href="#4）阿里百秀案例" class="headerlink" title="4）阿里百秀案例"></a><strong><font color='#10c300'>4）阿里百秀案例</font></strong></h4><p><a href="https://jihulab.com/shixna/demo/-/tree/%E9%98%BF%E9%87%8C%E7%99%BE%E7%A7%80?ref_type=heads">传送门</a></p><br><h3 id="5-5、扩展—less基础"><a href="#5-5、扩展—less基础" class="headerlink" title="5.5、扩展—less基础"></a><strong><font color='red'>5.5、扩展—less基础</font></strong></h3><p>Less（LeanerStyle Sheets 的缩写）是一门 CSS扩展语言，也成为CSS预处理器。</p><p>常见的CSS预处理器：<strong>Sass、Less、Stylus</strong></p><p>一句话：Less是一门 CSS 预处理语言，它扩展了CSS的动态特性。</p><ul><li>less编译</li><li>less变量</li><li>less嵌套</li><li>less运算</li><li>less混入</li></ul><h4 id="1）less编译"><a href="#1）less编译" class="headerlink" title="1）less编译"></a><strong><font color='#10c300'>1）less编译</font></strong></h4><p>本质上，LSs包含一套自定义的语法及一个解析器，用户根据这些语法定义自己的样式规则，这些规则最终会通过解析器，编译生成对应的CSS文件。所以，我们需要把我们的.less文件，编译生成为.css文件，这样我们的html页面才能使用。</p><p><strong>推荐方法</strong><br>1）基于node环境在线安装Less，使用cmd命令安装less。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g less</span><br></pre></td></tr></table></figure><p>在当前文件夹，使用cmd命令“lessc style.less&gt;style.css”</p><p>2）VScode中安装Easy LESS插件，只要保存一下less文件，会自动生成一个css文件。<strong>（推荐）</strong></p><h4 id="2）less变量"><a href="#2）less变量" class="headerlink" title="2）less变量"></a><strong><font color='#10c300'>2）less变量</font></strong></h4><p>变量是指没有固定的值，可以改变的，因为我们css中的一些颜色和数值等经常使用。</p><p><strong>语法：</strong>@变量名: 值;</p><p><strong>变量命名规范：</strong></p><ul><li>必须有@为前缀</li><li>不能包含特殊字符</li><li>不能以数字开头</li><li>大小写敏感</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.less */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@baseColor</span>:#f40;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: @baseColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3）less嵌套"><a href="#3）less嵌套" class="headerlink" title="3）less嵌套"></a><strong><font color='#10c300'>3）less嵌套</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 常规写法 */</span></span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.login</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* less写法 */</span></span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">    <span class="selector-class">.logo</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果遇见 （交集|伪类|伪元素选择器） ，利用&amp;进行连接</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 常规写法 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line"><span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* less写法 */</span></span><br><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span>&#123; // &amp;表示的就是父元素<span class="selector-tag">a</span></span><br><span class="line"><span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4）less运算"><a href="#4）less运算" class="headerlink" title="4）less运算"></a><strong><font color='#10c300'>4）less运算</font></strong></h4><p>任何数字、颜色或者变量都可以参与运算。就是Less提供了加（+）、减（-）、乘（*）、除（&#x2F;）算术运算。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*Less 里面写*/</span></span><br><span class="line"><span class="keyword">@witdh</span>: <span class="number">10px</span> + <span class="number">5</span>;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">border</span>: @witdh solid red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*生成的css*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">15px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Less 甚至还可以这样 */</span></span><br><span class="line"><span class="attribute">width</span>: (@width + <span class="number">5</span>) * <span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li>除法需要使用小括号括起来。例如：(100px &#x2F; 5)</li><li>乘号（*）和除号（&#x2F;）的写法</li><li>运算符中间左右有个空格隔开 1px + 5</li><li>对于两个不同的单位的值之间的运算，运算结果的值取第一个值的单位</li><li>如果两个值之间只有一个值有单位，则运算结果就取该单位</li></ul><h4 id="5）less混入"><a href="#5）less混入" class="headerlink" title="5）less混入"></a><strong><font color='#10c300'>5）less混入</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* less */</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="selector-class">.border</span>() <span class="comment">/* 从历史上看，混入调用中的括号是可选的，但可选的括号已被弃用，在未来的版本中将是必需的。 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* css输出 */</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange'>带括号的混入</font></p><p>如果你想创建一个 mixin 但你不希望那个 mixin 出现在你的 CSS 输出中，请在 mixin 定义之后加上括号。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* less */</span></span><br><span class="line"><span class="selector-class">.border</span>() &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="selector-class">.border</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* css输出 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange'>带参数的混入</font></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* less */</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="keyword">@width</span>:1px) &#123; <span class="comment">/* 这里最好添加一个默认参数 */</span></span><br><span class="line">    <span class="attribute">border</span>: @width solid orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="selector-class">.border</span>(<span class="number">5px</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* css输出 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6）less文件之间的引入"><a href="#6）less文件之间的引入" class="headerlink" title="6）less文件之间的引入"></a><strong><font color='#10c300'>6）less文件之间的引入</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.less */</span> </span><br><span class="line">// 将common<span class="selector-class">.js</span>的样式引入到index<span class="selector-class">.less</span>里面，注意import后面需要一个空格</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;common.less&quot;</span></span><br></pre></td></tr></table></figure><br><h2 id="六、移动端适配方案"><a href="#六、移动端适配方案" class="headerlink" title="六、移动端适配方案"></a><strong>六、移动端适配方案</strong></h2><h3 id="6-1、媒体查询-REM"><a href="#6-1、媒体查询-REM" class="headerlink" title="6.1、媒体查询 + REM"></a><strong><font color='red'>6.1、媒体查询 + REM</font></strong></h3><p>设计稿常见尺寸宽度</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732127.png" alt="image-20230701234751123"></p><p>一般情况下，我们以一套或两套效果图适应大部分的屏幕，放弃极端屏或对其优雅降级，牺牲一些效果。<strong>现在基本以750px为准。</strong></p><ul><li>假设设计稿是750px</li><li>我们把整个屏幕划分为10等份（划分标准不一可以是20份也可以是15等份）</li><li>每一份作为html字体大小，这里就是75px</li><li>那么在320px设备的时候，字体大小为320&#x2F;10就是 32px</li></ul><p>假设我们有一个设计稿，宽度为750px。我们将整个屏幕分为10等份，每份为75px，作为html字体大小的基准。现在我们有一个正方形的页面元素，宽度和高度都为150px。</p><p>在750px屏幕下，这个页面元素的宽度和高度分别为150&#x2F;75&#x3D;2rem，因此它是2rem×2rem。</p><p>在320px屏幕下，html字体大小为32px，因此2rem等于64px。这时该页面元素的宽度和高度也会变成64px。</p><p>这样，无论在何种屏幕尺寸下，页面元素都会按照设计稿中的比例进行等比缩放，确保了页面在不同设备上的一致性和美观性。</p><table><thead><tr><th align="left">屏幕宽度</th><th align="left">HTML的FONT-SIZE</th><th align="left">盒子的宽度</th></tr></thead><tbody><tr><td align="left">750px</td><td align="left">750&#x2F;10 &#x3D; 75px</td><td align="left">4rem &#x3D; 300px ÷ 75</td></tr><tr><td align="left">640px</td><td align="left">640&#x2F;10 &#x3D; 64px</td><td align="left">4rem &#x3D; 264px ÷ 64</td></tr><tr><td align="left">480px</td><td align="left">480&#x2F;10 &#x3D; 48px</td><td align="left">4rem &#x3D; 192px ÷ 48</td></tr><tr><td align="left">320px</td><td align="left">320&#x2F;10 &#x3D; 32px</td><td align="left">4rem &#x3D; 128px ÷ 32</td></tr></tbody></table><p><strong>总结</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">根元素html字体大小 = 屏幕宽度 / 划分的份数(自定义)</span><br><span class="line"></span><br><span class="line">页面元素的rem值 = 页面元素值（px） /  根元素html字体大小</span><br></pre></td></tr></table></figure><p><a href="url" title="https:&#x2F;&#x2F;jihulab.com&#x2F;shixna&#x2F;demo&#x2F;-&#x2F;tree&#x2F;%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2+REM%E5%B8%83%E5%B1%80">媒体查询+REM布局demo</a></p><br><h4 id="1）媒体查询"><a href="#1）媒体查询" class="headerlink" title="1）媒体查询"></a><strong><font color='#10c300'>1）媒体查询</font></strong></h4><p>通过媒体查询动态设置html字体大小，为了兼容低版本的浏览器，因为低版本的浏览器可能不兼容css3的媒体查询，所以会默认设置一个根目录的字体大小</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// 根据媒体查询，设置不同屏幕中的 <span class="selector-tag">html</span> 的字号</span><br><span class="line">// 屏幕划分的是 <span class="number">10</span> 等份</span><br><span class="line">// 默认显示 <span class="selector-tag">html</span> 的字号，参考 <span class="number">750px</span> 的宽度</span><br><span class="line">// 定义份数变量</span><br><span class="line">$number: <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">75px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// <span class="number">320px</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">320px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: (<span class="number">320px</span> / $number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// <span class="number">360px</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">360px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: (<span class="number">360px</span> / $number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// <span class="number">375px</span>,Iphone <span class="number">678</span> 的开发尺寸</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">375px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: (<span class="number">375px</span> / $number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// <span class="number">384px</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">384px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: (<span class="number">384px</span> / $number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><h4 id="2）px转-rem转换"><a href="#2）px转-rem转换" class="headerlink" title="2）px转 rem转换"></a><strong><font color='#10c300'>2）px转 rem转换</font></strong></h4><p><strong>1、自己封装一个scss函数</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以scss为例, 设计稿尺寸为750  函数指令</span></span><br><span class="line"><span class="keyword">@function</span> rem(<span class="variable">$px</span>) &#123;</span><br><span class="line"><span class="keyword">@return</span> <span class="variable">$px</span> / (<span class="number">750</span> / <span class="number">10rem</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在页面中使用  比如750设计稿里的width是375</span></span><br><span class="line"><span class="attribute">width</span>: <span class="built_in">rem</span>(<span class="number">375</span>); 转换之后为<span class="number">5rem</span></span><br></pre></td></tr></table></figure><p><strong>2、Vscode插件 <code>cssrem</code></strong></p><p>可将写的px自动转换成rem，插件默认font-size为16，我们需要手动修改。<br>以设计稿是750px为例，将页面划分为10等份，那么这里就设置为75&#x3D;750&#x2F;10；如果将页面划分为15等份，那么这里就设置为50&#x3D;750&#x2F;15；</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732169.png" alt="image-20230703155732209"></p><p>输入px的时候会弹出转换后的rem</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732065.png" alt="image-20230911222014499"></p><br><h3 id="6-2、Flexible-REM"><a href="#6-2、Flexible-REM" class="headerlink" title="6.2、Flexible + REM"></a><strong><font color='red'>6.2、Flexible + REM</font></strong></h3><p><strong>flexible有两个版本@0.3.2和@2.0两个版本分别对应github仓库的master和2.0分支也即对应lib-flexible和amfe-flexible</strong></p><p>地址：<a href="https://github.com/amfe/lib-flexible">https://github.com/amfe/lib-flexible</a></p><table><thead><tr><th>名称</th><th>版本</th><th>分支</th><th>特点</th><th>备注</th></tr></thead><tbody><tr><td>lib-flexible</td><td><a href="mailto:&#x66;&#x6c;&#101;&#x78;&#x69;&#98;&#108;&#101;&#64;&#48;&#46;&#51;&#x2e;&#50;">flexible@0.3.2</a></td><td>master</td><td>解决1px问题</td><td>作为过渡方案，弃用</td></tr><tr><td>amfe-flexible</td><td><a href="mailto:&#x66;&#108;&#101;&#120;&#x69;&#98;&#108;&#x65;&#x40;&#50;&#46;&#x30;">flexible@2.0</a></td><td>2.0</td><td></td><td>建议使用</td></tr></tbody></table><p>amfe-flexible是lib-flexible的升级方案 lib-flexible是一种过渡方案，不能与响应式布局兼容。由于viewport单位得到众多浏览器的兼容，上面这种方案现在已经被官方弃用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用viewport来替代此方。amfe-flexible的缺点是字体大小适配问题。</p><br><h4 id="1）lib-flexible（弃用）"><a href="#1）lib-flexible（弃用）" class="headerlink" title="1）lib-flexible（弃用）"></a><strong><font color='#10c300'>1）lib-flexible（弃用）</font></strong></h4><p><a href="https://jihulab.com/shixna/source-code/-/blob/main/lib-flexible.js">lib-flexible源码解析</a></p><p><strong>核心</strong></p><ol><li>不需设置viewport 的<code>&lt;meta&gt;</code>标签，根据dpr动态改写viewport 的<code>&lt;meta&gt;</code>标签的initial-scale，maximum-scale，minimum-scale。可解决1px问题</li><li>给<code>&lt;html&gt;</code>元素添加<code>data-dpr</code>属性，并且动态改写<code>data-dpr</code>的值；</li><li>给<code>&lt;html&gt;</code>元素添加<code>font-size</code>属性，并且动态改写<code>font-size</code>的值 ；</li></ol><p><strong>优点：</strong></p><ol><li>无1px问题；</li><li>无字体在ios高倍屏下的自适应问题；</li></ol><p><strong>缺点：</strong></p><ol><li><p>该js插件对所有安卓设备都按照1dpr处理，导致在三星S8(dpr:4)的手机上整体显示较小；</p></li><li><p>不兼容响应式布局；<br><code>@media</code>语法中涉及到的尺寸查询语句，查询的尺寸依据是当前设备的物理像素，和Flexible的布局理论（即针对不同<code>dpr</code>设备等比缩放视口的<code>scale</code>值，从而同时改变布局视口和视觉视口大小）相悖，因此响应式布局在“等比缩放视口大小”的情境下是无法正常工作的。</p></li><li><p>在微信环境（或其他可设置字体大小的Web浏览器中，如Safari）下；<br>设置微信的字体大小（调大）后再打开使用Flexible技术适配的Web页面，你会发现页面布局错乱了，所有使用<code>rem</code>设置大小的元素都变大了，因为在调整Web浏览器的字体大小后，我们的”视口”也响应的等比缩小了，即视觉视口(<code>window.innerWidth</code>)，豁然开朗，并不是我们的元素变大了，而是我们的视觉视口变小了！</p></li></ol><p><strong>扩展：</strong></p><p>1、应用中，对字体大小不使用rem，rem的基准值与屏幕宽度成正比, 这就造成相同分辨率的屏幕,越宽字越大,越窄字越小，因此，在开发过程中，我们创造了 dpx(dpr px) 这个单位,，按照dpr来放大 1<em>px, 2</em>px, 3px 大小的字体，再按照屏幕dpr缩小,，这样就达到了字体不缩放，各种屏幕的字体看起来都差不多，也与屏幕宽度无关。<br>根据lib-flexible可以给<code>&lt;html&gt;</code>元素添加<code>data-dpr</code>属性，并且动态改写<code>data-dpr</code>的值，则可以用以下方法依据屏幕的dpr动态的给文字设置大小，amfe-flexible则无法实现。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个mixin 根据不同dpr将px值转化成相应的dpr的px值。</span></span><br><span class="line"><span class="keyword">@mixin</span> fontPX(<span class="variable">$px</span>:<span class="number">16px</span>, <span class="variable">$name</span>:font-size) &#123;</span><br><span class="line">    #&#123;<span class="variable">$name</span>&#125;: <span class="built_in">round</span>(<span class="variable">$px</span>)*<span class="number">1PX</span>;   <span class="comment">// round() 函数可以将一个数四舍五入为一个最接近的整数，后面的单位必须设置成PX大写 要不然会转换成rem</span></span><br><span class="line">    <span class="selector-attr">[data-dpr=<span class="string">&#x27;2&#x27;</span>]</span> &amp; &#123;</span><br><span class="line">        #&#123;<span class="variable">$name</span>&#125;: <span class="variable">$px</span>*<span class="number">2PX</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-attr">[data-dpr=<span class="string">&#x27;3&#x27;</span>]</span> &amp; &#123;</span><br><span class="line">        #&#123;<span class="variable">$name</span>&#125;: <span class="variable">$px</span>*<span class="number">3PX</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在页面中使用</span></span><br><span class="line"><span class="keyword">@include</span> fontPX(<span class="number">15</span>);</span><br></pre></td></tr></table></figure><p>2、边框一般不使用<code>rem</code> , 在移动设备上最常见的就是<code>1px</code>的边框, 由上一条规则我们知道<code>rem</code>无法精确到<code>1px</code>, 它只是一个与屏幕宽度有关的 模糊值。 已知在两种情况下无法满足我们的需求:<br> A、需求1物理像素的边框。<br> B、在屏幕比较窄的1dpr的安卓设备上,由于rem不能整除造成rem换算成px 不足 <code>1px</code>, 边框丢失。</p><br><h4 id="2）amfe-flexible"><a href="#2）amfe-flexible" class="headerlink" title="2）amfe-flexible"></a><strong><font color='#10c300'>2）amfe-flexible</font></strong></h4><p><a href="https://jihulab.com/shixna/source-code/-/blob/main/amfe-flexible.js">amfe-flexible源码解析</a></p><p><strong>核心</strong></p><ol><li><p>需设置viewport 的<code>&lt;meta&gt;</code>标签；</p></li><li><p>获取DPR，根据DPR动态的设置body的字体大小；<strong><code>document.body.style.fontSize = (12 * dpr) + &#39;px&#39;</code></strong></p></li><li><p>将屏幕划分为十份，并动态给html设置字体大小；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> docEl = <span class="variable language_">document</span>.<span class="property">documentElement</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setRemUnit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> rem = docEl.<span class="property">clientWidth</span> / <span class="number">10</span></span><br><span class="line">    docEl.<span class="property">style</span>.<span class="property">fontSize</span> = rem + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>优点：</strong></p><ol><li>没有给安卓的dpr固定设置为1；</li><li>兼容响应式布局；</li></ol><p><strong>缺点：</strong></p><ol><li>不能像lib-flexible给字体设置dpx单位，则会有字体大小适配问题（用rem影响不大）；</li><li>不能像lib-flexible动态设置viewport 的<code>&lt;meta&gt;</code>标签，解决1px问题；</li></ol><p><strong>扩展：</strong></p><p>因为flexible.js是默认将屏幕分为10等分，但是当屏幕大于750的时候希望不要再去重置html字体了，所以要自己通过媒体查询设置一下。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 如果我们的屏幕超过了 750px 那么我们就按照 750设计稿来走 不会让我们页面超过750px */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">750px</span>) &#123;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">75px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">当屏幕大小大于等于<span class="number">75px</span> <span class="selector-tag">html</span>的字体大小还是<span class="number">75px</span> 记得提高权重</span><br></pre></td></tr></table></figure><br><h4 id="3）px转rem"><a href="#3）px转rem" class="headerlink" title="3）px转rem"></a><strong><font color='#10c300'>3）px转rem</font></strong></h4><p><code>postcss-pxtorem</code></p><p>以vue项目为例，在项目里面写px，项目运行时会自动转换成rem。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// postcss.config.js中配置，若没有该文件就新建一个</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">        <span class="comment">// 兼容浏览器，添加前缀</span></span><br><span class="line">        <span class="attr">autoprefixer</span>: &#123;</span><br><span class="line">            <span class="attr">overrideBrowserslist</span>: [</span><br><span class="line">                <span class="string">&#x27;Android 4.1&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;iOS 7.1&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Chrome &gt; 31&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;ff &gt; 31&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;ie &gt;= 8&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;last 10 versions&#x27;</span> <span class="comment">// 所有主流浏览器最近10版本用</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">grid</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">            <span class="comment">// rootValue: 75, // 根目录字体大小。设计图页面尺寸如果是750就填75,是640就填入64,如果为了适配vantui我们需要和vant官方一致37.5。比如元素宽150px,最终页面会换算成 2rem （150px/75=2rem）</span></span><br><span class="line">            <span class="title function_">rootValue</span>(<span class="params">&#123; file &#125;</span>) &#123; <span class="comment">//根据不同文件设置不同转换大小</span></span><br><span class="line">                <span class="keyword">return</span> file.<span class="title function_">indexOf</span>(<span class="string">&#x27;vant&#x27;</span>) !== -<span class="number">1</span> ? <span class="number">37.5</span> : <span class="number">75</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// 属性的选择器，*表示通用</span></span><br><span class="line">            <span class="attr">minPixelValue</span>: <span class="number">12</span>, <span class="comment">// px小于12的不会被转换</span></span><br><span class="line">            <span class="attr">unitPrecision</span>: <span class="number">2</span>, <span class="comment">// 保留rem小数点多少位</span></span><br><span class="line">            <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;van&#x27;</span>] <span class="comment">// 忽略的选择器   .ig-  表示 .ig- 开头的都不会转换</span></span><br><span class="line">            <span class="comment">// selectorBlackList: [&#x27;.radius&#x27;],  //则是一个对css选择器进行过滤的数组，比如你设置为[&#x27;fs&#x27;]，那例如fs-xl类名，里面有关px的样式将不被转换，这里也支持正则写法。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="6-3、vh、vw方案（推荐）"><a href="#6-3、vh、vw方案（推荐）" class="headerlink" title="6.3、vh、vw方案（推荐）"></a><strong><font color='red'>6.3、vh、vw方案（推荐）</font></strong></h3><blockquote><p>vw&#x2F;vh这种方案是将视觉视口的宽度&#x2F;高度分为100份，其实上面的flexible方案就是模仿这种方法，因为当时vm的兼容性不好，flexible就变成了一种过渡方案。</p></blockquote><ul><li><code>vw(Viewport&#39;s width)</code>：<code>1vw</code>等于视觉视口的1%</li><li><code>vh(Viewport&#39;s height)</code> :<code>1vh</code> 为视觉视口高度的1%</li><li><code>vmin</code> : <code>vw</code> 和 <code>vh</code> 中的较小值</li><li><code>vmax</code> : 选取 <code>vw</code> 和 <code>vh</code> 中的最大值</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732136.png" alt="image-20240108231450316"></p><p>从我们的实际开发工作出发，我们现在都是统一使用的<code>iPhone6</code>的视觉设计稿（即宽度为**<code>750px</code><strong>），那么</strong><code>100vw=750px</code><strong>，即</strong><code>1vw = 7.5px</code><strong>。那么如果设计稿上某一元素的宽度为</strong><code>value</code><strong>像素，那么其对应的vw值则可以通过</strong><code>vw = value / 7.5</code>**来计算得到。</p><p>这里的比例关系我们也不用自己换算，我们可以使用<code>PostCSS</code>的 <strong><code>postcss-px-to-viewport</code></strong> 插件帮我们完成这个过程。写代码时，我们只需要根据<code>UI</code>给的设计图写<code>px</code>单位即可。</p><p><strong>缺点：</strong></p><ul><li>不需要 js 做适配</li><li>方案灵活技能实现整体缩放又能实现局部不缩放</li></ul><p><strong>缺点：</strong></p><ul><li>px转换成vw不一定能整除，因此会有一定的像素差</li><li>比如当容器使用vw，margin采用px时，很容易造成整体宽度超过100vw，从而影响布局效果。对于这个问题，我们可以将margin换成padding，并且配合box-sizing解决。随着将来浏览器或者应用自身的WebView对calc()函数的支持之后，碰到vw和px混合使用的时候，可以结合calc()函数使用。</li><li>还是有1px和图片模糊的问题</li></ul><br><h4 id="1）px转vw-vh"><a href="#1）px转vw-vh" class="headerlink" title="1）px转vw&#x2F;vh"></a><strong><font color='#10c300'>1）px转vw&#x2F;vh</font></strong></h4><p><code>postcss-px-to-viewport</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// postcss.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">&#123; webpack &#125;</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> viewWidth = webpack.<span class="property">resourcePath</span>.<span class="title function_">includes</span>(path.<span class="title function_">join</span>(<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;vant&#x27;</span>)) ? <span class="number">375</span> : <span class="number">750</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">plugins</span>: &#123;</span><br><span class="line">                  <span class="string">&#x27;postcss-px-to-viewport&#x27;</span>: &#123;</span><br><span class="line">                        <span class="attr">unitToConvert</span>: <span class="string">&#x27;px&#x27;</span>, <span class="comment">// 要转化的单位</span></span><br><span class="line">                        <span class="attr">viewportWidth</span>: viewWidth, <span class="comment">// UI设计稿的宽度</span></span><br><span class="line">                        <span class="attr">unitPrecision</span>: <span class="number">6</span>, <span class="comment">// 转换后的精度，即小数点位数</span></span><br><span class="line">                        <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span></span><br><span class="line">                        <span class="attr">viewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">// 指定需要转换成的视窗单位，默认vw</span></span><br><span class="line">                        <span class="attr">fontViewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">// 指定字体需要转换成的视窗单位，默认vw</span></span><br><span class="line">                        <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;wrap&#x27;</span>], <span class="comment">// 指定不转换为视窗单位的类名，</span></span><br><span class="line">                        <span class="attr">minPixelValue</span>: <span class="number">1</span>, <span class="comment">// 默认值1，小于或等于1px则不进行转换</span></span><br><span class="line">                        <span class="attr">mediaQuery</span>: <span class="literal">true</span>, <span class="comment">// 是否在媒体查询的css代码中也进行转换，默认false</span></span><br><span class="line">                        <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 是否转换后直接更换属性值</span></span><br><span class="line">                        <span class="attr">exclude</span>: [<span class="regexp">/node_modules/</span>] <span class="comment">// 设置忽略文件，用正则做目录名匹配</span></span><br><span class="line">                  &#125;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2）降级处理不兼容"><a href="#2）降级处理不兼容" class="headerlink" title="2）降级处理不兼容"></a><strong><font color='#10c300'>2）降级处理不兼容</font></strong></h4><p>在我们已知的大部分主流浏览器中，都是天然支持<code>vw</code>单位的，但不排除有某些浏览器的某些版本存在不兼容的情况，如果业务需要，我们可以通过如下两种js库做降级处理：</p><ul><li><strong>CSS Houdini：<strong>通过CSS Houdini针对vw做处理，调用CSS Typed DOM Level1提供的</strong><code>CSSUnitValue API</code></strong>；</li><li><strong>CSS Polifill：<strong>通过相应的Polyfill做响应的处理，目前针对vw单位的Polyfill主要有：</strong><code>vminpoly</code></strong>、<strong><code>Viewport Units Buggyfill</code></strong>、<strong><code>vunits.js</code><strong>和</strong><code>Modernizr</code></strong>。大漠老师比较推荐的是 <strong>Viewport Units Buggyfill</strong></li></ul><br><h5 id="Viewport-Units-Buggyfill"><a href="#Viewport-Units-Buggyfill" class="headerlink" title="Viewport Units Buggyfill"></a><strong><font color='cornflowerblue'>Viewport Units Buggyfill</font></strong></h5><p><strong>1、引入 JavaScript 文件</strong></p><ul><li>viewport-units-buggyfill 主要有两个 JavaScript 文件：viewport-units-buggyfill.js 和 viewport-units-buggyfill.hacks.js。只需要在 HTML 文件中引入这两个文件。比如在 Vue 项目中的 index.html 引入它们：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//g.alicdn.com/fdilab/lib3rd/viewport-units-buggyfill/0.6.2/??viewport-units-buggyfill.hacks.min.js,viewport-units-buggyfill.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><code>备用地址：</code></strong><a href="https://jihulab.com/shixna/source-code/-/blob/main/viewport-units-buggyfill.js">viewport-units-buggyfill.js</a></p><p><strong>2、在 HTML 文件中调用 viewport-units-buggyfill</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">viewportUnitsBuggyfill</span>.<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">hacks</span>: <span class="variable language_">window</span>.<span class="property">viewportUnitsBuggyfillHacks</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3、添加content：属性</strong></p><p>在你的<code>CSS</code>中，只要使用到了viewport的单位地方，需要在样式中添加<code>content</code>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-viewport-units-using-thingie</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50vmin</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50vmax</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50vh</span> - <span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="number">50vw</span> - <span class="number">100px</span>);</span><br><span class="line">  <span class="comment">/* hack to engage viewport-units-buggyfill */</span></span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;viewport-units-buggyfill; width: 50vmin; height: 50vmax; top: calc(50vh - 100px); left: calc(50vw - 100px);&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这可能会令你感到恶心，而且我们不可能每次写<code>vw</code>都去人肉的计算。特别是在我们的这个场景中，我们使用了**<code>postcss-px-to-viewport</code><strong>这个插件来转换</strong><code>vw</code>**，更无法让我们人肉的去添加<code>content</code>内容。</p><p>这时候我们就需要结合**<code>postcss-viewport-units</code><strong>插件，让插件自动去添加处理</strong><code>content:</code>**属性</p><br><h5 id="postcss-viewport-units"><a href="#postcss-viewport-units" class="headerlink" title="postcss-viewport-units"></a><strong><font color='cornflowerblue'>postcss-viewport-units</font></strong></h5><p>在postcss.config.js文件中配置如下代码之后，之后则会自动去添加处理**<code>content:</code>**属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: &#123;</span><br><span class="line">  <span class="string">&#x27;postcss-viewport-units&#x27;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="缺陷"><a href="#缺陷" class="headerlink" title="缺陷"></a><strong><font color='cornflowerblue'>缺陷</font></strong></h5><p>使用了 Viewport Units Buggyfill 后，它会在占用 content 属性，因此会或多或少的造成一些副作用。如 <strong>img元素</strong>和<strong>伪元素</strong>的使用**::before** 或**::after**。</p><p>**1）**对于 img，在部分浏览器中，content 的写入会造成图片无法正常展示，这时候需要全局添加样式覆盖：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: normal <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**2）<strong>对于::before 等伪元素，就算是在里面使用了 vw 单位，Viewport Units Buggyfill 对其并不会起作用（添加</strong><code>content:</code>**属性），如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 编译前</span><br><span class="line"><span class="selector-class">.after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;after content&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line">// 编译后</span><br><span class="line"><span class="selector-class">.after</span><span class="selector-attr">[data-v-469af010]</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;after content&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">13.333vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2.667vw</span>;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="七、适配iPhoneX"><a href="#七、适配iPhoneX" class="headerlink" title="七、适配iPhoneX"></a><strong>七、适配iPhoneX</strong></h2><p>在<code>iPhoneX</code>发布后，许多厂商相继推出了具有边缘屏幕的手机。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732230.png" alt="image-20240110001539481"></p><p>这些手机和普通手机在外观上无外乎做了三个改动：圆角（<code>corners</code>）、刘海（<code>sensor housing</code>）和小黑条（<code>Home Indicator</code>），为了适配这些手机，产生了安全区域的概念。</p><p><strong>安全区域</strong>：指的就是不受前面这几种情况的影响，把页面限制在安全区域内，使页面显示正常。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732179.png" alt="image-20240112005125417"></p><h4 id="7-1、viewport-fit"><a href="#7-1、viewport-fit" class="headerlink" title="7.1、viewport-fit"></a><strong><font color='red'>7.1、viewport-fit</font></strong></h4><p>从 iOS11 开始 ，为了适配刘海屏，Apple 公司对 HTML 的 viewport meta 标签做了扩展，让页面充满全屏</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;viewport-fit=cover&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>viewport-fit 属性</strong></p><p>默认情况下或者设置为<code>auto</code>和<code>contain</code>效果相同</p><table><thead><tr><th>值</th><th>含义</th></tr></thead><tbody><tr><td>contain</td><td>可视窗口完全显示网页内容 (左图)</td></tr><tr><td>cover</td><td>网页内容完全覆盖可视窗口 (右图)</td></tr><tr><td>auto</td><td>默认值，跟 contain 表现一致</td></tr></tbody></table><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732694.png" alt="image-20240112005551373"></p><h4 id="7-2、env、constant"><a href="#7-2、env、constant" class="headerlink" title="7.2、env、constant"></a><strong><font color='red'>7.2、env、constant</font></strong></h4><p>我们需要将顶部和底部合理的摆放在安全区域内，<code>iOS11</code>新增了两个<code>CSS</code>函数<code>env、constant</code>，用于设定安全区域与边界的距离。</p><p><font color="#f65e63" size="">**注意：**constant在iOS &lt; 11.2的版本中生效，env在iOS &gt;&#x3D; 11.2的版本中生效</font></p><p>函数的内部可以是四个常量：</p><blockquote><p><strong><code>safe-area-inset-left</code></strong>：安全区域距离左边边界距离</p><p><strong><code>safe-area-inset-right</code></strong>：安全区域距离右边边界距离</p><p><strong><code>safe-area-inset-top</code></strong>：安全区域距离顶部边界距离</p><p><strong><code>safe-area-inset-bottom</code></strong>：安全区域距离底部边界距离</p></blockquote><br><p><strong><font color='orange'>使用方法</font></strong></p><p>这个函数必须是指定viewport-fit之后才可以使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;viewport-fit=cover&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>constant</code>在<code>iOS &lt; 11.2</code>的版本中生效，<code>env</code>在<code>iOS &gt;= 11.2</code>的版本中生效，这意味着我们往往要同时设置他们，将页面限制在安全区域内：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 使用 <span class="keyword">@supports</span> 查询机型是否支持 constant() / env() 实现兼容代码隔离，个别安卓也会成功进入这个判断，因此加上<span class="attribute">-webkit-overflow-scrolling</span>: touch的判断可以有效规避安卓机。</span><br><span class="line"></span><br><span class="line">@supports((<span class="attribute">height</span>:constant(safe-area-inset-top)) <span class="keyword">or</span> (<span class="attribute">height</span>:env(safe-area-inset-top))) <span class="keyword">and</span> (<span class="attribute">-webkit-overflow-scrolling</span>:touch)&#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>:</span><br><span class="line">            <span class="built_in">constant</span>(safe-area-inset-top)</span><br><span class="line">            <span class="built_in">constant</span>(safe-area-inset-right)</span><br><span class="line">            <span class="built_in">constant</span>(safe-area-inset-bottom)</span><br><span class="line">            <span class="built_in">constant</span>(safe-area-inset-left); <span class="comment">/* 兼容 iOS &lt; 11.2 */</span></span><br><span class="line">        <span class="attribute">padding</span>:</span><br><span class="line">            <span class="built_in">env</span>(safe-area-inset-top)</span><br><span class="line">            <span class="built_in">env</span>(safe-area-inset-right)</span><br><span class="line">            <span class="built_in">env</span>(safe-area-inset-bottom)</span><br><span class="line">            <span class="built_in">env</span>(safe-area-inset-left); <span class="comment">/* 兼容 iOS &gt;= 11.2 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>@supports() {} 扩展</font></strong></p><p>CSS中的 @supports 用于检测浏览器是否支持 CSS 的某个属性。其实就是条件判断，如果支持某个属性可以写一套样式，如果不支持某个属性，可以提供另外一套样式作为替补。</p><p><strong>语法</strong></p><p>@supports 规则由一组样式声明和一条支持条件构成。支持条件由一条或多条使用 逻辑与（and）、逻辑或（or）、逻辑非（not）结合的名称 - 值对（name-value pair）组成。可以使用圆括号调整操作符的优先级。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span>(prop:value) &#123;</span><br><span class="line">  <span class="comment">/* more styles */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">例子：检查是否支持 dispaly: flex</span><br><span class="line">@supports (display: flex) &#123;</span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">no操作符</span><br><span class="line"><span class="comment">/* 如果浏览器不支持display:flex属性的话，那么div的样式就是 float: right */</span></span><br><span class="line"><span class="keyword">@supports</span> <span class="keyword">not</span> (<span class="attribute">display</span>: flex) &#123; </span><br><span class="line">  <span class="selector-tag">div</span> &#123;    </span><br><span class="line">    <span class="attribute">float</span>: right;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">and 操作符</span><br><span class="line"><span class="comment">/* 如果浏览器支持 display:flex 和 box-shadow 的属性，就执行里面自己的样式 */</span></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: flex) <span class="keyword">and</span> ( <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> black ) &#123; &#125;</span><br><span class="line"></span><br><span class="line">or 操作符</span><br><span class="line"><span class="comment">/* 如果浏览器支持其中一个,就可执行里面自己的样式 */</span></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: -webkit-flex) <span class="keyword">or</span> (<span class="attribute">display</span>: -moz-flex) <span class="keyword">or</span>(<span class="attribute">display</span>: flex) &#123;&#125;</span><br></pre></td></tr></table></figure><br><h2 id="八、扩展"><a href="#八、扩展" class="headerlink" title="八、扩展"></a><strong>八、扩展</strong></h2><h4 id="8-1、横屏适配"><a href="#8-1、横屏适配" class="headerlink" title="8.1、横屏适配"></a><strong><font color='red'>8.1、横屏适配</font></strong></h4><p>很多视口我们要对横屏和竖屏显示不同的布局，所以我们需要检测在不同的场景下给定不同的样式：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408291732718.png" alt="image-20240112012952982"></p><h5 id="1）JavaScript检测横屏"><a href="#1）JavaScript检测横屏" class="headerlink" title="1）JavaScript检测横屏"></a><strong><font color='#10c300'>1）JavaScript检测横屏</font></strong></h5><p><code>window.orientation</code>:获取屏幕旋转方向</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">orientation</span> === <span class="number">180</span> || <span class="variable language_">window</span>.<span class="property">orientation</span> === <span class="number">0</span>) &#123; </span><br><span class="line">      <span class="comment">// 正常方向或屏幕旋转180度</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;竖屏&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">orientation</span> === <span class="number">90</span> || <span class="variable language_">window</span>.<span class="property">orientation</span> === -<span class="number">90</span> )&#123; </span><br><span class="line">       <span class="comment">// 屏幕顺时钟旋转90度或屏幕逆时针旋转90度</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;横屏&#x27;</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure><h5 id="2）CSS检测横屏"><a href="#2）CSS检测横屏" class="headerlink" title="2）CSS检测横屏"></a><strong><font color='#10c300'>2）CSS检测横屏</font></strong></h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>: portrait) &#123;</span><br><span class="line">  <span class="comment">/*竖屏...*/</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>: landscape) &#123;</span><br><span class="line">  <span class="comment">/*横屏...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="8-2、link和-import引入的区别"><a href="#8-2、link和-import引入的区别" class="headerlink" title="8.2、link和@import引入的区别"></a><strong><font color='red'>8.2、link和@import引入的区别</font></strong></h4><ul><li>**本质：**link属于 XHTML 标签，而 <strong>@import</strong> 完全是 CSS 提供的一种方式。</li><li><strong>加载顺序：</strong> link在页面加载过程中，浏览器会同时加载页面内容和外部样式表，从而提高页面加载速度，非阻塞，而 <strong>@import</strong> 会在页面内容加载完成后再加载外部样式表，可能会导致页面加载速度变慢，阻塞。</li><li><strong>兼容性:</strong> <strong>@import</strong> 是 CSS2.1 提出的，所以老的浏览器不支持，<strong>@import</strong> 只有在 IE5 以上的才能识别，而 <strong>link</strong> 标签无此问题。</li><li><strong>使用dom控制样式：<strong>当使用 javascript 控制 dom 去改变样式的时候，只能使用 link 标签，因为</strong>@import</strong> 不是 dom 可以控制的。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、移动端基础概念&quot;&gt;&lt;a href=&quot;#一、移动端基础概念&quot; class=&quot;headerlink&quot; title=&quot;一、移动端基础概念&quot;&gt;&lt;/a&gt;&lt;strong&gt;一、移动端基础概念&lt;/strong&gt;&lt;/h2&gt;&lt;h3 id=&quot;1-1、英寸&quot;&gt;&lt;a href=&quot;#1-</summary>
      
    
    
    
    <category term="性能与体验" scheme="http://example.com/categories/%E6%80%A7%E8%83%BD%E4%B8%8E%E4%BD%93%E9%AA%8C/"/>
    
    
    <category term="移动端" scheme="http://example.com/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    <category term="viewport" scheme="http://example.com/tags/viewport/"/>
    
  </entry>
  
  <entry>
    <title>移动端viewports剖析</title>
    <link href="http://example.com/posts/2d0d8782.html"/>
    <id>http://example.com/posts/2d0d8782.html</id>
    <published>2025-06-22T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.315Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、移动设备浏览器的问题"><a href="#一、移动设备浏览器的问题" class="headerlink" title="一、移动设备浏览器的问题"></a><strong><font color='red'>一、移动设备浏览器的问题</font></strong></h3><p>设备的宽度是移动设备浏览器和桌面浏览器的最大区别。移动设备的显示通常比桌面浏览器显示同一网站的内容要少。或者缩放浏览器变小导致文字无法阅读，或者只显示网站适合设备大小的部分内容。</p><p>移动设备的屏幕宽度比桌面浏览器小，经常最大就400px宽，而且通常会更小。（有些手机号称大宽度，但他们确是在说谎 – 或起嘛给了我们一些无用的信息）</p><p>一些中间宽度的pad设备(table device)如iPad或传说中HP的webOS设备填补了桌面和移动设备的缺口，但却没有解决根本的问题。网站还是必须在移动设备上工作，我们不得不让她们在小屏幕上显示得表现良好。</p><p>问题的风暴中心在于CSS，特别是viewport的尺寸。如果我们只是拷贝桌面的样式到移动设备，我们的CSS会丑得崩溃（假设移动设备的宽度400px）我们回到width: 10%的侧边栏。如果在移动设备上同理处理，会显示出40px宽，实在太窄了。你的可变布局看起来被可怕的压扁了。</p><p>其中一个解决方式是为移动设备重新建设一个特殊的网站。即使跳开这些基本的问题：你到底该怎么处理，现实的问题是只有很少的站长准备好了加入迎合移动设备而做的改变。</p><p>移动设备浏览器供应商期望他们的客户端提供最好的可能性体验，即现在意味着“尽可能的像桌面浏览器”。因此许多处理手段是必须的。</p><br><h3 id="二、两种viewport"><a href="#二、两种viewport" class="headerlink" title="二、两种viewport"></a><strong><font color='red'>二、两种viewport</font></strong></h3><p><code>虚拟的viewport即理想的viewport</code><br>因此viewport太窄，不能很好为你的基本CSS布局服务了。最显然的解决方式是让viewport更宽。因此这个需求分为了2个方面：虚拟的viewport visual-viewport和布局的viewport layout-viewport。</p><p>George Cummins在Stack Overflow上解释了这个基本概念</p><blockquote><p>想象下layout viewport是一张大的不能改变大小和角度的图片。现在你有个更小的框来观看这张大图片，这个框被不透明的材料包围，因而你只能看到大图片的一部分。你通过这个框子看到的大图片的部分被称为虚拟viewport(visual viewport)。你能拿着这个框站得离大图片远点（用户的缩小页面功能），以一次性看到这个大图片。或者你能站得近点（用户的放大页面功能）以看到一部分。你能改变这个框子的方向，但这张大图片的大小和形状都不会改变。</p></blockquote><p>visual viewport是当前显示在屏幕上的部分页面。用户会滚动页面来改变可见部分，或者缩放浏览器来改变visual viewport的尺寸。见图<br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212141.png"></p><p><strong>但是CSS 布局，特别是百分比的宽度（percentual widths）通常是按照layout viewport来定义，而比visual viewport宽很多。</strong></p><p><strong>然而<code>&lt;html&gt;</code>元素的宽度继承于layout viewport</strong>，你的CSS应预先准备着需要处理的屏幕(layout viewport)是不是远远超过手机屏幕宽度。这用以保证你的网站外观特性而恰如在桌面浏览器上一样。</p><p>layout viewport到底有多宽？每个浏览器都不同。iPhone上的Safari使用980px、Opera 850px，安卓的Webkit核心800px，IE974px。<strong>（现在大部分是980px）</strong></p><p><font color='orange' size="4">一些浏览器有特别的特性：</font></p><ul><li>塞班webkit试着保存<code>layout viewport</code>和<code>visual viewport</code>同样宽度。因此，定义百分比宽度的元素会变得巨难看。当然，如果页面有特定的宽度而不是适合<code>visual viewport</code>的宽度，那么该宽度的最大值会被设置为850px</li><li>三星的WebKit(<a href="https://zh.wikipedia.org/zh/Bada_(%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F)">bada</a>上)会设置<code>layout viewport</code>和最宽的元素一样宽</li><li>黑莓上<code>layout viewport</code>和<code>visual viewport</code>在100%缩放时一样宽。</li></ul><br><h3 id="三、缩放"><a href="#三、缩放" class="headerlink" title="三、缩放 "></a><strong><font color='red'>三、缩放 </font></strong></h3><p>两种viewports都以CSS的 pixels来度量。当你通过缩放改变visual viewport时，layout viewport保存不变。</p><br><h3 id="四、理解layout-viewport"><a href="#四、理解layout-viewport" class="headerlink" title="四、理解layout-viewport"></a><strong><font color='red'>四、理解layout-viewport</font></strong></h3><p>为了理解layout viewport的尺寸，我们先看下页面完全缩小时发生了什么。许多移动设备浏览器在初始默认打开以最小缩放模式打开网站。（即在手机屏幕上展示完整宽度的页面）。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212336.png" alt="image-20231120102453927"></p><p><strong>重点</strong>：浏览器已经选择好他们的layout viewport的尺寸，它完整的覆盖了最小缩放模式下的移动浏览器的屏幕。</p><p>这时候layout viewport的宽度高度和最小缩放模式下能在页面上显示的内容的宽度高度一致。即便用户缩放，它依然保存不变。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212155.png" alt="image-20231120102827860"></p><p>layout viewport宽度通常保存不变。如果你旋转你的手机，visual viewport改变，但浏览器会缩放页面以自适应，以达到layout viewport再次和visual viewport同样宽。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212017.png" alt="image-20231120102912002"></p><p>这影响到了layout viewport的高度，它突然变得比竖着模式更小（portrait model肖像模式），但web开发者并不关心高度，只在乎宽度。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212662.png" alt="image-20231120103006036"></p><br><h3 id="五、度量layout-viewport"><a href="#五、度量layout-viewport" class="headerlink" title="五、度量layout-viewport"></a><strong><font color='red'>五、度量layout-viewport</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>/<span class="title class_">Height</span></span><br></pre></td></tr></table></figure><ul><li>含义：layoutviewport尺寸</li><li>度量：CSS的pixels</li><li>完整支持：Opera, iPhone, Android, Symbian, Bolt, MicroB, Skyfire, Obigo</li><li>问题：在Iris上它标示visualvieport<ul><li>三星的Webkit核心浏览器，仅当在页面上写入<code>&lt;meta viewport&gt;</code>标签，才正确表示。否则就代表着</li><li>FireFox以设备的pixels来度量</li><li>IE返回1024 x 768 px，而准确的尺寸保存在document.body.clientWidth&#x2F;Height</li><li>NetFront仅当100%缩放时候才正确</li><li>塞班的Webkit1(在S60v3设备)不支持这些属性</li></ul></li><li>不支持：黑莓</li></ul><p>很幸运浏览器由于浏览器大战而遗留给我们2个特性对来度量这两种viewport。</p><p>document.documentElement.clientWidth&#x2F;Height传递layoutviewport的尺寸，如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212509.png" alt="image-20231120233647722"></p><p>旋转只关系到高度，而不是宽度。如图<br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212074.png" alt="image-20231120234758785"></p><br><h3 id="六、度量visual-viewport"><a href="#六、度量visual-viewport" class="headerlink" title="六、度量visual-viewport"></a><strong><font color='red'>六、度量visual-viewport</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.innerWidth/Height</span><br></pre></td></tr></table></figure><ul><li>含义：visualviewport尺寸</li><li>度量：CSS的pixels</li><li>完整支持：iPhone, Symbian, BlackBerry</li><li>问题：<ul><li>FireFox和Opera以设备的pixels返回该数值</li><li>Android, Bolt, MicroB, 和 NetFront 以CSS的pixels返回该数值，且为layoutviewport的值</li></ul></li><li>不支持：<ul><li>IE，它使用document. documentElement. offsetWidh&#x2F;Height来表示</li><li>三星的Webkit核心浏览器，仅当在页面上写入<code>&lt;meta viewport&gt;</code>标签，才正确表示。否则就代表着<code>&lt;html&gt;</code>的尺寸</li></ul></li><li>混乱：Iris, Skyfire, Obigo返回的值不知所云</li></ul><p>我们使用window.innerWidth&#x2F;Height来度量visualviewport。显然，随着用户缩放浏览器，这值会改变，更多、更少的CSS pixels放进了屏幕。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212976.png" alt="image-20231120235042869"></p><p>很不幸这是一个待完善的部分，许多浏览器依然没有支持对visualviewport的度量。到现在为止，没有浏览器将该度量存储在其他地方，我猜测window.innerWidth&#x2F;Height会成为标准，albeit是最强力的支持者。</p><br><h3 id="七、屏幕-Screen"><a href="#七、屏幕-Screen" class="headerlink" title="七、屏幕 Screen"></a><strong><font color='red'>七、屏幕 Screen</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen.width and screen.height</span><br></pre></td></tr></table></figure><ul><li>含义：屏幕尺寸</li><li>度量：设备的pixels</li><li>完整支持：Opera Mini, Android, Symbian, Iris, Firefox, MicroB, IE, BlackBerry</li><li>问题：<ul><li>Opera在Windows Mobile下只给出横向尺寸(landscape size)。在S60上工作正确。</li><li>三星的Webkit核心浏览器，仅当在页面上写入<code>&lt;meta viewport&gt;</code>标签，才正确表示。否则就代表着<code>&lt;html&gt;</code>的尺寸</li><li>iPhone和Obigo仅给出竖直尺寸(portrait sizes)</li><li>Android, Bolt, MicroB, 和 NetFront 以CSS的pixels返回该数值，且为layoutviewport的值</li></ul></li><li>不支持：<ul><li>IE，它使用document. documentElement. offsetWidh&#x2F;Height来表示 - 三星的Webkit核心浏览器，仅当在页面上写入<code>&lt;meta viewport&gt;</code>标签，才正确表示。否则就代表着<code>&lt;html&gt;</code>的尺寸</li></ul></li><li>混乱：Iris, Skyfire, Obigo返回的值不知所云</li></ul><p>和pc浏览器一样，screen.width&#x2F;height标示了设备屏幕的尺寸，以设备的pixels度量。和pc浏览器一样，<strong>作为web开发人员你永远不需要这些信息。你不关心屏幕的物理宽度，而关心当前有多少CSS的pixels能供你使用。</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212161.png" alt="image-20231120235610610"></p><br><h3 id="八、缩放等级-Zoom-level"><a href="#八、缩放等级-Zoom-level" class="headerlink" title="八、缩放等级 Zoom level"></a><strong><font color='red'>八、缩放等级 Zoom level</font></strong></h3><p>无法直接获取缩放等级，但可以使用screen.width除以window.innerWidth来计算。当然，只有这两个特性被完美支持时才能使用。</p><p>幸运的是，缩放等级并不重要。你只需要知道当前有多少CSS的pixels能供你使用。你可以从window.innerWidth获取这些信息 – 如果当前浏览器支持。</p><br><h3 id="九、滚动位移"><a href="#九、滚动位移" class="headerlink" title="九、滚动位移 "></a><strong><font color='red'>九、滚动位移 </font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.pageX/YOffset</span><br></pre></td></tr></table></figure><ul><li>含义：见描述</li><li>度量：CSS的pixels</li><li>完整支持：iPhone, Android, Symbian, Iris, MicroB, Skyfire, Obigo</li><li>问题：<ul><li>Opera, Bolt, Firefox, and NetFront 总是返回 0.</li><li>三星的Webkit核心浏览器，仅当在页面上写入标签，才正确表示。</li></ul></li><li>不支持： IE，它使用document. scrollLeft&#x2F;Top来表示</li></ul><p>你同意需要知道当前visual viewport相对于layout viewport的距离。这就是滚动位移，如同在桌面浏览器一样，使用window.pageX&#x2F;YOffset存储。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212319.png" alt="image-20231121000217840"></p><br><h3 id="十、元素"><a href="#十、元素" class="headerlink" title="十、&lt;html&gt;元素"></a><strong><font color='red'>十、<code>&lt;html&gt;</code>元素</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.documentElement.offsetWidth / Height</span><br></pre></td></tr></table></figure><ul><li>含义：html元素的整体尺寸</li><li>度量：CSS的pixels</li><li>完整支持：Opera, iPhone, Android, Symbian, Samsung, Iris, Bolt, Firefox, MicroB, Skyfire, BlackBerry, Obigo</li><li>问题：<ul><li>NetFront只在100%缩放时返回正确的值.</li><li>IE，使用这个特性对来表示visualviewport的尺寸。它使用document. body. clientWidth&#x2F;Height来表示</li></ul></li></ul><p>和在桌面系统一样,document.documentElement.offsetWidth&#x2F;Height给出了</p><p>元素以CSS的pixels度量的尺寸。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140212184.png" alt="image-20231121000405958"></p><br><h3 id="十一、viewport的meta标签-meta-viewport"><a href="#十一、viewport的meta标签-meta-viewport" class="headerlink" title="十一、viewport的meta标签 meta viewport"></a><strong><font color='red'>十一、viewport的meta标签 meta viewport</font></strong></h3><ul><li>含义：设置layout viewport的宽度</li><li>度量：CSS的pixels</li><li>完整支持：Opera Mobile, iPhone, Android, Iris, IE, BlackBerry, Obigo</li><li>不支持：Opera Mini, Symbian, Bolt, Firefox, MicroB, NetFront</li><li>问题：<ul><li>Skyfire 不能处理我的测试页面。</li><li>在三星的wibkit浏览器下，出现会改变一些特性对的值。</li><li>Opera Mobile, iPhone, Samsung, and BlackBerry 不允许用户在设置viewport后再进行缩小操作（do not allow the user to zoom out.）</li></ul></li></ul><p>最后我们讨论<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=320&quot;&gt;</code>；最初这是Apple的一个html扩展标签，但被许多浏览器复用，<strong>意义是设置layout viewport的宽度</strong>。为了理解它的含义，我们退一步看看基础。</p><p>假设你创建一个页面，并不为它赋值width。那么它会伸展开来占据100%的layout-viewport的宽度。绝大多数浏览器缩小这个页面以在一屏的宽度上显示这个layout viewport。我们获得如下效果</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213370.png" alt="image-20231121000948509"></p><p>用户会立马放大页面，虽然会起到效果，但绝大多数浏览器会保存元素完整的宽度（保持元素定位的不变），而导致阅读困难（文字超过屏幕），如图<br><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213952.png" alt="image-20231121001030014"></p><p>(唯一不同的是Android下的Webkit核心浏览器，他会剪短长串文字的html元素，以让他们适应屏幕。这简直太有才了，我觉得其余所有浏览器都应该复用这个特性。我会在再以后全面的写这方面内容)</p><p>现在你可以尝试着设置<code>htm&#123;width: 320px&#125;</code>。现在<code>&lt;html&gt;</code>元素收缩，随之所有的会计元素都占有100%的<code>&lt;html&gt;</code>宽度：320px。当用户放大浏览器显示时这样做工作得挺好，但在最初加载时的缩小显示下，用户感觉很糟糕，因为页面几乎没内容。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213048.png" alt="image-20231121001239413"></p><p>为了解决这个问题，Apple引入了metaviewport。当你设置<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=320&quot;&gt;</code>,你网站的layout-viewport变成了320px。页面的初始状态就很正确了。如图</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405140213127.png" alt="image-20231121002003765"></p><p>你能任意设置layout-width的宽度，甚至包括device-width。device-width由以设备的pixels度量screen.width来设置。</p><p>在这里有个钩子（There’s a catch here）。有时严格的screen.width一点意义都没有，因为pixels的值太大了。例如，Nexus One上的严格宽度是480px，但Google的工程师觉得在用户设置device-width时，将layoutviewport设置为480太大了。他们砍成了2&#x2F;3，提供320px，和iPhone上一致。</p><p>加入，像传言中，新的iPhone将提供一个巨大的pixel值（并不等于一个巨大的屏幕，只是分辨率），如果他们沿用这个特性：device-width为320，我一点都不会惊讶。或许最终device-width会直接意味着320px。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>转载于：<a href="https://www.w3cplus.com/css/viewports.html">https://www.w3cplus.com/css/viewports.html</a> </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、移动设备浏览器的问题&quot;&gt;&lt;a href=&quot;#一、移动设备浏览器的问题&quot; class=&quot;headerlink&quot; title=&quot;一、移动设备浏览器的问题&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、移动设备浏览器的问题&lt;/font&gt;&lt;/str</summary>
      
    
    
    
    <category term="性能与体验" scheme="http://example.com/categories/%E6%80%A7%E8%83%BD%E4%B8%8E%E4%BD%93%E9%AA%8C/"/>
    
    
    <category term="移动端" scheme="http://example.com/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    <category term="viewport" scheme="http://example.com/tags/viewport/"/>
    
  </entry>
  
  <entry>
    <title>在浏览器中使用fetch加载js并调用方法</title>
    <link href="http://example.com/posts/ca31d25b.html"/>
    <id>http://example.com/posts/ca31d25b.html</id>
    <published>2025-03-22T07:51:08.000Z</published>
    <updated>2025-11-25T12:37:24.315Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用dayjs中的方法</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://cdn.bootcdn.net/ajax/libs/dayjs/1.11.9/dayjs.min.js&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">text</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">eval</span>(text);</span><br><span class="line">    <span class="keyword">const</span> now = <span class="title function_">dayjs</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>));</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>在JavaScript中，fetch API返回的Response对象还提供了其他一些属性和方法，可以根据需要来获取数据或者执行其他操作。以下是一些常用的Response对象的属性和方法：</p><br><h3 id="1、json"><a href="#1、json" class="headerlink" title="1、json()"></a><strong><font color='red'>1、json()</font></strong></h3><p>这个方法返回一个Promise，解析为JSON格式的响应体</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching data:&#x27;</span>, error))</span><br></pre></td></tr></table></figure><br><h3 id="2、blob"><a href="#2、blob" class="headerlink" title="2、blob()"></a><strong><font color='red'>2、blob()</font></strong></h3><p>这个方法返回一个Promise，将响应体解析为二进制数据（Blob对象）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/image.png&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">blob</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">blob</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 处理二进制数据</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching image:&#x27;</span>, error));</span><br></pre></td></tr></table></figure><br><h3 id="3、arrayBuffer"><a href="#3、arrayBuffer" class="headerlink" title="3、arrayBuffer()"></a><strong><font color='red'>3、arrayBuffer()</font></strong></h3><p>这个方法返回一个Promise，将响应体解析为ArrayBuffer</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/file&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">arrayBuffer</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">arrayBuffer</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 处理ArrayBuffer</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching file:&#x27;</span>, error));</span><br></pre></td></tr></table></figure><br><h3 id="4、text"><a href="#4、text" class="headerlink" title="4、text()"></a><strong><font color='red'>4、text()</font></strong></h3><p>它返回一个Promise，将响应体解析为文本</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/text&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">text</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(text))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching text:&#x27;</span>, error));</span><br></pre></td></tr></table></figure><br><h3 id="eval函数"><a href="#eval函数" class="headerlink" title="eval函数"></a><strong><font color='red'>eval函数</font></strong></h3><p>eval函数是JavaScript中的一个内置函数，用于将传入的字符串作为代码来执行。当使用eval函数时，传入的字符串会被当作JavaScript代码来执行，这可以用来动态执行代码或者动态生成代码。然而，由于eval函数的执行会影响性能和安全性，通常不推荐在实际项目中使用eval函数，除非确实有必要使用它。因为eval函数的执行会增加代码的复杂性，并且可能存在安全风险，因此应该尽量避免使用它。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
</feed>
